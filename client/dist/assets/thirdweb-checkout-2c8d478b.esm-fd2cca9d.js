import{N as j,O as Lf,B as O,Q as ze,R as Uf,o as ce,S as Hf,d as Me,V as ge,W as ct,e as Jn,t as zf,X as Je,Y as ee,Z as on,$ as $t,i as bo,a0 as nt,a1 as Le,a2 as Qt,a3 as Ra,a4 as Ea,a5 as gt,a6 as Hr,U as lc,a7 as Zd,a8 as Zr,a9 as si,aa as Rt,ab as Il,ac as uc,r as Kc,ad as jf,ae as $c,af as qf,ag as go,ah as mr,ai as Vf,aj as qn,ak as Gf,al as Kf,am as Go,an as zr,g as $f,G as be,n as wo,p as Ge,ao as Zf,ap as Yd,m as Ni,aq as Yf,ar as Wi,as as at}from"./ethers-d38fee93.js";const Jf="modulepreload",Qf=function(r){return"/"+r},Sl={},Be=function(e,t,n){if(!t||t.length===0)return e();const a=document.getElementsByTagName("link");return Promise.all(t.map(i=>{if(i=Qf(i),i in Sl)return;Sl[i]=!0;const s=i.endsWith(".css"),o=s?'[rel="stylesheet"]':"";if(!!n)for(let u=a.length-1;u>=0;u--){const d=a[u];if(d.href===i&&(!s||d.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${i}"]${o}`))return;const c=document.createElement("link");if(c.rel=s?"stylesheet":Jf,s||(c.as="script",c.crossOrigin=""),c.href=i,document.head.appendChild(c),s)return new Promise((u,d)=>{c.addEventListener("load",u),c.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>e())};var Xf={name:"Ethereum Mainnet",chain:"ETH",icon:{url:"ipfs://QmcxZHpyJa8T4i63xqjPYrZ6tKrt55tZJpbXcjSDKuKaf9/ethereum/512.png",height:512,width:512,format:"png",sizes:[512,256,128,64,32,16]},rpc:["https://ethereum.rpc.thirdweb.com/${THIRDWEB_API_KEY}","https://eth-mainnet.g.alchemy.com/v2/${ALCHEMY_API_KEY}","https://mainnet.infura.io/v3/${INFURA_API_KEY}","wss://mainnet.infura.io/ws/v3/${INFURA_API_KEY}","https://api.mycryptoapi.com/eth","https://cloudflare-eth.com"],features:[{name:"EIP1559"},{name:"EIP155"}],faucets:[],nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},infoURL:"https://ethereum.org",shortName:"eth",chainId:1,networkId:1,slip44:60,ens:{registry:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e"},explorers:[{name:"etherscan",url:"https://etherscan.io",standard:"EIP3091"}],testnet:!1,slug:"ethereum"},eh={name:"Goerli",title:"Ethereum Testnet Goerli",chain:"ETH",rpc:["https://goerli.rpc.thirdweb.com/${THIRDWEB_API_KEY}","https://eth-goerli.g.alchemy.com/v2/${ALCHEMY_API_KEY}","https://goerli.infura.io/v3/${INFURA_API_KEY}","wss://goerli.infura.io/v3/${INFURA_API_KEY}","https://rpc.goerli.mudit.blog/"],faucets:["https://faucet.goerli.mudit.blog","https://goerli-faucet.slock.it?address=${ADDRESS}","http://fauceth.komputing.org?chain=5&address=${ADDRESS}"],nativeCurrency:{name:"Goerli Ether",symbol:"ETH",decimals:18},infoURL:"https://goerli.net/#about",shortName:"gor",chainId:5,networkId:5,ens:{registry:"0x112234455c3a32fd11230c42e7bccd4a84e02010"},explorers:[{name:"etherscan-goerli",url:"https://goerli.etherscan.io",standard:"EIP3091"}],icon:{url:"ipfs://QmcxZHpyJa8T4i63xqjPYrZ6tKrt55tZJpbXcjSDKuKaf9/ethereum/512.png",height:512,width:512,format:"png",sizes:[512,256,128,64,32,16]},testnet:!0,slug:"goerli"},th={name:"Optimism",chain:"ETH",rpc:["https://optimism.rpc.thirdweb.com/${THIRDWEB_API_KEY}","https://opt-mainnet.g.alchemy.com/v2/${ALCHEMY_API_KEY}","https://optimism-mainnet.infura.io/v3/${INFURA_API_KEY}","https://mainnet.optimism.io/"],faucets:[],nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},infoURL:"https://optimism.io",shortName:"oeth",chainId:10,networkId:10,explorers:[{name:"etherscan",url:"https://optimistic.etherscan.io",standard:"EIP3091"}],icon:{url:"ipfs://QmcxZHpyJa8T4i63xqjPYrZ6tKrt55tZJpbXcjSDKuKaf9/optimism/512.png",height:512,width:512,format:"png",sizes:[512,256,128,64,32,16]},testnet:!1,slug:"optimism"},nh={name:"Binance Smart Chain Mainnet",chain:"BSC",rpc:["https://binance.rpc.thirdweb.com/${THIRDWEB_API_KEY}","wss://bsc-ws-node.nariox.org","https://bsc-dataseed4.ninicoin.io","https://bsc-dataseed3.ninicoin.io","https://bsc-dataseed2.ninicoin.io","https://bsc-dataseed1.ninicoin.io","https://bsc-dataseed4.defibit.io","https://bsc-dataseed3.defibit.io","https://bsc-dataseed2.defibit.io","https://bsc-dataseed1.defibit.io","https://bsc-dataseed4.binance.org","https://bsc-dataseed3.binance.org","https://bsc-dataseed2.binance.org","https://bsc-dataseed1.binance.org"],faucets:["https://free-online-app.com/faucet-for-eth-evm-chains/"],nativeCurrency:{name:"Binance Chain Native Token",symbol:"BNB",decimals:18},infoURL:"https://www.binance.org",shortName:"bnb",chainId:56,networkId:56,slip44:714,explorers:[{name:"bscscan",url:"https://bscscan.com",standard:"EIP3091"}],icon:{url:"ipfs://QmcxZHpyJa8T4i63xqjPYrZ6tKrt55tZJpbXcjSDKuKaf9/binance-coin/512.png",height:512,width:512,format:"png",sizes:[512,256,128,64,32,16]},testnet:!1,slug:"binance"},rh={name:"Binance Smart Chain Testnet",chain:"BSC",rpc:["https://binance-testnet.rpc.thirdweb.com/${THIRDWEB_API_KEY}","https://data-seed-prebsc-2-s3.binance.org:8545","https://data-seed-prebsc-1-s3.binance.org:8545","https://data-seed-prebsc-2-s2.binance.org:8545","https://data-seed-prebsc-1-s2.binance.org:8545","https://data-seed-prebsc-2-s1.binance.org:8545","https://data-seed-prebsc-1-s1.binance.org:8545"],faucets:["https://testnet.binance.org/faucet-smart"],nativeCurrency:{name:"Binance Chain Native Token",symbol:"tBNB",decimals:18},infoURL:"https://testnet.binance.org/",shortName:"bnbt",chainId:97,networkId:97,explorers:[{name:"bscscan-testnet",url:"https://testnet.bscscan.com",standard:"EIP3091"}],icon:{url:"ipfs://QmcxZHpyJa8T4i63xqjPYrZ6tKrt55tZJpbXcjSDKuKaf9/binance-coin/512.png",height:512,width:512,format:"png",sizes:[512,256,128,64,32,16]},testnet:!0,slug:"binance-testnet"},ah={name:"Polygon Mainnet",chain:"Polygon",icon:{url:"ipfs://QmcxZHpyJa8T4i63xqjPYrZ6tKrt55tZJpbXcjSDKuKaf9/polygon/512.png",height:512,width:512,format:"png",sizes:[512,256,128,64,32,16]},rpc:["https://polygon.rpc.thirdweb.com/${THIRDWEB_API_KEY}","https://polygon-mainnet.g.alchemy.com/v2/${ALCHEMY_API_KEY}","https://polygon-mainnet.infura.io/v3/${INFURA_API_KEY}","https://polygon-rpc.com/","https://rpc-mainnet.matic.network","https://matic-mainnet.chainstacklabs.com","https://rpc-mainnet.maticvigil.com","https://rpc-mainnet.matic.quiknode.pro","https://matic-mainnet-full-rpc.bwarelabs.com","https://polygon-bor.publicnode.com"],faucets:[],nativeCurrency:{name:"MATIC",symbol:"MATIC",decimals:18},infoURL:"https://polygon.technology/",shortName:"matic",chainId:137,networkId:137,slip44:966,explorers:[{name:"polygonscan",url:"https://polygonscan.com",standard:"EIP3091"}],testnet:!1,slug:"polygon"},ih={name:"Fantom Opera",chain:"FTM",rpc:["https://fantom.rpc.thirdweb.com/${THIRDWEB_API_KEY}","https://rpc.ftm.tools"],faucets:["https://free-online-app.com/faucet-for-eth-evm-chains/"],nativeCurrency:{name:"Fantom",symbol:"FTM",decimals:18},infoURL:"https://fantom.foundation",shortName:"ftm",chainId:250,networkId:250,icon:{url:"ipfs://QmcxZHpyJa8T4i63xqjPYrZ6tKrt55tZJpbXcjSDKuKaf9/fantom/512.png",height:512,width:512,format:"png",sizes:[512,256,128,64,32,16]},explorers:[{name:"ftmscan",url:"https://ftmscan.com",icon:"ftmscan",standard:"EIP3091"}],testnet:!1,slug:"fantom"},sh={name:"Optimism Goerli Testnet",chain:"ETH",rpc:["https://optimism-goerli.rpc.thirdweb.com/${THIRDWEB_API_KEY}","https://opt-goerli.g.alchemy.com/v2/${ALCHEMY_API_KEY}","https://optimism-goerli.infura.io/v3/${INFURA_API_KEY}","https://goerli.optimism.io/"],faucets:[],nativeCurrency:{name:"Goerli Ether",symbol:"ETH",decimals:18},infoURL:"https://optimism.io",shortName:"ogor",chainId:420,networkId:420,icon:{url:"ipfs://QmcxZHpyJa8T4i63xqjPYrZ6tKrt55tZJpbXcjSDKuKaf9/optimism/512.png",height:512,width:512,format:"png",sizes:[512,256,128,64,32,16]},testnet:!0,slug:"optimism-goerli"},oh={name:"Fantom Testnet",chain:"FTM",rpc:["https://fantom-testnet.rpc.thirdweb.com/${THIRDWEB_API_KEY}","https://rpc.testnet.fantom.network"],faucets:["https://faucet.fantom.network"],nativeCurrency:{name:"Fantom",symbol:"FTM",decimals:18},infoURL:"https://docs.fantom.foundation/quick-start/short-guide#fantom-testnet",shortName:"tftm",chainId:4002,networkId:4002,icon:{url:"ipfs://QmcxZHpyJa8T4i63xqjPYrZ6tKrt55tZJpbXcjSDKuKaf9/fantom/512.png",height:512,width:512,format:"png",sizes:[512,256,128,64,32,16]},explorers:[{name:"ftmscan",url:"https://testnet.ftmscan.com",icon:"ftmscan",standard:"EIP3091"}],testnet:!0,slug:"fantom-testnet"},ch={name:"Arbitrum One",chainId:42161,shortName:"arb1",chain:"ETH",networkId:42161,nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpc:["https://arbitrum.rpc.thirdweb.com/${THIRDWEB_API_KEY}","https://arbitrum-mainnet.infura.io/v3/${INFURA_API_KEY}","https://arb-mainnet.g.alchemy.com/v2/${ALCHEMY_API_KEY}","https://arb1.arbitrum.io/rpc"],faucets:[],explorers:[{name:"Arbitrum Explorer",url:"https://explorer.arbitrum.io",standard:"EIP3091"},{name:"Arbiscan",url:"https://arbiscan.io",standard:"EIP3091"}],infoURL:"https://arbitrum.io",parent:{type:"L2",chain:"eip155-1",bridges:[{url:"https://bridge.arbitrum.io"}]},icon:{url:"ipfs://QmcxZHpyJa8T4i63xqjPYrZ6tKrt55tZJpbXcjSDKuKaf9/arbitrum/512.png",height:512,width:512,format:"png",sizes:[512,256,128,64,32,16]},testnet:!1,slug:"arbitrum"},lh={name:"Avalanche Fuji Testnet",chain:"AVAX",icon:{url:"ipfs://QmcxZHpyJa8T4i63xqjPYrZ6tKrt55tZJpbXcjSDKuKaf9/avalanche/512.png",height:512,width:512,format:"png",sizes:[512,256,128,64,32,16]},rpc:["https://avalanche-fuji.rpc.thirdweb.com/${THIRDWEB_API_KEY}","https://avalanche-fuji.infura.io/v3/${INFURA_API_KEY}","https://api.avax-test.network/ext/bc/C/rpc"],faucets:["https://faucet.avax-test.network/"],nativeCurrency:{name:"Avalanche",symbol:"AVAX",decimals:18},infoURL:"https://cchain.explorer.avax-test.network",shortName:"Fuji",chainId:43113,networkId:1,explorers:[{name:"snowtrace",url:"https://testnet.snowtrace.io",standard:"EIP3091"}],testnet:!0,slug:"avalanche-fuji"},uh={name:"Avalanche C-Chain",chain:"AVAX",icon:{url:"ipfs://QmcxZHpyJa8T4i63xqjPYrZ6tKrt55tZJpbXcjSDKuKaf9/avalanche/512.png",height:512,width:512,format:"png",sizes:[512,256,128,64,32,16]},rpc:["https://avalanche.rpc.thirdweb.com/${THIRDWEB_API_KEY}","https://avalanche-mainnet.infura.io/v3/${INFURA_API_KEY}","https://api.avax.network/ext/bc/C/rpc"],features:[{name:"EIP1559"}],faucets:["https://free-online-app.com/faucet-for-eth-evm-chains/"],nativeCurrency:{name:"Avalanche",symbol:"AVAX",decimals:18},infoURL:"https://www.avax.network/",shortName:"avax",chainId:43114,networkId:43114,slip44:9005,explorers:[{name:"snowtrace",url:"https://snowtrace.io",standard:"EIP3091"}],testnet:!1,slug:"avalanche"},dh={name:"Mumbai",title:"Polygon Testnet Mumbai",chain:"Polygon",icon:{url:"ipfs://QmcxZHpyJa8T4i63xqjPYrZ6tKrt55tZJpbXcjSDKuKaf9/polygon/512.png",height:512,width:512,format:"png",sizes:[512,256,128,64,32,16]},rpc:["https://mumbai.rpc.thirdweb.com/${THIRDWEB_API_KEY}","https://polygon-mumbai.g.alchemy.com/v2/${ALCHEMY_API_KEY}","https://polygon-mumbai.infura.io/v3/${INFURA_API_KEY}","https://matic-mumbai.chainstacklabs.com","https://rpc-mumbai.maticvigil.com","https://matic-testnet-archive-rpc.bwarelabs.com"],faucets:["https://faucet.polygon.technology/"],nativeCurrency:{name:"MATIC",symbol:"MATIC",decimals:18},infoURL:"https://polygon.technology/",shortName:"maticmum",chainId:80001,networkId:80001,explorers:[{name:"polygonscan",url:"https://mumbai.polygonscan.com",standard:"EIP3091"}],testnet:!0,slug:"mumbai"},ph={name:"Arbitrum Goerli",title:"Arbitrum Goerli Rollup Testnet",chainId:421613,shortName:"arb-goerli",chain:"ETH",networkId:421613,nativeCurrency:{name:"Arbitrum Goerli Ether",symbol:"AGOR",decimals:18},rpc:["https://arbitrum-goerli.rpc.thirdweb.com/${THIRDWEB_API_KEY}","https://arb-goerli.g.alchemy.com/v2/${ALCHEMY_API_KEY}","https://abritrum-goerli.infura.io/v3/${INFURA_API_KEY}","https://goerli-rollup.arbitrum.io/rpc/"],faucets:[],infoURL:"https://arbitrum.io/",explorers:[{name:"Arbitrum Goerli Rollup Explorer",url:"https://goerli-rollup-explorer.arbitrum.io",standard:"EIP3091"}],parent:{type:"L2",chain:"eip155-5",bridges:[{url:"https://bridge.arbitrum.io/"}]},icon:{url:"ipfs://QmcxZHpyJa8T4i63xqjPYrZ6tKrt55tZJpbXcjSDKuKaf9/arbitrum/512.png",height:512,width:512,format:"png",sizes:[512,256,128,64,32,16]},testnet:!0,slug:"arbitrum-goerli"},fh={name:"Localhost",chain:"ETH",rpc:["http://localhost:8545"],faucets:[],nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},icon:{url:"ipfs://QmcxZHpyJa8T4i63xqjPYrZ6tKrt55tZJpbXcjSDKuKaf9/ethereum/512.png",height:512,width:512,format:"png",sizes:[16,32,64,128,256,512]},shortName:"local",chainId:1337,networkId:1337,testnet:!0,slug:"localhost"};const hh={mode:"http"};function yh(r,e){const{thirdwebApiKey:t,alchemyApiKey:n,infuraApiKey:a,mode:i}={...hh,...e},s=r.rpc.filter(h=>!!(h.startsWith("http")&&i==="http"||h.startsWith("ws")&&i==="ws")),o=s.filter(h=>h.includes("${THIRDWEB_API_KEY}")&&t).map(h=>t?h.replace("${THIRDWEB_API_KEY}",t):h),l=s.filter(h=>h.includes("${ALCHEMY_API_KEY}")&&n).map(h=>n?h.replace("${ALCHEMY_API_KEY}",n):h),c=s.filter(h=>h.includes("${INFURA_API_KEY}")&&a).map(h=>a?h.replace("${INFURA_API_KEY}",a):h),u=s.filter(h=>!h.includes("${")),d=[...o,...c,...l,...u];if(d.length===0)throw new Error(`No RPC available for chainId "${r.chainId}" with mode ${i}`);return d}function mh(r,e){return yh(r,e)[0]}const xh=Xf,bh=eh,gh=th,wh=nh,vh=rh,Th=ah,Ah=ih,Ch=sh,Eh=oh,_h=ch,kh=lh,Ih=uh,Sh=dh,Ph=ph,Bh=fh,vo=[xh,bh,Th,Sh,_h,Ph,gh,Ch,wh,vh,Ah,Eh,Ih,kh,Bh];var Rh=!0,Ko="Invariant failed";function pe(r,e){if(!r){if(Rh)throw new Error(Ko);var t=typeof e=="function"?e():e,n=t?"".concat(Ko,": ").concat(t):Ko;throw new Error(n)}}const vt=new j(Lf),_a={},Jd=O.from(0),Qd=O.from(-1);function Xd(r,e,t,n){const a={fault:e,operation:t};return n!==void 0&&(a.value=n),vt.throwError(r,j.errors.NUMERIC_FAULT,a)}let ka="0";for(;ka.length<256;)ka+=ka;function Zc(r){if(typeof r!="number")try{r=O.from(r).toNumber()}catch{}return typeof r=="number"&&r>=0&&r<=256&&!(r%1)?"1"+ka.substring(0,r):vt.throwArgumentError("invalid decimal size","decimals",r)}function ki(r,e){e==null&&(e=0);const t=Zc(e);r=O.from(r);const n=r.lt(Jd);n&&(r=r.mul(Qd));let a=r.mod(t).toString();for(;a.length<t.length-1;)a="0"+a;a=a.match(/^([0-9]*[1-9]|0)(0*)/)[1];const i=r.div(t).toString();return t.length===1?r=i:r=i+"."+a,n&&(r="-"+r),r}function tn(r,e){e==null&&(e=0);const t=Zc(e);(typeof r!="string"||!r.match(/^-?[0-9.]+$/))&&vt.throwArgumentError("invalid decimal value","value",r);const n=r.substring(0,1)==="-";n&&(r=r.substring(1)),r==="."&&vt.throwArgumentError("missing value","value",r);const a=r.split(".");a.length>2&&vt.throwArgumentError("too many decimal points","value",r);let i=a[0],s=a[1];for(i||(i="0"),s||(s="0");s[s.length-1]==="0";)s=s.substring(0,s.length-1);for(s.length>t.length-1&&Xd("fractional component exceeds decimals","underflow","parseFixed"),s===""&&(s="0");s.length<t.length-1;)s+="0";const o=O.from(i),l=O.from(s);let c=o.mul(t).add(l);return n&&(c=c.mul(Qd)),c}class jr{constructor(e,t,n,a){e!==_a&&vt.throwError("cannot use FixedFormat constructor; use FixedFormat.from",j.errors.UNSUPPORTED_OPERATION,{operation:"new FixedFormat"}),this.signed=t,this.width=n,this.decimals=a,this.name=(t?"":"u")+"fixed"+String(n)+"x"+String(a),this._multiplier=Zc(a),Object.freeze(this)}static from(e){if(e instanceof jr)return e;typeof e=="number"&&(e=`fixed128x${e}`);let t=!0,n=128,a=18;if(typeof e=="string"){if(e!=="fixed")if(e==="ufixed")t=!1;else{const i=e.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);i||vt.throwArgumentError("invalid fixed format","format",e),t=i[1]!=="u",n=parseInt(i[2]),a=parseInt(i[3])}}else if(e){const i=(s,o,l)=>e[s]==null?l:(typeof e[s]!==o&&vt.throwArgumentError("invalid fixed format ("+s+" not "+o+")","format."+s,e[s]),e[s]);t=i("signed","boolean",t),n=i("width","number",n),a=i("decimals","number",a)}return n%8&&vt.throwArgumentError("invalid fixed format width (not byte aligned)","format.width",n),a>80&&vt.throwArgumentError("invalid fixed format (decimals too large)","format.decimals",a),new jr(_a,t,n,a)}}class ot{constructor(e,t,n,a){e!==_a&&vt.throwError("cannot use FixedNumber constructor; use FixedNumber.from",j.errors.UNSUPPORTED_OPERATION,{operation:"new FixedFormat"}),this.format=a,this._hex=t,this._value=n,this._isFixedNumber=!0,Object.freeze(this)}_checkFormat(e){this.format.name!==e.format.name&&vt.throwArgumentError("incompatible format; use fixedNumber.toFormat","other",e)}addUnsafe(e){this._checkFormat(e);const t=tn(this._value,this.format.decimals),n=tn(e._value,e.format.decimals);return ot.fromValue(t.add(n),this.format.decimals,this.format)}subUnsafe(e){this._checkFormat(e);const t=tn(this._value,this.format.decimals),n=tn(e._value,e.format.decimals);return ot.fromValue(t.sub(n),this.format.decimals,this.format)}mulUnsafe(e){this._checkFormat(e);const t=tn(this._value,this.format.decimals),n=tn(e._value,e.format.decimals);return ot.fromValue(t.mul(n).div(this.format._multiplier),this.format.decimals,this.format)}divUnsafe(e){this._checkFormat(e);const t=tn(this._value,this.format.decimals),n=tn(e._value,e.format.decimals);return ot.fromValue(t.mul(this.format._multiplier).div(n),this.format.decimals,this.format)}floor(){const e=this.toString().split(".");e.length===1&&e.push("0");let t=ot.from(e[0],this.format);const n=!e[1].match(/^(0*)$/);return this.isNegative()&&n&&(t=t.subUnsafe(Pl.toFormat(t.format))),t}ceiling(){const e=this.toString().split(".");e.length===1&&e.push("0");let t=ot.from(e[0],this.format);const n=!e[1].match(/^(0*)$/);return!this.isNegative()&&n&&(t=t.addUnsafe(Pl.toFormat(t.format))),t}round(e){e==null&&(e=0);const t=this.toString().split(".");if(t.length===1&&t.push("0"),(e<0||e>80||e%1)&&vt.throwArgumentError("invalid decimal count","decimals",e),t[1].length<=e)return this;const n=ot.from("1"+ka.substring(0,e),this.format),a=Mh.toFormat(this.format);return this.mulUnsafe(n).addUnsafe(a).floor().divUnsafe(n)}isZero(){return this._value==="0.0"||this._value==="0"}isNegative(){return this._value[0]==="-"}toString(){return this._value}toHexString(e){if(e==null)return this._hex;e%8&&vt.throwArgumentError("invalid byte width","width",e);const t=O.from(this._hex).fromTwos(this.format.width).toTwos(e).toHexString();return ze(t,e/8)}toUnsafeFloat(){return parseFloat(this.toString())}toFormat(e){return ot.fromString(this._value,e)}static fromValue(e,t,n){return n==null&&t!=null&&!Uf(t)&&(n=t,t=null),t==null&&(t=0),n==null&&(n="fixed"),ot.fromString(ki(e,t),jr.from(n))}static fromString(e,t){t==null&&(t="fixed");const n=jr.from(t),a=tn(e,n.decimals);!n.signed&&a.lt(Jd)&&Xd("unsigned value cannot be negative","overflow","value",e);let i=null;n.signed?i=a.toTwos(n.width).toHexString():(i=a.toHexString(),i=ze(i,n.width/8));const s=ki(a,n.decimals);return new ot(_a,i,s,n)}static fromBytes(e,t){t==null&&(t="fixed");const n=jr.from(t);if(ce(e).length>n.width/8)throw new Error("overflow");let a=O.from(e);n.signed&&(a=a.fromTwos(n.width));const i=a.toTwos((n.signed?0:1)+n.width).toHexString(),s=ki(a,n.decimals);return new ot(_a,i,s,n)}static from(e,t){if(typeof e=="string")return ot.fromString(e,t);if(Hf(e))return ot.fromBytes(e,t);try{return ot.fromValue(e,0,t)}catch(n){if(n.code!==j.errors.INVALID_ARGUMENT)throw n}return vt.throwArgumentError("invalid FixedNumber value","value",e)}static isFixedNumber(e){return!!(e&&e._isFixedNumber)}}const Pl=ot.from(1),Mh=ot.from("0.5"),se="0x0000000000000000000000000000000000000000",e0="0x0000000000000000000000000000000000000000000000000000000000000000";function hi(r){const e=Me(r);if(e.length>31)throw new Error("bytes32 string must be less than 32 bytes");return ge(ct([e,e0]).slice(0,32))}function o6(r){const e=ce(r);if(e.length!==32)throw new Error("invalid bytes32 - not 32 bytes long");if(e[31]!==0)throw new Error("invalid bytes32 string - no null terminator");let t=31;for(;e[t-1]===0;)t--;return Jn(e.slice(0,t))}const t0="hash/5.7.0";function n0(r){r=atob(r);const e=[];for(let t=0;t<r.length;t++)e.push(r.charCodeAt(t));return ce(e)}function r0(r){r=ce(r);let e="";for(let t=0;t<r.length;t++)e+=String.fromCharCode(r[t]);return btoa(e)}function a0(r,e){e==null&&(e=1);const t=[],n=t.forEach,a=function(i,s){n.call(i,function(o){s>0&&Array.isArray(o)?a(o,s-1):t.push(o)})};return a(r,e),t}function Dh(r){const e={};for(let t=0;t<r.length;t++){const n=r[t];e[n[0]]=n[1]}return e}function Fh(r){let e=0;function t(){return r[e++]<<8|r[e++]}let n=t(),a=1,i=[0,1];for(let I=1;I<n;I++)i.push(a+=t());let s=t(),o=e;e+=s;let l=0,c=0;function u(){return l==0&&(c=c<<8|r[e++],l=8),c>>--l&1}const d=31,h=Math.pow(2,d),m=h>>>1,b=m>>1,x=h-1;let f=0;for(let I=0;I<d;I++)f=f<<1|u();let w=[],A=0,T=h;for(;;){let I=Math.floor(((f-A+1)*a-1)/T),D=0,F=n;for(;F-D>1;){let R=D+F>>>1;I<i[R]?F=R:D=R}if(D==0)break;w.push(D);let W=A+Math.floor(T*i[D]/a),q=A+Math.floor(T*i[D+1]/a)-1;for(;!((W^q)&m);)f=f<<1&x|u(),W=W<<1&x,q=q<<1&x|1;for(;W&~q&b;)f=f&m|f<<1&x>>>1|u(),W=W<<1^m,q=(q^m)<<1|m|1;A=W,T=1+q-W}let E=n-4;return w.map(I=>{switch(I-E){case 3:return E+65792+(r[o++]<<16|r[o++]<<8|r[o++]);case 2:return E+256+(r[o++]<<8|r[o++]);case 1:return E+r[o++];default:return I-1}})}function Nh(r){let e=0;return()=>r[e++]}function Wh(r){return Nh(Fh(r))}function Oh(r){return r&1?~r>>1:r>>1}function Lh(r,e){let t=Array(r);for(let n=0;n<r;n++)t[n]=1+e();return t}function Bl(r,e){let t=Array(r);for(let n=0,a=-1;n<r;n++)t[n]=a+=1+e();return t}function Uh(r,e){let t=Array(r);for(let n=0,a=0;n<r;n++)t[n]=a+=Oh(e());return t}function Oi(r,e){let t=Bl(r(),r),n=r(),a=Bl(n,r),i=Lh(n,r);for(let s=0;s<n;s++)for(let o=0;o<i[s];o++)t.push(a[s]+o);return e?t.map(s=>e[s]):t}function Hh(r){let e=[];for(;;){let t=r();if(t==0)break;e.push(jh(t,r))}for(;;){let t=r()-1;if(t<0)break;e.push(qh(t,r))}return Dh(a0(e))}function zh(r){let e=[];for(;;){let t=r();if(t==0)break;e.push(t)}return e}function i0(r,e,t){let n=Array(r).fill(void 0).map(()=>[]);for(let a=0;a<e;a++)Uh(r,t).forEach((i,s)=>n[s].push(i));return n}function jh(r,e){let t=1+e(),n=e(),a=zh(e),i=i0(a.length,1+r,e);return a0(i.map((s,o)=>{const l=s[0],c=s.slice(1);return Array(a[o]).fill(void 0).map((u,d)=>{let h=d*n;return[l+d*t,c.map(m=>m+h)]})}))}function qh(r,e){let t=1+e();return i0(t,1+r,e).map(a=>[a[0],a.slice(1)])}function Vh(r){let e=Oi(r).sort((n,a)=>n-a);return t();function t(){let n=[];for(;;){let c=Oi(r,e);if(c.length==0)break;n.push({set:new Set(c),node:t()})}n.sort((c,u)=>u.set.size-c.set.size);let a=r(),i=a%3;a=a/3|0;let s=!!(a&1);a>>=1;let o=a==1,l=a==2;return{branches:n,valid:i,fe0f:s,save:o,check:l}}}function Gh(){return Wh(n0("AEQF2AO2DEsA2wIrAGsBRABxAN8AZwCcAEwAqgA0AGwAUgByADcATAAVAFYAIQAyACEAKAAYAFgAGwAjABQAMAAmADIAFAAfABQAKwATACoADgAbAA8AHQAYABoAGQAxADgALAAoADwAEwA9ABMAGgARAA4ADwAWABMAFgAIAA8AHgQXBYMA5BHJAS8JtAYoAe4AExozi0UAH21tAaMnBT8CrnIyhrMDhRgDygIBUAEHcoFHUPe8AXBjAewCjgDQR8IICIcEcQLwATXCDgzvHwBmBoHNAqsBdBcUAykgDhAMShskMgo8AY8jqAQfAUAfHw8BDw87MioGlCIPBwZCa4ELatMAAMspJVgsDl8AIhckSg8XAHdvTwBcIQEiDT4OPhUqbyECAEoAS34Aej8Ybx83JgT/Xw8gHxZ/7w8RICxPHA9vBw+Pfw8PHwAPFv+fAsAvCc8vEr8ivwD/EQ8Bol8OEBa/A78hrwAPCU8vESNvvwWfHwNfAVoDHr+ZAAED34YaAdJPAK7PLwSEgDLHAGo1Pz8Pvx9fUwMrpb8O/58VTzAPIBoXIyQJNF8hpwIVAT8YGAUADDNBaX3RAMomJCg9EhUeA29MABsZBTMNJipjOhc19gcIDR8bBwQHEggCWi6DIgLuAQYA+BAFCha3A5XiAEsqM7UFFgFLhAMjFTMYE1Klnw74nRVBG/ASCm0BYRN/BrsU3VoWy+S0vV8LQx+vN8gF2AC2AK5EAWwApgYDKmAAroQ0NDQ0AT+OCg7wAAIHRAbpNgVcBV0APTA5BfbPFgMLzcYL/QqqA82eBALKCjQCjqYCht0/k2+OAsXQAoP3ASTKDgDw6ACKAUYCMpIKJpRaAE4A5womABzZvs0REEKiACIQAd5QdAECAj4Ywg/wGqY2AVgAYADYvAoCGAEubA0gvAY2ALAAbpbvqpyEAGAEpgQAJgAG7gAgAEACmghUFwCqAMpAINQIwC4DthRAAPcycKgApoIdABwBfCisABoATwBqASIAvhnSBP8aH/ECeAKXAq40NjgDBTwFYQU6AXs3oABgAD4XNgmcCY1eCl5tIFZeUqGgyoNHABgAEQAaABNwWQAmABMATPMa3T34ADldyprmM1M2XociUQgLzvwAXT3xABgAEQAaABNwIGFAnADD8AAgAD4BBJWzaCcIAIEBFMAWwKoAAdq9BWAF5wLQpALEtQAKUSGkahR4GnJM+gsAwCgeFAiUAECQ0BQuL8AAIAAAADKeIheclvFqQAAETr4iAMxIARMgAMIoHhQIAn0E0pDQFC4HhznoAAAAIAI2C0/4lvFqQAAETgBJJwYCAy4ABgYAFAA8MBKYEH4eRhTkAjYeFcgACAYAeABsOqyQ5gRwDayqugEgaIIAtgoACgDmEABmBAWGme5OBJJA2m4cDeoAmITWAXwrMgOgAGwBCh6CBXYF1Tzg1wKAAFdiuABRAFwAXQBsAG8AdgBrAHYAbwCEAHEwfxQBVE5TEQADVFhTBwBDANILAqcCzgLTApQCrQL6vAAMAL8APLhNBKkE6glGKTAU4Dr4N2EYEwBCkABKk8rHAbYBmwIoAiU4Ajf/Aq4CowCAANIChzgaNBsCsTgeODcFXrgClQKdAqQBiQGYAqsCsjTsNHsfNPA0ixsAWTWiOAMFPDQSNCk2BDZHNow2TTZUNhk28Jk9VzI3QkEoAoICoQKwAqcAQAAxBV4FXbS9BW47YkIXP1ciUqs05DS/FwABUwJW11e6nHuYZmSh/RAYA8oMKvZ8KASoUAJYWAJ6ILAsAZSoqjpgA0ocBIhmDgDWAAawRDQoAAcuAj5iAHABZiR2AIgiHgCaAU68ACxuHAG0ygM8MiZIAlgBdF4GagJqAPZOHAMuBgoATkYAsABiAHgAMLoGDPj0HpKEBAAOJgAuALggTAHWAeAMEDbd20Uege0ADwAWADkAQgA9OHd+2MUQZBBhBgNNDkxxPxUQArEPqwvqERoM1irQ090ANK4H8ANYB/ADWANYB/AH8ANYB/ADWANYA1gDWBwP8B/YxRBkD00EcgWTBZAE2wiIJk4RhgctCNdUEnQjHEwDSgEBIypJITuYMxAlR0wRTQgIATZHbKx9PQNMMbBU+pCnA9AyVDlxBgMedhKlAC8PeCE1uk6DekxxpQpQT7NX9wBFBgASqwAS5gBJDSgAUCwGPQBI4zTYABNGAE2bAE3KAExdGABKaAbgAFBXAFCOAFBJABI2SWdObALDOq0//QomCZhvwHdTBkIQHCemEPgMNAG2ATwN7kvZBPIGPATKH34ZGg/OlZ0Ipi3eDO4m5C6igFsj9iqEBe5L9TzeC05RaQ9aC2YJ5DpkgU8DIgEOIowK3g06CG4Q9ArKbA3mEUYHOgPWSZsApgcCCxIdNhW2JhFirQsKOXgG/Br3C5AmsBMqev0F1BoiBk4BKhsAANAu6IWxWjJcHU9gBgQLJiPIFKlQIQ0mQLh4SRocBxYlqgKSQ3FKiFE3HpQh9zw+DWcuFFF9B/Y8BhlQC4I8n0asRQ8R0z6OPUkiSkwtBDaALDAnjAnQD4YMunxzAVoJIgmyDHITMhEYN8YIOgcaLpclJxYIIkaWYJsE+KAD9BPSAwwFQAlCBxQDthwuEy8VKgUOgSXYAvQ21i60ApBWgQEYBcwPJh/gEFFH4Q7qCJwCZgOEJewALhUiABginAhEZABgj9lTBi7MCMhqbSN1A2gU6GIRdAeSDlgHqBw0FcAc4nDJXgyGCSiksAlcAXYJmgFgBOQICjVcjKEgQmdUi1kYnCBiQUBd/QIyDGYVoES+h3kCjA9sEhwBNgF0BzoNAgJ4Ee4RbBCWCOyGBTW2M/k6JgRQIYQgEgooA1BszwsoJvoM+WoBpBJjAw00PnfvZ6xgtyUX/gcaMsZBYSHyC5NPzgydGsIYQ1QvGeUHwAP0GvQn60FYBgADpAQUOk4z7wS+C2oIjAlAAEoOpBgH2BhrCnKM0QEyjAG4mgNYkoQCcJAGOAcMAGgMiAV65gAeAqgIpAAGANADWAA6Aq4HngAaAIZCAT4DKDABIuYCkAOUCDLMAZYwAfQqBBzEDBYA+DhuSwLDsgKAa2ajBd5ZAo8CSjYBTiYEBk9IUgOwcuIA3ABMBhTgSAEWrEvMG+REAeBwLADIAPwABjYHBkIBzgH0bgC4AWALMgmjtLYBTuoqAIQAFmwB2AKKAN4ANgCA8gFUAE4FWvoF1AJQSgESMhksWGIBvAMgATQBDgB6BsyOpsoIIARuB9QCEBwV4gLvLwe2AgMi4BPOQsYCvd9WADIXUu5eZwqoCqdeaAC0YTQHMnM9UQAPH6k+yAdy/BZIiQImSwBQ5gBQQzSaNTFWSTYBpwGqKQK38AFtqwBI/wK37gK3rQK3sAK6280C0gK33AK3zxAAUEIAUD9SklKDArekArw5AEQAzAHCO147WTteO1k7XjtZO147WTteO1kDmChYI03AVU0oJqkKbV9GYewMpw3VRMk6ShPcYFJgMxPJLbgUwhXPJVcZPhq9JwYl5VUKDwUt1GYxCC00dhe9AEApaYNCY4ceMQpMHOhTklT5LRwAskujM7ANrRsWREEFSHXuYisWDwojAmSCAmJDXE6wXDchAqH4AmiZAmYKAp+FOBwMAmY8AmYnBG8EgAN/FAN+kzkHOXgYOYM6JCQCbB4CMjc4CwJtyAJtr/CLADRoRiwBaADfAOIASwYHmQyOAP8MwwAOtgJ3MAJ2o0ACeUxEAni7Hl3cRa9G9AJ8QAJ6yQJ9CgJ88UgBSH5kJQAsFklZSlwWGErNAtECAtDNSygDiFADh+dExpEzAvKiXQQDA69Lz0wuJgTQTU1NsAKLQAKK2cIcCB5EaAa4Ao44Ao5dQZiCAo7aAo5deVG1UzYLUtVUhgKT/AKTDQDqAB1VH1WwVdEHLBwplocy4nhnRTw6ApegAu+zWCKpAFomApaQApZ9nQCqWa1aCoJOADwClrYClk9cRVzSApnMApllXMtdCBoCnJw5wzqeApwXAp+cAp65iwAeEDIrEAKd8gKekwC2PmE1YfACntQCoG8BqgKeoCACnk+mY8lkKCYsAiewAiZ/AqD8AqBN2AKmMAKlzwKoAAB+AqfzaH1osgAESmodatICrOQCrK8CrWgCrQMCVx4CVd0CseLYAx9PbJgCsr4OArLpGGzhbWRtSWADJc4Ctl08QG6RAylGArhfArlIFgK5K3hwN3DiAr0aAy2zAzISAr6JcgMDM3ICvhtzI3NQAsPMAsMFc4N0TDZGdOEDPKgDPJsDPcACxX0CxkgCxhGKAshqUgLIRQLJUALJLwJkngLd03h6YniveSZL0QMYpGcDAmH1GfSVJXsMXpNevBICz2wCz20wTFTT9BSgAMeuAs90ASrrA04TfkwGAtwoAtuLAtJQA1JdA1NgAQIDVY2AikABzBfuYUZ2AILPg44C2sgC2d+EEYRKpz0DhqYAMANkD4ZyWvoAVgLfZgLeuXR4AuIw7RUB8zEoAfScAfLTiALr9ALpcXoAAur6AurlAPpIAboC7ooC652Wq5cEAu5AA4XhmHpw4XGiAvMEAGoDjheZlAL3FAORbwOSiAL3mQL52gL4Z5odmqy8OJsfA52EAv77ARwAOp8dn7QDBY4DpmsDptoA0sYDBmuhiaIGCgMMSgFgASACtgNGAJwEgLpoBgC8BGzAEowcggCEDC6kdjoAJAM0C5IKRoABZCgiAIzw3AYBLACkfng9ogigkgNmWAN6AEQCvrkEVqTGAwCsBRbAA+4iQkMCHR072jI2PTbUNsk2RjY5NvA23TZKNiU3EDcZN5I+RTxDRTBCJkK5VBYKFhZfwQCWygU3AJBRHpu+OytgNxa61A40GMsYjsn7BVwFXQVcBV0FaAVdBVwFXQVcBV0FXAVdBVwFXUsaCNyKAK4AAQUHBwKU7oICoW1e7jAEzgPxA+YDwgCkBFDAwADABKzAAOxFLhitA1UFTDeyPkM+bj51QkRCuwTQWWQ8X+0AWBYzsACNA8xwzAGm7EZ/QisoCTAbLDs6fnLfb8H2GccsbgFw13M1HAVkBW/Jxsm9CNRO8E8FDD0FBQw9FkcClOYCoMFegpDfADgcMiA2AJQACB8AsigKAIzIEAJKeBIApY5yPZQIAKQiHb4fvj5BKSRPQrZCOz0oXyxgOywfKAnGbgMClQaCAkILXgdeCD9IIGUgQj5fPoY+dT52Ao5CM0dAX9BTVG9SDzFwWTQAbxBzJF/lOEIQQglCCkKJIAls5AcClQICoKPMODEFxhi6KSAbiyfIRrMjtCgdWCAkPlFBIitCsEJRzAbMAV/OEyQzDg0OAQQEJ36i328/Mk9AybDJsQlq3tDRApUKAkFzXf1d/j9uALYP6hCoFgCTGD8kPsFKQiobrm0+zj0KSD8kPnVCRBwMDyJRTHFgMTJa5rwXQiQ2YfI/JD7BMEJEHGINTw4TOFlIRzwJO0icMQpyPyQ+wzJCRBv6DVgnKB01NgUKj2bwYzMqCoBkznBgEF+zYDIocwRIX+NgHj4HICNfh2C4CwdwFWpTG/lgUhYGAwRfv2Ts8mAaXzVgml/XYIJfuWC4HI1gUF9pYJZgMR6ilQHMAOwLAlDRefC0in4AXAEJA6PjCwc0IamOANMMCAECRQDFNRTZBgd+CwQlRA+r6+gLBDEFBnwUBXgKATIArwAGRAAHA3cDdAN2A3kDdwN9A3oDdQN7A30DfAN4A3oDfQAYEAAlAtYASwMAUAFsAHcKAHcAmgB3AHUAdQB2AHVu8UgAygDAAHcAdQB1AHYAdQALCgB3AAsAmgB3AAsCOwB3AAtu8UgAygDAAHgKAJoAdwB3AHUAdQB2AHUAeAB1AHUAdgB1bvFIAMoAwAALCgCaAHcACwB3AAsCOwB3AAtu8UgAygDAAH4ACwGgALcBpwC6AahdAu0COwLtbvFIAMoAwAALCgCaAu0ACwLtAAsCOwLtAAtu8UgAygDAA24ACwNvAAu0VsQAAzsAABCkjUIpAAsAUIusOggWcgMeBxVsGwL67U/2HlzmWOEeOgALASvuAAseAfpKUpnpGgYJDCIZM6YyARUE9ThqAD5iXQgnAJYJPnOzw0ZAEZxEKsIAkA4DhAHnTAIDxxUDK0lxCQlPYgIvIQVYJQBVqE1GakUAKGYiDToSBA1EtAYAXQJYAIF8GgMHRyAAIAjOe9YncekRAA0KACUrjwE7Ayc6AAYWAqaiKG4McEcqANoN3+Mg9TwCBhIkuCny+JwUQ29L008JluRxu3K+oAdqiHOqFH0AG5SUIfUJ5SxCGfxdipRzqTmT4V5Zb+r1Uo4Vm+NqSSEl2mNvR2JhIa8SpYO6ntdwFXHCWTCK8f2+Hxo7uiG3drDycAuKIMP5bhi06ACnqArH1rz4Rqg//lm6SgJGEVbF9xJHISaR6HxqxSnkw6shDnelHKNEfGUXSJRJ1GcsmtJw25xrZMDK9gXSm1/YMkdX4/6NKYOdtk/NQ3/NnDASjTc3fPjIjW/5sVfVObX2oTDWkr1dF9f3kxBsD3/3aQO8hPfRz+e0uEiJqt1161griu7gz8hDDwtpy+F+BWtefnKHZPAxcZoWbnznhJpy0e842j36bcNzGnIEusgGX0a8ZxsnjcSsPDZ09yZ36fCQbriHeQ72JRMILNl6ePPf2HWoVwgWAm1fb3V2sAY0+B6rAXqSwPBgseVmoqsBTSrm91+XasMYYySI8eeRxH3ZvHkMz3BQ5aJ3iUVbYPNM3/7emRtjlsMgv/9VyTsyt/mK+8fgWeT6SoFaclXqn42dAIsvAarF5vNNWHzKSkKQ/8Hfk5ZWK7r9yliOsooyBjRhfkHP4Q2DkWXQi6FG/9r/IwbmkV5T7JSopHKn1pJwm9tb5Ot0oyN1Z2mPpKXHTxx2nlK08fKk1hEYA8WgVVWL5lgx0iTv+KdojJeU23ZDjmiubXOxVXJKKi2Wjuh2HLZOFLiSC7Tls5SMh4f+Pj6xUSrNjFqLGehRNB8lC0QSLNmkJJx/wSG3MnjE9T1CkPwJI0wH2lfzwETIiVqUxg0dfu5q39Gt+hwdcxkhhNvQ4TyrBceof3Mhs/IxFci1HmHr4FMZgXEEczPiGCx0HRwzAqDq2j9AVm1kwN0mRVLWLylgtoPNapF5cY4Y1wJh/e0BBwZj44YgZrDNqvD/9Hv7GFYdUQeDJuQ3EWI4HaKqavU1XjC/n41kT4L79kqGq0kLhdTZvgP3TA3fS0ozVz+5piZsoOtIvBUFoMKbNcmBL6YxxaUAusHB38XrS8dQMnQwJfUUkpRoGr5AUeWicvBTzyK9g77+yCkf5PAysL7r/JjcZgrbvRpMW9iyaxZvKO6ceZN2EwIxKwVFPuvFuiEPGCoagbMo+SpydLrXqBzNCDGFCrO/rkcwa2xhokQZ5CdZ0AsU3JfSqJ6n5I14YA+P/uAgfhPU84Tlw7cEFfp7AEE8ey4sP12PTt4Cods1GRgDOB5xvyiR5m+Bx8O5nBCNctU8BevfV5A08x6RHd5jcwPTMDSZJOedIZ1cGQ704lxbAzqZOP05ZxaOghzSdvFBHYqomATARyAADK4elP8Ly3IrUZKfWh23Xy20uBUmLS4Pfagu9+oyVa2iPgqRP3F2CTUsvJ7+RYnN8fFZbU/HVvxvcFFDKkiTqV5UBZ3Gz54JAKByi9hkKMZJvuGgcSYXFmw08UyoQyVdfTD1/dMkCHXcTGAKeROgArsvmRrQTLUOXioOHGK2QkjHuoYFgXciZoTJd6Fs5q1QX1G+p/e26hYsEf7QZD1nnIyl/SFkNtYYmmBhpBrxl9WbY0YpHWRuw2Ll/tj9mD8P4snVzJl4F9J+1arVeTb9E5r2ILH04qStjxQNwn3m4YNqxmaNbLAqW2TN6LidwuJRqS+NXbtqxoeDXpxeGWmxzSkWxjkyCkX4NQRme6q5SAcC+M7+9ETfA/EwrzQajKakCwYyeunP6ZFlxU2oMEn1Pz31zeStW74G406ZJFCl1wAXIoUKkWotYEpOuXB1uVNxJ63dpJEqfxBeptwIHNrPz8BllZoIcBoXwgfJ+8VAUnVPvRvexnw0Ma/WiGYuJO5y8QTvEYBigFmhUxY5RqzE8OcywN/8m4UYrlaniJO75XQ6KSo9+tWHlu+hMi0UVdiKQp7NelnoZUzNaIyBPVeOwK6GNp+FfHuPOoyhaWuNvTYFkvxscMQWDh+zeFCFkgwbXftiV23ywJ4+uwRqmg9k3KzwIQpzppt8DBBOMbrqwQM5Gb05sEwdKzMiAqOloaA/lr0KA+1pr0/+HiWoiIjHA/wir2nIuS3PeU/ji3O6ZwoxcR1SZ9FhtLC5S0FIzFhbBWcGVP/KpxOPSiUoAdWUpqKH++6Scz507iCcxYI6rdMBICPJZea7OcmeFw5mObJSiqpjg2UoWNIs+cFhyDSt6geV5qgi3FunmwwDoGSMgerFOZGX1m0dMCYo5XOruxO063dwENK9DbnVM9wYFREzh4vyU1WYYJ/LRRp6oxgjqP/X5a8/4Af6p6NWkQferzBmXme0zY/4nwMJm/wd1tIqSwGz+E3xPEAOoZlJit3XddD7/BT1pllzOx+8bmQtANQ/S6fZexc6qi3W+Q2xcmXTUhuS5mpHQRvcxZUN0S5+PL9lXWUAaRZhEH8hTdAcuNMMCuVNKTEGtSUKNi3O6KhSaTzck8csZ2vWRZ+d7mW8c4IKwXIYd25S/zIftPkwPzufjEvOHWVD1m+FjpDVUTV0DGDuHj6QnaEwLu/dEgdLQOg9E1Sro9XHJ8ykLAwtPu+pxqKDuFexqON1sKQm7rwbE1E68UCfA/erovrTCG+DBSNg0l4goDQvZN6uNlbyLpcZAwj2UclycvLpIZMgv4yRlpb3YuMftozorbcGVHt/VeDV3+Fdf1TP0iuaCsPi2G4XeGhsyF1ubVDxkoJhmniQ0/jSg/eYML9KLfnCFgISWkp91eauR3IQvED0nAPXK+6hPCYs+n3+hCZbiskmVMG2da+0EsZPonUeIY8EbfusQXjsK/eFDaosbPjEfQS0RKG7yj5GG69M7MeO1HmiUYocgygJHL6M1qzUDDwUSmr99V7Sdr2F3JjQAJY+F0yH33Iv3+C9M38eML7gTgmNu/r2bUMiPvpYbZ6v1/IaESirBHNa7mPKn4dEmYg7v/+HQgPN1G79jBQ1+soydfDC2r+h2Bl/KIc5KjMK7OH6nb1jLsNf0EHVe2KBiE51ox636uyG6Lho0t3J34L5QY/ilE3mikaF4HKXG1mG1rCevT1Vv6GavltxoQe/bMrpZvRggnBxSEPEeEzkEdOxTnPXHVjUYdw8JYvjB/o7Eegc3Ma+NUxLLnsK0kJlinPmUHzHGtrk5+CAbVzFOBqpyy3QVUnzTDfC/0XD94/okH+OB+i7g9lolhWIjSnfIb+Eq43ZXOWmwvjyV/qqD+t0e+7mTEM74qP/Ozt8nmC7mRpyu63OB4KnUzFc074SqoyPUAgM+/TJGFo6T44EHnQU4X4z6qannVqgw/U7zCpwcmXV1AubIrvOmkKHazJAR55ePjp5tLBsN8vAqs3NAHdcEHOR2xQ0lsNAFzSUuxFQCFYvXLZJdOj9p4fNq6p0HBGUik2YzaI4xySy91KzhQ0+q1hjxvImRwPRf76tChlRkhRCi74NXZ9qUNeIwP+s5p+3m5nwPdNOHgSLD79n7O9m1n1uDHiMntq4nkYwV5OZ1ENbXxFd4PgrlvavZsyUO4MqYlqqn1O8W/I1dEZq5dXhrbETLaZIbC2Kj/Aa/QM+fqUOHdf0tXAQ1huZ3cmWECWSXy/43j35+Mvq9xws7JKseriZ1pEWKc8qlzNrGPUGcVgOa9cPJYIJsGnJTAUsEcDOEVULO5x0rXBijc1lgXEzQQKhROf8zIV82w8eswc78YX11KYLWQRcgHNJElBxfXr72lS2RBSl07qTKorO2uUDZr3sFhYsvnhLZn0A94KRzJ/7DEGIAhW5ZWFpL8gEwu1aLA9MuWZzNwl8Oze9Y+bX+v9gywRVnoB5I/8kXTXU3141yRLYrIOOz6SOnyHNy4SieqzkBXharjfjqq1q6tklaEbA8Qfm2DaIPs7OTq/nvJBjKfO2H9bH2cCMh1+5gspfycu8f/cuuRmtDjyqZ7uCIMyjdV3a+p3fqmXsRx4C8lujezIFHnQiVTXLXuI1XrwN3+siYYj2HHTvESUx8DlOTXpak9qFRK+L3mgJ1WsD7F4cu1aJoFoYQnu+wGDMOjJM3kiBQWHCcvhJ/HRdxodOQp45YZaOTA22Nb4XKCVxqkbwMYFhzYQYIAnCW8FW14uf98jhUG2zrKhQQ0q0CEq0t5nXyvUyvR8DvD69LU+g3i+HFWQMQ8PqZuHD+sNKAV0+M6EJC0szq7rEr7B5bQ8BcNHzvDMc9eqB5ZCQdTf80Obn4uzjwpYU7SISdtV0QGa9D3Wrh2BDQtpBKxaNFV+/Cy2P/Sv+8s7Ud0Fd74X4+o/TNztWgETUapy+majNQ68Lq3ee0ZO48VEbTZYiH1Co4OlfWef82RWeyUXo7woM03PyapGfikTnQinoNq5z5veLpeMV3HCAMTaZmA1oGLAn7XS3XYsz+XK7VMQsc4XKrmDXOLU/pSXVNUq8dIqTba///3x6LiLS6xs1xuCAYSfcQ3+rQgmu7uvf3THKt5Ooo97TqcbRqxx7EASizaQCBQllG/rYxVapMLgtLbZS64w1MDBMXX+PQpBKNwqUKOf2DDRDUXQf9EhOS0Qj4nTmlA8dzSLz/G1d+Ud8MTy/6ghhdiLpeerGY/UlDOfiuqFsMUU5/UYlP+BAmgRLuNpvrUaLlVkrqDievNVEAwF+4CoM1MZTmjxjJMsKJq+u8Zd7tNCUFy6LiyYXRJQ4VyvEQFFaCGKsxIwQkk7EzZ6LTJq2hUuPhvAW+gQnSG6J+MszC+7QCRHcnqDdyNRJ6T9xyS87A6MDutbzKGvGktpbXqtzWtXb9HsfK2cBMomjN9a4y+TaJLnXxAeX/HWzmf4cR4vALt/P4w4qgKY04ml4ZdLOinFYS6cup3G/1ie4+t1eOnpBNlqGqs75ilzkT4+DsZQxNvaSKJ//6zIbbk/M7LOhFmRc/1R+kBtz7JFGdZm/COotIdvQoXpTqP/1uqEUmCb/QWoGLMwO5ANcHzxdY48IGP5+J+zKOTBFZ4Pid+GTM+Wq12MV/H86xEJptBa6T+p3kgpwLedManBHC2GgNrFpoN2xnrMz9WFWX/8/ygSBkavq2Uv7FdCsLEYLu9LLIvAU0bNRDtzYl+/vXmjpIvuJFYjmI0im6QEYqnIeMsNjXG4vIutIGHijeAG/9EDBozKV5cldkHbLxHh25vT+ZEzbhXlqvpzKJwcEgfNwLAKFeo0/pvEE10XDB+EXRTXtSzJozQKFFAJhMxYkVaCW+E9AL7tMeU8acxidHqzb6lX4691UsDpy/LLRmT+epgW56+5Cw8tB4kMUv6s9lh3eRKbyGs+H/4mQMaYzPTf2OOdokEn+zzgvoD3FqNKk8QqGAXVsqcGdXrT62fSPkR2vROFi68A6se86UxRUk4cajfPyCC4G5wDhD+zNq4jodQ4u4n/m37Lr36n4LIAAsVr02dFi9AiwA81MYs2rm4eDlDNmdMRvEKRHfBwW5DdMNp0jPFZMeARqF/wL4XBfd+EMLBfMzpH5GH6NaW+1vrvMdg+VxDzatk3MXgO3ro3P/DpcC6+Mo4MySJhKJhSR01SGGGp5hPWmrrUgrv3lDnP+HhcI3nt3YqBoVAVTBAQT5iuhTg8nvPtd8ZeYj6w1x6RqGUBrSku7+N1+BaasZvjTk64RoIDlL8brpEcJx3OmY7jLoZsswdtmhfC/G21llXhITOwmvRDDeTTPbyASOa16cF5/A1fZAidJpqju3wYAy9avPR1ya6eNp9K8XYrrtuxlqi+bDKwlfrYdR0RRiKRVTLOH85+ZY7XSmzRpfZBJjaTa81VDcJHpZnZnSQLASGYW9l51ZV/h7eVzTi3Hv6hUsgc/51AqJRTkpbFVLXXszoBL8nBX0u/0jBLT8nH+fJePbrwURT58OY+UieRjd1vs04w0VG5VN2U6MoGZkQzKN/ptz0Q366dxoTGmj7i1NQGHi9GgnquXFYdrCfZBmeb7s0T6yrdlZH5cZuwHFyIJ/kAtGsTg0xH5taAAq44BAk1CPk9KVVbqQzrCUiFdF/6gtlPQ8bHHc1G1W92MXGZ5HEHftyLYs8mbD/9xYRUWkHmlM0zC2ilJlnNgV4bfALpQghxOUoZL7VTqtCHIaQSXm+YUMnpkXybnV+A6xlm2CVy8fn0Xlm2XRa0+zzOa21JWWmixfiPMSCZ7qA4rS93VN3pkpF1s5TonQjisHf7iU9ZGvUPOAKZcR1pbeVf/Ul7OhepGCaId9wOtqo7pJ7yLcBZ0pFkOF28y4zEI/kcUNmutBHaQpBdNM8vjCS6HZRokkeo88TBAjGyG7SR+6vUgTcyK9Imalj0kuxz0wmK+byQU11AiJFk/ya5dNduRClcnU64yGu/ieWSeOos1t3ep+RPIWQ2pyTYVbZltTbsb7NiwSi3AV+8KLWk7LxCnfZUetEM8ThnsSoGH38/nyAwFguJp8FjvlHtcWZuU4hPva0rHfr0UhOOJ/F6vS62FW7KzkmRll2HEc7oUq4fyi5T70Vl7YVIfsPHUCdHesf9Lk7WNVWO75JDkYbMI8TOW8JKVtLY9d6UJRITO8oKo0xS+o99Yy04iniGHAaGj88kEWgwv0OrHdY/nr76DOGNS59hXCGXzTKUvDl9iKpLSWYN1lxIeyywdNpTkhay74w2jFT6NS8qkjo5CxA1yfSYwp6AJIZNKIeEK5PJAW7ORgWgwp0VgzYpqovMrWxbu+DGZ6Lhie1RAqpzm8VUzKJOH3mCzWuTOLsN3VT/dv2eeYe9UjbR8YTBsLz7q60VN1sU51k+um1f8JxD5pPhbhSC8rRaB454tmh6YUWrJI3+GWY0qeWioj/tbkYITOkJaeuGt4JrJvHA+l0Gu7kY7XOaa05alMnRWVCXqFgLIwSY4uF59Ue5SU4QKuc/HamDxbr0x6csCetXGoP7Qn1Bk/J9DsynO/UD6iZ1Hyrz+jit0hDCwi/E9OjgKTbB3ZQKQ/0ZOvevfNHG0NK4Aj3Cp7NpRk07RT1i/S0EL93Ag8GRgKI9CfpajKyK6+Jj/PI1KO5/85VAwz2AwzP8FTBb075IxCXv6T9RVvWT2tUaqxDS92zrGUbWzUYk9mSs82pECH+fkqsDt93VW++4YsR/dHCYcQSYTO/KaBMDj9LSD/J/+z20Kq8XvZUAIHtm9hRPP3ItbuAu2Hm5lkPs92pd7kCxgRs0xOVBnZ13ccdA0aunrwv9SdqElJRC3g+oCu+nXyCgmXUs9yMjTMAIHfxZV+aPKcZeUBWt057Xo85Ks1Ir5gzEHCWqZEhrLZMuF11ziGtFQUds/EESajhagzcKsxamcSZxGth4UII+adPhQkUnx2WyN+4YWR+r3f8MnkyGFuR4zjzxJS8WsQYR5PTyRaD9ixa6Mh741nBHbzfjXHskGDq179xaRNrCIB1z1xRfWfjqw2pHc1zk9xlPpL8sQWAIuETZZhbnmL54rceXVNRvUiKrrqIkeogsl0XXb17ylNb0f4GA9Wd44vffEG8FSZGHEL2fbaTGRcSiCeA8PmA/f6Hz8HCS76fXUHwgwkzSwlI71ekZ7Fapmlk/KC+Hs8hUcw3N2LN5LhkVYyizYFl/uPeVP5lsoJHhhfWvvSWruCUW1ZcJOeuTbrDgywJ/qG07gZJplnTvLcYdNaH0KMYOYMGX+rB4NGPFmQsNaIwlWrfCezxre8zXBrsMT+edVLbLqN1BqB76JH4BvZTqUIMfGwPGEn+EnmTV86fPBaYbFL3DFEhjB45CewkXEAtJxk4/Ms2pPXnaRqdky0HOYdcUcE2zcXq4vaIvW2/v0nHFJH2XXe22ueDmq/18XGtELSq85j9X8q0tcNSSKJIX8FTuJF/Pf8j5PhqG2u+osvsLxYrvvfeVJL+4tkcXcr9JV7v0ERmj/X6fM3NC4j6dS1+9Umr2oPavqiAydTZPLMNRGY23LO9zAVDly7jD+70G5TPPLdhRIl4WxcYjLnM+SNcJ26FOrkrISUtPObIz5Zb3AG612krnpy15RMW+1cQjlnWFI6538qky9axd2oJmHIHP08KyP0ubGO+TQNOYuv2uh17yCIvR8VcStw7o1g0NM60sk+8Tq7YfIBJrtp53GkvzXH7OA0p8/n/u1satf/VJhtR1l8Wa6Gmaug7haSpaCaYQax6ta0mkutlb+eAOSG1aobM81D9A4iS1RRlzBBoVX6tU1S6WE2N9ORY6DfeLRC4l9Rvr5h95XDWB2mR1d4WFudpsgVYwiTwT31ljskD8ZyDOlm5DkGh9N/UB/0AI5Xvb8ZBmai2hQ4BWMqFwYnzxwB26YHSOv9WgY3JXnvoN+2R4rqGVh/LLDMtpFP+SpMGJNWvbIl5SOodbCczW2RKleksPoUeGEzrjtKHVdtZA+kfqO+rVx/iclCqwoopepvJpSTDjT+b9GWylGRF8EDbGlw6eUzmJM95Ovoz+kwLX3c2fTjFeYEsE7vUZm3mqdGJuKh2w9/QGSaqRHs99aScGOdDqkFcACoqdbBoQqqjamhH6Q9ng39JCg3lrGJwd50Qk9ovnqBTr8MME7Ps2wiVfygUmPoUBJJfJWX5Nda0nuncbFkA=="))}const To=Gh(),Kh=new Set(Oi(To)),$h=new Set(Oi(To)),Zh=Hh(To),Yh=Vh(To),Rl=45,Ml=95;function s0(r){return zf(r)}function Jh(r){return r.filter(e=>e!=65039)}function o0(r){for(let e of r.split(".")){let t=s0(e);try{for(let n=t.lastIndexOf(Ml)-1;n>=0;n--)if(t[n]!==Ml)throw new Error("underscore only allowed at start");if(t.length>=4&&t.every(n=>n<128)&&t[2]===Rl&&t[3]===Rl)throw new Error("invalid label extension")}catch(n){throw new Error(`Invalid label "${e}": ${n.message}`)}}return r}function Qh(r){return o0(Xh(r,Jh))}function Xh(r,e){let t=s0(r).reverse(),n=[];for(;t.length;){let a=ty(t);if(a){n.push(...e(a));continue}let i=t.pop();if(Kh.has(i)){n.push(i);continue}if($h.has(i))continue;let s=Zh[i];if(s){n.push(...s);continue}throw new Error(`Disallowed codepoint: 0x${i.toString(16).toUpperCase()}`)}return o0(ey(String.fromCodePoint(...n)))}function ey(r){return r.normalize("NFC")}function ty(r,e){var t;let n=Yh,a,i,s=[],o=r.length;for(e&&(e.length=0);o;){let l=r[--o];if(n=(t=n.branches.find(c=>c.set.has(l)))===null||t===void 0?void 0:t.node,!n)break;if(n.save)i=l;else if(n.check&&l===i)break;s.push(l),n.fe0f&&(s.push(65039),o>0&&r[o-1]==65039&&o--),n.valid&&(a=s.slice(),n.valid==2&&a.splice(1,1),e&&e.push(...r.slice(o).reverse()),r.length=o)}return a}const ny=new j(t0),c0=new Uint8Array(32);c0.fill(0);function Dl(r){if(r.length===0)throw new Error("invalid ENS name; empty component");return r}function Ao(r){const e=Me(Qh(r)),t=[];if(r.length===0)return t;let n=0;for(let a=0;a<e.length;a++)e[a]===46&&(t.push(Dl(e.slice(n,a))),n=a+1);if(n>=e.length)throw new Error("invalid ENS name; empty component");return t.push(Dl(e.slice(n))),t}function c6(r){return Ao(r).map(e=>Jn(e)).join(".")}function l6(r){try{return Ao(r).length!==0}catch{}return!1}function Ii(r){typeof r!="string"&&ny.throwArgumentError("invalid ENS name; not a string","name",r);let e=c0;const t=Ao(r);for(;t.length;)e=Je(ct([e,Je(t.pop())]));return ge(e)}function ry(r){return ge(ct(Ao(r).map(e=>{if(e.length>63)throw new Error("invalid DNS encoded entry; length exceeds 63 bytes");const t=new Uint8Array(e.length+1);return t.set(e,1),t[0]=t.length-1,t})))+"00"}const ay=`Ethereum Signed Message:
`;function Yc(r){return typeof r=="string"&&(r=Me(r)),Je(ct([Me(ay),Me(String(r.length)),r]))}var iy=globalThis&&globalThis.__awaiter||function(r,e,t,n){function a(i){return i instanceof t?i:new t(function(s){s(i)})}return new(t||(t=Promise))(function(i,s){function o(u){try{c(n.next(u))}catch(d){s(d)}}function l(u){try{c(n.throw(u))}catch(d){s(d)}}function c(u){u.done?i(u.value):a(u.value).then(o,l)}c((n=n.apply(r,e||[])).next())})};const Ue=new j(t0),l0=new Uint8Array(32);l0.fill(0);const sy=O.from(-1),u0=O.from(0),d0=O.from(1),oy=O.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function cy(r){const e=ce(r),t=e.length%32;return t?$t([e,l0.slice(t)]):ge(e)}const ly=ze(d0.toHexString(),32),uy=ze(u0.toHexString(),32),Fl={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},$o=["name","version","chainId","verifyingContract","salt"];function Nl(r){return function(e){return typeof e!="string"&&Ue.throwArgumentError(`invalid domain value for ${JSON.stringify(r)}`,`domain.${r}`,e),e}}const dy={name:Nl("name"),version:Nl("version"),chainId:function(r){try{return O.from(r).toString()}catch{}return Ue.throwArgumentError('invalid domain value for "chainId"',"domain.chainId",r)},verifyingContract:function(r){try{return Qt(r).toLowerCase()}catch{}return Ue.throwArgumentError('invalid domain value "verifyingContract"',"domain.verifyingContract",r)},salt:function(r){try{const e=ce(r);if(e.length!==32)throw new Error("bad length");return ge(e)}catch{}return Ue.throwArgumentError('invalid domain value "salt"',"domain.salt",r)}};function Zo(r){{const e=r.match(/^(u?)int(\d*)$/);if(e){const t=e[1]==="",n=parseInt(e[2]||"256");(n%8!==0||n>256||e[2]&&e[2]!==String(n))&&Ue.throwArgumentError("invalid numeric width","type",r);const a=oy.mask(t?n-1:n),i=t?a.add(d0).mul(sy):u0;return function(s){const o=O.from(s);return(o.lt(i)||o.gt(a))&&Ue.throwArgumentError(`value out-of-bounds for ${r}`,"value",s),ze(o.toTwos(256).toHexString(),32)}}}{const e=r.match(/^bytes(\d+)$/);if(e){const t=parseInt(e[1]);return(t===0||t>32||e[1]!==String(t))&&Ue.throwArgumentError("invalid bytes width","type",r),function(n){return ce(n).length!==t&&Ue.throwArgumentError(`invalid length for ${r}`,"value",n),cy(n)}}}switch(r){case"address":return function(e){return ze(Qt(e),32)};case"bool":return function(e){return e?ly:uy};case"bytes":return function(e){return Je(e)};case"string":return function(e){return bo(e)}}return null}function Wl(r,e){return`${r}(${e.map(({name:t,type:n})=>n+" "+t).join(",")})`}class tt{constructor(e){ee(this,"types",Object.freeze(on(e))),ee(this,"_encoderCache",{}),ee(this,"_types",{});const t={},n={},a={};Object.keys(e).forEach(o=>{t[o]={},n[o]=[],a[o]={}});for(const o in e){const l={};e[o].forEach(c=>{l[c.name]&&Ue.throwArgumentError(`duplicate variable name ${JSON.stringify(c.name)} in ${JSON.stringify(o)}`,"types",e),l[c.name]=!0;const u=c.type.match(/^([^\x5b]*)(\x5b|$)/)[1];u===o&&Ue.throwArgumentError(`circular type reference to ${JSON.stringify(u)}`,"types",e),!Zo(u)&&(n[u]||Ue.throwArgumentError(`unknown type ${JSON.stringify(u)}`,"types",e),n[u].push(o),t[o][u]=!0)})}const i=Object.keys(n).filter(o=>n[o].length===0);i.length===0?Ue.throwArgumentError("missing primary type","types",e):i.length>1&&Ue.throwArgumentError(`ambiguous primary types or unused types: ${i.map(o=>JSON.stringify(o)).join(", ")}`,"types",e),ee(this,"primaryType",i[0]);function s(o,l){l[o]&&Ue.throwArgumentError(`circular type reference to ${JSON.stringify(o)}`,"types",e),l[o]=!0,Object.keys(t[o]).forEach(c=>{n[c]&&(s(c,l),Object.keys(l).forEach(u=>{a[u][c]=!0}))}),delete l[o]}s(this.primaryType,{});for(const o in a){const l=Object.keys(a[o]);l.sort(),this._types[o]=Wl(o,e[o])+l.map(c=>Wl(c,e[c])).join("")}}getEncoder(e){let t=this._encoderCache[e];return t||(t=this._encoderCache[e]=this._getEncoder(e)),t}_getEncoder(e){{const a=Zo(e);if(a)return a}const t=e.match(/^(.*)(\x5b(\d*)\x5d)$/);if(t){const a=t[1],i=this.getEncoder(a),s=parseInt(t[3]);return o=>{s>=0&&o.length!==s&&Ue.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",o);let l=o.map(i);return this._types[a]&&(l=l.map(Je)),Je($t(l))}}const n=this.types[e];if(n){const a=bo(this._types[e]);return i=>{const s=n.map(({name:o,type:l})=>{const c=this.getEncoder(l)(i[o]);return this._types[l]?Je(c):c});return s.unshift(a),$t(s)}}return Ue.throwArgumentError(`unknown type: ${e}`,"type",e)}encodeType(e){const t=this._types[e];return t||Ue.throwArgumentError(`unknown type: ${JSON.stringify(e)}`,"name",e),t}encodeData(e,t){return this.getEncoder(e)(t)}hashStruct(e,t){return Je(this.encodeData(e,t))}encode(e){return this.encodeData(this.primaryType,e)}hash(e){return this.hashStruct(this.primaryType,e)}_visit(e,t,n){if(Zo(e))return n(e,t);const a=e.match(/^(.*)(\x5b(\d*)\x5d)$/);if(a){const s=a[1],o=parseInt(a[3]);return o>=0&&t.length!==o&&Ue.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",t),t.map(l=>this._visit(s,l,n))}const i=this.types[e];return i?i.reduce((s,{name:o,type:l})=>(s[o]=this._visit(l,t[o],n),s),{}):Ue.throwArgumentError(`unknown type: ${e}`,"type",e)}visit(e,t){return this._visit(this.primaryType,e,t)}static from(e){return new tt(e)}static getPrimaryType(e){return tt.from(e).primaryType}static hashStruct(e,t,n){return tt.from(t).hashStruct(e,n)}static hashDomain(e){const t=[];for(const n in e){const a=Fl[n];a||Ue.throwArgumentError(`invalid typed-data domain key: ${JSON.stringify(n)}`,"domain",e),t.push({name:n,type:a})}return t.sort((n,a)=>$o.indexOf(n.name)-$o.indexOf(a.name)),tt.hashStruct("EIP712Domain",{EIP712Domain:t},e)}static encode(e,t,n){return $t(["0x1901",tt.hashDomain(e),tt.from(t).hash(n)])}static hash(e,t,n){return Je(tt.encode(e,t,n))}static resolveNames(e,t,n,a){return iy(this,void 0,void 0,function*(){e=nt(e);const i={};e.verifyingContract&&!Le(e.verifyingContract,20)&&(i[e.verifyingContract]="0x");const s=tt.from(t);s.visit(n,(o,l)=>(o==="address"&&!Le(l,20)&&(i[l]="0x"),l));for(const o in i)i[o]=yield a(o);return e.verifyingContract&&i[e.verifyingContract]&&(e.verifyingContract=i[e.verifyingContract]),n=s.visit(n,(o,l)=>o==="address"&&i[l]?i[l]:l),{domain:e,value:n}})}static getPayload(e,t,n){tt.hashDomain(e);const a={},i=[];$o.forEach(l=>{const c=e[l];c!=null&&(a[l]=dy[l](c),i.push({name:l,type:Fl[l]}))});const s=tt.from(t),o=nt(t);return o.EIP712Domain?Ue.throwArgumentError("types must not contain EIP712Domain type","types.EIP712Domain",t):o.EIP712Domain=i,s.encode(n),{types:o,domain:a,primaryType:s.primaryType,message:s.visit(n,(l,c)=>{if(l.match(/^bytes(\d*)/))return ge(ce(c));if(l.match(/^u?int/))return O.from(c).toString();switch(l){case"address":return c.toLowerCase();case"bool":return!!c;case"string":return typeof c!="string"&&Ue.throwArgumentError("invalid string","value",c),c}return Ue.throwArgumentError("unsupported type","type",l)})}}}class Jc{constructor(e){ee(this,"alphabet",e),ee(this,"base",e.length),ee(this,"_alphabetMap",{}),ee(this,"_leader",e.charAt(0));for(let t=0;t<e.length;t++)this._alphabetMap[e.charAt(t)]=t}encode(e){let t=ce(e);if(t.length===0)return"";let n=[0];for(let i=0;i<t.length;++i){let s=t[i];for(let o=0;o<n.length;++o)s+=n[o]<<8,n[o]=s%this.base,s=s/this.base|0;for(;s>0;)n.push(s%this.base),s=s/this.base|0}let a="";for(let i=0;t[i]===0&&i<t.length-1;++i)a+=this._leader;for(let i=n.length-1;i>=0;--i)a+=this.alphabet[n[i]];return a}decode(e){if(typeof e!="string")throw new TypeError("Expected String");let t=[];if(e.length===0)return new Uint8Array(t);t.push(0);for(let n=0;n<e.length;n++){let a=this._alphabetMap[e[n]];if(a===void 0)throw new Error("Non-base"+this.base+" character");let i=a;for(let s=0;s<t.length;++s)i+=t[s]*this.base,t[s]=i&255,i>>=8;for(;i>0;)t.push(i&255),i>>=8}for(let n=0;e[n]===this._leader&&n<e.length-1;++n)t.push(0);return ce(new Uint8Array(t.reverse()))}}const py=new Jc("abcdefghijklmnopqrstuvwxyz234567"),Yr=new Jc("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),u6=Object.freeze(Object.defineProperty({__proto__:null,Base32:py,Base58:Yr,BaseX:Jc},Symbol.toStringTag,{value:"Module"}));var Ma;(function(r){r.sha256="sha256",r.sha512="sha512"})(Ma||(Ma={}));const fy="sha2/5.7.0",hy=new j(fy);function yy(r){return"0x"+Ra.ripemd160().update(ce(r)).digest("hex")}function Kn(r){return"0x"+Ra.sha256().update(ce(r)).digest("hex")}function d6(r){return"0x"+Ra.sha512().update(ce(r)).digest("hex")}function Li(r,e,t){return Ma[r]||hy.throwError("unsupported algorithm "+r,j.errors.UNSUPPORTED_OPERATION,{operation:"hmac",algorithm:r}),"0x"+Ra.hmac(Ra[r],ce(e)).update(ce(t)).digest("hex")}function Qc(r,e,t,n,a){r=ce(r),e=ce(e);let i,s=1;const o=new Uint8Array(n),l=new Uint8Array(e.length+4);l.set(e);let c,u;for(let d=1;d<=s;d++){l[e.length]=d>>24&255,l[e.length+1]=d>>16&255,l[e.length+2]=d>>8&255,l[e.length+3]=d&255;let h=ce(Li(a,r,l));i||(i=h.length,u=new Uint8Array(i),s=Math.ceil(n/i),c=n-(s-1)*i),u.set(h);for(let x=1;x<t;x++){h=ce(Li(a,r,h));for(let f=0;f<i;f++)u[f]^=h[f]}const m=(d-1)*i,b=d===s?c:i;o.set(ce(u).slice(0,b),m)}return ge(o)}const my="wordlists/5.7.0",xy=new j(my);class oi{constructor(e){xy.checkAbstract(new.target,oi),ee(this,"locale",e)}split(e){return e.toLowerCase().split(/ +/g)}join(e){return e.join(" ")}static check(e){const t=[];for(let n=0;n<2048;n++){const a=e.getWord(n);if(n!==e.getWordIndex(a))return"0x";t.push(a)}return bo(t.join(`
`)+`
`)}static register(e,t){t||(t=e.locale)}}const by="AbandonAbilityAbleAboutAboveAbsentAbsorbAbstractAbsurdAbuseAccessAccidentAccountAccuseAchieveAcidAcousticAcquireAcrossActActionActorActressActualAdaptAddAddictAddressAdjustAdmitAdultAdvanceAdviceAerobicAffairAffordAfraidAgainAgeAgentAgreeAheadAimAirAirportAisleAlarmAlbumAlcoholAlertAlienAllAlleyAllowAlmostAloneAlphaAlreadyAlsoAlterAlwaysAmateurAmazingAmongAmountAmusedAnalystAnchorAncientAngerAngleAngryAnimalAnkleAnnounceAnnualAnotherAnswerAntennaAntiqueAnxietyAnyApartApologyAppearAppleApproveAprilArchArcticAreaArenaArgueArmArmedArmorArmyAroundArrangeArrestArriveArrowArtArtefactArtistArtworkAskAspectAssaultAssetAssistAssumeAsthmaAthleteAtomAttackAttendAttitudeAttractAuctionAuditAugustAuntAuthorAutoAutumnAverageAvocadoAvoidAwakeAwareAwayAwesomeAwfulAwkwardAxisBabyBachelorBaconBadgeBagBalanceBalconyBallBambooBananaBannerBarBarelyBargainBarrelBaseBasicBasketBattleBeachBeanBeautyBecauseBecomeBeefBeforeBeginBehaveBehindBelieveBelowBeltBenchBenefitBestBetrayBetterBetweenBeyondBicycleBidBikeBindBiologyBirdBirthBitterBlackBladeBlameBlanketBlastBleakBlessBlindBloodBlossomBlouseBlueBlurBlushBoardBoatBodyBoilBombBoneBonusBookBoostBorderBoringBorrowBossBottomBounceBoxBoyBracketBrainBrandBrassBraveBreadBreezeBrickBridgeBriefBrightBringBriskBroccoliBrokenBronzeBroomBrotherBrownBrushBubbleBuddyBudgetBuffaloBuildBulbBulkBulletBundleBunkerBurdenBurgerBurstBusBusinessBusyButterBuyerBuzzCabbageCabinCableCactusCageCakeCallCalmCameraCampCanCanalCancelCandyCannonCanoeCanvasCanyonCapableCapitalCaptainCarCarbonCardCargoCarpetCarryCartCaseCashCasinoCastleCasualCatCatalogCatchCategoryCattleCaughtCauseCautionCaveCeilingCeleryCementCensusCenturyCerealCertainChairChalkChampionChangeChaosChapterChargeChaseChatCheapCheckCheeseChefCherryChestChickenChiefChildChimneyChoiceChooseChronicChuckleChunkChurnCigarCinnamonCircleCitizenCityCivilClaimClapClarifyClawClayCleanClerkCleverClickClientCliffClimbClinicClipClockClogCloseClothCloudClownClubClumpClusterClutchCoachCoastCoconutCodeCoffeeCoilCoinCollectColorColumnCombineComeComfortComicCommonCompanyConcertConductConfirmCongressConnectConsiderControlConvinceCookCoolCopperCopyCoralCoreCornCorrectCostCottonCouchCountryCoupleCourseCousinCoverCoyoteCrackCradleCraftCramCraneCrashCraterCrawlCrazyCreamCreditCreekCrewCricketCrimeCrispCriticCropCrossCrouchCrowdCrucialCruelCruiseCrumbleCrunchCrushCryCrystalCubeCultureCupCupboardCuriousCurrentCurtainCurveCushionCustomCuteCycleDadDamageDampDanceDangerDaringDashDaughterDawnDayDealDebateDebrisDecadeDecemberDecideDeclineDecorateDecreaseDeerDefenseDefineDefyDegreeDelayDeliverDemandDemiseDenialDentistDenyDepartDependDepositDepthDeputyDeriveDescribeDesertDesignDeskDespairDestroyDetailDetectDevelopDeviceDevoteDiagramDialDiamondDiaryDiceDieselDietDifferDigitalDignityDilemmaDinnerDinosaurDirectDirtDisagreeDiscoverDiseaseDishDismissDisorderDisplayDistanceDivertDivideDivorceDizzyDoctorDocumentDogDollDolphinDomainDonateDonkeyDonorDoorDoseDoubleDoveDraftDragonDramaDrasticDrawDreamDressDriftDrillDrinkDripDriveDropDrumDryDuckDumbDuneDuringDustDutchDutyDwarfDynamicEagerEagleEarlyEarnEarthEasilyEastEasyEchoEcologyEconomyEdgeEditEducateEffortEggEightEitherElbowElderElectricElegantElementElephantElevatorEliteElseEmbarkEmbodyEmbraceEmergeEmotionEmployEmpowerEmptyEnableEnactEndEndlessEndorseEnemyEnergyEnforceEngageEngineEnhanceEnjoyEnlistEnoughEnrichEnrollEnsureEnterEntireEntryEnvelopeEpisodeEqualEquipEraEraseErodeErosionErrorEruptEscapeEssayEssenceEstateEternalEthicsEvidenceEvilEvokeEvolveExactExampleExcessExchangeExciteExcludeExcuseExecuteExerciseExhaustExhibitExileExistExitExoticExpandExpectExpireExplainExposeExpressExtendExtraEyeEyebrowFabricFaceFacultyFadeFaintFaithFallFalseFameFamilyFamousFanFancyFantasyFarmFashionFatFatalFatherFatigueFaultFavoriteFeatureFebruaryFederalFeeFeedFeelFemaleFenceFestivalFetchFeverFewFiberFictionFieldFigureFileFilmFilterFinalFindFineFingerFinishFireFirmFirstFiscalFishFitFitnessFixFlagFlameFlashFlatFlavorFleeFlightFlipFloatFlockFloorFlowerFluidFlushFlyFoamFocusFogFoilFoldFollowFoodFootForceForestForgetForkFortuneForumForwardFossilFosterFoundFoxFragileFrameFrequentFreshFriendFringeFrogFrontFrostFrownFrozenFruitFuelFunFunnyFurnaceFuryFutureGadgetGainGalaxyGalleryGameGapGarageGarbageGardenGarlicGarmentGasGaspGateGatherGaugeGazeGeneralGeniusGenreGentleGenuineGestureGhostGiantGiftGiggleGingerGiraffeGirlGiveGladGlanceGlareGlassGlideGlimpseGlobeGloomGloryGloveGlowGlueGoatGoddessGoldGoodGooseGorillaGospelGossipGovernGownGrabGraceGrainGrantGrapeGrassGravityGreatGreenGridGriefGritGroceryGroupGrowGruntGuardGuessGuideGuiltGuitarGunGymHabitHairHalfHammerHamsterHandHappyHarborHardHarshHarvestHatHaveHawkHazardHeadHealthHeartHeavyHedgehogHeightHelloHelmetHelpHenHeroHiddenHighHillHintHipHireHistoryHobbyHockeyHoldHoleHolidayHollowHomeHoneyHoodHopeHornHorrorHorseHospitalHostHotelHourHoverHubHugeHumanHumbleHumorHundredHungryHuntHurdleHurryHurtHusbandHybridIceIconIdeaIdentifyIdleIgnoreIllIllegalIllnessImageImitateImmenseImmuneImpactImposeImproveImpulseInchIncludeIncomeIncreaseIndexIndicateIndoorIndustryInfantInflictInformInhaleInheritInitialInjectInjuryInmateInnerInnocentInputInquiryInsaneInsectInsideInspireInstallIntactInterestIntoInvestInviteInvolveIronIslandIsolateIssueItemIvoryJacketJaguarJarJazzJealousJeansJellyJewelJobJoinJokeJourneyJoyJudgeJuiceJumpJungleJuniorJunkJustKangarooKeenKeepKetchupKeyKickKidKidneyKindKingdomKissKitKitchenKiteKittenKiwiKneeKnifeKnockKnowLabLabelLaborLadderLadyLakeLampLanguageLaptopLargeLaterLatinLaughLaundryLavaLawLawnLawsuitLayerLazyLeaderLeafLearnLeaveLectureLeftLegLegalLegendLeisureLemonLendLengthLensLeopardLessonLetterLevelLiarLibertyLibraryLicenseLifeLiftLightLikeLimbLimitLinkLionLiquidListLittleLiveLizardLoadLoanLobsterLocalLockLogicLonelyLongLoopLotteryLoudLoungeLoveLoyalLuckyLuggageLumberLunarLunchLuxuryLyricsMachineMadMagicMagnetMaidMailMainMajorMakeMammalManManageMandateMangoMansionManualMapleMarbleMarchMarginMarineMarketMarriageMaskMassMasterMatchMaterialMathMatrixMatterMaximumMazeMeadowMeanMeasureMeatMechanicMedalMediaMelodyMeltMemberMemoryMentionMenuMercyMergeMeritMerryMeshMessageMetalMethodMiddleMidnightMilkMillionMimicMindMinimumMinorMinuteMiracleMirrorMiseryMissMistakeMixMixedMixtureMobileModelModifyMomMomentMonitorMonkeyMonsterMonthMoonMoralMoreMorningMosquitoMotherMotionMotorMountainMouseMoveMovieMuchMuffinMuleMultiplyMuscleMuseumMushroomMusicMustMutualMyselfMysteryMythNaiveNameNapkinNarrowNastyNationNatureNearNeckNeedNegativeNeglectNeitherNephewNerveNestNetNetworkNeutralNeverNewsNextNiceNightNobleNoiseNomineeNoodleNormalNorthNoseNotableNoteNothingNoticeNovelNowNuclearNumberNurseNutOakObeyObjectObligeObscureObserveObtainObviousOccurOceanOctoberOdorOffOfferOfficeOftenOilOkayOldOliveOlympicOmitOnceOneOnionOnlineOnlyOpenOperaOpinionOpposeOptionOrangeOrbitOrchardOrderOrdinaryOrganOrientOriginalOrphanOstrichOtherOutdoorOuterOutputOutsideOvalOvenOverOwnOwnerOxygenOysterOzonePactPaddlePagePairPalacePalmPandaPanelPanicPantherPaperParadeParentParkParrotPartyPassPatchPathPatientPatrolPatternPausePavePaymentPeacePeanutPearPeasantPelicanPenPenaltyPencilPeoplePepperPerfectPermitPersonPetPhonePhotoPhrasePhysicalPianoPicnicPicturePiecePigPigeonPillPilotPinkPioneerPipePistolPitchPizzaPlacePlanetPlasticPlatePlayPleasePledgePluckPlugPlungePoemPoetPointPolarPolePolicePondPonyPoolPopularPortionPositionPossiblePostPotatoPotteryPovertyPowderPowerPracticePraisePredictPreferPreparePresentPrettyPreventPricePridePrimaryPrintPriorityPrisonPrivatePrizeProblemProcessProduceProfitProgramProjectPromoteProofPropertyProsperProtectProudProvidePublicPuddingPullPulpPulsePumpkinPunchPupilPuppyPurchasePurityPurposePursePushPutPuzzlePyramidQualityQuantumQuarterQuestionQuickQuitQuizQuoteRabbitRaccoonRaceRackRadarRadioRailRainRaiseRallyRampRanchRandomRangeRapidRareRateRatherRavenRawRazorReadyRealReasonRebelRebuildRecallReceiveRecipeRecordRecycleReduceReflectReformRefuseRegionRegretRegularRejectRelaxReleaseReliefRelyRemainRememberRemindRemoveRenderRenewRentReopenRepairRepeatReplaceReportRequireRescueResembleResistResourceResponseResultRetireRetreatReturnReunionRevealReviewRewardRhythmRibRibbonRiceRichRideRidgeRifleRightRigidRingRiotRippleRiskRitualRivalRiverRoadRoastRobotRobustRocketRomanceRoofRookieRoomRoseRotateRoughRoundRouteRoyalRubberRudeRugRuleRunRunwayRuralSadSaddleSadnessSafeSailSaladSalmonSalonSaltSaluteSameSampleSandSatisfySatoshiSauceSausageSaveSayScaleScanScareScatterSceneSchemeSchoolScienceScissorsScorpionScoutScrapScreenScriptScrubSeaSearchSeasonSeatSecondSecretSectionSecuritySeedSeekSegmentSelectSellSeminarSeniorSenseSentenceSeriesServiceSessionSettleSetupSevenShadowShaftShallowShareShedShellSheriffShieldShiftShineShipShiverShockShoeShootShopShortShoulderShoveShrimpShrugShuffleShySiblingSickSideSiegeSightSignSilentSilkSillySilverSimilarSimpleSinceSingSirenSisterSituateSixSizeSkateSketchSkiSkillSkinSkirtSkullSlabSlamSleepSlenderSliceSlideSlightSlimSloganSlotSlowSlushSmallSmartSmileSmokeSmoothSnackSnakeSnapSniffSnowSoapSoccerSocialSockSodaSoftSolarSoldierSolidSolutionSolveSomeoneSongSoonSorrySortSoulSoundSoupSourceSouthSpaceSpareSpatialSpawnSpeakSpecialSpeedSpellSpendSphereSpiceSpiderSpikeSpinSpiritSplitSpoilSponsorSpoonSportSpotSpraySpreadSpringSpySquareSqueezeSquirrelStableStadiumStaffStageStairsStampStandStartStateStaySteakSteelStemStepStereoStickStillStingStockStomachStoneStoolStoryStoveStrategyStreetStrikeStrongStruggleStudentStuffStumbleStyleSubjectSubmitSubwaySuccessSuchSuddenSufferSugarSuggestSuitSummerSunSunnySunsetSuperSupplySupremeSureSurfaceSurgeSurpriseSurroundSurveySuspectSustainSwallowSwampSwapSwarmSwearSweetSwiftSwimSwingSwitchSwordSymbolSymptomSyrupSystemTableTackleTagTailTalentTalkTankTapeTargetTaskTasteTattooTaxiTeachTeamTellTenTenantTennisTentTermTestTextThankThatThemeThenTheoryThereTheyThingThisThoughtThreeThriveThrowThumbThunderTicketTideTigerTiltTimberTimeTinyTipTiredTissueTitleToastTobaccoTodayToddlerToeTogetherToiletTokenTomatoTomorrowToneTongueTonightToolToothTopTopicToppleTorchTornadoTortoiseTossTotalTouristTowardTowerTownToyTrackTradeTrafficTragicTrainTransferTrapTrashTravelTrayTreatTreeTrendTrialTribeTrickTriggerTrimTripTrophyTroubleTruckTrueTrulyTrumpetTrustTruthTryTubeTuitionTumbleTunaTunnelTurkeyTurnTurtleTwelveTwentyTwiceTwinTwistTwoTypeTypicalUglyUmbrellaUnableUnawareUncleUncoverUnderUndoUnfairUnfoldUnhappyUniformUniqueUnitUniverseUnknownUnlockUntilUnusualUnveilUpdateUpgradeUpholdUponUpperUpsetUrbanUrgeUsageUseUsedUsefulUselessUsualUtilityVacantVacuumVagueValidValleyValveVanVanishVaporVariousVastVaultVehicleVelvetVendorVentureVenueVerbVerifyVersionVeryVesselVeteranViableVibrantViciousVictoryVideoViewVillageVintageViolinVirtualVirusVisaVisitVisualVitalVividVocalVoiceVoidVolcanoVolumeVoteVoyageWageWagonWaitWalkWallWalnutWantWarfareWarmWarriorWashWaspWasteWaterWaveWayWealthWeaponWearWeaselWeatherWebWeddingWeekendWeirdWelcomeWestWetWhaleWhatWheatWheelWhenWhereWhipWhisperWideWidthWifeWildWillWinWindowWineWingWinkWinnerWinterWireWisdomWiseWishWitnessWolfWomanWonderWoodWoolWordWorkWorldWorryWorthWrapWreckWrestleWristWriteWrongYardYearYellowYouYoungYouthZebraZeroZoneZoo";let Ia=null;function Ol(r){if(Ia==null&&(Ia=by.replace(/([A-Z])/g," $1").toLowerCase().substring(1).split(" "),oi.check(r)!=="0x3c8acc1e7b08d8e76f9fda015ef48dc8c710a73cb7e0f77b2c18a9b5a7adde60"))throw Ia=null,new Error("BIP39 Wordlist for en (English) FAILED")}class gy extends oi{constructor(){super("en")}getWord(e){return Ol(this),Ia[e]}getWordIndex(e){return Ol(this),Ia.indexOf(e)}}const p0=new gy;oi.register(p0);const Ll={en:p0},wy="hdnode/5.7.0",Da=new j(wy),vy=O.from("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Ty=Me("Bitcoin seed"),Nr=2147483648;function f0(r){return(1<<r)-1<<8-r}function Ay(r){return(1<<r)-1}function yi(r){return ze(ge(r),32)}function Ul(r){return Yr.encode(ct([r,gt(Kn(Kn(r)),0,4)]))}function Xc(r){if(r==null)return Ll.en;if(typeof r=="string"){const e=Ll[r];return e==null&&Da.throwArgumentError("unknown locale","wordlist",r),e}return r}const Sr={},Jr="m/44'/60'/0'/0/0";class Mt{constructor(e,t,n,a,i,s,o,l){if(e!==Sr)throw new Error("HDNode constructor cannot be called directly");if(t){const c=new Ea(t);ee(this,"privateKey",c.privateKey),ee(this,"publicKey",c.compressedPublicKey)}else ee(this,"privateKey",null),ee(this,"publicKey",ge(n));ee(this,"parentFingerprint",a),ee(this,"fingerprint",gt(yy(Kn(this.publicKey)),0,4)),ee(this,"address",Hr(this.publicKey)),ee(this,"chainCode",i),ee(this,"index",s),ee(this,"depth",o),l==null?(ee(this,"mnemonic",null),ee(this,"path",null)):typeof l=="string"?(ee(this,"mnemonic",null),ee(this,"path",l)):(ee(this,"mnemonic",l),ee(this,"path",l.path))}get extendedKey(){if(this.depth>=256)throw new Error("Depth too large!");return Ul(ct([this.privateKey!=null?"0x0488ADE4":"0x0488B21E",ge(this.depth),this.parentFingerprint,ze(ge(this.index),4),this.chainCode,this.privateKey!=null?ct(["0x00",this.privateKey]):this.publicKey]))}neuter(){return new Mt(Sr,null,this.publicKey,this.parentFingerprint,this.chainCode,this.index,this.depth,this.path)}_derive(e){if(e>4294967295)throw new Error("invalid index - "+String(e));let t=this.path;t&&(t+="/"+(e&~Nr));const n=new Uint8Array(37);if(e&Nr){if(!this.privateKey)throw new Error("cannot derive child of neutered node");n.set(ce(this.privateKey),1),t&&(t+="'")}else n.set(ce(this.publicKey));for(let d=24;d>=0;d-=8)n[33+(d>>3)]=e>>24-d&255;const a=ce(Li(Ma.sha512,this.chainCode,n)),i=a.slice(0,32),s=a.slice(32);let o=null,l=null;this.privateKey?o=yi(O.from(i).add(this.privateKey).mod(vy)):l=new Ea(ge(i))._addPoint(this.publicKey);let c=t;const u=this.mnemonic;return u&&(c=Object.freeze({phrase:u.phrase,path:t,locale:u.locale||"en"})),new Mt(Sr,o,l,this.fingerprint,yi(s),e,this.depth+1,c)}derivePath(e){const t=e.split("/");if(t.length===0||t[0]==="m"&&this.depth!==0)throw new Error("invalid path - "+e);t[0]==="m"&&t.shift();let n=this;for(let a=0;a<t.length;a++){const i=t[a];if(i.match(/^[0-9]+'$/)){const s=parseInt(i.substring(0,i.length-1));if(s>=Nr)throw new Error("invalid path index - "+i);n=n._derive(Nr+s)}else if(i.match(/^[0-9]+$/)){const s=parseInt(i);if(s>=Nr)throw new Error("invalid path index - "+i);n=n._derive(s)}else throw new Error("invalid path component - "+i)}return n}static _fromSeed(e,t){const n=ce(e);if(n.length<16||n.length>64)throw new Error("invalid seed");const a=ce(Li(Ma.sha512,Ty,n));return new Mt(Sr,yi(a.slice(0,32)),null,"0x00000000",yi(a.slice(32)),0,0,t)}static fromMnemonic(e,t,n){return n=Xc(n),e=Eo(Co(e,n),n),Mt._fromSeed(h0(e,t),{phrase:e,path:"m",locale:n.locale})}static fromSeed(e){return Mt._fromSeed(e,null)}static fromExtendedKey(e){const t=Yr.decode(e);(t.length!==82||Ul(t.slice(0,78))!==e)&&Da.throwArgumentError("invalid extended key","extendedKey","[REDACTED]");const n=t[4],a=ge(t.slice(5,9)),i=parseInt(ge(t.slice(9,13)).substring(2),16),s=ge(t.slice(13,45)),o=t.slice(45,78);switch(ge(t.slice(0,4))){case"0x0488b21e":case"0x043587cf":return new Mt(Sr,null,ge(o),a,s,i,n,null);case"0x0488ade4":case"0x04358394 ":if(o[0]!==0)break;return new Mt(Sr,ge(o.slice(1)),null,a,s,i,n,null)}return Da.throwArgumentError("invalid extended key","extendedKey","[REDACTED]")}}function h0(r,e){e||(e="");const t=Me("mnemonic"+e,lc.NFKD);return Qc(Me(r,lc.NFKD),t,2048,64,"sha512")}function Co(r,e){e=Xc(e),Da.checkNormalize();const t=e.split(r);if(t.length%3!==0)throw new Error("invalid mnemonic");const n=ce(new Uint8Array(Math.ceil(11*t.length/8)));let a=0;for(let c=0;c<t.length;c++){let u=e.getWordIndex(t[c].normalize("NFKD"));if(u===-1)throw new Error("invalid mnemonic");for(let d=0;d<11;d++)u&1<<10-d&&(n[a>>3]|=1<<7-a%8),a++}const i=32*t.length/3,s=t.length/3,o=f0(s);if((ce(Kn(n.slice(0,i/8)))[0]&o)!==(n[n.length-1]&o))throw new Error("invalid checksum");return ge(n.slice(0,i/8))}function Eo(r,e){if(e=Xc(e),r=ce(r),r.length%4!==0||r.length<16||r.length>32)throw new Error("invalid entropy");const t=[0];let n=11;for(let s=0;s<r.length;s++)n>8?(t[t.length-1]<<=8,t[t.length-1]|=r[s],n-=8):(t[t.length-1]<<=n,t[t.length-1]|=r[s]>>8-n,t.push(r[s]&Ay(8-n)),n+=3);const a=r.length/4,i=ce(Kn(r))[0]&f0(a);return t[t.length-1]<<=a,t[t.length-1]|=i>>8-a,e.join(t.map(s=>e.getWord(s)))}function Cy(r,e){try{return Co(r,e),!0}catch{}return!1}function Ey(r){return(typeof r!="number"||r<0||r>=Nr||r%1)&&Da.throwArgumentError("invalid account index","index",r),`m/44'/60'/${r}'/0/0`}const p6=Object.freeze(Object.defineProperty({__proto__:null,HDNode:Mt,defaultPath:Jr,entropyToMnemonic:Eo,getAccountPath:Ey,isValidMnemonic:Cy,mnemonicToEntropy:Co,mnemonicToSeed:h0},Symbol.toStringTag,{value:"Module"})),_y="random/5.7.0",dc=new j(_y);function ky(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof globalThis<"u")return globalThis;throw new Error("unable to locate globalThis object")}const Hl=ky();let Si=Hl.crypto||Hl.msCrypto;(!Si||!Si.getRandomValues)&&(dc.warn("WARNING: Missing strong random number source"),Si={getRandomValues:function(r){return dc.throwError("no secure random source avaialble",j.errors.UNSUPPORTED_OPERATION,{operation:"crypto.getRandomValues"})}});function ga(r){(r<=0||r>1024||r%1||r!=r)&&dc.throwArgumentError("invalid length","length",r);const e=new Uint8Array(r);return Si.getRandomValues(e),ce(e)}function Iy(r){r=r.slice();for(let e=r.length-1;e>0;e--){const t=Math.floor(Math.random()*(e+1)),n=r[e];r[e]=r[t],r[t]=n}return r}var pc={},Sy={get exports(){return pc},set exports(r){pc=r}};(function(r,e){(function(t){function n(v){return parseInt(v)===v}function a(v){if(!n(v.length))return!1;for(var B=0;B<v.length;B++)if(!n(v[B])||v[B]<0||v[B]>255)return!1;return!0}function i(v,B){if(v.buffer&&ArrayBuffer.isView(v)&&v.name==="Uint8Array")return B&&(v.slice?v=v.slice():v=Array.prototype.slice.call(v)),v;if(Array.isArray(v)){if(!a(v))throw new Error("Array contains invalid value: "+v);return new Uint8Array(v)}if(n(v.length)&&a(v))return new Uint8Array(v);throw new Error("unsupported array-like object")}function s(v){return new Uint8Array(v)}function o(v,B,N,P,H){(P!=null||H!=null)&&(v.slice?v=v.slice(P,H):v=Array.prototype.slice.call(v,P,H)),B.set(v,N)}var l=function(){function v(N){var P=[],H=0;for(N=encodeURI(N);H<N.length;){var Y=N.charCodeAt(H++);Y===37?(P.push(parseInt(N.substr(H,2),16)),H+=2):P.push(Y)}return i(P)}function B(N){for(var P=[],H=0;H<N.length;){var Y=N[H];Y<128?(P.push(String.fromCharCode(Y)),H++):Y>191&&Y<224?(P.push(String.fromCharCode((Y&31)<<6|N[H+1]&63)),H+=2):(P.push(String.fromCharCode((Y&15)<<12|(N[H+1]&63)<<6|N[H+2]&63)),H+=3)}return P.join("")}return{toBytes:v,fromBytes:B}}(),c=function(){function v(P){for(var H=[],Y=0;Y<P.length;Y+=2)H.push(parseInt(P.substr(Y,2),16));return H}var B="0123456789abcdef";function N(P){for(var H=[],Y=0;Y<P.length;Y++){var we=P[Y];H.push(B[(we&240)>>4]+B[we&15])}return H.join("")}return{toBytes:v,fromBytes:N}}(),u={16:10,24:12,32:14},d=[1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145],h=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],m=[82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125],b=[3328402341,4168907908,4000806809,4135287693,4294111757,3597364157,3731845041,2445657428,1613770832,33620227,3462883241,1445669757,3892248089,3050821474,1303096294,3967186586,2412431941,528646813,2311702848,4202528135,4026202645,2992200171,2387036105,4226871307,1101901292,3017069671,1604494077,1169141738,597466303,1403299063,3832705686,2613100635,1974974402,3791519004,1033081774,1277568618,1815492186,2118074177,4126668546,2211236943,1748251740,1369810420,3521504564,4193382664,3799085459,2883115123,1647391059,706024767,134480908,2512897874,1176707941,2646852446,806885416,932615841,168101135,798661301,235341577,605164086,461406363,3756188221,3454790438,1311188841,2142417613,3933566367,302582043,495158174,1479289972,874125870,907746093,3698224818,3025820398,1537253627,2756858614,1983593293,3084310113,2108928974,1378429307,3722699582,1580150641,327451799,2790478837,3117535592,0,3253595436,1075847264,3825007647,2041688520,3059440621,3563743934,2378943302,1740553945,1916352843,2487896798,2555137236,2958579944,2244988746,3151024235,3320835882,1336584933,3992714006,2252555205,2588757463,1714631509,293963156,2319795663,3925473552,67240454,4269768577,2689618160,2017213508,631218106,1269344483,2723238387,1571005438,2151694528,93294474,1066570413,563977660,1882732616,4059428100,1673313503,2008463041,2950355573,1109467491,537923632,3858759450,4260623118,3218264685,2177748300,403442708,638784309,3287084079,3193921505,899127202,2286175436,773265209,2479146071,1437050866,4236148354,2050833735,3362022572,3126681063,840505643,3866325909,3227541664,427917720,2655997905,2749160575,1143087718,1412049534,999329963,193497219,2353415882,3354324521,1807268051,672404540,2816401017,3160301282,369822493,2916866934,3688947771,1681011286,1949973070,336202270,2454276571,201721354,1210328172,3093060836,2680341085,3184776046,1135389935,3294782118,965841320,831886756,3554993207,4068047243,3588745010,2345191491,1849112409,3664604599,26054028,2983581028,2622377682,1235855840,3630984372,2891339514,4092916743,3488279077,3395642799,4101667470,1202630377,268961816,1874508501,4034427016,1243948399,1546530418,941366308,1470539505,1941222599,2546386513,3421038627,2715671932,3899946140,1042226977,2521517021,1639824860,227249030,260737669,3765465232,2084453954,1907733956,3429263018,2420656344,100860677,4160157185,470683154,3261161891,1781871967,2924959737,1773779408,394692241,2579611992,974986535,664706745,3655459128,3958962195,731420851,571543859,3530123707,2849626480,126783113,865375399,765172662,1008606754,361203602,3387549984,2278477385,2857719295,1344809080,2782912378,59542671,1503764984,160008576,437062935,1707065306,3622233649,2218934982,3496503480,2185314755,697932208,1512910199,504303377,2075177163,2824099068,1841019862,739644986],x=[2781242211,2230877308,2582542199,2381740923,234877682,3184946027,2984144751,1418839493,1348481072,50462977,2848876391,2102799147,434634494,1656084439,3863849899,2599188086,1167051466,2636087938,1082771913,2281340285,368048890,3954334041,3381544775,201060592,3963727277,1739838676,4250903202,3930435503,3206782108,4149453988,2531553906,1536934080,3262494647,484572669,2923271059,1783375398,1517041206,1098792767,49674231,1334037708,1550332980,4098991525,886171109,150598129,2481090929,1940642008,1398944049,1059722517,201851908,1385547719,1699095331,1587397571,674240536,2704774806,252314885,3039795866,151914247,908333586,2602270848,1038082786,651029483,1766729511,3447698098,2682942837,454166793,2652734339,1951935532,775166490,758520603,3000790638,4004797018,4217086112,4137964114,1299594043,1639438038,3464344499,2068982057,1054729187,1901997871,2534638724,4121318227,1757008337,0,750906861,1614815264,535035132,3363418545,3988151131,3201591914,1183697867,3647454910,1265776953,3734260298,3566750796,3903871064,1250283471,1807470800,717615087,3847203498,384695291,3313910595,3617213773,1432761139,2484176261,3481945413,283769337,100925954,2180939647,4037038160,1148730428,3123027871,3813386408,4087501137,4267549603,3229630528,2315620239,2906624658,3156319645,1215313976,82966005,3747855548,3245848246,1974459098,1665278241,807407632,451280895,251524083,1841287890,1283575245,337120268,891687699,801369324,3787349855,2721421207,3431482436,959321879,1469301956,4065699751,2197585534,1199193405,2898814052,3887750493,724703513,2514908019,2696962144,2551808385,3516813135,2141445340,1715741218,2119445034,2872807568,2198571144,3398190662,700968686,3547052216,1009259540,2041044702,3803995742,487983883,1991105499,1004265696,1449407026,1316239930,504629770,3683797321,168560134,1816667172,3837287516,1570751170,1857934291,4014189740,2797888098,2822345105,2754712981,936633572,2347923833,852879335,1133234376,1500395319,3084545389,2348912013,1689376213,3533459022,3762923945,3034082412,4205598294,133428468,634383082,2949277029,2398386810,3913789102,403703816,3580869306,2297460856,1867130149,1918643758,607656988,4049053350,3346248884,1368901318,600565992,2090982877,2632479860,557719327,3717614411,3697393085,2249034635,2232388234,2430627952,1115438654,3295786421,2865522278,3633334344,84280067,33027830,303828494,2747425121,1600795957,4188952407,3496589753,2434238086,1486471617,658119965,3106381470,953803233,334231800,3005978776,857870609,3151128937,1890179545,2298973838,2805175444,3056442267,574365214,2450884487,550103529,1233637070,4289353045,2018519080,2057691103,2399374476,4166623649,2148108681,387583245,3664101311,836232934,3330556482,3100665960,3280093505,2955516313,2002398509,287182607,3413881008,4238890068,3597515707,975967766],f=[1671808611,2089089148,2006576759,2072901243,4061003762,1807603307,1873927791,3310653893,810573872,16974337,1739181671,729634347,4263110654,3613570519,2883997099,1989864566,3393556426,2191335298,3376449993,2106063485,4195741690,1508618841,1204391495,4027317232,2917941677,3563566036,2734514082,2951366063,2629772188,2767672228,1922491506,3227229120,3082974647,4246528509,2477669779,644500518,911895606,1061256767,4144166391,3427763148,878471220,2784252325,3845444069,4043897329,1905517169,3631459288,827548209,356461077,67897348,3344078279,593839651,3277757891,405286936,2527147926,84871685,2595565466,118033927,305538066,2157648768,3795705826,3945188843,661212711,2999812018,1973414517,152769033,2208177539,745822252,439235610,455947803,1857215598,1525593178,2700827552,1391895634,994932283,3596728278,3016654259,695947817,3812548067,795958831,2224493444,1408607827,3513301457,0,3979133421,543178784,4229948412,2982705585,1542305371,1790891114,3410398667,3201918910,961245753,1256100938,1289001036,1491644504,3477767631,3496721360,4012557807,2867154858,4212583931,1137018435,1305975373,861234739,2241073541,1171229253,4178635257,33948674,2139225727,1357946960,1011120188,2679776671,2833468328,1374921297,2751356323,1086357568,2408187279,2460827538,2646352285,944271416,4110742005,3168756668,3066132406,3665145818,560153121,271589392,4279952895,4077846003,3530407890,3444343245,202643468,322250259,3962553324,1608629855,2543990167,1154254916,389623319,3294073796,2817676711,2122513534,1028094525,1689045092,1575467613,422261273,1939203699,1621147744,2174228865,1339137615,3699352540,577127458,712922154,2427141008,2290289544,1187679302,3995715566,3100863416,339486740,3732514782,1591917662,186455563,3681988059,3762019296,844522546,978220090,169743370,1239126601,101321734,611076132,1558493276,3260915650,3547250131,2901361580,1655096418,2443721105,2510565781,3828863972,2039214713,3878868455,3359869896,928607799,1840765549,2374762893,3580146133,1322425422,2850048425,1823791212,1459268694,4094161908,3928346602,1706019429,2056189050,2934523822,135794696,3134549946,2022240376,628050469,779246638,472135708,2800834470,3032970164,3327236038,3894660072,3715932637,1956440180,522272287,1272813131,3185336765,2340818315,2323976074,1888542832,1044544574,3049550261,1722469478,1222152264,50660867,4127324150,236067854,1638122081,895445557,1475980887,3117443513,2257655686,3243809217,489110045,2662934430,3778599393,4162055160,2561878936,288563729,1773916777,3648039385,2391345038,2493985684,2612407707,505560094,2274497927,3911240169,3460925390,1442818645,678973480,3749357023,2358182796,2717407649,2306869641,219617805,3218761151,3862026214,1120306242,1756942440,1103331905,2578459033,762796589,252780047,2966125488,1425844308,3151392187,372911126],w=[1667474886,2088535288,2004326894,2071694838,4075949567,1802223062,1869591006,3318043793,808472672,16843522,1734846926,724270422,4278065639,3621216949,2880169549,1987484396,3402253711,2189597983,3385409673,2105378810,4210693615,1499065266,1195886990,4042263547,2913856577,3570689971,2728590687,2947541573,2627518243,2762274643,1920112356,3233831835,3082273397,4261223649,2475929149,640051788,909531756,1061110142,4160160501,3435941763,875846760,2779116625,3857003729,4059105529,1903268834,3638064043,825316194,353713962,67374088,3351728789,589522246,3284360861,404236336,2526454071,84217610,2593830191,117901582,303183396,2155911963,3806477791,3958056653,656894286,2998062463,1970642922,151591698,2206440989,741110872,437923380,454765878,1852748508,1515908788,2694904667,1381168804,993742198,3604373943,3014905469,690584402,3823320797,791638366,2223281939,1398011302,3520161977,0,3991743681,538992704,4244381667,2981218425,1532751286,1785380564,3419096717,3200178535,960056178,1246420628,1280103576,1482221744,3486468741,3503319995,4025428677,2863326543,4227536621,1128514950,1296947098,859002214,2240123921,1162203018,4193849577,33687044,2139062782,1347481760,1010582648,2678045221,2829640523,1364325282,2745433693,1077985408,2408548869,2459086143,2644360225,943212656,4126475505,3166494563,3065430391,3671750063,555836226,269496352,4294908645,4092792573,3537006015,3452783745,202118168,320025894,3974901699,1600119230,2543297077,1145359496,387397934,3301201811,2812801621,2122220284,1027426170,1684319432,1566435258,421079858,1936954854,1616945344,2172753945,1330631070,3705438115,572679748,707427924,2425400123,2290647819,1179044492,4008585671,3099120491,336870440,3739122087,1583276732,185277718,3688593069,3772791771,842159716,976899700,168435220,1229577106,101059084,606366792,1549591736,3267517855,3553849021,2897014595,1650632388,2442242105,2509612081,3840161747,2038008818,3890688725,3368567691,926374254,1835907034,2374863873,3587531953,1313788572,2846482505,1819063512,1448540844,4109633523,3941213647,1701162954,2054852340,2930698567,134748176,3132806511,2021165296,623210314,774795868,471606328,2795958615,3031746419,3334885783,3907527627,3722280097,1953799400,522133822,1263263126,3183336545,2341176845,2324333839,1886425312,1044267644,3048588401,1718004428,1212733584,50529542,4143317495,235803164,1633788866,892690282,1465383342,3115962473,2256965911,3250673817,488449850,2661202215,3789633753,4177007595,2560144171,286339874,1768537042,3654906025,2391705863,2492770099,2610673197,505291324,2273808917,3924369609,3469625735,1431699370,673740880,3755965093,2358021891,2711746649,2307489801,218961690,3217021541,3873845719,1111672452,1751693520,1094828930,2576986153,757954394,252645662,2964376443,1414855848,3149649517,370555436],A=[1374988112,2118214995,437757123,975658646,1001089995,530400753,2902087851,1273168787,540080725,2910219766,2295101073,4110568485,1340463100,3307916247,641025152,3043140495,3736164937,632953703,1172967064,1576976609,3274667266,2169303058,2370213795,1809054150,59727847,361929877,3211623147,2505202138,3569255213,1484005843,1239443753,2395588676,1975683434,4102977912,2572697195,666464733,3202437046,4035489047,3374361702,2110667444,1675577880,3843699074,2538681184,1649639237,2976151520,3144396420,4269907996,4178062228,1883793496,2403728665,2497604743,1383856311,2876494627,1917518562,3810496343,1716890410,3001755655,800440835,2261089178,3543599269,807962610,599762354,33778362,3977675356,2328828971,2809771154,4077384432,1315562145,1708848333,101039829,3509871135,3299278474,875451293,2733856160,92987698,2767645557,193195065,1080094634,1584504582,3178106961,1042385657,2531067453,3711829422,1306967366,2438237621,1908694277,67556463,1615861247,429456164,3602770327,2302690252,1742315127,2968011453,126454664,3877198648,2043211483,2709260871,2084704233,4169408201,0,159417987,841739592,504459436,1817866830,4245618683,260388950,1034867998,908933415,168810852,1750902305,2606453969,607530554,202008497,2472011535,3035535058,463180190,2160117071,1641816226,1517767529,470948374,3801332234,3231722213,1008918595,303765277,235474187,4069246893,766945465,337553864,1475418501,2943682380,4003061179,2743034109,4144047775,1551037884,1147550661,1543208500,2336434550,3408119516,3069049960,3102011747,3610369226,1113818384,328671808,2227573024,2236228733,3535486456,2935566865,3341394285,496906059,3702665459,226906860,2009195472,733156972,2842737049,294930682,1206477858,2835123396,2700099354,1451044056,573804783,2269728455,3644379585,2362090238,2564033334,2801107407,2776292904,3669462566,1068351396,742039012,1350078989,1784663195,1417561698,4136440770,2430122216,775550814,2193862645,2673705150,1775276924,1876241833,3475313331,3366754619,270040487,3902563182,3678124923,3441850377,1851332852,3969562369,2203032232,3868552805,2868897406,566021896,4011190502,3135740889,1248802510,3936291284,699432150,832877231,708780849,3332740144,899835584,1951317047,4236429990,3767586992,866637845,4043610186,1106041591,2144161806,395441711,1984812685,1139781709,3433712980,3835036895,2664543715,1282050075,3240894392,1181045119,2640243204,25965917,4203181171,4211818798,3009879386,2463879762,3910161971,1842759443,2597806476,933301370,1509430414,3943906441,3467192302,3076639029,3776767469,2051518780,2631065433,1441952575,404016761,1942435775,1408749034,1610459739,3745345300,2017778566,3400528769,3110650942,941896748,3265478751,371049330,3168937228,675039627,4279080257,967311729,135050206,3635733660,1683407248,2076935265,3576870512,1215061108,3501741890],T=[1347548327,1400783205,3273267108,2520393566,3409685355,4045380933,2880240216,2471224067,1428173050,4138563181,2441661558,636813900,4233094615,3620022987,2149987652,2411029155,1239331162,1730525723,2554718734,3781033664,46346101,310463728,2743944855,3328955385,3875770207,2501218972,3955191162,3667219033,768917123,3545789473,692707433,1150208456,1786102409,2029293177,1805211710,3710368113,3065962831,401639597,1724457132,3028143674,409198410,2196052529,1620529459,1164071807,3769721975,2226875310,486441376,2499348523,1483753576,428819965,2274680428,3075636216,598438867,3799141122,1474502543,711349675,129166120,53458370,2592523643,2782082824,4063242375,2988687269,3120694122,1559041666,730517276,2460449204,4042459122,2706270690,3446004468,3573941694,533804130,2328143614,2637442643,2695033685,839224033,1973745387,957055980,2856345839,106852767,1371368976,4181598602,1033297158,2933734917,1179510461,3046200461,91341917,1862534868,4284502037,605657339,2547432937,3431546947,2003294622,3182487618,2282195339,954669403,3682191598,1201765386,3917234703,3388507166,0,2198438022,1211247597,2887651696,1315723890,4227665663,1443857720,507358933,657861945,1678381017,560487590,3516619604,975451694,2970356327,261314535,3535072918,2652609425,1333838021,2724322336,1767536459,370938394,182621114,3854606378,1128014560,487725847,185469197,2918353863,3106780840,3356761769,2237133081,1286567175,3152976349,4255350624,2683765030,3160175349,3309594171,878443390,1988838185,3704300486,1756818940,1673061617,3403100636,272786309,1075025698,545572369,2105887268,4174560061,296679730,1841768865,1260232239,4091327024,3960309330,3497509347,1814803222,2578018489,4195456072,575138148,3299409036,446754879,3629546796,4011996048,3347532110,3252238545,4270639778,915985419,3483825537,681933534,651868046,2755636671,3828103837,223377554,2607439820,1649704518,3270937875,3901806776,1580087799,4118987695,3198115200,2087309459,2842678573,3016697106,1003007129,2802849917,1860738147,2077965243,164439672,4100872472,32283319,2827177882,1709610350,2125135846,136428751,3874428392,3652904859,3460984630,3572145929,3593056380,2939266226,824852259,818324884,3224740454,930369212,2801566410,2967507152,355706840,1257309336,4148292826,243256656,790073846,2373340630,1296297904,1422699085,3756299780,3818836405,457992840,3099667487,2135319889,77422314,1560382517,1945798516,788204353,1521706781,1385356242,870912086,325965383,2358957921,2050466060,2388260884,2313884476,4006521127,901210569,3990953189,1014646705,1503449823,1062597235,2031621326,3212035895,3931371469,1533017514,350174575,2256028891,2177544179,1052338372,741876788,1606591296,1914052035,213705253,2334669897,1107234197,1899603969,3725069491,2631447780,2422494913,1635502980,1893020342,1950903388,1120974935],E=[2807058932,1699970625,2764249623,1586903591,1808481195,1173430173,1487645946,59984867,4199882800,1844882806,1989249228,1277555970,3623636965,3419915562,1149249077,2744104290,1514790577,459744698,244860394,3235995134,1963115311,4027744588,2544078150,4190530515,1608975247,2627016082,2062270317,1507497298,2200818878,567498868,1764313568,3359936201,2305455554,2037970062,1047239e3,1910319033,1337376481,2904027272,2892417312,984907214,1243112415,830661914,861968209,2135253587,2011214180,2927934315,2686254721,731183368,1750626376,4246310725,1820824798,4172763771,3542330227,48394827,2404901663,2871682645,671593195,3254988725,2073724613,145085239,2280796200,2779915199,1790575107,2187128086,472615631,3029510009,4075877127,3802222185,4107101658,3201631749,1646252340,4270507174,1402811438,1436590835,3778151818,3950355702,3963161475,4020912224,2667994737,273792366,2331590177,104699613,95345982,3175501286,2377486676,1560637892,3564045318,369057872,4213447064,3919042237,1137477952,2658625497,1119727848,2340947849,1530455833,4007360968,172466556,266959938,516552836,0,2256734592,3980931627,1890328081,1917742170,4294704398,945164165,3575528878,958871085,3647212047,2787207260,1423022939,775562294,1739656202,3876557655,2530391278,2443058075,3310321856,547512796,1265195639,437656594,3121275539,719700128,3762502690,387781147,218828297,3350065803,2830708150,2848461854,428169201,122466165,3720081049,1627235199,648017665,4122762354,1002783846,2117360635,695634755,3336358691,4234721005,4049844452,3704280881,2232435299,574624663,287343814,612205898,1039717051,840019705,2708326185,793451934,821288114,1391201670,3822090177,376187827,3113855344,1224348052,1679968233,2361698556,1058709744,752375421,2431590963,1321699145,3519142200,2734591178,188127444,2177869557,3727205754,2384911031,3215212461,2648976442,2450346104,3432737375,1180849278,331544205,3102249176,4150144569,2952102595,2159976285,2474404304,766078933,313773861,2570832044,2108100632,1668212892,3145456443,2013908262,418672217,3070356634,2594734927,1852171925,3867060991,3473416636,3907448597,2614737639,919489135,164948639,2094410160,2997825956,590424639,2486224549,1723872674,3157750862,3399941250,3501252752,3625268135,2555048196,3673637356,1343127501,4130281361,3599595085,2957853679,1297403050,81781910,3051593425,2283490410,532201772,1367295589,3926170974,895287692,1953757831,1093597963,492483431,3528626907,1446242576,1192455638,1636604631,209336225,344873464,1015671571,669961897,3375740769,3857572124,2973530695,3747192018,1933530610,3464042516,935293895,3454686199,2858115069,1863638845,3683022916,4085369519,3292445032,875313188,1080017571,3279033885,621591778,1233856572,2504130317,24197544,3017672716,3835484340,3247465558,2220981195,3060847922,1551124588,1463996600],I=[4104605777,1097159550,396673818,660510266,2875968315,2638606623,4200115116,3808662347,821712160,1986918061,3430322568,38544885,3856137295,718002117,893681702,1654886325,2975484382,3122358053,3926825029,4274053469,796197571,1290801793,1184342925,3556361835,2405426947,2459735317,1836772287,1381620373,3196267988,1948373848,3764988233,3385345166,3263785589,2390325492,1480485785,3111247143,3780097726,2293045232,548169417,3459953789,3746175075,439452389,1362321559,1400849762,1685577905,1806599355,2174754046,137073913,1214797936,1174215055,3731654548,2079897426,1943217067,1258480242,529487843,1437280870,3945269170,3049390895,3313212038,923313619,679998e3,3215307299,57326082,377642221,3474729866,2041877159,133361907,1776460110,3673476453,96392454,878845905,2801699524,777231668,4082475170,2330014213,4142626212,2213296395,1626319424,1906247262,1846563261,562755902,3708173718,1040559837,3871163981,1418573201,3294430577,114585348,1343618912,2566595609,3186202582,1078185097,3651041127,3896688048,2307622919,425408743,3371096953,2081048481,1108339068,2216610296,0,2156299017,736970802,292596766,1517440620,251657213,2235061775,2933202493,758720310,265905162,1554391400,1532285339,908999204,174567692,1474760595,4002861748,2610011675,3234156416,3693126241,2001430874,303699484,2478443234,2687165888,585122620,454499602,151849742,2345119218,3064510765,514443284,4044981591,1963412655,2581445614,2137062819,19308535,1928707164,1715193156,4219352155,1126790795,600235211,3992742070,3841024952,836553431,1669664834,2535604243,3323011204,1243905413,3141400786,4180808110,698445255,2653899549,2989552604,2253581325,3252932727,3004591147,1891211689,2487810577,3915653703,4237083816,4030667424,2100090966,865136418,1229899655,953270745,3399679628,3557504664,4118925222,2061379749,3079546586,2915017791,983426092,2022837584,1607244650,2118541908,2366882550,3635996816,972512814,3283088770,1568718495,3499326569,3576539503,621982671,2895723464,410887952,2623762152,1002142683,645401037,1494807662,2595684844,1335535747,2507040230,4293295786,3167684641,367585007,3885750714,1865862730,2668221674,2960971305,2763173681,1059270954,2777952454,2724642869,1320957812,2194319100,2429595872,2815956275,77089521,3973773121,3444575871,2448830231,1305906550,4021308739,2857194700,2516901860,3518358430,1787304780,740276417,1699839814,1592394909,2352307457,2272556026,188821243,1729977011,3687994002,274084841,3594982253,3613494426,2701949495,4162096729,322734571,2837966542,1640576439,484830689,1202797690,3537852828,4067639125,349075736,3342319475,4157467219,4255800159,1030690015,1155237496,2951971274,1757691577,607398968,2738905026,499347990,3794078908,1011452712,227885567,2818666809,213114376,3034881240,1455525988,3414450555,850817237,1817998408,3092726480],D=[0,235474187,470948374,303765277,941896748,908933415,607530554,708780849,1883793496,2118214995,1817866830,1649639237,1215061108,1181045119,1417561698,1517767529,3767586992,4003061179,4236429990,4069246893,3635733660,3602770327,3299278474,3400528769,2430122216,2664543715,2362090238,2193862645,2835123396,2801107407,3035535058,3135740889,3678124923,3576870512,3341394285,3374361702,3810496343,3977675356,4279080257,4043610186,2876494627,2776292904,3076639029,3110650942,2472011535,2640243204,2403728665,2169303058,1001089995,899835584,666464733,699432150,59727847,226906860,530400753,294930682,1273168787,1172967064,1475418501,1509430414,1942435775,2110667444,1876241833,1641816226,2910219766,2743034109,2976151520,3211623147,2505202138,2606453969,2302690252,2269728455,3711829422,3543599269,3240894392,3475313331,3843699074,3943906441,4178062228,4144047775,1306967366,1139781709,1374988112,1610459739,1975683434,2076935265,1775276924,1742315127,1034867998,866637845,566021896,800440835,92987698,193195065,429456164,395441711,1984812685,2017778566,1784663195,1683407248,1315562145,1080094634,1383856311,1551037884,101039829,135050206,437757123,337553864,1042385657,807962610,573804783,742039012,2531067453,2564033334,2328828971,2227573024,2935566865,2700099354,3001755655,3168937228,3868552805,3902563182,4203181171,4102977912,3736164937,3501741890,3265478751,3433712980,1106041591,1340463100,1576976609,1408749034,2043211483,2009195472,1708848333,1809054150,832877231,1068351396,766945465,599762354,159417987,126454664,361929877,463180190,2709260871,2943682380,3178106961,3009879386,2572697195,2538681184,2236228733,2336434550,3509871135,3745345300,3441850377,3274667266,3910161971,3877198648,4110568485,4211818798,2597806476,2497604743,2261089178,2295101073,2733856160,2902087851,3202437046,2968011453,3936291284,3835036895,4136440770,4169408201,3535486456,3702665459,3467192302,3231722213,2051518780,1951317047,1716890410,1750902305,1113818384,1282050075,1584504582,1350078989,168810852,67556463,371049330,404016761,841739592,1008918595,775550814,540080725,3969562369,3801332234,4035489047,4269907996,3569255213,3669462566,3366754619,3332740144,2631065433,2463879762,2160117071,2395588676,2767645557,2868897406,3102011747,3069049960,202008497,33778362,270040487,504459436,875451293,975658646,675039627,641025152,2084704233,1917518562,1615861247,1851332852,1147550661,1248802510,1484005843,1451044056,933301370,967311729,733156972,632953703,260388950,25965917,328671808,496906059,1206477858,1239443753,1543208500,1441952575,2144161806,1908694277,1675577880,1842759443,3610369226,3644379585,3408119516,3307916247,4011190502,3776767469,4077384432,4245618683,2809771154,2842737049,3144396420,3043140495,2673705150,2438237621,2203032232,2370213795],F=[0,185469197,370938394,487725847,741876788,657861945,975451694,824852259,1483753576,1400783205,1315723890,1164071807,1950903388,2135319889,1649704518,1767536459,2967507152,3152976349,2801566410,2918353863,2631447780,2547432937,2328143614,2177544179,3901806776,3818836405,4270639778,4118987695,3299409036,3483825537,3535072918,3652904859,2077965243,1893020342,1841768865,1724457132,1474502543,1559041666,1107234197,1257309336,598438867,681933534,901210569,1052338372,261314535,77422314,428819965,310463728,3409685355,3224740454,3710368113,3593056380,3875770207,3960309330,4045380933,4195456072,2471224067,2554718734,2237133081,2388260884,3212035895,3028143674,2842678573,2724322336,4138563181,4255350624,3769721975,3955191162,3667219033,3516619604,3431546947,3347532110,2933734917,2782082824,3099667487,3016697106,2196052529,2313884476,2499348523,2683765030,1179510461,1296297904,1347548327,1533017514,1786102409,1635502980,2087309459,2003294622,507358933,355706840,136428751,53458370,839224033,957055980,605657339,790073846,2373340630,2256028891,2607439820,2422494913,2706270690,2856345839,3075636216,3160175349,3573941694,3725069491,3273267108,3356761769,4181598602,4063242375,4011996048,3828103837,1033297158,915985419,730517276,545572369,296679730,446754879,129166120,213705253,1709610350,1860738147,1945798516,2029293177,1239331162,1120974935,1606591296,1422699085,4148292826,4233094615,3781033664,3931371469,3682191598,3497509347,3446004468,3328955385,2939266226,2755636671,3106780840,2988687269,2198438022,2282195339,2501218972,2652609425,1201765386,1286567175,1371368976,1521706781,1805211710,1620529459,2105887268,1988838185,533804130,350174575,164439672,46346101,870912086,954669403,636813900,788204353,2358957921,2274680428,2592523643,2441661558,2695033685,2880240216,3065962831,3182487618,3572145929,3756299780,3270937875,3388507166,4174560061,4091327024,4006521127,3854606378,1014646705,930369212,711349675,560487590,272786309,457992840,106852767,223377554,1678381017,1862534868,1914052035,2031621326,1211247597,1128014560,1580087799,1428173050,32283319,182621114,401639597,486441376,768917123,651868046,1003007129,818324884,1503449823,1385356242,1333838021,1150208456,1973745387,2125135846,1673061617,1756818940,2970356327,3120694122,2802849917,2887651696,2637442643,2520393566,2334669897,2149987652,3917234703,3799141122,4284502037,4100872472,3309594171,3460984630,3545789473,3629546796,2050466060,1899603969,1814803222,1730525723,1443857720,1560382517,1075025698,1260232239,575138148,692707433,878443390,1062597235,243256656,91341917,409198410,325965383,3403100636,3252238545,3704300486,3620022987,3874428392,3990953189,4042459122,4227665663,2460449204,2578018489,2226875310,2411029155,3198115200,3046200461,2827177882,2743944855],W=[0,218828297,437656594,387781147,875313188,958871085,775562294,590424639,1750626376,1699970625,1917742170,2135253587,1551124588,1367295589,1180849278,1265195639,3501252752,3720081049,3399941250,3350065803,3835484340,3919042237,4270507174,4085369519,3102249176,3051593425,2734591178,2952102595,2361698556,2177869557,2530391278,2614737639,3145456443,3060847922,2708326185,2892417312,2404901663,2187128086,2504130317,2555048196,3542330227,3727205754,3375740769,3292445032,3876557655,3926170974,4246310725,4027744588,1808481195,1723872674,1910319033,2094410160,1608975247,1391201670,1173430173,1224348052,59984867,244860394,428169201,344873464,935293895,984907214,766078933,547512796,1844882806,1627235199,2011214180,2062270317,1507497298,1423022939,1137477952,1321699145,95345982,145085239,532201772,313773861,830661914,1015671571,731183368,648017665,3175501286,2957853679,2807058932,2858115069,2305455554,2220981195,2474404304,2658625497,3575528878,3625268135,3473416636,3254988725,3778151818,3963161475,4213447064,4130281361,3599595085,3683022916,3432737375,3247465558,3802222185,4020912224,4172763771,4122762354,3201631749,3017672716,2764249623,2848461854,2331590177,2280796200,2431590963,2648976442,104699613,188127444,472615631,287343814,840019705,1058709744,671593195,621591778,1852171925,1668212892,1953757831,2037970062,1514790577,1463996600,1080017571,1297403050,3673637356,3623636965,3235995134,3454686199,4007360968,3822090177,4107101658,4190530515,2997825956,3215212461,2830708150,2779915199,2256734592,2340947849,2627016082,2443058075,172466556,122466165,273792366,492483431,1047239e3,861968209,612205898,695634755,1646252340,1863638845,2013908262,1963115311,1446242576,1530455833,1277555970,1093597963,1636604631,1820824798,2073724613,1989249228,1436590835,1487645946,1337376481,1119727848,164948639,81781910,331544205,516552836,1039717051,821288114,669961897,719700128,2973530695,3157750862,2871682645,2787207260,2232435299,2283490410,2667994737,2450346104,3647212047,3564045318,3279033885,3464042516,3980931627,3762502690,4150144569,4199882800,3070356634,3121275539,2904027272,2686254721,2200818878,2384911031,2570832044,2486224549,3747192018,3528626907,3310321856,3359936201,3950355702,3867060991,4049844452,4234721005,1739656202,1790575107,2108100632,1890328081,1402811438,1586903591,1233856572,1149249077,266959938,48394827,369057872,418672217,1002783846,919489135,567498868,752375421,209336225,24197544,376187827,459744698,945164165,895287692,574624663,793451934,1679968233,1764313568,2117360635,1933530610,1343127501,1560637892,1243112415,1192455638,3704280881,3519142200,3336358691,3419915562,3907448597,3857572124,4075877127,4294704398,3029510009,3113855344,2927934315,2744104290,2159976285,2377486676,2594734927,2544078150],q=[0,151849742,303699484,454499602,607398968,758720310,908999204,1059270954,1214797936,1097159550,1517440620,1400849762,1817998408,1699839814,2118541908,2001430874,2429595872,2581445614,2194319100,2345119218,3034881240,3186202582,2801699524,2951971274,3635996816,3518358430,3399679628,3283088770,4237083816,4118925222,4002861748,3885750714,1002142683,850817237,698445255,548169417,529487843,377642221,227885567,77089521,1943217067,2061379749,1640576439,1757691577,1474760595,1592394909,1174215055,1290801793,2875968315,2724642869,3111247143,2960971305,2405426947,2253581325,2638606623,2487810577,3808662347,3926825029,4044981591,4162096729,3342319475,3459953789,3576539503,3693126241,1986918061,2137062819,1685577905,1836772287,1381620373,1532285339,1078185097,1229899655,1040559837,923313619,740276417,621982671,439452389,322734571,137073913,19308535,3871163981,4021308739,4104605777,4255800159,3263785589,3414450555,3499326569,3651041127,2933202493,2815956275,3167684641,3049390895,2330014213,2213296395,2566595609,2448830231,1305906550,1155237496,1607244650,1455525988,1776460110,1626319424,2079897426,1928707164,96392454,213114376,396673818,514443284,562755902,679998e3,865136418,983426092,3708173718,3557504664,3474729866,3323011204,4180808110,4030667424,3945269170,3794078908,2507040230,2623762152,2272556026,2390325492,2975484382,3092726480,2738905026,2857194700,3973773121,3856137295,4274053469,4157467219,3371096953,3252932727,3673476453,3556361835,2763173681,2915017791,3064510765,3215307299,2156299017,2307622919,2459735317,2610011675,2081048481,1963412655,1846563261,1729977011,1480485785,1362321559,1243905413,1126790795,878845905,1030690015,645401037,796197571,274084841,425408743,38544885,188821243,3613494426,3731654548,3313212038,3430322568,4082475170,4200115116,3780097726,3896688048,2668221674,2516901860,2366882550,2216610296,3141400786,2989552604,2837966542,2687165888,1202797690,1320957812,1437280870,1554391400,1669664834,1787304780,1906247262,2022837584,265905162,114585348,499347990,349075736,736970802,585122620,972512814,821712160,2595684844,2478443234,2293045232,2174754046,3196267988,3079546586,2895723464,2777952454,3537852828,3687994002,3234156416,3385345166,4142626212,4293295786,3841024952,3992742070,174567692,57326082,410887952,292596766,777231668,660510266,1011452712,893681702,1108339068,1258480242,1343618912,1494807662,1715193156,1865862730,1948373848,2100090966,2701949495,2818666809,3004591147,3122358053,2235061775,2352307457,2535604243,2653899549,3915653703,3764988233,4219352155,4067639125,3444575871,3294430577,3746175075,3594982253,836553431,953270745,600235211,718002117,367585007,484830689,133361907,251657213,2041877159,1891211689,1806599355,1654886325,1568718495,1418573201,1335535747,1184342925];function R(v){for(var B=[],N=0;N<v.length;N+=4)B.push(v[N]<<24|v[N+1]<<16|v[N+2]<<8|v[N+3]);return B}var L=function(v){if(!(this instanceof L))throw Error("AES must be instanitated with `new`");Object.defineProperty(this,"key",{value:i(v,!0)}),this._prepare()};L.prototype._prepare=function(){var v=u[this.key.length];if(v==null)throw new Error("invalid key size (must be 16, 24 or 32 bytes)");this._Ke=[],this._Kd=[];for(var B=0;B<=v;B++)this._Ke.push([0,0,0,0]),this._Kd.push([0,0,0,0]);for(var N=(v+1)*4,P=this.key.length/4,H=R(this.key),Y,B=0;B<P;B++)Y=B>>2,this._Ke[Y][B%4]=H[B],this._Kd[v-Y][B%4]=H[B];for(var we=0,X=P,ye;X<N;){if(ye=H[P-1],H[0]^=h[ye>>16&255]<<24^h[ye>>8&255]<<16^h[ye&255]<<8^h[ye>>24&255]^d[we]<<24,we+=1,P!=8)for(var B=1;B<P;B++)H[B]^=H[B-1];else{for(var B=1;B<P/2;B++)H[B]^=H[B-1];ye=H[P/2-1],H[P/2]^=h[ye&255]^h[ye>>8&255]<<8^h[ye>>16&255]<<16^h[ye>>24&255]<<24;for(var B=P/2+1;B<P;B++)H[B]^=H[B-1]}for(var B=0,We,$e;B<P&&X<N;)We=X>>2,$e=X%4,this._Ke[We][$e]=H[B],this._Kd[v-We][$e]=H[B++],X++}for(var We=1;We<v;We++)for(var $e=0;$e<4;$e++)ye=this._Kd[We][$e],this._Kd[We][$e]=D[ye>>24&255]^F[ye>>16&255]^W[ye>>8&255]^q[ye&255]},L.prototype.encrypt=function(v){if(v.length!=16)throw new Error("invalid plaintext size (must be 16 bytes)");for(var B=this._Ke.length-1,N=[0,0,0,0],P=R(v),H=0;H<4;H++)P[H]^=this._Ke[0][H];for(var Y=1;Y<B;Y++){for(var H=0;H<4;H++)N[H]=b[P[H]>>24&255]^x[P[(H+1)%4]>>16&255]^f[P[(H+2)%4]>>8&255]^w[P[(H+3)%4]&255]^this._Ke[Y][H];P=N.slice()}for(var we=s(16),X,H=0;H<4;H++)X=this._Ke[B][H],we[4*H]=(h[P[H]>>24&255]^X>>24)&255,we[4*H+1]=(h[P[(H+1)%4]>>16&255]^X>>16)&255,we[4*H+2]=(h[P[(H+2)%4]>>8&255]^X>>8)&255,we[4*H+3]=(h[P[(H+3)%4]&255]^X)&255;return we},L.prototype.decrypt=function(v){if(v.length!=16)throw new Error("invalid ciphertext size (must be 16 bytes)");for(var B=this._Kd.length-1,N=[0,0,0,0],P=R(v),H=0;H<4;H++)P[H]^=this._Kd[0][H];for(var Y=1;Y<B;Y++){for(var H=0;H<4;H++)N[H]=A[P[H]>>24&255]^T[P[(H+3)%4]>>16&255]^E[P[(H+2)%4]>>8&255]^I[P[(H+1)%4]&255]^this._Kd[Y][H];P=N.slice()}for(var we=s(16),X,H=0;H<4;H++)X=this._Kd[B][H],we[4*H]=(m[P[H]>>24&255]^X>>24)&255,we[4*H+1]=(m[P[(H+3)%4]>>16&255]^X>>16)&255,we[4*H+2]=(m[P[(H+2)%4]>>8&255]^X>>8)&255,we[4*H+3]=(m[P[(H+1)%4]&255]^X)&255;return we};var V=function(v){if(!(this instanceof V))throw Error("AES must be instanitated with `new`");this.description="Electronic Code Block",this.name="ecb",this._aes=new L(v)};V.prototype.encrypt=function(v){if(v=i(v),v.length%16!==0)throw new Error("invalid plaintext size (must be multiple of 16 bytes)");for(var B=s(v.length),N=s(16),P=0;P<v.length;P+=16)o(v,N,0,P,P+16),N=this._aes.encrypt(N),o(N,B,P);return B},V.prototype.decrypt=function(v){if(v=i(v),v.length%16!==0)throw new Error("invalid ciphertext size (must be multiple of 16 bytes)");for(var B=s(v.length),N=s(16),P=0;P<v.length;P+=16)o(v,N,0,P,P+16),N=this._aes.decrypt(N),o(N,B,P);return B};var k=function(v,B){if(!(this instanceof k))throw Error("AES must be instanitated with `new`");if(this.description="Cipher Block Chaining",this.name="cbc",!B)B=s(16);else if(B.length!=16)throw new Error("invalid initialation vector size (must be 16 bytes)");this._lastCipherblock=i(B,!0),this._aes=new L(v)};k.prototype.encrypt=function(v){if(v=i(v),v.length%16!==0)throw new Error("invalid plaintext size (must be multiple of 16 bytes)");for(var B=s(v.length),N=s(16),P=0;P<v.length;P+=16){o(v,N,0,P,P+16);for(var H=0;H<16;H++)N[H]^=this._lastCipherblock[H];this._lastCipherblock=this._aes.encrypt(N),o(this._lastCipherblock,B,P)}return B},k.prototype.decrypt=function(v){if(v=i(v),v.length%16!==0)throw new Error("invalid ciphertext size (must be multiple of 16 bytes)");for(var B=s(v.length),N=s(16),P=0;P<v.length;P+=16){o(v,N,0,P,P+16),N=this._aes.decrypt(N);for(var H=0;H<16;H++)B[P+H]=N[H]^this._lastCipherblock[H];o(v,this._lastCipherblock,0,P,P+16)}return B};var U=function(v,B,N){if(!(this instanceof U))throw Error("AES must be instanitated with `new`");if(this.description="Cipher Feedback",this.name="cfb",!B)B=s(16);else if(B.length!=16)throw new Error("invalid initialation vector size (must be 16 size)");N||(N=1),this.segmentSize=N,this._shiftRegister=i(B,!0),this._aes=new L(v)};U.prototype.encrypt=function(v){if(v.length%this.segmentSize!=0)throw new Error("invalid plaintext size (must be segmentSize bytes)");for(var B=i(v,!0),N,P=0;P<B.length;P+=this.segmentSize){N=this._aes.encrypt(this._shiftRegister);for(var H=0;H<this.segmentSize;H++)B[P+H]^=N[H];o(this._shiftRegister,this._shiftRegister,0,this.segmentSize),o(B,this._shiftRegister,16-this.segmentSize,P,P+this.segmentSize)}return B},U.prototype.decrypt=function(v){if(v.length%this.segmentSize!=0)throw new Error("invalid ciphertext size (must be segmentSize bytes)");for(var B=i(v,!0),N,P=0;P<B.length;P+=this.segmentSize){N=this._aes.encrypt(this._shiftRegister);for(var H=0;H<this.segmentSize;H++)B[P+H]^=N[H];o(this._shiftRegister,this._shiftRegister,0,this.segmentSize),o(v,this._shiftRegister,16-this.segmentSize,P,P+this.segmentSize)}return B};var Z=function(v,B){if(!(this instanceof Z))throw Error("AES must be instanitated with `new`");if(this.description="Output Feedback",this.name="ofb",!B)B=s(16);else if(B.length!=16)throw new Error("invalid initialation vector size (must be 16 bytes)");this._lastPrecipher=i(B,!0),this._lastPrecipherIndex=16,this._aes=new L(v)};Z.prototype.encrypt=function(v){for(var B=i(v,!0),N=0;N<B.length;N++)this._lastPrecipherIndex===16&&(this._lastPrecipher=this._aes.encrypt(this._lastPrecipher),this._lastPrecipherIndex=0),B[N]^=this._lastPrecipher[this._lastPrecipherIndex++];return B},Z.prototype.decrypt=Z.prototype.encrypt;var J=function(v){if(!(this instanceof J))throw Error("Counter must be instanitated with `new`");v!==0&&!v&&(v=1),typeof v=="number"?(this._counter=s(16),this.setValue(v)):this.setBytes(v)};J.prototype.setValue=function(v){if(typeof v!="number"||parseInt(v)!=v)throw new Error("invalid counter value (must be an integer)");for(var B=15;B>=0;--B)this._counter[B]=v%256,v=v>>8},J.prototype.setBytes=function(v){if(v=i(v,!0),v.length!=16)throw new Error("invalid counter bytes size (must be 16 bytes)");this._counter=v},J.prototype.increment=function(){for(var v=15;v>=0;v--)if(this._counter[v]===255)this._counter[v]=0;else{this._counter[v]++;break}};var ie=function(v,B){if(!(this instanceof ie))throw Error("AES must be instanitated with `new`");this.description="Counter",this.name="ctr",B instanceof J||(B=new J(B)),this._counter=B,this._remainingCounter=null,this._remainingCounterIndex=16,this._aes=new L(v)};ie.prototype.encrypt=function(v){for(var B=i(v,!0),N=0;N<B.length;N++)this._remainingCounterIndex===16&&(this._remainingCounter=this._aes.encrypt(this._counter._counter),this._remainingCounterIndex=0,this._counter.increment()),B[N]^=this._remainingCounter[this._remainingCounterIndex++];return B},ie.prototype.decrypt=ie.prototype.encrypt;function ne(v){v=i(v,!0);var B=16-v.length%16,N=s(v.length+B);o(v,N);for(var P=v.length;P<N.length;P++)N[P]=B;return N}function de(v){if(v=i(v,!0),v.length<16)throw new Error("PKCS#7 invalid length");var B=v[v.length-1];if(B>16)throw new Error("PKCS#7 padding byte out of range");for(var N=v.length-B,P=0;P<B;P++)if(v[N+P]!==B)throw new Error("PKCS#7 invalid padding byte");var H=s(N);return o(v,H,0,0,N),H}var ue={AES:L,Counter:J,ModeOfOperation:{ecb:V,cbc:k,cfb:U,ofb:Z,ctr:ie},utils:{hex:c,utf8:l},padding:{pkcs7:{pad:ne,strip:de}},_arrayTest:{coerceArray:i,createArray:s,copyArray:o}};r.exports=ue})()})(Sy);const rn=pc,y0="json-wallets/5.7.0";function dr(r){return typeof r=="string"&&r.substring(0,2)!=="0x"&&(r="0x"+r),ce(r)}function pa(r,e){for(r=String(r);r.length<e;)r="0"+r;return r}function el(r){return typeof r=="string"?Me(r,lc.NFKC):ce(r)}function Ke(r,e){let t=r;const n=e.toLowerCase().split("/");for(let a=0;a<n.length;a++){let i=null;for(const s in t)if(s.toLowerCase()===n[a]){i=t[s];break}if(i===null)return null;t=i}return t}function Py(r){const e=ce(r);e[6]=e[6]&15|64,e[8]=e[8]&63|128;const t=ge(e);return[t.substring(2,10),t.substring(10,14),t.substring(14,18),t.substring(18,22),t.substring(22,34)].join("-")}const By=new j(y0);class Ry extends Zd{isCrowdsaleAccount(e){return!!(e&&e._isCrowdsaleAccount)}}function tl(r,e){const t=JSON.parse(r);e=el(e);const n=Qt(Ke(t,"ethaddr")),a=dr(Ke(t,"encseed"));(!a||a.length%16!==0)&&By.throwArgumentError("invalid encseed","json",r);const i=ce(Qc(e,e,2e3,32,"sha256")).slice(0,16),s=a.slice(0,16),o=a.slice(16),l=new rn.ModeOfOperation.cbc(i,s),c=rn.padding.pkcs7.strip(ce(l.decrypt(o)));let u="";for(let m=0;m<c.length;m++)u+=String.fromCharCode(c[m]);const d=Me(u),h=Je(d);return new Ry({_isCrowdsaleAccount:!0,address:n,privateKey:h})}function _o(r){let e=null;try{e=JSON.parse(r)}catch{return!1}return e.encseed&&e.ethaddr}function ko(r){let e=null;try{e=JSON.parse(r)}catch{return!1}return!(!e.version||parseInt(e.version)!==e.version||parseInt(e.version)!==3)}function My(r){if(_o(r))try{return Qt(JSON.parse(r).ethaddr)}catch{return null}if(ko(r))try{return Qt(JSON.parse(r).address)}catch{return null}return null}var fc={},Dy={get exports(){return fc},set exports(r){fc=r}};(function(r,e){(function(t){function a(x){const f=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);let w=1779033703,A=3144134277,T=1013904242,E=2773480762,I=1359893119,D=2600822924,F=528734635,W=1541459225;const q=new Uint32Array(64);function R(ie){let ne=0,de=ie.length;for(;de>=64;){let ue=w,v=A,B=T,N=E,P=I,H=D,Y=F,we=W,X,ye,We,$e,St;for(ye=0;ye<16;ye++)We=ne+ye*4,q[ye]=(ie[We]&255)<<24|(ie[We+1]&255)<<16|(ie[We+2]&255)<<8|ie[We+3]&255;for(ye=16;ye<64;ye++)X=q[ye-2],$e=(X>>>17|X<<32-17)^(X>>>19|X<<32-19)^X>>>10,X=q[ye-15],St=(X>>>7|X<<32-7)^(X>>>18|X<<32-18)^X>>>3,q[ye]=($e+q[ye-7]|0)+(St+q[ye-16]|0)|0;for(ye=0;ye<64;ye++)$e=(((P>>>6|P<<32-6)^(P>>>11|P<<32-11)^(P>>>25|P<<32-25))+(P&H^~P&Y)|0)+(we+(f[ye]+q[ye]|0)|0)|0,St=((ue>>>2|ue<<32-2)^(ue>>>13|ue<<32-13)^(ue>>>22|ue<<32-22))+(ue&v^ue&B^v&B)|0,we=Y,Y=H,H=P,P=N+$e|0,N=B,B=v,v=ue,ue=$e+St|0;w=w+ue|0,A=A+v|0,T=T+B|0,E=E+N|0,I=I+P|0,D=D+H|0,F=F+Y|0,W=W+we|0,ne+=64,de-=64}}R(x);let L,V=x.length%64,k=x.length/536870912|0,U=x.length<<3,Z=V<56?56:120,J=x.slice(x.length-V,x.length);for(J.push(128),L=V+1;L<Z;L++)J.push(0);return J.push(k>>>24&255),J.push(k>>>16&255),J.push(k>>>8&255),J.push(k>>>0&255),J.push(U>>>24&255),J.push(U>>>16&255),J.push(U>>>8&255),J.push(U>>>0&255),R(J),[w>>>24&255,w>>>16&255,w>>>8&255,w>>>0&255,A>>>24&255,A>>>16&255,A>>>8&255,A>>>0&255,T>>>24&255,T>>>16&255,T>>>8&255,T>>>0&255,E>>>24&255,E>>>16&255,E>>>8&255,E>>>0&255,I>>>24&255,I>>>16&255,I>>>8&255,I>>>0&255,D>>>24&255,D>>>16&255,D>>>8&255,D>>>0&255,F>>>24&255,F>>>16&255,F>>>8&255,F>>>0&255,W>>>24&255,W>>>16&255,W>>>8&255,W>>>0&255]}function i(x,f,w){x=x.length<=64?x:a(x);const A=64+f.length+4,T=new Array(A),E=new Array(64);let I,D=[];for(I=0;I<64;I++)T[I]=54;for(I=0;I<x.length;I++)T[I]^=x[I];for(I=0;I<f.length;I++)T[64+I]=f[I];for(I=A-4;I<A;I++)T[I]=0;for(I=0;I<64;I++)E[I]=92;for(I=0;I<x.length;I++)E[I]^=x[I];function F(){for(let W=A-1;W>=A-4;W--){if(T[W]++,T[W]<=255)return;T[W]=0}}for(;w>=32;)F(),D=D.concat(a(E.concat(a(T)))),w-=32;return w>0&&(F(),D=D.concat(a(E.concat(a(T))).slice(0,w))),D}function s(x,f,w,A,T){let E;for(u(x,(2*w-1)*16,T,0,16),E=0;E<2*w;E++)c(x,E*16,T,16),l(T,A),u(T,0,x,f+E*16,16);for(E=0;E<w;E++)u(x,f+E*2*16,x,E*16,16);for(E=0;E<w;E++)u(x,f+(E*2+1)*16,x,(E+w)*16,16)}function o(x,f){return x<<f|x>>>32-f}function l(x,f){u(x,0,f,0,16);for(let w=8;w>0;w-=2)f[4]^=o(f[0]+f[12],7),f[8]^=o(f[4]+f[0],9),f[12]^=o(f[8]+f[4],13),f[0]^=o(f[12]+f[8],18),f[9]^=o(f[5]+f[1],7),f[13]^=o(f[9]+f[5],9),f[1]^=o(f[13]+f[9],13),f[5]^=o(f[1]+f[13],18),f[14]^=o(f[10]+f[6],7),f[2]^=o(f[14]+f[10],9),f[6]^=o(f[2]+f[14],13),f[10]^=o(f[6]+f[2],18),f[3]^=o(f[15]+f[11],7),f[7]^=o(f[3]+f[15],9),f[11]^=o(f[7]+f[3],13),f[15]^=o(f[11]+f[7],18),f[1]^=o(f[0]+f[3],7),f[2]^=o(f[1]+f[0],9),f[3]^=o(f[2]+f[1],13),f[0]^=o(f[3]+f[2],18),f[6]^=o(f[5]+f[4],7),f[7]^=o(f[6]+f[5],9),f[4]^=o(f[7]+f[6],13),f[5]^=o(f[4]+f[7],18),f[11]^=o(f[10]+f[9],7),f[8]^=o(f[11]+f[10],9),f[9]^=o(f[8]+f[11],13),f[10]^=o(f[9]+f[8],18),f[12]^=o(f[15]+f[14],7),f[13]^=o(f[12]+f[15],9),f[14]^=o(f[13]+f[12],13),f[15]^=o(f[14]+f[13],18);for(let w=0;w<16;++w)x[w]+=f[w]}function c(x,f,w,A){for(let T=0;T<A;T++)w[T]^=x[f+T]}function u(x,f,w,A,T){for(;T--;)w[A++]=x[f++]}function d(x){if(!x||typeof x.length!="number")return!1;for(let f=0;f<x.length;f++){const w=x[f];if(typeof w!="number"||w%1||w<0||w>=256)return!1}return!0}function h(x,f){if(typeof x!="number"||x%1)throw new Error("invalid "+f);return x}function m(x,f,w,A,T,E,I){if(w=h(w,"N"),A=h(A,"r"),T=h(T,"p"),E=h(E,"dkLen"),w===0||w&w-1)throw new Error("N must be power of 2");if(w>2147483647/128/A)throw new Error("N too large");if(A>2147483647/128/T)throw new Error("r too large");if(!d(x))throw new Error("password must be an array or buffer");if(x=Array.prototype.slice.call(x),!d(f))throw new Error("salt must be an array or buffer");f=Array.prototype.slice.call(f);let D=i(x,f,T*128*A);const F=new Uint32Array(T*32*A);for(let P=0;P<F.length;P++){const H=P*4;F[P]=(D[H+3]&255)<<24|(D[H+2]&255)<<16|(D[H+1]&255)<<8|(D[H+0]&255)<<0}const W=new Uint32Array(64*A),q=new Uint32Array(32*A*w),R=32*A,L=new Uint32Array(16),V=new Uint32Array(16),k=T*w*2;let U=0,Z=null,J=!1,ie=0,ne=0,de,ue;const v=I?parseInt(1e3/A):4294967295,B=typeof setImmediate<"u"?setImmediate:setTimeout,N=function(){if(J)return I(new Error("cancelled"),U/k);let P;switch(ie){case 0:ue=ne*32*A,u(F,ue,W,0,R),ie=1,de=0;case 1:P=w-de,P>v&&(P=v);for(let Y=0;Y<P;Y++)u(W,0,q,(de+Y)*R,R),s(W,R,A,L,V);if(de+=P,U+=P,I){const Y=parseInt(1e3*U/k);if(Y!==Z){if(J=I(null,U/k),J)break;Z=Y}}if(de<w)break;de=0,ie=2;case 2:P=w-de,P>v&&(P=v);for(let Y=0;Y<P;Y++){const we=(2*A-1)*16,X=W[we]&w-1;c(q,X*R,W,R),s(W,R,A,L,V)}if(de+=P,U+=P,I){const Y=parseInt(1e3*U/k);if(Y!==Z){if(J=I(null,U/k),J)break;Z=Y}}if(de<w)break;if(u(W,0,F,ue,R),ne++,ne<T){ie=0;break}D=[];for(let Y=0;Y<F.length;Y++)D.push(F[Y]>>0&255),D.push(F[Y]>>8&255),D.push(F[Y]>>16&255),D.push(F[Y]>>24&255);const H=i(x,D,E);return I&&I(null,1,H),H}I&&B(N)};if(!I)for(;;){const P=N();if(P!=null)return P}N()}const b={scrypt:function(x,f,w,A,T,E,I){return new Promise(function(D,F){let W=0;I&&I(0),m(x,f,w,A,T,E,function(q,R,L){if(q)F(q);else if(L)I&&W!==1&&I(1),D(new Uint8Array(L));else if(I&&R!==W)return W=R,I(R)})})},syncScrypt:function(x,f,w,A,T,E){return new Uint8Array(m(x,f,w,A,T,E))}};r.exports=b})()})(Dy);const nl=fc;var Fy=globalThis&&globalThis.__awaiter||function(r,e,t,n){function a(i){return i instanceof t?i:new t(function(s){s(i)})}return new(t||(t=Promise))(function(i,s){function o(u){try{c(n.next(u))}catch(d){s(d)}}function l(u){try{c(n.throw(u))}catch(d){s(d)}}function c(u){u.done?i(u.value):a(u.value).then(o,l)}c((n=n.apply(r,e||[])).next())})};const hc=new j(y0);function zl(r){return r!=null&&r.mnemonic&&r.mnemonic.phrase}class Ny extends Zd{isKeystoreAccount(e){return!!(e&&e._isKeystoreAccount)}}function Wy(r,e,t){if(Ke(r,"crypto/cipher")==="aes-128-ctr"){const a=dr(Ke(r,"crypto/cipherparams/iv")),i=new rn.Counter(a),s=new rn.ModeOfOperation.ctr(e,i);return ce(s.decrypt(t))}return null}function m0(r,e){const t=dr(Ke(r,"crypto/ciphertext"));if(ge(Je(ct([e.slice(16,32),t]))).substring(2)!==Ke(r,"crypto/mac").toLowerCase())throw new Error("invalid password");const a=Wy(r,e.slice(0,16),t);a||hc.throwError("unsupported cipher",j.errors.UNSUPPORTED_OPERATION,{operation:"decrypt"});const i=e.slice(32,64),s=Hr(a);if(r.address){let l=r.address.toLowerCase();if(l.substring(0,2)!=="0x"&&(l="0x"+l),Qt(l)!==s)throw new Error("address mismatch")}const o={_isKeystoreAccount:!0,address:s,privateKey:ge(a)};if(Ke(r,"x-ethers/version")==="0.1"){const l=dr(Ke(r,"x-ethers/mnemonicCiphertext")),c=dr(Ke(r,"x-ethers/mnemonicCounter")),u=new rn.Counter(c),d=new rn.ModeOfOperation.ctr(i,u),h=Ke(r,"x-ethers/path")||Jr,m=Ke(r,"x-ethers/locale")||"en",b=ce(d.decrypt(l));try{const x=Eo(b,m),f=Mt.fromMnemonic(x,null,m).derivePath(h);if(f.privateKey!=o.privateKey)throw new Error("mnemonic mismatch");o.mnemonic=f.mnemonic}catch(x){if(x.code!==j.errors.INVALID_ARGUMENT||x.argument!=="wordlist")throw x}}return new Ny(o)}function x0(r,e,t,n,a){return ce(Qc(r,e,t,n,a))}function Oy(r,e,t,n,a){return Promise.resolve(x0(r,e,t,n,a))}function b0(r,e,t,n,a){const i=el(e),s=Ke(r,"crypto/kdf");if(s&&typeof s=="string"){const o=function(l,c){return hc.throwArgumentError("invalid key-derivation function parameters",l,c)};if(s.toLowerCase()==="scrypt"){const l=dr(Ke(r,"crypto/kdfparams/salt")),c=parseInt(Ke(r,"crypto/kdfparams/n")),u=parseInt(Ke(r,"crypto/kdfparams/r")),d=parseInt(Ke(r,"crypto/kdfparams/p"));(!c||!u||!d)&&o("kdf",s),c&c-1&&o("N",c);const h=parseInt(Ke(r,"crypto/kdfparams/dklen"));return h!==32&&o("dklen",h),n(i,l,c,u,d,64,a)}else if(s.toLowerCase()==="pbkdf2"){const l=dr(Ke(r,"crypto/kdfparams/salt"));let c=null;const u=Ke(r,"crypto/kdfparams/prf");u==="hmac-sha256"?c="sha256":u==="hmac-sha512"?c="sha512":o("prf",u);const d=parseInt(Ke(r,"crypto/kdfparams/c")),h=parseInt(Ke(r,"crypto/kdfparams/dklen"));return h!==32&&o("dklen",h),t(i,l,d,h,c)}}return hc.throwArgumentError("unsupported key-derivation function","kdf",s)}function g0(r,e){const t=JSON.parse(r),n=b0(t,e,x0,nl.syncScrypt);return m0(t,n)}function w0(r,e,t){return Fy(this,void 0,void 0,function*(){const n=JSON.parse(r),a=yield b0(n,e,Oy,nl.scrypt,t);return m0(n,a)})}function v0(r,e,t,n){try{if(Qt(r.address)!==Hr(r.privateKey))throw new Error("address/privateKey mismatch");if(zl(r)){const f=r.mnemonic;if(Mt.fromMnemonic(f.phrase,null,f.locale).derivePath(f.path||Jr).privateKey!=r.privateKey)throw new Error("mnemonic mismatch")}}catch(f){return Promise.reject(f)}typeof t=="function"&&!n&&(n=t,t={}),t||(t={});const a=ce(r.privateKey),i=el(e);let s=null,o=null,l=null;if(zl(r)){const f=r.mnemonic;s=ce(Co(f.phrase,f.locale||"en")),o=f.path||Jr,l=f.locale||"en"}let c=t.client;c||(c="ethers.js");let u=null;t.salt?u=ce(t.salt):u=ga(32);let d=null;if(t.iv){if(d=ce(t.iv),d.length!==16)throw new Error("invalid iv")}else d=ga(16);let h=null;if(t.uuid){if(h=ce(t.uuid),h.length!==16)throw new Error("invalid uuid")}else h=ga(16);let m=1<<17,b=8,x=1;return t.scrypt&&(t.scrypt.N&&(m=t.scrypt.N),t.scrypt.r&&(b=t.scrypt.r),t.scrypt.p&&(x=t.scrypt.p)),nl.scrypt(i,u,m,b,x,64,n).then(f=>{f=ce(f);const w=f.slice(0,16),A=f.slice(16,32),T=f.slice(32,64),E=new rn.Counter(d),I=new rn.ModeOfOperation.ctr(w,E),D=ce(I.encrypt(a)),F=Je(ct([A,D])),W={address:r.address.substring(2).toLowerCase(),id:Py(h),version:3,crypto:{cipher:"aes-128-ctr",cipherparams:{iv:ge(d).substring(2)},ciphertext:ge(D).substring(2),kdf:"scrypt",kdfparams:{salt:ge(u).substring(2),n:m,dklen:32,p:x,r:b},mac:F.substring(2)}};if(s){const q=ga(16),R=new rn.Counter(q),L=new rn.ModeOfOperation.ctr(T,R),V=ce(L.encrypt(s)),k=new Date,U=k.getUTCFullYear()+"-"+pa(k.getUTCMonth()+1,2)+"-"+pa(k.getUTCDate(),2)+"T"+pa(k.getUTCHours(),2)+"-"+pa(k.getUTCMinutes(),2)+"-"+pa(k.getUTCSeconds(),2)+".0Z";W["x-ethers"]={client:c,gethFilename:"UTC--"+U+"--"+W.address,mnemonicCounter:ge(q).substring(2),mnemonicCiphertext:ge(V).substring(2),path:o,locale:l,version:"0.1"}}return JSON.stringify(W)})}function T0(r,e,t){if(_o(r)){t&&t(0);const n=tl(r,e);return t&&t(1),Promise.resolve(n)}return ko(r)?w0(r,e,t):Promise.reject(new Error("invalid JSON wallet"))}function A0(r,e){if(_o(r))return tl(r,e);if(ko(r))return g0(r,e);throw new Error("invalid JSON wallet")}const f6=Object.freeze(Object.defineProperty({__proto__:null,decryptCrowdsale:tl,decryptJsonWallet:T0,decryptJsonWalletSync:A0,decryptKeystore:w0,decryptKeystoreSync:g0,encryptKeystore:v0,getJsonWalletAddress:My,isCrowdsaleWallet:_o,isKeystoreWallet:ko},Symbol.toStringTag,{value:"Module"})),Ly="wallet/5.7.0";var jl=globalThis&&globalThis.__awaiter||function(r,e,t,n){function a(i){return i instanceof t?i:new t(function(s){s(i)})}return new(t||(t=Promise))(function(i,s){function o(u){try{c(n.next(u))}catch(d){s(d)}}function l(u){try{c(n.throw(u))}catch(d){s(d)}}function c(u){u.done?i(u.value):a(u.value).then(o,l)}c((n=n.apply(r,e||[])).next())})};const Pr=new j(Ly);function Uy(r){return r!=null&&Le(r.privateKey,32)&&r.address!=null}function Hy(r){const e=r.mnemonic;return e&&e.phrase}class bn extends Zr{constructor(e,t){if(super(),Uy(e)){const n=new Ea(e.privateKey);if(ee(this,"_signingKey",()=>n),ee(this,"address",Hr(this.publicKey)),this.address!==Qt(e.address)&&Pr.throwArgumentError("privateKey/address mismatch","privateKey","[REDACTED]"),Hy(e)){const a=e.mnemonic;ee(this,"_mnemonic",()=>({phrase:a.phrase,path:a.path||Jr,locale:a.locale||"en"}));const i=this.mnemonic,s=Mt.fromMnemonic(i.phrase,null,i.locale).derivePath(i.path);Hr(s.privateKey)!==this.address&&Pr.throwArgumentError("mnemonic/address mismatch","privateKey","[REDACTED]")}else ee(this,"_mnemonic",()=>null)}else{if(Ea.isSigningKey(e))e.curve!=="secp256k1"&&Pr.throwArgumentError("unsupported curve; must be secp256k1","privateKey","[REDACTED]"),ee(this,"_signingKey",()=>e);else{typeof e=="string"&&e.match(/^[0-9a-f]*$/i)&&e.length===64&&(e="0x"+e);const n=new Ea(e);ee(this,"_signingKey",()=>n)}ee(this,"_mnemonic",()=>null),ee(this,"address",Hr(this.publicKey))}t&&!si.isProvider(t)&&Pr.throwArgumentError("invalid provider","provider",t),ee(this,"provider",t||null)}get mnemonic(){return this._mnemonic()}get privateKey(){return this._signingKey().privateKey}get publicKey(){return this._signingKey().publicKey}getAddress(){return Promise.resolve(this.address)}connect(e){return new bn(this,e)}signTransaction(e){return Rt(e).then(t=>{t.from!=null&&(Qt(t.from)!==this.address&&Pr.throwArgumentError("transaction from address mismatch","transaction.from",e.from),delete t.from);const n=this._signingKey().signDigest(Je(Il(t)));return Il(t,n)})}signMessage(e){return jl(this,void 0,void 0,function*(){return uc(this._signingKey().signDigest(Yc(e)))})}_signTypedData(e,t,n){return jl(this,void 0,void 0,function*(){const a=yield tt.resolveNames(e,t,n,i=>(this.provider==null&&Pr.throwError("cannot resolve ENS names without a provider",j.errors.UNSUPPORTED_OPERATION,{operation:"resolveName",value:i}),this.provider.resolveName(i)));return uc(this._signingKey().signDigest(tt.hash(a.domain,t,a.value)))})}encrypt(e,t,n){if(typeof t=="function"&&!n&&(n=t,t={}),n&&typeof n!="function")throw new Error("invalid callback");return t||(t={}),v0(this,e,t,n)}static createRandom(e){let t=ga(16);e||(e={}),e.extraEntropy&&(t=ce(gt(Je(ct([t,e.extraEntropy])),0,16)));const n=Eo(t,e.locale);return bn.fromMnemonic(n,e.path,e.locale)}static fromEncryptedJson(e,t,n){return T0(e,t,n).then(a=>new bn(a))}static fromEncryptedJsonSync(e,t){return new bn(A0(e,t))}static fromMnemonic(e,t,n){return t||(t=Jr),new bn(Mt.fromMnemonic(e,null,n).derivePath(t))}}function zy(r,e){return Kc(Yc(r),e)}function jy(r,e,t,n){return Kc(tt.hash(r,e,t),n)}const h6=Object.freeze(Object.defineProperty({__proto__:null,Wallet:bn,verifyMessage:zy,verifyTypedData:jy},Symbol.toStringTag,{value:"Module"})),qy="networks/5.7.1",ql=new j(qy);function Vy(r){return r&&typeof r.renetwork=="function"}function xn(r){const e=function(t,n){n==null&&(n={});const a=[];if(t.InfuraProvider&&n.infura!=="-")try{a.push(new t.InfuraProvider(r,n.infura))}catch{}if(t.EtherscanProvider&&n.etherscan!=="-")try{a.push(new t.EtherscanProvider(r,n.etherscan))}catch{}if(t.AlchemyProvider&&n.alchemy!=="-")try{a.push(new t.AlchemyProvider(r,n.alchemy))}catch{}if(t.PocketProvider&&n.pocket!=="-"){const i=["goerli","ropsten","rinkeby","sepolia"];try{const s=new t.PocketProvider(r,n.pocket);s.network&&i.indexOf(s.network.name)===-1&&a.push(s)}catch{}}if(t.CloudflareProvider&&n.cloudflare!=="-")try{a.push(new t.CloudflareProvider(r))}catch{}if(t.AnkrProvider&&n.ankr!=="-")try{const i=["ropsten"],s=new t.AnkrProvider(r,n.ankr);s.network&&i.indexOf(s.network.name)===-1&&a.push(s)}catch{}if(a.length===0)return null;if(t.FallbackProvider){let i=1;return n.quorum!=null?i=n.quorum:r==="homestead"&&(i=2),new t.FallbackProvider(a,i)}return a[0]};return e.renetwork=function(t){return xn(t)},e}function Ui(r,e){const t=function(n,a){return n.JsonRpcProvider?new n.JsonRpcProvider(r,e):null};return t.renetwork=function(n){return Ui(r,n)},t}const Vl={chainId:1,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"homestead",_defaultProvider:xn("homestead")},Gl={chainId:3,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"ropsten",_defaultProvider:xn("ropsten")},Kl={chainId:63,name:"classicMordor",_defaultProvider:Ui("https://www.ethercluster.com/mordor","classicMordor")},mi={unspecified:{chainId:0,name:"unspecified"},homestead:Vl,mainnet:Vl,morden:{chainId:2,name:"morden"},ropsten:Gl,testnet:Gl,rinkeby:{chainId:4,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"rinkeby",_defaultProvider:xn("rinkeby")},kovan:{chainId:42,name:"kovan",_defaultProvider:xn("kovan")},goerli:{chainId:5,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"goerli",_defaultProvider:xn("goerli")},kintsugi:{chainId:1337702,name:"kintsugi"},sepolia:{chainId:11155111,name:"sepolia",_defaultProvider:xn("sepolia")},classic:{chainId:61,name:"classic",_defaultProvider:Ui("https://www.ethercluster.com/etc","classic")},classicMorden:{chainId:62,name:"classicMorden"},classicMordor:Kl,classicTestnet:Kl,classicKotti:{chainId:6,name:"classicKotti",_defaultProvider:Ui("https://www.ethercluster.com/kotti","classicKotti")},xdai:{chainId:100,name:"xdai"},matic:{chainId:137,name:"matic",_defaultProvider:xn("matic")},maticmum:{chainId:80001,name:"maticmum"},optimism:{chainId:10,name:"optimism",_defaultProvider:xn("optimism")},"optimism-kovan":{chainId:69,name:"optimism-kovan"},"optimism-goerli":{chainId:420,name:"optimism-goerli"},arbitrum:{chainId:42161,name:"arbitrum"},"arbitrum-rinkeby":{chainId:421611,name:"arbitrum-rinkeby"},"arbitrum-goerli":{chainId:421613,name:"arbitrum-goerli"},bnb:{chainId:56,name:"bnb"},bnbt:{chainId:97,name:"bnbt"}};function C0(r){if(r==null)return null;if(typeof r=="number"){for(const n in mi){const a=mi[n];if(a.chainId===r)return{name:a.name,chainId:a.chainId,ensAddress:a.ensAddress||null,_defaultProvider:a._defaultProvider||null}}return{chainId:r,name:"unknown"}}if(typeof r=="string"){const n=mi[r];return n==null?null:{name:n.name,chainId:n.chainId,ensAddress:n.ensAddress,_defaultProvider:n._defaultProvider||null}}const e=mi[r.name];if(!e)return typeof r.chainId!="number"&&ql.throwArgumentError("invalid network chainId","network",r),r;r.chainId!==0&&r.chainId!==e.chainId&&ql.throwArgumentError("network chainId mismatch","network",r);let t=r._defaultProvider||null;return t==null&&e._defaultProvider&&(Vy(e._defaultProvider)?t=e._defaultProvider.renetwork(r):t=e._defaultProvider),{name:r.name,chainId:e.chainId,ensAddress:r.ensAddress||e.ensAddress||null,_defaultProvider:t}}const Gy="web/5.7.1";var Ky=globalThis&&globalThis.__awaiter||function(r,e,t,n){function a(i){return i instanceof t?i:new t(function(s){s(i)})}return new(t||(t=Promise))(function(i,s){function o(u){try{c(n.next(u))}catch(d){s(d)}}function l(u){try{c(n.throw(u))}catch(d){s(d)}}function c(u){u.done?i(u.value):a(u.value).then(o,l)}c((n=n.apply(r,e||[])).next())})};function $y(r,e){return Ky(this,void 0,void 0,function*(){e==null&&(e={});const t={method:e.method||"GET",headers:e.headers||{},body:e.body||void 0};if(e.skipFetchSetup!==!0&&(t.mode="cors",t.cache="no-cache",t.credentials="same-origin",t.redirect="follow",t.referrer="client"),e.fetchOptions!=null){const s=e.fetchOptions;s.mode&&(t.mode=s.mode),s.cache&&(t.cache=s.cache),s.credentials&&(t.credentials=s.credentials),s.redirect&&(t.redirect=s.redirect),s.referrer&&(t.referrer=s.referrer)}const n=yield fetch(r,t),a=yield n.arrayBuffer(),i={};return n.headers.forEach?n.headers.forEach((s,o)=>{i[o.toLowerCase()]=s}):n.headers.keys().forEach(s=>{i[s.toLowerCase()]=n.headers.get(s)}),{headers:i,statusCode:n.status,statusMessage:n.statusText,body:ce(new Uint8Array(a))}})}var Zy=globalThis&&globalThis.__awaiter||function(r,e,t,n){function a(i){return i instanceof t?i:new t(function(s){s(i)})}return new(t||(t=Promise))(function(i,s){function o(u){try{c(n.next(u))}catch(d){s(d)}}function l(u){try{c(n.throw(u))}catch(d){s(d)}}function c(u){u.done?i(u.value):a(u.value).then(o,l)}c((n=n.apply(r,e||[])).next())})};const Kt=new j(Gy);function $l(r){return new Promise(e=>{setTimeout(e,r)})}function On(r,e){if(r==null)return null;if(typeof r=="string")return r;if(jf(r)){if(e&&(e.split("/")[0]==="text"||e.split(";")[0].trim()==="application/json"))try{return Jn(r)}catch{}return ge(r)}return r}function Yy(r){return Me(r.replace(/%([0-9a-f][0-9a-f])/gi,(e,t)=>String.fromCharCode(parseInt(t,16))))}function E0(r,e,t){const n=typeof r=="object"&&r.throttleLimit!=null?r.throttleLimit:12;Kt.assertArgument(n>0&&n%1===0,"invalid connection throttle limit","connection.throttleLimit",n);const a=typeof r=="object"?r.throttleCallback:null,i=typeof r=="object"&&typeof r.throttleSlotInterval=="number"?r.throttleSlotInterval:100;Kt.assertArgument(i>0&&i%1===0,"invalid connection throttle slot interval","connection.throttleSlotInterval",i);const s=typeof r=="object"?!!r.errorPassThrough:!1,o={};let l=null;const c={method:"GET"};let u=!1,d=2*60*1e3;if(typeof r=="string")l=r;else if(typeof r=="object"){if((r==null||r.url==null)&&Kt.throwArgumentError("missing URL","connection.url",r),l=r.url,typeof r.timeout=="number"&&r.timeout>0&&(d=r.timeout),r.headers)for(const w in r.headers)o[w.toLowerCase()]={key:w,value:String(r.headers[w])},["if-none-match","if-modified-since"].indexOf(w.toLowerCase())>=0&&(u=!0);if(c.allowGzip=!!r.allowGzip,r.user!=null&&r.password!=null){l.substring(0,6)!=="https:"&&r.allowInsecureAuthentication!==!0&&Kt.throwError("basic authentication requires a secure https url",j.errors.INVALID_ARGUMENT,{argument:"url",url:l,user:r.user,password:"[REDACTED]"});const w=r.user+":"+r.password;o.authorization={key:"Authorization",value:"Basic "+r0(Me(w))}}r.skipFetchSetup!=null&&(c.skipFetchSetup=!!r.skipFetchSetup),r.fetchOptions!=null&&(c.fetchOptions=nt(r.fetchOptions))}const h=new RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i"),m=l?l.match(h):null;if(m)try{const w={statusCode:200,statusMessage:"OK",headers:{"content-type":m[1]||"text/plain"},body:m[2]?n0(m[3]):Yy(m[3])};let A=w.body;return t&&(A=t(w.body,w)),Promise.resolve(A)}catch(w){Kt.throwError("processing response error",j.errors.SERVER_ERROR,{body:On(m[1],m[2]),error:w,requestBody:null,requestMethod:"GET",url:l})}e&&(c.method="POST",c.body=e,o["content-type"]==null&&(o["content-type"]={key:"Content-Type",value:"application/octet-stream"}),o["content-length"]==null&&(o["content-length"]={key:"Content-Length",value:String(e.length)}));const b={};Object.keys(o).forEach(w=>{const A=o[w];b[A.key]=A.value}),c.headers=b;const x=function(){let w=null;return{promise:new Promise(function(E,I){d&&(w=setTimeout(()=>{w!=null&&(w=null,I(Kt.makeError("timeout",j.errors.TIMEOUT,{requestBody:On(c.body,b["content-type"]),requestMethod:c.method,timeout:d,url:l})))},d))}),cancel:function(){w!=null&&(clearTimeout(w),w=null)}}}(),f=function(){return Zy(this,void 0,void 0,function*(){for(let w=0;w<n;w++){let A=null;try{if(A=yield $y(l,c),w<n){if(A.statusCode===301||A.statusCode===302){const E=A.headers.location||"";if(c.method==="GET"&&E.match(/^https:/)){l=A.headers.location;continue}}else if(A.statusCode===429){let E=!0;if(a&&(E=yield a(w,l)),E){let I=0;const D=A.headers["retry-after"];typeof D=="string"&&D.match(/^[1-9][0-9]*$/)?I=parseInt(D)*1e3:I=i*parseInt(String(Math.random()*Math.pow(2,w))),yield $l(I);continue}}}}catch(E){A=E.response,A==null&&(x.cancel(),Kt.throwError("missing response",j.errors.SERVER_ERROR,{requestBody:On(c.body,b["content-type"]),requestMethod:c.method,serverError:E,url:l}))}let T=A.body;if(u&&A.statusCode===304?T=null:!s&&(A.statusCode<200||A.statusCode>=300)&&(x.cancel(),Kt.throwError("bad response",j.errors.SERVER_ERROR,{status:A.statusCode,headers:A.headers,body:On(T,A.headers?A.headers["content-type"]:null),requestBody:On(c.body,b["content-type"]),requestMethod:c.method,url:l})),t)try{const E=yield t(T,A);return x.cancel(),E}catch(E){if(E.throttleRetry&&w<n){let I=!0;if(a&&(I=yield a(w,l)),I){const D=i*parseInt(String(Math.random()*Math.pow(2,w)));yield $l(D);continue}}x.cancel(),Kt.throwError("processing response error",j.errors.SERVER_ERROR,{body:On(T,A.headers?A.headers["content-type"]:null),error:E,requestBody:On(c.body,b["content-type"]),requestMethod:c.method,url:l})}return x.cancel(),T}return Kt.throwError("failed response",j.errors.SERVER_ERROR,{requestBody:On(c.body,b["content-type"]),requestMethod:c.method,url:l})})}();return Promise.race([x.promise,f])}function Cr(r,e,t){let n=(i,s)=>{let o=null;if(i!=null)try{o=JSON.parse(Jn(i))}catch(l){Kt.throwError("invalid JSON",j.errors.SERVER_ERROR,{body:i,error:l})}return t&&(o=t(o,s)),o},a=null;if(e!=null){a=Me(e);const i=typeof r=="string"?{url:r}:nt(r);i.headers?Object.keys(i.headers).filter(o=>o.toLowerCase()==="content-type").length!==0||(i.headers=nt(i.headers),i.headers["content-type"]="application/json"):i.headers={"content-type":"application/json"},r=i}return E0(r,a,n)}function sr(r,e){return e||(e={}),e=nt(e),e.floor==null&&(e.floor=0),e.ceiling==null&&(e.ceiling=1e4),e.interval==null&&(e.interval=250),new Promise(function(t,n){let a=null,i=!1;const s=()=>i?!1:(i=!0,a&&clearTimeout(a),!0);e.timeout&&(a=setTimeout(()=>{s()&&n(new Error("timeout"))},e.timeout));const o=e.retryLimit;let l=0;function c(){return r().then(function(u){if(u!==void 0)s()&&t(u);else if(e.oncePoll)e.oncePoll.once("poll",c);else if(e.onceBlock)e.onceBlock.once("block",c);else if(!i){if(l++,l>o){s()&&n(new Error("retry limit reached"));return}let d=e.interval*parseInt(String(Math.random()*Math.pow(2,l)));d<e.floor&&(d=e.floor),d>e.ceiling&&(d=e.ceiling),setTimeout(c,d)}return null},function(u){s()&&n(u)})}c()})}const y6=Object.freeze(Object.defineProperty({__proto__:null,_fetchData:E0,fetchJson:Cr,poll:sr},Symbol.toStringTag,{value:"Module"}));var Hi="qpzry9x8gf2tvdw0s3jn54khce6mua7l",yc={};for(var xi=0;xi<Hi.length;xi++){var Yo=Hi.charAt(xi);if(yc[Yo]!==void 0)throw new TypeError(Yo+" is ambiguous");yc[Yo]=xi}function qr(r){var e=r>>25;return(r&33554431)<<5^-(e>>0&1)&996825010^-(e>>1&1)&642813549^-(e>>2&1)&513874426^-(e>>3&1)&1027748829^-(e>>4&1)&705979059}function _0(r){for(var e=1,t=0;t<r.length;++t){var n=r.charCodeAt(t);if(n<33||n>126)return"Invalid prefix ("+r+")";e=qr(e)^n>>5}for(e=qr(e),t=0;t<r.length;++t){var a=r.charCodeAt(t);e=qr(e)^a&31}return e}function Jy(r,e,t){if(t=t||90,r.length+7+e.length>t)throw new TypeError("Exceeds length limit");r=r.toLowerCase();var n=_0(r);if(typeof n=="string")throw new Error(n);for(var a=r+"1",i=0;i<e.length;++i){var s=e[i];if(s>>5)throw new Error("Non 5-bit word");n=qr(n)^s,a+=Hi.charAt(s)}for(i=0;i<6;++i)n=qr(n);for(n^=1,i=0;i<6;++i){var o=n>>(5-i)*5&31;a+=Hi.charAt(o)}return a}function k0(r,e){if(e=e||90,r.length<8)return r+" too short";if(r.length>e)return"Exceeds length limit";var t=r.toLowerCase(),n=r.toUpperCase();if(r!==t&&r!==n)return"Mixed-case string "+r;r=t;var a=r.lastIndexOf("1");if(a===-1)return"No separator character for "+r;if(a===0)return"Missing prefix for "+r;var i=r.slice(0,a),s=r.slice(a+1);if(s.length<6)return"Data too short";var o=_0(i);if(typeof o=="string")return o;for(var l=[],c=0;c<s.length;++c){var u=s.charAt(c),d=yc[u];if(d===void 0)return"Unknown character "+u;o=qr(o)^d,!(c+6>=s.length)&&l.push(d)}return o!==1?"Invalid checksum for "+r:{prefix:i,words:l}}function Qy(){var r=k0.apply(null,arguments);if(typeof r=="object")return r}function Xy(r){var e=k0.apply(null,arguments);if(typeof e=="object")return e;throw new Error(e)}function Io(r,e,t,n){for(var a=0,i=0,s=(1<<t)-1,o=[],l=0;l<r.length;++l)for(a=a<<e|r[l],i+=e;i>=t;)i-=t,o.push(a>>i&s);if(n)i>0&&o.push(a<<t-i&s);else{if(i>=e)return"Excess padding";if(a<<t-i&s)return"Non-zero padding"}return o}function em(r){var e=Io(r,8,5,!0);if(Array.isArray(e))return e}function tm(r){var e=Io(r,8,5,!0);if(Array.isArray(e))return e;throw new Error(e)}function nm(r){var e=Io(r,5,8,!1);if(Array.isArray(e))return e}function rm(r){var e=Io(r,5,8,!1);if(Array.isArray(e))return e;throw new Error(e)}var Zl={decodeUnsafe:Qy,decode:Xy,encode:Jy,toWordsUnsafe:em,toWords:tm,fromWordsUnsafe:nm,fromWords:rm};const mt="providers/5.7.2",fa=new j(mt);class re{constructor(){this.formats=this.getDefaultFormats()}getDefaultFormats(){const e={},t=this.address.bind(this),n=this.bigNumber.bind(this),a=this.blockTag.bind(this),i=this.data.bind(this),s=this.hash.bind(this),o=this.hex.bind(this),l=this.number.bind(this),c=this.type.bind(this),u=d=>this.data(d,!0);return e.transaction={hash:s,type:c,accessList:re.allowNull(this.accessList.bind(this),null),blockHash:re.allowNull(s,null),blockNumber:re.allowNull(l,null),transactionIndex:re.allowNull(l,null),confirmations:re.allowNull(l,null),from:t,gasPrice:re.allowNull(n),maxPriorityFeePerGas:re.allowNull(n),maxFeePerGas:re.allowNull(n),gasLimit:n,to:re.allowNull(t,null),value:n,nonce:l,data:i,r:re.allowNull(this.uint256),s:re.allowNull(this.uint256),v:re.allowNull(l),creates:re.allowNull(t,null),raw:re.allowNull(i)},e.transactionRequest={from:re.allowNull(t),nonce:re.allowNull(l),gasLimit:re.allowNull(n),gasPrice:re.allowNull(n),maxPriorityFeePerGas:re.allowNull(n),maxFeePerGas:re.allowNull(n),to:re.allowNull(t),value:re.allowNull(n),data:re.allowNull(u),type:re.allowNull(l),accessList:re.allowNull(this.accessList.bind(this),null)},e.receiptLog={transactionIndex:l,blockNumber:l,transactionHash:s,address:t,topics:re.arrayOf(s),data:i,logIndex:l,blockHash:s},e.receipt={to:re.allowNull(this.address,null),from:re.allowNull(this.address,null),contractAddress:re.allowNull(t,null),transactionIndex:l,root:re.allowNull(o),gasUsed:n,logsBloom:re.allowNull(i),blockHash:s,transactionHash:s,logs:re.arrayOf(this.receiptLog.bind(this)),blockNumber:l,confirmations:re.allowNull(l,null),cumulativeGasUsed:n,effectiveGasPrice:re.allowNull(n),status:re.allowNull(l),type:c},e.block={hash:re.allowNull(s),parentHash:s,number:l,timestamp:l,nonce:re.allowNull(o),difficulty:this.difficulty.bind(this),gasLimit:n,gasUsed:n,miner:re.allowNull(t),extraData:i,transactions:re.allowNull(re.arrayOf(s)),baseFeePerGas:re.allowNull(n)},e.blockWithTransactions=nt(e.block),e.blockWithTransactions.transactions=re.allowNull(re.arrayOf(this.transactionResponse.bind(this))),e.filter={fromBlock:re.allowNull(a,void 0),toBlock:re.allowNull(a,void 0),blockHash:re.allowNull(s,void 0),address:re.allowNull(t,void 0),topics:re.allowNull(this.topics.bind(this),void 0)},e.filterLog={blockNumber:re.allowNull(l),blockHash:re.allowNull(s),transactionIndex:l,removed:re.allowNull(this.boolean.bind(this)),address:t,data:re.allowFalsish(i,"0x"),topics:re.arrayOf(s),transactionHash:s,logIndex:l},e}accessList(e){return $c(e||[])}number(e){return e==="0x"?0:O.from(e).toNumber()}type(e){return e==="0x"||e==null?0:O.from(e).toNumber()}bigNumber(e){return O.from(e)}boolean(e){if(typeof e=="boolean")return e;if(typeof e=="string"){if(e=e.toLowerCase(),e==="true")return!0;if(e==="false")return!1}throw new Error("invalid boolean - "+e)}hex(e,t){return typeof e=="string"&&(!t&&e.substring(0,2)!=="0x"&&(e="0x"+e),Le(e))?e.toLowerCase():fa.throwArgumentError("invalid hash","value",e)}data(e,t){const n=this.hex(e,t);if(n.length%2!==0)throw new Error("invalid data; odd-length - "+e);return n}address(e){return Qt(e)}callAddress(e){if(!Le(e,32))return null;const t=Qt(gt(e,12));return t===se?null:t}contractAddress(e){return qf(e)}blockTag(e){if(e==null)return"latest";if(e==="earliest")return"0x0";switch(e){case"earliest":return"0x0";case"latest":case"pending":case"safe":case"finalized":return e}if(typeof e=="number"||Le(e))return go(e);throw new Error("invalid blockTag")}hash(e,t){const n=this.hex(e,t);return mr(n)!==32?fa.throwArgumentError("invalid hash","value",e):n}difficulty(e){if(e==null)return null;const t=O.from(e);try{return t.toNumber()}catch{}return null}uint256(e){if(!Le(e))throw new Error("invalid uint256");return ze(e,32)}_block(e,t){e.author!=null&&e.miner==null&&(e.miner=e.author);const n=e._difficulty!=null?e._difficulty:e.difficulty,a=re.check(t,e);return a._difficulty=n==null?null:O.from(n),a}block(e){return this._block(e,this.formats.block)}blockWithTransactions(e){return this._block(e,this.formats.blockWithTransactions)}transactionRequest(e){return re.check(this.formats.transactionRequest,e)}transactionResponse(e){e.gas!=null&&e.gasLimit==null&&(e.gasLimit=e.gas),e.to&&O.from(e.to).isZero()&&(e.to="0x0000000000000000000000000000000000000000"),e.input!=null&&e.data==null&&(e.data=e.input),e.to==null&&e.creates==null&&(e.creates=this.contractAddress(e)),(e.type===1||e.type===2)&&e.accessList==null&&(e.accessList=[]);const t=re.check(this.formats.transaction,e);if(e.chainId!=null){let n=e.chainId;Le(n)&&(n=O.from(n).toNumber()),t.chainId=n}else{let n=e.networkId;n==null&&t.v==null&&(n=e.chainId),Le(n)&&(n=O.from(n).toNumber()),typeof n!="number"&&t.v!=null&&(n=(t.v-35)/2,n<0&&(n=0),n=parseInt(n)),typeof n!="number"&&(n=0),t.chainId=n}return t.blockHash&&t.blockHash.replace(/0/g,"")==="x"&&(t.blockHash=null),t}transaction(e){return Vf(e)}receiptLog(e){return re.check(this.formats.receiptLog,e)}receipt(e){const t=re.check(this.formats.receipt,e);if(t.root!=null)if(t.root.length<=4){const n=O.from(t.root).toNumber();n===0||n===1?(t.status!=null&&t.status!==n&&fa.throwArgumentError("alt-root-status/status mismatch","value",{root:t.root,status:t.status}),t.status=n,delete t.root):fa.throwArgumentError("invalid alt-root-status","value.root",t.root)}else t.root.length!==66&&fa.throwArgumentError("invalid root hash","value.root",t.root);return t.status!=null&&(t.byzantium=!0),t}topics(e){return Array.isArray(e)?e.map(t=>this.topics(t)):e!=null?this.hash(e,!0):null}filter(e){return re.check(this.formats.filter,e)}filterLog(e){return re.check(this.formats.filterLog,e)}static check(e,t){const n={};for(const a in e)try{const i=e[a](t[a]);i!==void 0&&(n[a]=i)}catch(i){throw i.checkKey=a,i.checkValue=t[a],i}return n}static allowNull(e,t){return function(n){return n==null?t:e(n)}}static allowFalsish(e,t){return function(n){return n?e(n):t}}static arrayOf(e){return function(t){if(!Array.isArray(t))throw new Error("not an array");const n=[];return t.forEach(function(a){n.push(e(a))}),n}}}function am(r){return r&&typeof r.isCommunityResource=="function"}function Yl(r){return am(r)&&r.isCommunityResource()}let Jl=!1;function So(){Jl||(Jl=!0,console.log("========= NOTICE ========="),console.log("Request-Rate Exceeded  (this message will not be repeated)"),console.log(""),console.log("The default API keys for each service are provided as a highly-throttled,"),console.log("community resource for low-traffic projects and early prototyping."),console.log(""),console.log("While your application will continue to function, we highly recommended"),console.log("signing up for your own API keys to improve performance, increase your"),console.log("request rate/limit and enable other perks, such as metrics and advanced APIs."),console.log(""),console.log("For more details: https://docs.ethers.io/api-keys/"),console.log("=========================="))}var me=globalThis&&globalThis.__awaiter||function(r,e,t,n){function a(i){return i instanceof t?i:new t(function(s){s(i)})}return new(t||(t=Promise))(function(i,s){function o(u){try{c(n.next(u))}catch(d){s(d)}}function l(u){try{c(n.throw(u))}catch(d){s(d)}}function c(u){u.done?i(u.value):a(u.value).then(o,l)}c((n=n.apply(r,e||[])).next())})};const Ce=new j(mt),im=10;function Ql(r){return r==null?"null":(mr(r)!==32&&Ce.throwArgumentError("invalid topic","topic",r),r.toLowerCase())}function Xl(r){for(r=r.slice();r.length>0&&r[r.length-1]==null;)r.pop();return r.map(e=>{if(Array.isArray(e)){const t={};e.forEach(a=>{t[Ql(a)]=!0});const n=Object.keys(t);return n.sort(),n.join("|")}else return Ql(e)}).join("&")}function sm(r){return r===""?[]:r.split(/&/g).map(e=>{if(e==="")return[];const t=e.split("|").map(n=>n==="null"?null:n);return t.length===1?t[0]:t})}function Br(r){if(typeof r=="string"){if(r=r.toLowerCase(),mr(r)===32)return"tx:"+r;if(r.indexOf(":")===-1)return r}else{if(Array.isArray(r))return"filter:*:"+Xl(r);if(Gf.isForkEvent(r))throw Ce.warn("not implemented"),new Error("not implemented");if(r&&typeof r=="object")return"filter:"+(r.address||"*")+":"+Xl(r.topics||[])}throw new Error("invalid event - "+r)}function ha(){return new Date().getTime()}function eu(r){return new Promise(e=>{setTimeout(e,r)})}const om=["block","network","pending","poll"];class cm{constructor(e,t,n){ee(this,"tag",e),ee(this,"listener",t),ee(this,"once",n),this._lastBlockNumber=-2,this._inflight=!1}get event(){switch(this.type){case"tx":return this.hash;case"filter":return this.filter}return this.tag}get type(){return this.tag.split(":")[0]}get hash(){const e=this.tag.split(":");return e[0]!=="tx"?null:e[1]}get filter(){const e=this.tag.split(":");if(e[0]!=="filter")return null;const t=e[1],n=sm(e[2]),a={};return n.length>0&&(a.topics=n),t&&t!=="*"&&(a.address=t),a}pollable(){return this.tag.indexOf(":")>=0||om.indexOf(this.tag)>=0}}const lm={0:{symbol:"btc",p2pkh:0,p2sh:5,prefix:"bc"},2:{symbol:"ltc",p2pkh:48,p2sh:50,prefix:"ltc"},3:{symbol:"doge",p2pkh:30,p2sh:22},60:{symbol:"eth",ilk:"eth"},61:{symbol:"etc",ilk:"eth"},700:{symbol:"xdai",ilk:"eth"}};function Jo(r){return ze(O.from(r).toHexString(),32)}function tu(r){return Yr.encode(ct([r,gt(Kn(Kn(r)),0,4)]))}const I0=new RegExp("^(ipfs)://(.*)$","i"),nu=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),I0,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];function Pi(r,e){try{return Jn(Fa(r,e))}catch{}return null}function Fa(r,e){if(r==="0x")return null;const t=O.from(gt(r,e,e+32)).toNumber(),n=O.from(gt(r,t,t+32)).toNumber();return gt(r,t+32,t+32+n)}function Qo(r){return r.match(/^ipfs:\/\/ipfs\//i)?r=r.substring(12):r.match(/^ipfs:\/\//i)?r=r.substring(7):Ce.throwArgumentError("unsupported IPFS format","link",r),`https://gateway.ipfs.io/ipfs/${r}`}function ru(r){const e=ce(r);if(e.length>32)throw new Error("internal; should not happen");const t=new Uint8Array(32);return t.set(e,32-e.length),t}function um(r){if(r.length%32===0)return r;const e=new Uint8Array(Math.ceil(r.length/32)*32);return e.set(r),e}function S0(r){const e=[];let t=0;for(let n=0;n<r.length;n++)e.push(null),t+=32;for(let n=0;n<r.length;n++){const a=ce(r[n]);e[n]=ru(t),e.push(ru(a.length)),e.push(um(a)),t+=32+Math.ceil(a.length/32)*32}return $t(e)}class au{constructor(e,t,n,a){ee(this,"provider",e),ee(this,"name",n),ee(this,"address",e.formatter.address(t)),ee(this,"_resolvedAddress",a)}supportsWildcard(){return this._supportsEip2544||(this._supportsEip2544=this.provider.call({to:this.address,data:"0x01ffc9a79061b92300000000000000000000000000000000000000000000000000000000"}).then(e=>O.from(e).eq(1)).catch(e=>{if(e.code===j.errors.CALL_EXCEPTION)return!1;throw this._supportsEip2544=null,e})),this._supportsEip2544}_fetch(e,t){return me(this,void 0,void 0,function*(){const n={to:this.address,ccipReadEnabled:!0,data:$t([e,Ii(this.name),t||"0x"])};let a=!1;(yield this.supportsWildcard())&&(a=!0,n.data=$t(["0x9061b923",S0([ry(this.name),n.data])]));try{let i=yield this.provider.call(n);return ce(i).length%32===4&&Ce.throwError("resolver threw error",j.errors.CALL_EXCEPTION,{transaction:n,data:i}),a&&(i=Fa(i,0)),i}catch(i){if(i.code===j.errors.CALL_EXCEPTION)return null;throw i}})}_fetchBytes(e,t){return me(this,void 0,void 0,function*(){const n=yield this._fetch(e,t);return n!=null?Fa(n,0):null})}_getAddress(e,t){const n=lm[String(e)];if(n==null&&Ce.throwError(`unsupported coin type: ${e}`,j.errors.UNSUPPORTED_OPERATION,{operation:`getAddress(${e})`}),n.ilk==="eth")return this.provider.formatter.address(t);const a=ce(t);if(n.p2pkh!=null){const i=t.match(/^0x76a9([0-9a-f][0-9a-f])([0-9a-f]*)88ac$/);if(i){const s=parseInt(i[1],16);if(i[2].length===s*2&&s>=1&&s<=75)return tu(ct([[n.p2pkh],"0x"+i[2]]))}}if(n.p2sh!=null){const i=t.match(/^0xa9([0-9a-f][0-9a-f])([0-9a-f]*)87$/);if(i){const s=parseInt(i[1],16);if(i[2].length===s*2&&s>=1&&s<=75)return tu(ct([[n.p2sh],"0x"+i[2]]))}}if(n.prefix!=null){const i=a[1];let s=a[0];if(s===0?i!==20&&i!==32&&(s=-1):s=-1,s>=0&&a.length===2+i&&i>=1&&i<=75){const o=Zl.toWords(a.slice(2));return o.unshift(s),Zl.encode(n.prefix,o)}}return null}getAddress(e){return me(this,void 0,void 0,function*(){if(e==null&&(e=60),e===60)try{const a=yield this._fetch("0x3b3b57de");return a==="0x"||a===e0?null:this.provider.formatter.callAddress(a)}catch(a){if(a.code===j.errors.CALL_EXCEPTION)return null;throw a}const t=yield this._fetchBytes("0xf1cb7e06",Jo(e));if(t==null||t==="0x")return null;const n=this._getAddress(e,t);return n==null&&Ce.throwError("invalid or unsupported coin data",j.errors.UNSUPPORTED_OPERATION,{operation:`getAddress(${e})`,coinType:e,data:t}),n})}getAvatar(){return me(this,void 0,void 0,function*(){const e=[{type:"name",content:this.name}];try{const t=yield this.getText("avatar");if(t==null)return null;for(let n=0;n<nu.length;n++){const a=t.match(nu[n]);if(a==null)continue;const i=a[1].toLowerCase();switch(i){case"https":return e.push({type:"url",content:t}),{linkage:e,url:t};case"data":return e.push({type:"data",content:t}),{linkage:e,url:t};case"ipfs":return e.push({type:"ipfs",content:t}),{linkage:e,url:Qo(t)};case"erc721":case"erc1155":{const s=i==="erc721"?"0xc87b56dd":"0x0e89341c";e.push({type:i,content:t});const o=this._resolvedAddress||(yield this.getAddress()),l=(a[2]||"").split("/");if(l.length!==2)return null;const c=yield this.provider.formatter.address(l[0]),u=ze(O.from(l[1]).toHexString(),32);if(i==="erc721"){const x=this.provider.formatter.callAddress(yield this.provider.call({to:c,data:$t(["0x6352211e",u])}));if(o!==x)return null;e.push({type:"owner",content:x})}else if(i==="erc1155"){const x=O.from(yield this.provider.call({to:c,data:$t(["0x00fdd58e",ze(o,32),u])}));if(x.isZero())return null;e.push({type:"balance",content:x.toString()})}const d={to:this.provider.formatter.address(l[0]),data:$t([s,u])};let h=Pi(yield this.provider.call(d),0);if(h==null)return null;e.push({type:"metadata-url-base",content:h}),i==="erc1155"&&(h=h.replace("{id}",u.substring(2)),e.push({type:"metadata-url-expanded",content:h})),h.match(/^ipfs:/i)&&(h=Qo(h)),e.push({type:"metadata-url",content:h});const m=yield Cr(h);if(!m)return null;e.push({type:"metadata",content:JSON.stringify(m)});let b=m.image;if(typeof b!="string")return null;if(!b.match(/^(https:\/\/|data:)/i)){if(b.match(I0)==null)return null;e.push({type:"url-ipfs",content:b}),b=Qo(b)}return e.push({type:"url",content:b}),{linkage:e,url:b}}}}}catch{}return null})}getContentHash(){return me(this,void 0,void 0,function*(){const e=yield this._fetchBytes("0xbc1c58d1");if(e==null||e==="0x")return null;const t=e.match(/^0xe3010170(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(t){const s=parseInt(t[3],16);if(t[4].length===s*2)return"ipfs://"+Yr.encode("0x"+t[1])}const n=e.match(/^0xe5010172(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(n){const s=parseInt(n[3],16);if(n[4].length===s*2)return"ipns://"+Yr.encode("0x"+n[1])}const a=e.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(a&&a[1].length===32*2)return"bzz://"+a[1];const i=e.match(/^0x90b2c605([0-9a-f]*)$/);if(i&&i[1].length===34*2){const s={"=":"","+":"-","/":"_"};return"sia://"+r0("0x"+i[1]).replace(/[=+\/]/g,l=>s[l])}return Ce.throwError("invalid or unsupported content hash data",j.errors.UNSUPPORTED_OPERATION,{operation:"getContentHash()",data:e})})}getText(e){return me(this,void 0,void 0,function*(){let t=Me(e);t=ct([Jo(64),Jo(t.length),t]),t.length%32!==0&&(t=ct([t,ze("0x",32-e.length%32)]));const n=yield this._fetchBytes("0x59d1d43c",ge(t));return n==null||n==="0x"?null:Jn(n)})}}let Xo=null,dm=1;class rl extends si{constructor(e){if(super(),this._events=[],this._emitted={block:-2},this.disableCcipRead=!1,this.formatter=new.target.getFormatter(),ee(this,"anyNetwork",e==="any"),this.anyNetwork&&(e=this.detectNetwork()),e instanceof Promise)this._networkPromise=e,e.catch(t=>{}),this._ready().catch(t=>{});else{const t=qn(new.target,"getNetwork")(e);t?(ee(this,"_network",t),this.emit("network",t,null)):Ce.throwArgumentError("invalid network","network",e)}this._maxInternalBlockNumber=-1024,this._lastBlockNumber=-2,this._maxFilterBlockRange=10,this._pollingInterval=4e3,this._fastQueryDate=0}_ready(){return me(this,void 0,void 0,function*(){if(this._network==null){let e=null;if(this._networkPromise)try{e=yield this._networkPromise}catch{}e==null&&(e=yield this.detectNetwork()),e||Ce.throwError("no network detected",j.errors.UNKNOWN_ERROR,{}),this._network==null&&(this.anyNetwork?this._network=e:ee(this,"_network",e),this.emit("network",e,null))}return this._network})}get ready(){return sr(()=>this._ready().then(e=>e,e=>{if(!(e.code===j.errors.NETWORK_ERROR&&e.event==="noNetwork"))throw e}))}static getFormatter(){return Xo==null&&(Xo=new re),Xo}static getNetwork(e){return C0(e??"homestead")}ccipReadFetch(e,t,n){return me(this,void 0,void 0,function*(){if(this.disableCcipRead||n.length===0)return null;const a=e.to.toLowerCase(),i=t.toLowerCase(),s=[];for(let o=0;o<n.length;o++){const l=n[o],c=l.replace("{sender}",a).replace("{data}",i),u=l.indexOf("{data}")>=0?null:JSON.stringify({data:i,sender:a}),d=yield Cr({url:c,errorPassThrough:!0},u,(m,b)=>(m.status=b.statusCode,m));if(d.data)return d.data;const h=d.message||"unknown error";if(d.status>=400&&d.status<500)return Ce.throwError(`response not found during CCIP fetch: ${h}`,j.errors.SERVER_ERROR,{url:l,errorMessage:h});s.push(h)}return Ce.throwError(`error encountered during CCIP fetch: ${s.map(o=>JSON.stringify(o)).join(", ")}`,j.errors.SERVER_ERROR,{urls:n,errorMessages:s})})}_getInternalBlockNumber(e){return me(this,void 0,void 0,function*(){if(yield this._ready(),e>0)for(;this._internalBlockNumber;){const a=this._internalBlockNumber;try{const i=yield a;if(ha()-i.respTime<=e)return i.blockNumber;break}catch{if(this._internalBlockNumber===a)break}}const t=ha(),n=Rt({blockNumber:this.perform("getBlockNumber",{}),networkError:this.getNetwork().then(a=>null,a=>a)}).then(({blockNumber:a,networkError:i})=>{if(i)throw this._internalBlockNumber===n&&(this._internalBlockNumber=null),i;const s=ha();return a=O.from(a).toNumber(),a<this._maxInternalBlockNumber&&(a=this._maxInternalBlockNumber),this._maxInternalBlockNumber=a,this._setFastBlockNumber(a),{blockNumber:a,reqTime:t,respTime:s}});return this._internalBlockNumber=n,n.catch(a=>{this._internalBlockNumber===n&&(this._internalBlockNumber=null)}),(yield n).blockNumber})}poll(){return me(this,void 0,void 0,function*(){const e=dm++,t=[];let n=null;try{n=yield this._getInternalBlockNumber(100+this.pollingInterval/2)}catch(a){this.emit("error",a);return}if(this._setFastBlockNumber(n),this.emit("poll",e,n),n===this._lastBlockNumber){this.emit("didPoll",e);return}if(this._emitted.block===-2&&(this._emitted.block=n-1),Math.abs(this._emitted.block-n)>1e3)Ce.warn(`network block skew detected; skipping block events (emitted=${this._emitted.block} blockNumber${n})`),this.emit("error",Ce.makeError("network block skew detected",j.errors.NETWORK_ERROR,{blockNumber:n,event:"blockSkew",previousBlockNumber:this._emitted.block})),this.emit("block",n);else for(let a=this._emitted.block+1;a<=n;a++)this.emit("block",a);this._emitted.block!==n&&(this._emitted.block=n,Object.keys(this._emitted).forEach(a=>{if(a==="block")return;const i=this._emitted[a];i!=="pending"&&n-i>12&&delete this._emitted[a]})),this._lastBlockNumber===-2&&(this._lastBlockNumber=n-1),this._events.forEach(a=>{switch(a.type){case"tx":{const i=a.hash;let s=this.getTransactionReceipt(i).then(o=>(!o||o.blockNumber==null||(this._emitted["t:"+i]=o.blockNumber,this.emit(i,o)),null)).catch(o=>{this.emit("error",o)});t.push(s);break}case"filter":{if(!a._inflight){a._inflight=!0,a._lastBlockNumber===-2&&(a._lastBlockNumber=n-1);const i=a.filter;i.fromBlock=a._lastBlockNumber+1,i.toBlock=n;const s=i.toBlock-this._maxFilterBlockRange;s>i.fromBlock&&(i.fromBlock=s),i.fromBlock<0&&(i.fromBlock=0);const o=this.getLogs(i).then(l=>{a._inflight=!1,l.length!==0&&l.forEach(c=>{c.blockNumber>a._lastBlockNumber&&(a._lastBlockNumber=c.blockNumber),this._emitted["b:"+c.blockHash]=c.blockNumber,this._emitted["t:"+c.transactionHash]=c.blockNumber,this.emit(i,c)})}).catch(l=>{this.emit("error",l),a._inflight=!1});t.push(o)}break}}}),this._lastBlockNumber=n,Promise.all(t).then(()=>{this.emit("didPoll",e)}).catch(a=>{this.emit("error",a)})})}resetEventsBlock(e){this._lastBlockNumber=e-1,this.polling&&this.poll()}get network(){return this._network}detectNetwork(){return me(this,void 0,void 0,function*(){return Ce.throwError("provider does not support network detection",j.errors.UNSUPPORTED_OPERATION,{operation:"provider.detectNetwork"})})}getNetwork(){return me(this,void 0,void 0,function*(){const e=yield this._ready(),t=yield this.detectNetwork();if(e.chainId!==t.chainId){if(this.anyNetwork)return this._network=t,this._lastBlockNumber=-2,this._fastBlockNumber=null,this._fastBlockNumberPromise=null,this._fastQueryDate=0,this._emitted.block=-2,this._maxInternalBlockNumber=-1024,this._internalBlockNumber=null,this.emit("network",t,e),yield eu(0),this._network;const n=Ce.makeError("underlying network changed",j.errors.NETWORK_ERROR,{event:"changed",network:e,detectedNetwork:t});throw this.emit("error",n),n}return e})}get blockNumber(){return this._getInternalBlockNumber(100+this.pollingInterval/2).then(e=>{this._setFastBlockNumber(e)},e=>{}),this._fastBlockNumber!=null?this._fastBlockNumber:-1}get polling(){return this._poller!=null}set polling(e){e&&!this._poller?(this._poller=setInterval(()=>{this.poll()},this.pollingInterval),this._bootstrapPoll||(this._bootstrapPoll=setTimeout(()=>{this.poll(),this._bootstrapPoll=setTimeout(()=>{this._poller||this.poll(),this._bootstrapPoll=null},this.pollingInterval)},0))):!e&&this._poller&&(clearInterval(this._poller),this._poller=null)}get pollingInterval(){return this._pollingInterval}set pollingInterval(e){if(typeof e!="number"||e<=0||parseInt(String(e))!=e)throw new Error("invalid polling interval");this._pollingInterval=e,this._poller&&(clearInterval(this._poller),this._poller=setInterval(()=>{this.poll()},this._pollingInterval))}_getFastBlockNumber(){const e=ha();return e-this._fastQueryDate>2*this._pollingInterval&&(this._fastQueryDate=e,this._fastBlockNumberPromise=this.getBlockNumber().then(t=>((this._fastBlockNumber==null||t>this._fastBlockNumber)&&(this._fastBlockNumber=t),this._fastBlockNumber))),this._fastBlockNumberPromise}_setFastBlockNumber(e){this._fastBlockNumber!=null&&e<this._fastBlockNumber||(this._fastQueryDate=ha(),(this._fastBlockNumber==null||e>this._fastBlockNumber)&&(this._fastBlockNumber=e,this._fastBlockNumberPromise=Promise.resolve(e)))}waitForTransaction(e,t,n){return me(this,void 0,void 0,function*(){return this._waitForTransaction(e,t??1,n||0,null)})}_waitForTransaction(e,t,n,a){return me(this,void 0,void 0,function*(){const i=yield this.getTransactionReceipt(e);return(i?i.confirmations:0)>=t?i:new Promise((s,o)=>{const l=[];let c=!1;const u=function(){return c?!0:(c=!0,l.forEach(h=>{h()}),!1)},d=h=>{h.confirmations<t||u()||s(h)};if(this.on(e,d),l.push(()=>{this.removeListener(e,d)}),a){let h=a.startBlock,m=null;const b=x=>me(this,void 0,void 0,function*(){c||(yield eu(1e3),this.getTransactionCount(a.from).then(f=>me(this,void 0,void 0,function*(){if(!c){if(f<=a.nonce)h=x;else{{const w=yield this.getTransaction(e);if(w&&w.blockNumber!=null)return}for(m==null&&(m=h-3,m<a.startBlock&&(m=a.startBlock));m<=x;){if(c)return;const w=yield this.getBlockWithTransactions(m);for(let A=0;A<w.transactions.length;A++){const T=w.transactions[A];if(T.hash===e)return;if(T.from===a.from&&T.nonce===a.nonce){if(c)return;const E=yield this.waitForTransaction(T.hash,t);if(u())return;let I="replaced";T.data===a.data&&T.to===a.to&&T.value.eq(a.value)?I="repriced":T.data==="0x"&&T.from===T.to&&T.value.isZero()&&(I="cancelled"),o(Ce.makeError("transaction was replaced",j.errors.TRANSACTION_REPLACED,{cancelled:I==="replaced"||I==="cancelled",reason:I,replacement:this._wrapTransaction(T),hash:e,receipt:E}));return}}m++}}c||this.once("block",b)}}),f=>{c||this.once("block",b)}))});if(c)return;this.once("block",b),l.push(()=>{this.removeListener("block",b)})}if(typeof n=="number"&&n>0){const h=setTimeout(()=>{u()||o(Ce.makeError("timeout exceeded",j.errors.TIMEOUT,{timeout:n}))},n);h.unref&&h.unref(),l.push(()=>{clearTimeout(h)})}})})}getBlockNumber(){return me(this,void 0,void 0,function*(){return this._getInternalBlockNumber(0)})}getGasPrice(){return me(this,void 0,void 0,function*(){yield this.getNetwork();const e=yield this.perform("getGasPrice",{});try{return O.from(e)}catch(t){return Ce.throwError("bad result from backend",j.errors.SERVER_ERROR,{method:"getGasPrice",result:e,error:t})}})}getBalance(e,t){return me(this,void 0,void 0,function*(){yield this.getNetwork();const n=yield Rt({address:this._getAddress(e),blockTag:this._getBlockTag(t)}),a=yield this.perform("getBalance",n);try{return O.from(a)}catch(i){return Ce.throwError("bad result from backend",j.errors.SERVER_ERROR,{method:"getBalance",params:n,result:a,error:i})}})}getTransactionCount(e,t){return me(this,void 0,void 0,function*(){yield this.getNetwork();const n=yield Rt({address:this._getAddress(e),blockTag:this._getBlockTag(t)}),a=yield this.perform("getTransactionCount",n);try{return O.from(a).toNumber()}catch(i){return Ce.throwError("bad result from backend",j.errors.SERVER_ERROR,{method:"getTransactionCount",params:n,result:a,error:i})}})}getCode(e,t){return me(this,void 0,void 0,function*(){yield this.getNetwork();const n=yield Rt({address:this._getAddress(e),blockTag:this._getBlockTag(t)}),a=yield this.perform("getCode",n);try{return ge(a)}catch(i){return Ce.throwError("bad result from backend",j.errors.SERVER_ERROR,{method:"getCode",params:n,result:a,error:i})}})}getStorageAt(e,t,n){return me(this,void 0,void 0,function*(){yield this.getNetwork();const a=yield Rt({address:this._getAddress(e),blockTag:this._getBlockTag(n),position:Promise.resolve(t).then(s=>go(s))}),i=yield this.perform("getStorageAt",a);try{return ge(i)}catch(s){return Ce.throwError("bad result from backend",j.errors.SERVER_ERROR,{method:"getStorageAt",params:a,result:i,error:s})}})}_wrapTransaction(e,t,n){if(t!=null&&mr(t)!==32)throw new Error("invalid response - sendTransaction");const a=e;return t!=null&&e.hash!==t&&Ce.throwError("Transaction hash mismatch from Provider.sendTransaction.",j.errors.UNKNOWN_ERROR,{expectedHash:e.hash,returnedHash:t}),a.wait=(i,s)=>me(this,void 0,void 0,function*(){i==null&&(i=1),s==null&&(s=0);let o;i!==0&&n!=null&&(o={data:e.data,from:e.from,nonce:e.nonce,to:e.to,value:e.value,startBlock:n});const l=yield this._waitForTransaction(e.hash,i,s,o);return l==null&&i===0?null:(this._emitted["t:"+e.hash]=l.blockNumber,l.status===0&&Ce.throwError("transaction failed",j.errors.CALL_EXCEPTION,{transactionHash:e.hash,transaction:e,receipt:l}),l)}),a}sendTransaction(e){return me(this,void 0,void 0,function*(){yield this.getNetwork();const t=yield Promise.resolve(e).then(i=>ge(i)),n=this.formatter.transaction(e);n.confirmations==null&&(n.confirmations=0);const a=yield this._getInternalBlockNumber(100+2*this.pollingInterval);try{const i=yield this.perform("sendTransaction",{signedTransaction:t});return this._wrapTransaction(n,i,a)}catch(i){throw i.transaction=n,i.transactionHash=n.hash,i}})}_getTransactionRequest(e){return me(this,void 0,void 0,function*(){const t=yield e,n={};return["from","to"].forEach(a=>{t[a]!=null&&(n[a]=Promise.resolve(t[a]).then(i=>i?this._getAddress(i):null))}),["gasLimit","gasPrice","maxFeePerGas","maxPriorityFeePerGas","value"].forEach(a=>{t[a]!=null&&(n[a]=Promise.resolve(t[a]).then(i=>i?O.from(i):null))}),["type"].forEach(a=>{t[a]!=null&&(n[a]=Promise.resolve(t[a]).then(i=>i??null))}),t.accessList&&(n.accessList=this.formatter.accessList(t.accessList)),["data"].forEach(a=>{t[a]!=null&&(n[a]=Promise.resolve(t[a]).then(i=>i?ge(i):null))}),this.formatter.transactionRequest(yield Rt(n))})}_getFilter(e){return me(this,void 0,void 0,function*(){e=yield e;const t={};return e.address!=null&&(t.address=this._getAddress(e.address)),["blockHash","topics"].forEach(n=>{e[n]!=null&&(t[n]=e[n])}),["fromBlock","toBlock"].forEach(n=>{e[n]!=null&&(t[n]=this._getBlockTag(e[n]))}),this.formatter.filter(yield Rt(t))})}_call(e,t,n){return me(this,void 0,void 0,function*(){n>=im&&Ce.throwError("CCIP read exceeded maximum redirections",j.errors.SERVER_ERROR,{redirects:n,transaction:e});const a=e.to,i=yield this.perform("call",{transaction:e,blockTag:t});if(n>=0&&t==="latest"&&a!=null&&i.substring(0,10)==="0x556f1830"&&mr(i)%32===4)try{const s=gt(i,4),o=gt(s,0,32);O.from(o).eq(a)||Ce.throwError("CCIP Read sender did not match",j.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:i});const l=[],c=O.from(gt(s,32,64)).toNumber(),u=O.from(gt(s,c,c+32)).toNumber(),d=gt(s,c+32);for(let w=0;w<u;w++){const A=Pi(d,w*32);A==null&&Ce.throwError("CCIP Read contained corrupt URL string",j.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:i}),l.push(A)}const h=Fa(s,64);O.from(gt(s,100,128)).isZero()||Ce.throwError("CCIP Read callback selector included junk",j.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:i});const m=gt(s,96,100),b=Fa(s,128),x=yield this.ccipReadFetch(e,h,l);x==null&&Ce.throwError("CCIP Read disabled or provided no URLs",j.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:i});const f={to:a,data:$t([m,S0([x,b])])};return this._call(f,t,n+1)}catch(s){if(s.code===j.errors.SERVER_ERROR)throw s}try{return ge(i)}catch(s){return Ce.throwError("bad result from backend",j.errors.SERVER_ERROR,{method:"call",params:{transaction:e,blockTag:t},result:i,error:s})}})}call(e,t){return me(this,void 0,void 0,function*(){yield this.getNetwork();const n=yield Rt({transaction:this._getTransactionRequest(e),blockTag:this._getBlockTag(t),ccipReadEnabled:Promise.resolve(e.ccipReadEnabled)});return this._call(n.transaction,n.blockTag,n.ccipReadEnabled?0:-1)})}estimateGas(e){return me(this,void 0,void 0,function*(){yield this.getNetwork();const t=yield Rt({transaction:this._getTransactionRequest(e)}),n=yield this.perform("estimateGas",t);try{return O.from(n)}catch(a){return Ce.throwError("bad result from backend",j.errors.SERVER_ERROR,{method:"estimateGas",params:t,result:n,error:a})}})}_getAddress(e){return me(this,void 0,void 0,function*(){e=yield e,typeof e!="string"&&Ce.throwArgumentError("invalid address or ENS name","name",e);const t=yield this.resolveName(e);return t==null&&Ce.throwError("ENS name not configured",j.errors.UNSUPPORTED_OPERATION,{operation:`resolveName(${JSON.stringify(e)})`}),t})}_getBlock(e,t){return me(this,void 0,void 0,function*(){yield this.getNetwork(),e=yield e;let n=-128;const a={includeTransactions:!!t};if(Le(e,32))a.blockHash=e;else try{a.blockTag=yield this._getBlockTag(e),Le(a.blockTag)&&(n=parseInt(a.blockTag.substring(2),16))}catch{Ce.throwArgumentError("invalid block hash or block tag","blockHashOrBlockTag",e)}return sr(()=>me(this,void 0,void 0,function*(){const i=yield this.perform("getBlock",a);if(i==null)return a.blockHash!=null&&this._emitted["b:"+a.blockHash]==null||a.blockTag!=null&&n>this._emitted.block?null:void 0;if(t){let s=null;for(let l=0;l<i.transactions.length;l++){const c=i.transactions[l];if(c.blockNumber==null)c.confirmations=0;else if(c.confirmations==null){s==null&&(s=yield this._getInternalBlockNumber(100+2*this.pollingInterval));let u=s-c.blockNumber+1;u<=0&&(u=1),c.confirmations=u}}const o=this.formatter.blockWithTransactions(i);return o.transactions=o.transactions.map(l=>this._wrapTransaction(l)),o}return this.formatter.block(i)}),{oncePoll:this})})}getBlock(e){return this._getBlock(e,!1)}getBlockWithTransactions(e){return this._getBlock(e,!0)}getTransaction(e){return me(this,void 0,void 0,function*(){yield this.getNetwork(),e=yield e;const t={transactionHash:this.formatter.hash(e,!0)};return sr(()=>me(this,void 0,void 0,function*(){const n=yield this.perform("getTransaction",t);if(n==null)return this._emitted["t:"+e]==null?null:void 0;const a=this.formatter.transactionResponse(n);if(a.blockNumber==null)a.confirmations=0;else if(a.confirmations==null){let s=(yield this._getInternalBlockNumber(100+2*this.pollingInterval))-a.blockNumber+1;s<=0&&(s=1),a.confirmations=s}return this._wrapTransaction(a)}),{oncePoll:this})})}getTransactionReceipt(e){return me(this,void 0,void 0,function*(){yield this.getNetwork(),e=yield e;const t={transactionHash:this.formatter.hash(e,!0)};return sr(()=>me(this,void 0,void 0,function*(){const n=yield this.perform("getTransactionReceipt",t);if(n==null)return this._emitted["t:"+e]==null?null:void 0;if(n.blockHash==null)return;const a=this.formatter.receipt(n);if(a.blockNumber==null)a.confirmations=0;else if(a.confirmations==null){let s=(yield this._getInternalBlockNumber(100+2*this.pollingInterval))-a.blockNumber+1;s<=0&&(s=1),a.confirmations=s}return a}),{oncePoll:this})})}getLogs(e){return me(this,void 0,void 0,function*(){yield this.getNetwork();const t=yield Rt({filter:this._getFilter(e)}),n=yield this.perform("getLogs",t);return n.forEach(a=>{a.removed==null&&(a.removed=!1)}),re.arrayOf(this.formatter.filterLog.bind(this.formatter))(n)})}getEtherPrice(){return me(this,void 0,void 0,function*(){return yield this.getNetwork(),this.perform("getEtherPrice",{})})}_getBlockTag(e){return me(this,void 0,void 0,function*(){if(e=yield e,typeof e=="number"&&e<0){e%1&&Ce.throwArgumentError("invalid BlockTag","blockTag",e);let t=yield this._getInternalBlockNumber(100+2*this.pollingInterval);return t+=e,t<0&&(t=0),this.formatter.blockTag(t)}return this.formatter.blockTag(e)})}getResolver(e){return me(this,void 0,void 0,function*(){let t=e;for(;;){if(t===""||t==="."||e!=="eth"&&t==="eth")return null;const n=yield this._getResolver(t,"getResolver");if(n!=null){const a=new au(this,n,e);return t!==e&&!(yield a.supportsWildcard())?null:a}t=t.split(".").slice(1).join(".")}})}_getResolver(e,t){return me(this,void 0,void 0,function*(){t==null&&(t="ENS");const n=yield this.getNetwork();n.ensAddress||Ce.throwError("network does not support ENS",j.errors.UNSUPPORTED_OPERATION,{operation:t,network:n.name});try{const a=yield this.call({to:n.ensAddress,data:"0x0178b8bf"+Ii(e).substring(2)});return this.formatter.callAddress(a)}catch{}return null})}resolveName(e){return me(this,void 0,void 0,function*(){e=yield e;try{return Promise.resolve(this.formatter.address(e))}catch(n){if(Le(e))throw n}typeof e!="string"&&Ce.throwArgumentError("invalid ENS name","name",e);const t=yield this.getResolver(e);return t?yield t.getAddress():null})}lookupAddress(e){return me(this,void 0,void 0,function*(){e=yield e,e=this.formatter.address(e);const t=e.substring(2).toLowerCase()+".addr.reverse",n=yield this._getResolver(t,"lookupAddress");if(n==null)return null;const a=Pi(yield this.call({to:n,data:"0x691f3431"+Ii(t).substring(2)}),0);return(yield this.resolveName(a))!=e?null:a})}getAvatar(e){return me(this,void 0,void 0,function*(){let t=null;if(Le(e)){const i=this.formatter.address(e).substring(2).toLowerCase()+".addr.reverse",s=yield this._getResolver(i,"getAvatar");if(!s)return null;t=new au(this,s,i);try{const o=yield t.getAvatar();if(o)return o.url}catch(o){if(o.code!==j.errors.CALL_EXCEPTION)throw o}try{const o=Pi(yield this.call({to:s,data:"0x691f3431"+Ii(i).substring(2)}),0);t=yield this.getResolver(o)}catch(o){if(o.code!==j.errors.CALL_EXCEPTION)throw o;return null}}else if(t=yield this.getResolver(e),!t)return null;const n=yield t.getAvatar();return n==null?null:n.url})}perform(e,t){return Ce.throwError(e+" not implemented",j.errors.NOT_IMPLEMENTED,{operation:e})}_startEvent(e){this.polling=this._events.filter(t=>t.pollable()).length>0}_stopEvent(e){this.polling=this._events.filter(t=>t.pollable()).length>0}_addEventListener(e,t,n){const a=new cm(Br(e),t,n);return this._events.push(a),this._startEvent(a),this}on(e,t){return this._addEventListener(e,t,!1)}once(e,t){return this._addEventListener(e,t,!0)}emit(e,...t){let n=!1,a=[],i=Br(e);return this._events=this._events.filter(s=>s.tag!==i?!0:(setTimeout(()=>{s.listener.apply(this,t)},0),n=!0,s.once?(a.push(s),!1):!0)),a.forEach(s=>{this._stopEvent(s)}),n}listenerCount(e){if(!e)return this._events.length;let t=Br(e);return this._events.filter(n=>n.tag===t).length}listeners(e){if(e==null)return this._events.map(n=>n.listener);let t=Br(e);return this._events.filter(n=>n.tag===t).map(n=>n.listener)}off(e,t){if(t==null)return this.removeAllListeners(e);const n=[];let a=!1,i=Br(e);return this._events=this._events.filter(s=>s.tag!==i||s.listener!=t||a?!0:(a=!0,n.push(s),!1)),n.forEach(s=>{this._stopEvent(s)}),this}removeAllListeners(e){let t=[];if(e==null)t=this._events,this._events=[];else{const n=Br(e);this._events=this._events.filter(a=>a.tag!==n?!0:(t.push(a),!1))}return t.forEach(n=>{this._stopEvent(n)}),this}}var mn=globalThis&&globalThis.__awaiter||function(r,e,t,n){function a(i){return i instanceof t?i:new t(function(s){s(i)})}return new(t||(t=Promise))(function(i,s){function o(u){try{c(n.next(u))}catch(d){s(d)}}function l(u){try{c(n.throw(u))}catch(d){s(d)}}function c(u){u.done?i(u.value):a(u.value).then(o,l)}c((n=n.apply(r,e||[])).next())})};const Ze=new j(mt),pm=["call","estimateGas"];function Sa(r,e){if(r==null)return null;if(typeof r.message=="string"&&r.message.match("reverted")){const t=Le(r.data)?r.data:null;if(!e||t)return{message:r.message,data:t}}if(typeof r=="object"){for(const t in r){const n=Sa(r[t],e);if(n)return n}return null}if(typeof r=="string")try{return Sa(JSON.parse(r),e)}catch{}return null}function P0(r,e,t){const n=t.transaction||t.signedTransaction;if(r==="call"){const i=Sa(e,!0);if(i)return i.data;Ze.throwError("missing revert data in call exception; Transaction reverted without a reason string",j.errors.CALL_EXCEPTION,{data:"0x",transaction:n,error:e})}if(r==="estimateGas"){let i=Sa(e.body,!1);i==null&&(i=Sa(e,!1)),i&&Ze.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",j.errors.UNPREDICTABLE_GAS_LIMIT,{reason:i.message,method:r,transaction:n,error:e})}let a=e.message;throw e.code===j.errors.SERVER_ERROR&&e.error&&typeof e.error.message=="string"?a=e.error.message:typeof e.body=="string"?a=e.body:typeof e.responseText=="string"&&(a=e.responseText),a=(a||"").toLowerCase(),a.match(/insufficient funds|base fee exceeds gas limit|InsufficientFunds/i)&&Ze.throwError("insufficient funds for intrinsic transaction cost",j.errors.INSUFFICIENT_FUNDS,{error:e,method:r,transaction:n}),a.match(/nonce (is )?too low/i)&&Ze.throwError("nonce has already been used",j.errors.NONCE_EXPIRED,{error:e,method:r,transaction:n}),a.match(/replacement transaction underpriced|transaction gas price.*too low/i)&&Ze.throwError("replacement fee too low",j.errors.REPLACEMENT_UNDERPRICED,{error:e,method:r,transaction:n}),a.match(/only replay-protected/i)&&Ze.throwError("legacy pre-eip-155 transactions not supported",j.errors.UNSUPPORTED_OPERATION,{error:e,method:r,transaction:n}),pm.indexOf(r)>=0&&a.match(/gas required exceeds allowance|always failing transaction|execution reverted|revert/)&&Ze.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",j.errors.UNPREDICTABLE_GAS_LIMIT,{error:e,method:r,transaction:n}),e}function iu(r){return new Promise(function(e){setTimeout(e,r)})}function fm(r){if(r.error){const e=new Error(r.error.message);throw e.code=r.error.code,e.data=r.error.data,e}return r.result}function ya(r){return r&&r.toLowerCase()}const mc={};class B0 extends Zr{constructor(e,t,n){if(super(),e!==mc)throw new Error("do not call the JsonRpcSigner constructor directly; use provider.getSigner");ee(this,"provider",t),n==null&&(n=0),typeof n=="string"?(ee(this,"_address",this.provider.formatter.address(n)),ee(this,"_index",null)):typeof n=="number"?(ee(this,"_index",n),ee(this,"_address",null)):Ze.throwArgumentError("invalid address or index","addressOrIndex",n)}connect(e){return Ze.throwError("cannot alter JSON-RPC Signer connection",j.errors.UNSUPPORTED_OPERATION,{operation:"connect"})}connectUnchecked(){return new hm(mc,this.provider,this._address||this._index)}getAddress(){return this._address?Promise.resolve(this._address):this.provider.send("eth_accounts",[]).then(e=>(e.length<=this._index&&Ze.throwError("unknown account #"+this._index,j.errors.UNSUPPORTED_OPERATION,{operation:"getAddress"}),this.provider.formatter.address(e[this._index])))}sendUncheckedTransaction(e){e=nt(e);const t=this.getAddress().then(n=>(n&&(n=n.toLowerCase()),n));if(e.gasLimit==null){const n=nt(e);n.from=t,e.gasLimit=this.provider.estimateGas(n)}return e.to!=null&&(e.to=Promise.resolve(e.to).then(n=>mn(this,void 0,void 0,function*(){if(n==null)return null;const a=yield this.provider.resolveName(n);return a==null&&Ze.throwArgumentError("provided ENS name resolves to null","tx.to",n),a}))),Rt({tx:Rt(e),sender:t}).then(({tx:n,sender:a})=>{n.from!=null?n.from.toLowerCase()!==a&&Ze.throwArgumentError("from address mismatch","transaction",e):n.from=a;const i=this.provider.constructor.hexlifyTransaction(n,{from:!0});return this.provider.send("eth_sendTransaction",[i]).then(s=>s,s=>(typeof s.message=="string"&&s.message.match(/user denied/i)&&Ze.throwError("user rejected transaction",j.errors.ACTION_REJECTED,{action:"sendTransaction",transaction:n}),P0("sendTransaction",s,i)))})}signTransaction(e){return Ze.throwError("signing transactions is unsupported",j.errors.UNSUPPORTED_OPERATION,{operation:"signTransaction"})}sendTransaction(e){return mn(this,void 0,void 0,function*(){const t=yield this.provider._getInternalBlockNumber(100+2*this.provider.pollingInterval),n=yield this.sendUncheckedTransaction(e);try{return yield sr(()=>mn(this,void 0,void 0,function*(){const a=yield this.provider.getTransaction(n);if(a!==null)return this.provider._wrapTransaction(a,n,t)}),{oncePoll:this.provider})}catch(a){throw a.transactionHash=n,a}})}signMessage(e){return mn(this,void 0,void 0,function*(){const t=typeof e=="string"?Me(e):e,n=yield this.getAddress();try{return yield this.provider.send("personal_sign",[ge(t),n.toLowerCase()])}catch(a){throw typeof a.message=="string"&&a.message.match(/user denied/i)&&Ze.throwError("user rejected signing",j.errors.ACTION_REJECTED,{action:"signMessage",from:n,messageData:e}),a}})}_legacySignMessage(e){return mn(this,void 0,void 0,function*(){const t=typeof e=="string"?Me(e):e,n=yield this.getAddress();try{return yield this.provider.send("eth_sign",[n.toLowerCase(),ge(t)])}catch(a){throw typeof a.message=="string"&&a.message.match(/user denied/i)&&Ze.throwError("user rejected signing",j.errors.ACTION_REJECTED,{action:"_legacySignMessage",from:n,messageData:e}),a}})}_signTypedData(e,t,n){return mn(this,void 0,void 0,function*(){const a=yield tt.resolveNames(e,t,n,s=>this.provider.resolveName(s)),i=yield this.getAddress();try{return yield this.provider.send("eth_signTypedData_v4",[i.toLowerCase(),JSON.stringify(tt.getPayload(a.domain,t,a.value))])}catch(s){throw typeof s.message=="string"&&s.message.match(/user denied/i)&&Ze.throwError("user rejected signing",j.errors.ACTION_REJECTED,{action:"_signTypedData",from:i,messageData:{domain:a.domain,types:t,value:a.value}}),s}})}unlock(e){return mn(this,void 0,void 0,function*(){const t=this.provider,n=yield this.getAddress();return t.send("personal_unlockAccount",[n.toLowerCase(),e,null])})}}class hm extends B0{sendTransaction(e){return this.sendUncheckedTransaction(e).then(t=>({hash:t,nonce:null,gasLimit:null,gasPrice:null,data:null,value:null,chainId:null,confirmations:0,from:null,wait:n=>this.provider.waitForTransaction(t,n)}))}}const ym={chainId:!0,data:!0,gasLimit:!0,gasPrice:!0,nonce:!0,to:!0,value:!0,type:!0,accessList:!0,maxFeePerGas:!0,maxPriorityFeePerGas:!0};class Qr extends rl{constructor(e,t){let n=t;n==null&&(n=new Promise((a,i)=>{setTimeout(()=>{this.detectNetwork().then(s=>{a(s)},s=>{i(s)})},0)})),super(n),e||(e=qn(this.constructor,"defaultUrl")()),typeof e=="string"?ee(this,"connection",Object.freeze({url:e})):ee(this,"connection",Object.freeze(nt(e))),this._nextId=42}get _cache(){return this._eventLoopCache==null&&(this._eventLoopCache={}),this._eventLoopCache}static defaultUrl(){return"http://localhost:8545"}detectNetwork(){return this._cache.detectNetwork||(this._cache.detectNetwork=this._uncachedDetectNetwork(),setTimeout(()=>{this._cache.detectNetwork=null},0)),this._cache.detectNetwork}_uncachedDetectNetwork(){return mn(this,void 0,void 0,function*(){yield iu(0);let e=null;try{e=yield this.send("eth_chainId",[])}catch{try{e=yield this.send("net_version",[])}catch{}}if(e!=null){const t=qn(this.constructor,"getNetwork");try{return t(O.from(e).toNumber())}catch(n){return Ze.throwError("could not detect network",j.errors.NETWORK_ERROR,{chainId:e,event:"invalidNetwork",serverError:n})}}return Ze.throwError("could not detect network",j.errors.NETWORK_ERROR,{event:"noNetwork"})})}getSigner(e){return new B0(mc,this,e)}getUncheckedSigner(e){return this.getSigner(e).connectUnchecked()}listAccounts(){return this.send("eth_accounts",[]).then(e=>e.map(t=>this.formatter.address(t)))}send(e,t){const n={method:e,params:t,id:this._nextId++,jsonrpc:"2.0"};this.emit("debug",{action:"request",request:on(n),provider:this});const a=["eth_chainId","eth_blockNumber"].indexOf(e)>=0;if(a&&this._cache[e])return this._cache[e];const i=Cr(this.connection,JSON.stringify(n),fm).then(s=>(this.emit("debug",{action:"response",request:n,response:s,provider:this}),s),s=>{throw this.emit("debug",{action:"response",error:s,request:n,provider:this}),s});return a&&(this._cache[e]=i,setTimeout(()=>{this._cache[e]=null},0)),i}prepareRequest(e,t){switch(e){case"getBlockNumber":return["eth_blockNumber",[]];case"getGasPrice":return["eth_gasPrice",[]];case"getBalance":return["eth_getBalance",[ya(t.address),t.blockTag]];case"getTransactionCount":return["eth_getTransactionCount",[ya(t.address),t.blockTag]];case"getCode":return["eth_getCode",[ya(t.address),t.blockTag]];case"getStorageAt":return["eth_getStorageAt",[ya(t.address),ze(t.position,32),t.blockTag]];case"sendTransaction":return["eth_sendRawTransaction",[t.signedTransaction]];case"getBlock":return t.blockTag?["eth_getBlockByNumber",[t.blockTag,!!t.includeTransactions]]:t.blockHash?["eth_getBlockByHash",[t.blockHash,!!t.includeTransactions]]:null;case"getTransaction":return["eth_getTransactionByHash",[t.transactionHash]];case"getTransactionReceipt":return["eth_getTransactionReceipt",[t.transactionHash]];case"call":return["eth_call",[qn(this.constructor,"hexlifyTransaction")(t.transaction,{from:!0}),t.blockTag]];case"estimateGas":return["eth_estimateGas",[qn(this.constructor,"hexlifyTransaction")(t.transaction,{from:!0})]];case"getLogs":return t.filter&&t.filter.address!=null&&(t.filter.address=ya(t.filter.address)),["eth_getLogs",[t.filter]]}return null}perform(e,t){return mn(this,void 0,void 0,function*(){if(e==="call"||e==="estimateGas"){const a=t.transaction;if(a&&a.type!=null&&O.from(a.type).isZero()&&a.maxFeePerGas==null&&a.maxPriorityFeePerGas==null){const i=yield this.getFeeData();i.maxFeePerGas==null&&i.maxPriorityFeePerGas==null&&(t=nt(t),t.transaction=nt(a),delete t.transaction.type)}}const n=this.prepareRequest(e,t);n==null&&Ze.throwError(e+" not implemented",j.errors.NOT_IMPLEMENTED,{operation:e});try{return yield this.send(n[0],n[1])}catch(a){return P0(e,a,t)}})}_startEvent(e){e.tag==="pending"&&this._startPending(),super._startEvent(e)}_startPending(){if(this._pendingFilter!=null)return;const e=this,t=this.send("eth_newPendingTransactionFilter",[]);this._pendingFilter=t,t.then(function(n){function a(){e.send("eth_getFilterChanges",[n]).then(function(i){if(e._pendingFilter!=t)return null;let s=Promise.resolve();return i.forEach(function(o){e._emitted["t:"+o.toLowerCase()]="pending",s=s.then(function(){return e.getTransaction(o).then(function(l){return e.emit("pending",l),null})})}),s.then(function(){return iu(1e3)})}).then(function(){if(e._pendingFilter!=t){e.send("eth_uninstallFilter",[n]);return}return setTimeout(function(){a()},0),null}).catch(i=>{})}return a(),n}).catch(n=>{})}_stopEvent(e){e.tag==="pending"&&this.listenerCount("pending")===0&&(this._pendingFilter=null),super._stopEvent(e)}static hexlifyTransaction(e,t){const n=nt(ym);if(t)for(const i in t)t[i]&&(n[i]=!0);Kf(e,n);const a={};return["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach(function(i){if(e[i]==null)return;const s=go(O.from(e[i]));i==="gasLimit"&&(i="gas"),a[i]=s}),["from","to","data"].forEach(function(i){e[i]!=null&&(a[i]=ge(e[i]))}),e.accessList&&(a.accessList=$c(e.accessList)),a}}let Pa=null;try{if(Pa=WebSocket,Pa==null)throw new Error("inject please")}catch{const e=new j(mt);Pa=function(){e.throwError("WebSockets not supported in this environment",j.errors.UNSUPPORTED_OPERATION,{operation:"new WebSocket()"})}}var ec=globalThis&&globalThis.__awaiter||function(r,e,t,n){function a(i){return i instanceof t?i:new t(function(s){s(i)})}return new(t||(t=Promise))(function(i,s){function o(u){try{c(n.next(u))}catch(d){s(d)}}function l(u){try{c(n.throw(u))}catch(d){s(d)}}function c(u){u.done?i(u.value):a(u.value).then(o,l)}c((n=n.apply(r,e||[])).next())})};const bi=new j(mt);let mm=1;class Po extends Qr{constructor(e,t){t==="any"&&bi.throwError("WebSocketProvider does not support 'any' network yet",j.errors.UNSUPPORTED_OPERATION,{operation:"network:any"}),typeof e=="string"?super(e,t):super("_websocket",t),this._pollingInterval=-1,this._wsReady=!1,typeof e=="string"?ee(this,"_websocket",new Pa(this.connection.url)):ee(this,"_websocket",e),ee(this,"_requests",{}),ee(this,"_subs",{}),ee(this,"_subIds",{}),ee(this,"_detectNetwork",super.detectNetwork()),this.websocket.onopen=()=>{this._wsReady=!0,Object.keys(this._requests).forEach(a=>{this.websocket.send(this._requests[a].payload)})},this.websocket.onmessage=a=>{const i=a.data,s=JSON.parse(i);if(s.id!=null){const o=String(s.id),l=this._requests[o];if(delete this._requests[o],s.result!==void 0)l.callback(null,s.result),this.emit("debug",{action:"response",request:JSON.parse(l.payload),response:s.result,provider:this});else{let c=null;s.error?(c=new Error(s.error.message||"unknown error"),ee(c,"code",s.error.code||null),ee(c,"response",i)):c=new Error("unknown error"),l.callback(c,void 0),this.emit("debug",{action:"response",error:c,request:JSON.parse(l.payload),provider:this})}}else if(s.method==="eth_subscription"){const o=this._subs[s.params.subscription];o&&o.processFunc(s.params.result)}else console.warn("this should not happen")};const n=setInterval(()=>{this.emit("poll")},1e3);n.unref&&n.unref()}get websocket(){return this._websocket}detectNetwork(){return this._detectNetwork}get pollingInterval(){return 0}resetEventsBlock(e){bi.throwError("cannot reset events block on WebSocketProvider",j.errors.UNSUPPORTED_OPERATION,{operation:"resetEventBlock"})}set pollingInterval(e){bi.throwError("cannot set polling interval on WebSocketProvider",j.errors.UNSUPPORTED_OPERATION,{operation:"setPollingInterval"})}poll(){return ec(this,void 0,void 0,function*(){return null})}set polling(e){e&&bi.throwError("cannot set polling on WebSocketProvider",j.errors.UNSUPPORTED_OPERATION,{operation:"setPolling"})}send(e,t){const n=mm++;return new Promise((a,i)=>{function s(l,c){return l?i(l):a(c)}const o=JSON.stringify({method:e,params:t,id:n,jsonrpc:"2.0"});this.emit("debug",{action:"request",request:JSON.parse(o),provider:this}),this._requests[String(n)]={callback:s,payload:o},this._wsReady&&this.websocket.send(o)})}static defaultUrl(){return"ws://localhost:8546"}_subscribe(e,t,n){return ec(this,void 0,void 0,function*(){let a=this._subIds[e];a==null&&(a=Promise.all(t).then(s=>this.send("eth_subscribe",s)),this._subIds[e]=a);const i=yield a;this._subs[i]={tag:e,processFunc:n}})}_startEvent(e){switch(e.type){case"block":this._subscribe("block",["newHeads"],t=>{const n=O.from(t.number).toNumber();this._emitted.block=n,this.emit("block",n)});break;case"pending":this._subscribe("pending",["newPendingTransactions"],t=>{this.emit("pending",t)});break;case"filter":this._subscribe(e.tag,["logs",this._getFilter(e.filter)],t=>{t.removed==null&&(t.removed=!1),this.emit(e.filter,this.formatter.filterLog(t))});break;case"tx":{const t=n=>{const a=n.hash;this.getTransactionReceipt(a).then(i=>{i&&this.emit(a,i)})};t(e),this._subscribe("tx",["newHeads"],n=>{this._events.filter(a=>a.type==="tx").forEach(t)});break}case"debug":case"poll":case"willPoll":case"didPoll":case"error":break;default:console.log("unhandled:",e);break}}_stopEvent(e){let t=e.tag;if(e.type==="tx"){if(this._events.filter(a=>a.type==="tx").length)return;t="tx"}else if(this.listenerCount(e.event))return;const n=this._subIds[t];n&&(delete this._subIds[t],n.then(a=>{this._subs[a]&&(delete this._subs[a],this.send("eth_unsubscribe",[a]))}))}destroy(){return ec(this,void 0,void 0,function*(){this.websocket.readyState===Pa.CONNECTING&&(yield new Promise(e=>{this.websocket.onopen=function(){e(!0)},this.websocket.onerror=function(){e(!1)}})),this.websocket.close(1e3)})}}var xm=globalThis&&globalThis.__awaiter||function(r,e,t,n){function a(i){return i instanceof t?i:new t(function(s){s(i)})}return new(t||(t=Promise))(function(i,s){function o(u){try{c(n.next(u))}catch(d){s(d)}}function l(u){try{c(n.throw(u))}catch(d){s(d)}}function c(u){u.done?i(u.value):a(u.value).then(o,l)}c((n=n.apply(r,e||[])).next())})};const wa=new j(mt);class R0 extends Qr{detectNetwork(){const e=Object.create(null,{detectNetwork:{get:()=>super.detectNetwork}});return xm(this,void 0,void 0,function*(){let t=this.network;return t==null&&(t=yield e.detectNetwork.call(this),t||wa.throwError("no network detected",j.errors.UNKNOWN_ERROR,{}),this._network==null&&(ee(this,"_network",t),this.emit("network",t,null))),t})}}class Qn extends R0{constructor(e,t){wa.checkAbstract(new.target,Qn),e=qn(new.target,"getNetwork")(e),t=qn(new.target,"getApiKey")(t);const n=qn(new.target,"getUrl")(e,t);super(n,e),typeof t=="string"?ee(this,"apiKey",t):t!=null&&Object.keys(t).forEach(a=>{ee(this,a,t[a])})}_startPending(){wa.warn("WARNING: API provider does not support pending filters")}isCommunityResource(){return!1}getSigner(e){return wa.throwError("API provider does not support signing",j.errors.UNSUPPORTED_OPERATION,{operation:"getSigner"})}listAccounts(){return Promise.resolve([])}static getApiKey(e){return e}static getUrl(e,t){return wa.throwError("not implemented; sub-classes must override getUrl",j.errors.NOT_IMPLEMENTED,{operation:"getUrl"})}}const su=new j(mt),Bi="_gg7wSSi0KMBsdKnGVfHDueq6xMB9EkC";class bm extends Po{constructor(e,t){const n=new M0(e,t),a=n.connection.url.replace(/^http/i,"ws").replace(".alchemyapi.",".ws.alchemyapi.");super(a,n.network),ee(this,"apiKey",n.apiKey)}isCommunityResource(){return this.apiKey===Bi}}class M0 extends Qn{static getWebSocketProvider(e,t){return new bm(e,t)}static getApiKey(e){return e==null?Bi:(e&&typeof e!="string"&&su.throwArgumentError("invalid apiKey","apiKey",e),e)}static getUrl(e,t){let n=null;switch(e.name){case"homestead":n="eth-mainnet.alchemyapi.io/v2/";break;case"goerli":n="eth-goerli.g.alchemy.com/v2/";break;case"matic":n="polygon-mainnet.g.alchemy.com/v2/";break;case"maticmum":n="polygon-mumbai.g.alchemy.com/v2/";break;case"arbitrum":n="arb-mainnet.g.alchemy.com/v2/";break;case"arbitrum-goerli":n="arb-goerli.g.alchemy.com/v2/";break;case"optimism":n="opt-mainnet.g.alchemy.com/v2/";break;case"optimism-goerli":n="opt-goerli.g.alchemy.com/v2/";break;default:su.throwArgumentError("unsupported network","network",arguments[0])}return{allowGzip:!0,url:"https://"+n+t,throttleCallback:(a,i)=>(t===Bi&&So(),Promise.resolve(!0))}}isCommunityResource(){return this.apiKey===Bi}}const gm=new j(mt),gi="9f7d929b018cdffb338517efa06f58359e86ff1ffd350bc889738523659e7972";function wm(r){switch(r){case"homestead":return"rpc.ankr.com/eth/";case"ropsten":return"rpc.ankr.com/eth_ropsten/";case"rinkeby":return"rpc.ankr.com/eth_rinkeby/";case"goerli":return"rpc.ankr.com/eth_goerli/";case"matic":return"rpc.ankr.com/polygon/";case"arbitrum":return"rpc.ankr.com/arbitrum/"}return gm.throwArgumentError("unsupported network","name",r)}class vm extends Qn{isCommunityResource(){return this.apiKey===gi}static getApiKey(e){return e??gi}static getUrl(e,t){t==null&&(t=gi);const n={allowGzip:!0,url:"https://"+wm(e.name)+t,throttleCallback:(a,i)=>(t.apiKey===gi&&So(),Promise.resolve(!0))};return t.projectSecret!=null&&(n.user="",n.password=t.projectSecret),n}}var Tm=globalThis&&globalThis.__awaiter||function(r,e,t,n){function a(i){return i instanceof t?i:new t(function(s){s(i)})}return new(t||(t=Promise))(function(i,s){function o(u){try{c(n.next(u))}catch(d){s(d)}}function l(u){try{c(n.throw(u))}catch(d){s(d)}}function c(u){u.done?i(u.value):a(u.value).then(o,l)}c((n=n.apply(r,e||[])).next())})};const ou=new j(mt);class Am extends Qn{static getApiKey(e){return e!=null&&ou.throwArgumentError("apiKey not supported for cloudflare","apiKey",e),null}static getUrl(e,t){let n=null;switch(e.name){case"homestead":n="https://cloudflare-eth.com/";break;default:ou.throwArgumentError("unsupported network","network",arguments[0])}return n}perform(e,t){const n=Object.create(null,{perform:{get:()=>super.perform}});return Tm(this,void 0,void 0,function*(){return e==="getBlockNumber"?(yield n.perform.call(this,"getBlock",{blockTag:"latest"})).number:n.perform.call(this,e,t)})}}var wi=globalThis&&globalThis.__awaiter||function(r,e,t,n){function a(i){return i instanceof t?i:new t(function(s){s(i)})}return new(t||(t=Promise))(function(i,s){function o(u){try{c(n.next(u))}catch(d){s(d)}}function l(u){try{c(n.throw(u))}catch(d){s(d)}}function c(u){u.done?i(u.value):a(u.value).then(o,l)}c((n=n.apply(r,e||[])).next())})};const Hn=new j(mt);function cu(r){const e={};for(let t in r){if(r[t]==null)continue;let n=r[t];t==="type"&&n===0||({type:!0,gasLimit:!0,gasPrice:!0,maxFeePerGs:!0,maxPriorityFeePerGas:!0,nonce:!0,value:!0}[t]?n=go(ge(n)):t==="accessList"?n="["+$c(n).map(a=>`{address:"${a.address}",storageKeys:["${a.storageKeys.join('","')}"]}`).join(",")+"]":n=ge(n),e[t]=n)}return e}function Cm(r){if(r.status==0&&(r.message==="No records found"||r.message==="No transactions found"))return r.result;if(r.status!=1||typeof r.message!="string"||!r.message.match(/^OK/)){const e=new Error("invalid response");throw e.result=JSON.stringify(r),(r.result||"").toLowerCase().indexOf("rate limit")>=0&&(e.throttleRetry=!0),e}return r.result}function lu(r){if(r&&r.status==0&&r.message=="NOTOK"&&(r.result||"").toLowerCase().indexOf("rate limit")>=0){const e=new Error("throttled response");throw e.result=JSON.stringify(r),e.throttleRetry=!0,e}if(r.jsonrpc!="2.0"){const e=new Error("invalid response");throw e.result=JSON.stringify(r),e}if(r.error){const e=new Error(r.error.message||"unknown error");throw r.error.code&&(e.code=r.error.code),r.error.data&&(e.data=r.error.data),e}return r.result}function uu(r){if(r==="pending")throw new Error("pending not supported");return r==="latest"?r:parseInt(r.substring(2),16)}function tc(r,e,t){if(r==="call"&&e.code===j.errors.SERVER_ERROR){const a=e.error;if(a&&(a.message.match(/reverted/i)||a.message.match(/VM execution error/i))){let i=a.data;if(i&&(i="0x"+i.replace(/^.*0x/i,"")),Le(i))return i;Hn.throwError("missing revert data in call exception",j.errors.CALL_EXCEPTION,{error:e,data:"0x"})}}let n=e.message;throw e.code===j.errors.SERVER_ERROR&&(e.error&&typeof e.error.message=="string"?n=e.error.message:typeof e.body=="string"?n=e.body:typeof e.responseText=="string"&&(n=e.responseText)),n=(n||"").toLowerCase(),n.match(/insufficient funds/)&&Hn.throwError("insufficient funds for intrinsic transaction cost",j.errors.INSUFFICIENT_FUNDS,{error:e,method:r,transaction:t}),n.match(/same hash was already imported|transaction nonce is too low|nonce too low/)&&Hn.throwError("nonce has already been used",j.errors.NONCE_EXPIRED,{error:e,method:r,transaction:t}),n.match(/another transaction with same nonce/)&&Hn.throwError("replacement fee too low",j.errors.REPLACEMENT_UNDERPRICED,{error:e,method:r,transaction:t}),n.match(/execution failed due to an exception|execution reverted/)&&Hn.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",j.errors.UNPREDICTABLE_GAS_LIMIT,{error:e,method:r,transaction:t}),e}class Em extends rl{constructor(e,t){super(e),ee(this,"baseUrl",this.getBaseUrl()),ee(this,"apiKey",t||null)}getBaseUrl(){switch(this.network?this.network.name:"invalid"){case"homestead":return"https://api.etherscan.io";case"goerli":return"https://api-goerli.etherscan.io";case"sepolia":return"https://api-sepolia.etherscan.io";case"matic":return"https://api.polygonscan.com";case"maticmum":return"https://api-testnet.polygonscan.com";case"arbitrum":return"https://api.arbiscan.io";case"arbitrum-goerli":return"https://api-goerli.arbiscan.io";case"optimism":return"https://api-optimistic.etherscan.io";case"optimism-goerli":return"https://api-goerli-optimistic.etherscan.io"}return Hn.throwArgumentError("unsupported network","network",this.network.name)}getUrl(e,t){const n=Object.keys(t).reduce((i,s)=>{const o=t[s];return o!=null&&(i+=`&${s}=${o}`),i},""),a=this.apiKey?`&apikey=${this.apiKey}`:"";return`${this.baseUrl}/api?module=${e}${n}${a}`}getPostUrl(){return`${this.baseUrl}/api`}getPostData(e,t){return t.module=e,t.apikey=this.apiKey,t}fetch(e,t,n){return wi(this,void 0,void 0,function*(){const a=n?this.getPostUrl():this.getUrl(e,t),i=n?this.getPostData(e,t):null,s=e==="proxy"?lu:Cm;this.emit("debug",{action:"request",request:a,provider:this});const o={url:a,throttleSlotInterval:1e3,throttleCallback:(u,d)=>(this.isCommunityResource()&&So(),Promise.resolve(!0))};let l=null;i&&(o.headers={"content-type":"application/x-www-form-urlencoded; charset=UTF-8"},l=Object.keys(i).map(u=>`${u}=${i[u]}`).join("&"));const c=yield Cr(o,l,s||lu);return this.emit("debug",{action:"response",request:a,response:on(c),provider:this}),c})}detectNetwork(){return wi(this,void 0,void 0,function*(){return this.network})}perform(e,t){const n=Object.create(null,{perform:{get:()=>super.perform}});return wi(this,void 0,void 0,function*(){switch(e){case"getBlockNumber":return this.fetch("proxy",{action:"eth_blockNumber"});case"getGasPrice":return this.fetch("proxy",{action:"eth_gasPrice"});case"getBalance":return this.fetch("account",{action:"balance",address:t.address,tag:t.blockTag});case"getTransactionCount":return this.fetch("proxy",{action:"eth_getTransactionCount",address:t.address,tag:t.blockTag});case"getCode":return this.fetch("proxy",{action:"eth_getCode",address:t.address,tag:t.blockTag});case"getStorageAt":return this.fetch("proxy",{action:"eth_getStorageAt",address:t.address,position:t.position,tag:t.blockTag});case"sendTransaction":return this.fetch("proxy",{action:"eth_sendRawTransaction",hex:t.signedTransaction},!0).catch(a=>tc("sendTransaction",a,t.signedTransaction));case"getBlock":if(t.blockTag)return this.fetch("proxy",{action:"eth_getBlockByNumber",tag:t.blockTag,boolean:t.includeTransactions?"true":"false"});throw new Error("getBlock by blockHash not implemented");case"getTransaction":return this.fetch("proxy",{action:"eth_getTransactionByHash",txhash:t.transactionHash});case"getTransactionReceipt":return this.fetch("proxy",{action:"eth_getTransactionReceipt",txhash:t.transactionHash});case"call":{if(t.blockTag!=="latest")throw new Error("EtherscanProvider does not support blockTag for call");const a=cu(t.transaction);a.module="proxy",a.action="eth_call";try{return yield this.fetch("proxy",a,!0)}catch(i){return tc("call",i,t.transaction)}}case"estimateGas":{const a=cu(t.transaction);a.module="proxy",a.action="eth_estimateGas";try{return yield this.fetch("proxy",a,!0)}catch(i){return tc("estimateGas",i,t.transaction)}}case"getLogs":{const a={action:"getLogs"};if(t.filter.fromBlock&&(a.fromBlock=uu(t.filter.fromBlock)),t.filter.toBlock&&(a.toBlock=uu(t.filter.toBlock)),t.filter.address&&(a.address=t.filter.address),t.filter.topics&&t.filter.topics.length>0&&(t.filter.topics.length>1&&Hn.throwError("unsupported topic count",j.errors.UNSUPPORTED_OPERATION,{topics:t.filter.topics}),t.filter.topics.length===1)){const o=t.filter.topics[0];(typeof o!="string"||o.length!==66)&&Hn.throwError("unsupported topic format",j.errors.UNSUPPORTED_OPERATION,{topic0:o}),a.topic0=o}const i=yield this.fetch("logs",a);let s={};for(let o=0;o<i.length;o++){const l=i[o];if(l.blockHash==null){if(s[l.blockNumber]==null){const c=yield this.getBlock(l.blockNumber);c&&(s[l.blockNumber]=c.hash)}l.blockHash=s[l.blockNumber]}}return i}case"getEtherPrice":return this.network.name!=="homestead"?0:parseFloat((yield this.fetch("stats",{action:"ethprice"})).ethusd)}return n.perform.call(this,e,t)})}getHistory(e,t,n){return wi(this,void 0,void 0,function*(){const a={action:"txlist",address:yield this.resolveName(e),startblock:t??0,endblock:n??99999999,sort:"asc"};return(yield this.fetch("account",a)).map(s=>{["contractAddress","to"].forEach(function(l){s[l]==""&&delete s[l]}),s.creates==null&&s.contractAddress!=null&&(s.creates=s.contractAddress);const o=this.formatter.transactionResponse(s);return s.timeStamp&&(o.timestamp=parseInt(s.timeStamp)),o})})}isCommunityResource(){return this.apiKey==null}}var zi=globalThis&&globalThis.__awaiter||function(r,e,t,n){function a(i){return i instanceof t?i:new t(function(s){s(i)})}return new(t||(t=Promise))(function(i,s){function o(u){try{c(n.next(u))}catch(d){s(d)}}function l(u){try{c(n.throw(u))}catch(d){s(d)}}function c(u){u.done?i(u.value):a(u.value).then(o,l)}c((n=n.apply(r,e||[])).next())})};const ir=new j(mt);function vi(){return new Date().getTime()}function du(r){let e=null;for(let t=0;t<r.length;t++){const n=r[t];if(n==null)return null;e?e.name===n.name&&e.chainId===n.chainId&&(e.ensAddress===n.ensAddress||e.ensAddress==null&&n.ensAddress==null)||ir.throwArgumentError("provider mismatch","networks",r):e=n}return e}function pu(r,e){r=r.slice().sort();const t=Math.floor(r.length/2);if(r.length%2)return r[t];const n=r[t-1],a=r[t];return e!=null&&Math.abs(n-a)>e?null:(n+a)/2}function Lr(r){if(r===null)return"null";if(typeof r=="number"||typeof r=="boolean")return JSON.stringify(r);if(typeof r=="string")return r;if(O.isBigNumber(r))return r.toString();if(Array.isArray(r))return JSON.stringify(r.map(e=>Lr(e)));if(typeof r=="object"){const e=Object.keys(r);return e.sort(),"{"+e.map(t=>{let n=r[t];return typeof n=="function"?n="[function]":n=Lr(n),JSON.stringify(t)+":"+n}).join(",")+"}"}throw new Error("unknown value type: "+typeof r)}let _m=1;function fu(r){let e=null,t=null,n=new Promise(s=>{e=function(){t&&(clearTimeout(t),t=null),s()},t=setTimeout(e,r)});const a=s=>(n=n.then(s),n);function i(){return n}return{cancel:e,getPromise:i,wait:a}}const km=[j.errors.CALL_EXCEPTION,j.errors.INSUFFICIENT_FUNDS,j.errors.NONCE_EXPIRED,j.errors.REPLACEMENT_UNDERPRICED,j.errors.UNPREDICTABLE_GAS_LIMIT],Im=["address","args","errorArgs","errorSignature","method","transaction"];function Ti(r,e){const t={weight:r.weight};return Object.defineProperty(t,"provider",{get:()=>r.provider}),r.start&&(t.start=r.start),e&&(t.duration=e-r.start),r.done&&(r.error?t.error=r.error:t.result=r.result||null),t}function Sm(r,e){return function(t){const n={};t.forEach(i=>{const s=r(i.result);n[s]||(n[s]={count:0,result:i.result}),n[s].count++});const a=Object.keys(n);for(let i=0;i<a.length;i++){const s=n[a[i]];if(s.count>=e)return s.result}}}function Pm(r,e,t){let n=Lr;switch(e){case"getBlockNumber":return function(a){const i=a.map(o=>o.result);let s=pu(a.map(o=>o.result),2);if(s!=null)return s=Math.ceil(s),i.indexOf(s+1)>=0&&s++,s>=r._highestBlockNumber&&(r._highestBlockNumber=s),r._highestBlockNumber};case"getGasPrice":return function(a){const i=a.map(s=>s.result);return i.sort(),i[Math.floor(i.length/2)]};case"getEtherPrice":return function(a){return pu(a.map(i=>i.result))};case"getBalance":case"getTransactionCount":case"getCode":case"getStorageAt":case"call":case"estimateGas":case"getLogs":break;case"getTransaction":case"getTransactionReceipt":n=function(a){return a==null?null:(a=nt(a),a.confirmations=-1,Lr(a))};break;case"getBlock":t.includeTransactions?n=function(a){return a==null?null:(a=nt(a),a.transactions=a.transactions.map(i=>(i=nt(i),i.confirmations=-1,i)),Lr(a))}:n=function(a){return a==null?null:Lr(a)};break;default:throw new Error("unknown method: "+e)}return Sm(n,r.quorum)}function ma(r,e){return zi(this,void 0,void 0,function*(){const t=r.provider;return t.blockNumber!=null&&t.blockNumber>=e||e===-1?t:sr(()=>new Promise((n,a)=>{setTimeout(function(){return t.blockNumber>=e?n(t):r.cancelled?n(null):n(void 0)},0)}),{oncePoll:t})})}function Bm(r,e,t,n){return zi(this,void 0,void 0,function*(){let a=r.provider;switch(t){case"getBlockNumber":case"getGasPrice":return a[t]();case"getEtherPrice":if(a.getEtherPrice)return a.getEtherPrice();break;case"getBalance":case"getTransactionCount":case"getCode":return n.blockTag&&Le(n.blockTag)&&(a=yield ma(r,e)),a[t](n.address,n.blockTag||"latest");case"getStorageAt":return n.blockTag&&Le(n.blockTag)&&(a=yield ma(r,e)),a.getStorageAt(n.address,n.position,n.blockTag||"latest");case"getBlock":return n.blockTag&&Le(n.blockTag)&&(a=yield ma(r,e)),a[n.includeTransactions?"getBlockWithTransactions":"getBlock"](n.blockTag||n.blockHash);case"call":case"estimateGas":return n.blockTag&&Le(n.blockTag)&&(a=yield ma(r,e)),t==="call"&&n.blockTag?a[t](n.transaction,n.blockTag):a[t](n.transaction);case"getTransaction":case"getTransactionReceipt":return a[t](n.transactionHash);case"getLogs":{let i=n.filter;return(i.fromBlock&&Le(i.fromBlock)||i.toBlock&&Le(i.toBlock))&&(a=yield ma(r,e)),a.getLogs(i)}}return ir.throwError("unknown method error",j.errors.UNKNOWN_ERROR,{method:t,params:n})})}class Rm extends rl{constructor(e,t){e.length===0&&ir.throwArgumentError("missing providers","providers",e);const n=e.map((s,o)=>{if(si.isProvider(s)){const u=Yl(s)?2e3:750;return Object.freeze({provider:s,weight:1,stallTimeout:u,priority:1})}const l=nt(s);l.priority==null&&(l.priority=1),l.stallTimeout==null&&(l.stallTimeout=Yl(s)?2e3:750),l.weight==null&&(l.weight=1);const c=l.weight;return(c%1||c>512||c<1)&&ir.throwArgumentError("invalid weight; must be integer in [1, 512]",`providers[${o}].weight`,c),Object.freeze(l)}),a=n.reduce((s,o)=>s+o.weight,0);t==null?t=a/2:t>a&&ir.throwArgumentError("quorum will always fail; larger than total weight","quorum",t);let i=du(n.map(s=>s.provider.network));i==null&&(i=new Promise((s,o)=>{setTimeout(()=>{this.detectNetwork().then(s,o)},0)})),super(i),ee(this,"providerConfigs",Object.freeze(n)),ee(this,"quorum",t),this._highestBlockNumber=-1}detectNetwork(){return zi(this,void 0,void 0,function*(){const e=yield Promise.all(this.providerConfigs.map(t=>t.provider.getNetwork()));return du(e)})}perform(e,t){return zi(this,void 0,void 0,function*(){if(e==="sendTransaction"){const l=yield Promise.all(this.providerConfigs.map(c=>c.provider.sendTransaction(t.signedTransaction).then(u=>u.hash,u=>u)));for(let c=0;c<l.length;c++){const u=l[c];if(typeof u=="string")return u}throw l[0]}this._highestBlockNumber===-1&&e!=="getBlockNumber"&&(yield this.getBlockNumber());const n=Pm(this,e,t),a=Iy(this.providerConfigs.map(nt));a.sort((l,c)=>l.priority-c.priority);const i=this._highestBlockNumber;let s=0,o=!0;for(;;){const l=vi();let c=a.filter(m=>m.runner&&l-m.start<m.stallTimeout).reduce((m,b)=>m+b.weight,0);for(;c<this.quorum&&s<a.length;){const m=a[s++],b=_m++;m.start=vi(),m.staller=fu(m.stallTimeout),m.staller.wait(()=>{m.staller=null}),m.runner=Bm(m,i,e,t).then(x=>{m.done=!0,m.result=x,this.listenerCount("debug")&&this.emit("debug",{action:"request",rid:b,backend:Ti(m,vi()),request:{method:e,params:on(t)},provider:this})},x=>{m.done=!0,m.error=x,this.listenerCount("debug")&&this.emit("debug",{action:"request",rid:b,backend:Ti(m,vi()),request:{method:e,params:on(t)},provider:this})}),this.listenerCount("debug")&&this.emit("debug",{action:"request",rid:b,backend:Ti(m,null),request:{method:e,params:on(t)},provider:this}),c+=m.weight}const u=[];a.forEach(m=>{m.done||!m.runner||(u.push(m.runner),m.staller&&u.push(m.staller.getPromise()))}),u.length&&(yield Promise.race(u));const d=a.filter(m=>m.done&&m.error==null);if(d.length>=this.quorum){const m=n(d);if(m!==void 0)return a.forEach(b=>{b.staller&&b.staller.cancel(),b.cancelled=!0}),m;o||(yield fu(100).getPromise()),o=!1}const h=a.reduce((m,b)=>{if(!b.done||b.error==null)return m;const x=b.error.code;return km.indexOf(x)>=0&&(m[x]||(m[x]={error:b.error,weight:0}),m[x].weight+=b.weight),m},{});if(Object.keys(h).forEach(m=>{const b=h[m];if(b.weight<this.quorum)return;a.forEach(w=>{w.staller&&w.staller.cancel(),w.cancelled=!0});const x=b.error,f={};Im.forEach(w=>{x[w]!=null&&(f[w]=x[w])}),ir.throwError(x.reason||x.message,m,f)}),a.filter(m=>!m.done).length===0)break}return a.forEach(l=>{l.staller&&l.staller.cancel(),l.cancelled=!0}),ir.throwError("failed to meet quorum",j.errors.SERVER_ERROR,{method:e,params:t,results:a.map(l=>Ti(l)),provider:this})})}}const Mm=null,Ri=new j(mt),va="84842078b09946638c03157f83405213";class Dm extends Po{constructor(e,t){const n=new D0(e,t),a=n.connection;a.password&&Ri.throwError("INFURA WebSocket project secrets unsupported",j.errors.UNSUPPORTED_OPERATION,{operation:"InfuraProvider.getWebSocketProvider()"});const i=a.url.replace(/^http/i,"ws").replace("/v3/","/ws/v3/");super(i,e),ee(this,"apiKey",n.projectId),ee(this,"projectId",n.projectId),ee(this,"projectSecret",n.projectSecret)}isCommunityResource(){return this.projectId===va}}class D0 extends Qn{static getWebSocketProvider(e,t){return new Dm(e,t)}static getApiKey(e){const t={apiKey:va,projectId:va,projectSecret:null};return e==null||(typeof e=="string"?t.projectId=e:e.projectSecret!=null?(Ri.assertArgument(typeof e.projectId=="string","projectSecret requires a projectId","projectId",e.projectId),Ri.assertArgument(typeof e.projectSecret=="string","invalid projectSecret","projectSecret","[REDACTED]"),t.projectId=e.projectId,t.projectSecret=e.projectSecret):e.projectId&&(t.projectId=e.projectId),t.apiKey=t.projectId),t}static getUrl(e,t){let n=null;switch(e?e.name:"unknown"){case"homestead":n="mainnet.infura.io";break;case"goerli":n="goerli.infura.io";break;case"sepolia":n="sepolia.infura.io";break;case"matic":n="polygon-mainnet.infura.io";break;case"maticmum":n="polygon-mumbai.infura.io";break;case"optimism":n="optimism-mainnet.infura.io";break;case"optimism-goerli":n="optimism-goerli.infura.io";break;case"arbitrum":n="arbitrum-mainnet.infura.io";break;case"arbitrum-goerli":n="arbitrum-goerli.infura.io";break;default:Ri.throwError("unsupported network",j.errors.INVALID_ARGUMENT,{argument:"network",value:e})}const a={allowGzip:!0,url:"https://"+n+"/v3/"+t.projectId,throttleCallback:(i,s)=>(t.projectId===va&&So(),Promise.resolve(!0))};return t.projectSecret!=null&&(a.user="",a.password=t.projectSecret),a}isCommunityResource(){return this.projectId===va}}class Fm extends Qr{send(e,t){const n={method:e,params:t,id:this._nextId++,jsonrpc:"2.0"};this._pendingBatch==null&&(this._pendingBatch=[]);const a={request:n,resolve:null,reject:null},i=new Promise((s,o)=>{a.resolve=s,a.reject=o});return this._pendingBatch.push(a),this._pendingBatchAggregator||(this._pendingBatchAggregator=setTimeout(()=>{const s=this._pendingBatch;this._pendingBatch=null,this._pendingBatchAggregator=null;const o=s.map(l=>l.request);return this.emit("debug",{action:"requestBatch",request:on(o),provider:this}),Cr(this.connection,JSON.stringify(o)).then(l=>{this.emit("debug",{action:"response",request:o,response:l,provider:this}),s.forEach((c,u)=>{const d=l[u];if(d.error){const h=new Error(d.error.message);h.code=d.error.code,h.data=d.error.data,c.reject(h)}else c.resolve(d.result)})},l=>{this.emit("debug",{action:"response",error:l,request:o,provider:this}),s.forEach(c=>{c.reject(l)})})},10)),i}}const nc=new j(mt),Nm="ETHERS_JS_SHARED";class Wm extends Qn{static getApiKey(e){return e&&typeof e!="string"&&nc.throwArgumentError("invalid apiKey","apiKey",e),e||Nm}static getUrl(e,t){nc.warn("NodeSmith will be discontinued on 2019-12-20; please migrate to another platform.");let n=null;switch(e.name){case"homestead":n="https://ethereum.api.nodesmith.io/v1/mainnet/jsonrpc";break;case"ropsten":n="https://ethereum.api.nodesmith.io/v1/ropsten/jsonrpc";break;case"rinkeby":n="https://ethereum.api.nodesmith.io/v1/rinkeby/jsonrpc";break;case"goerli":n="https://ethereum.api.nodesmith.io/v1/goerli/jsonrpc";break;case"kovan":n="https://ethereum.api.nodesmith.io/v1/kovan/jsonrpc";break;default:nc.throwArgumentError("unsupported network","network",arguments[0])}return n+"?apiKey="+t}}const hu=new j(mt),yu="62e1ad51b37b8e00394bda3b";class Om extends Qn{static getApiKey(e){const t={applicationId:null,loadBalancer:!0,applicationSecretKey:null};return e==null?t.applicationId=yu:typeof e=="string"?t.applicationId=e:e.applicationSecretKey!=null?(t.applicationId=e.applicationId,t.applicationSecretKey=e.applicationSecretKey):e.applicationId?t.applicationId=e.applicationId:hu.throwArgumentError("unsupported PocketProvider apiKey","apiKey",e),t}static getUrl(e,t){let n=null;switch(e?e.name:"unknown"){case"goerli":n="eth-goerli.gateway.pokt.network";break;case"homestead":n="eth-mainnet.gateway.pokt.network";break;case"kovan":n="poa-kovan.gateway.pokt.network";break;case"matic":n="poly-mainnet.gateway.pokt.network";break;case"maticmum":n="polygon-mumbai-rpc.gateway.pokt.network";break;case"rinkeby":n="eth-rinkeby.gateway.pokt.network";break;case"ropsten":n="eth-ropsten.gateway.pokt.network";break;default:hu.throwError("unsupported network",j.errors.INVALID_ARGUMENT,{argument:"network",value:e})}const a=`https://${n}/v1/lb/${t.applicationId}`,i={headers:{},url:a};return t.applicationSecretKey!=null&&(i.user="",i.password=t.applicationSecretKey),i}isCommunityResource(){return this.applicationId===yu}}const mu=new j(mt);let Lm=1;function xu(r,e){const t="Web3LegacyFetcher";return function(n,a){const i={method:n,params:a,id:Lm++,jsonrpc:"2.0"};return new Promise((s,o)=>{this.emit("debug",{action:"request",fetcher:t,request:on(i),provider:this}),e(i,(l,c)=>{if(l)return this.emit("debug",{action:"response",fetcher:t,error:l,request:i,provider:this}),o(l);if(this.emit("debug",{action:"response",fetcher:t,request:i,response:c,provider:this}),c.error){const u=new Error(c.error.message);return u.code=c.error.code,u.data=c.error.data,o(u)}s(c.result)})})}}function Um(r){return function(e,t){t==null&&(t=[]);const n={method:e,params:t};return this.emit("debug",{action:"request",fetcher:"Eip1193Fetcher",request:on(n),provider:this}),r.request(n).then(a=>(this.emit("debug",{action:"response",fetcher:"Eip1193Fetcher",request:n,response:a,provider:this}),a),a=>{throw this.emit("debug",{action:"response",fetcher:"Eip1193Fetcher",request:n,error:a,provider:this}),a})}}class Hm extends Qr{constructor(e,t){e==null&&mu.throwArgumentError("missing provider","provider",e);let n=null,a=null,i=null;typeof e=="function"?(n="unknown:",a=e):(n=e.host||e.path||"",!n&&e.isMetaMask&&(n="metamask"),i=e,e.request?(n===""&&(n="eip-1193:"),a=Um(e)):e.sendAsync?a=xu(e,e.sendAsync.bind(e)):e.send?a=xu(e,e.send.bind(e)):mu.throwArgumentError("unsupported provider","provider",e),n||(n="unknown:")),super(n,t),ee(this,"jsonRpcFetchFunc",a),ee(this,"provider",i)}send(e,t){return this.jsonRpcFetchFunc(e,t)}}const bu=new j(mt);function Ba(r,e){if(r==null&&(r="homestead"),typeof r=="string"){const n=r.match(/^(ws|http)s?:/i);if(n)switch(n[1].toLowerCase()){case"http":case"https":return new Qr(r);case"ws":case"wss":return new Po(r);default:bu.throwArgumentError("unsupported URL scheme","network",r)}}const t=C0(r);return(!t||!t._defaultProvider)&&bu.throwError("unsupported getDefaultProvider network",j.errors.NETWORK_ERROR,{operation:"getDefaultProvider",network:r}),t._defaultProvider({FallbackProvider:Rm,AlchemyProvider:M0,AnkrProvider:vm,CloudflareProvider:Am,EtherscanProvider:Em,InfuraProvider:D0,JsonRpcProvider:Qr,NodesmithProvider:Wm,PocketProvider:Om,Web3Provider:Hm,IpcProvider:Mm},e)}const zm="solidity/5.7.0",jm=new RegExp("^bytes([0-9]+)$"),qm=new RegExp("^(u?int)([0-9]*)$"),Vm=new RegExp("^(.*)\\[([0-9]*)\\]$"),Gm="0000000000000000000000000000000000000000000000000000000000000000",Wr=new j(zm);function F0(r,e,t){switch(r){case"address":return t?Go(e,32):ce(e);case"string":return Me(e);case"bytes":return ce(e);case"bool":return e=e?"0x01":"0x00",t?Go(e,32):ce(e)}let n=r.match(qm);if(n){let a=parseInt(n[2]||"256");return(n[2]&&String(a)!==n[2]||a%8!==0||a===0||a>256)&&Wr.throwArgumentError("invalid number type","type",r),t&&(a=256),e=O.from(e).toTwos(a),Go(e,a/8)}if(n=r.match(jm),n){const a=parseInt(n[1]);return(String(a)!==n[1]||a===0||a>32)&&Wr.throwArgumentError("invalid bytes type","type",r),ce(e).byteLength!==a&&Wr.throwArgumentError(`invalid value for ${r}`,"value",e),t?ce((e+Gm).substring(0,66)):e}if(n=r.match(Vm),n&&Array.isArray(e)){const a=n[1];parseInt(n[2]||String(e.length))!=e.length&&Wr.throwArgumentError(`invalid array length for ${r}`,"value",e);const s=[];return e.forEach(function(o){s.push(F0(a,o,!0))}),ct(s)}return Wr.throwArgumentError("invalid type","type",r)}function Bo(r,e){r.length!=e.length&&Wr.throwArgumentError("wrong number of values; expected ${ types.length }","values",e);const t=[];return r.forEach(function(n,a){t.push(F0(n,e[a]))}),ge(ct(t))}function cn(r,e){return Je(Bo(r,e))}function Km(r,e){return Kn(Bo(r,e))}const m6=Object.freeze(Object.defineProperty({__proto__:null,keccak256:cn,pack:Bo,sha256:Km},Symbol.toStringTag,{value:"Module"})),$m="units/5.7.0",N0=new j($m),W0=["wei","kwei","mwei","gwei","szabo","finney","ether"];function Zm(r){const e=String(r).split(".");(e.length>2||!e[0].match(/^-?[0-9]*$/)||e[1]&&!e[1].match(/^[0-9]*$/)||r==="."||r==="-.")&&N0.throwArgumentError("invalid value","value",r);let t=e[0],n="";for(t.substring(0,1)==="-"&&(n="-",t=t.substring(1));t.substring(0,1)==="0";)t=t.substring(1);t===""&&(t="0");let a="";for(e.length===2&&(a="."+(e[1]||"0"));a.length>2&&a[a.length-1]==="0";)a=a.substring(0,a.length-1);const i=[];for(;t.length;)if(t.length<=3){i.unshift(t);break}else{const s=t.length-3;i.unshift(t.substring(s)),t=t.substring(0,s)}return n+i.join(",")+a}function $n(r,e){if(typeof e=="string"){const t=W0.indexOf(e);t!==-1&&(e=3*t)}return ki(r,e??18)}function rt(r,e){if(typeof r!="string"&&N0.throwArgumentError("value must be a string","value",r),typeof e=="string"){const t=W0.indexOf(e);t!==-1&&(e=3*t)}return tn(r,e??18)}function al(r){return $n(r,18)}function Ym(r){return rt(r,18)}const x6=Object.freeze(Object.defineProperty({__proto__:null,commify:Zm,formatEther:al,formatUnits:$n,parseEther:Ym,parseUnits:rt},Symbol.toStringTag,{value:"Module"}));var Pe;(function(r){r.assertEqual=a=>a;function e(a){}r.assertIs=e;function t(a){throw new Error}r.assertNever=t,r.arrayToEnum=a=>{const i={};for(const s of a)i[s]=s;return i},r.getValidEnumValues=a=>{const i=r.objectKeys(a).filter(o=>typeof a[a[o]]!="number"),s={};for(const o of i)s[o]=a[o];return r.objectValues(s)},r.objectValues=a=>r.objectKeys(a).map(function(i){return a[i]}),r.objectKeys=typeof Object.keys=="function"?a=>Object.keys(a):a=>{const i=[];for(const s in a)Object.prototype.hasOwnProperty.call(a,s)&&i.push(s);return i},r.find=(a,i)=>{for(const s of a)if(i(s))return s},r.isInteger=typeof Number.isInteger=="function"?a=>Number.isInteger(a):a=>typeof a=="number"&&isFinite(a)&&Math.floor(a)===a;function n(a,i=" | "){return a.map(s=>typeof s=="string"?`'${s}'`:s).join(i)}r.joinValues=n,r.jsonStringifyReplacer=(a,i)=>typeof i=="bigint"?i.toString():i})(Pe||(Pe={}));const te=Pe.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),zn=r=>{switch(typeof r){case"undefined":return te.undefined;case"string":return te.string;case"number":return isNaN(r)?te.nan:te.number;case"boolean":return te.boolean;case"function":return te.function;case"bigint":return te.bigint;case"symbol":return te.symbol;case"object":return Array.isArray(r)?te.array:r===null?te.null:r.then&&typeof r.then=="function"&&r.catch&&typeof r.catch=="function"?te.promise:typeof Map<"u"&&r instanceof Map?te.map:typeof Set<"u"&&r instanceof Set?te.set:typeof Date<"u"&&r instanceof Date?te.date:te.object;default:return te.unknown}},Q=Pe.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),Jm=r=>JSON.stringify(r,null,2).replace(/"([^"]+)":/g,"$1:");class gn extends Error{constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const t=e||function(i){return i.message},n={_errors:[]},a=i=>{for(const s of i.issues)if(s.code==="invalid_union")s.unionErrors.map(a);else if(s.code==="invalid_return_type")a(s.returnTypeError);else if(s.code==="invalid_arguments")a(s.argumentsError);else if(s.path.length===0)n._errors.push(t(s));else{let o=n,l=0;for(;l<s.path.length;){const c=s.path[l];l===s.path.length-1?(o[c]=o[c]||{_errors:[]},o[c]._errors.push(t(s))):o[c]=o[c]||{_errors:[]},o=o[c],l++}}};return a(this),n}toString(){return this.message}get message(){return JSON.stringify(this.issues,Pe.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=t=>t.message){const t={},n=[];for(const a of this.issues)a.path.length>0?(t[a.path[0]]=t[a.path[0]]||[],t[a.path[0]].push(e(a))):n.push(e(a));return{formErrors:n,fieldErrors:t}}get formErrors(){return this.flatten()}}gn.create=r=>new gn(r);const Na=(r,e)=>{let t;switch(r.code){case Q.invalid_type:r.received===te.undefined?t="Required":t=`Expected ${r.expected}, received ${r.received}`;break;case Q.invalid_literal:t=`Invalid literal value, expected ${JSON.stringify(r.expected,Pe.jsonStringifyReplacer)}`;break;case Q.unrecognized_keys:t=`Unrecognized key(s) in object: ${Pe.joinValues(r.keys,", ")}`;break;case Q.invalid_union:t="Invalid input";break;case Q.invalid_union_discriminator:t=`Invalid discriminator value. Expected ${Pe.joinValues(r.options)}`;break;case Q.invalid_enum_value:t=`Invalid enum value. Expected ${Pe.joinValues(r.options)}, received '${r.received}'`;break;case Q.invalid_arguments:t="Invalid function arguments";break;case Q.invalid_return_type:t="Invalid function return type";break;case Q.invalid_date:t="Invalid date";break;case Q.invalid_string:typeof r.validation=="object"?"startsWith"in r.validation?t=`Invalid input: must start with "${r.validation.startsWith}"`:"endsWith"in r.validation?t=`Invalid input: must end with "${r.validation.endsWith}"`:Pe.assertNever(r.validation):r.validation!=="regex"?t=`Invalid ${r.validation}`:t="Invalid";break;case Q.too_small:r.type==="array"?t=`Array must contain ${r.exact?"exactly":r.inclusive?"at least":"more than"} ${r.minimum} element(s)`:r.type==="string"?t=`String must contain ${r.exact?"exactly":r.inclusive?"at least":"over"} ${r.minimum} character(s)`:r.type==="number"?t=`Number must be ${r.exact?"exactly equal to ":r.inclusive?"greater than or equal to ":"greater than "}${r.minimum}`:r.type==="date"?t=`Date must be ${r.exact?"exactly equal to ":r.inclusive?"greater than or equal to ":"greater than "}${new Date(r.minimum)}`:t="Invalid input";break;case Q.too_big:r.type==="array"?t=`Array must contain ${r.exact?"exactly":r.inclusive?"at most":"less than"} ${r.maximum} element(s)`:r.type==="string"?t=`String must contain ${r.exact?"exactly":r.inclusive?"at most":"under"} ${r.maximum} character(s)`:r.type==="number"?t=`Number must be ${r.exact?"exactly":r.inclusive?"less than or equal to":"less than"} ${r.maximum}`:r.type==="date"?t=`Date must be ${r.exact?"exactly":r.inclusive?"smaller than or equal to":"smaller than"} ${new Date(r.maximum)}`:t="Invalid input";break;case Q.custom:t="Invalid input";break;case Q.invalid_intersection_types:t="Intersection results could not be merged";break;case Q.not_multiple_of:t=`Number must be a multiple of ${r.multipleOf}`;break;case Q.not_finite:t="Number must be finite";break;default:t=e.defaultError,Pe.assertNever(r)}return{message:t}};let O0=Na;function Qm(r){O0=r}function ji(){return O0}const qi=r=>{const{data:e,path:t,errorMaps:n,issueData:a}=r,i=[...t,...a.path||[]],s={...a,path:i};let o="";const l=n.filter(c=>!!c).slice().reverse();for(const c of l)o=c(s,{data:e,defaultError:o}).message;return{...a,path:i,message:a.message||o}},Xm=[];function le(r,e){const t=qi({issueData:e,data:r.data,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,ji(),Na].filter(n=>!!n)});r.common.issues.push(t)}class Ct{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,t){const n=[];for(const a of t){if(a.status==="aborted")return xe;a.status==="dirty"&&e.dirty(),n.push(a.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,t){const n=[];for(const a of t)n.push({key:await a.key,value:await a.value});return Ct.mergeObjectSync(e,n)}static mergeObjectSync(e,t){const n={};for(const a of t){const{key:i,value:s}=a;if(i.status==="aborted"||s.status==="aborted")return xe;i.status==="dirty"&&e.dirty(),s.status==="dirty"&&e.dirty(),(typeof s.value<"u"||a.alwaysSet)&&(n[i.value]=s.value)}return{status:e.value,value:n}}}const xe=Object.freeze({status:"aborted"}),L0=r=>({status:"dirty",value:r}),ft=r=>({status:"valid",value:r}),xc=r=>r.status==="aborted",bc=r=>r.status==="dirty",Vi=r=>r.status==="valid",Gi=r=>typeof Promise<"u"&&r instanceof Promise;var Ee;(function(r){r.errToObj=e=>typeof e=="string"?{message:e}:e||{},r.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(Ee||(Ee={}));class pn{constructor(e,t,n,a){this.parent=e,this.data=t,this._path=n,this._key=a}get path(){return this._path.concat(this._key)}}const gu=(r,e)=>{if(Vi(e))return{success:!0,data:e.value};if(!r.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,error:new gn(r.common.issues)}};function Te(r){if(!r)return{};const{errorMap:e,invalid_type_error:t,required_error:n,description:a}=r;if(e&&(t||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:a}:{errorMap:(s,o)=>s.code!=="invalid_type"?{message:o.defaultError}:typeof o.data>"u"?{message:n??o.defaultError}:{message:t??o.defaultError},description:a}}class Ae{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return zn(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:zn(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Ct,ctx:{common:e.parent.common,data:e.data,parsedType:zn(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(Gi(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const n=this.safeParse(e,t);if(n.success)return n.data;throw n.error}safeParse(e,t){var n;const a={common:{issues:[],async:(n=t==null?void 0:t.async)!==null&&n!==void 0?n:!1,contextualErrorMap:t==null?void 0:t.errorMap},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:zn(e)},i=this._parseSync({data:e,path:a.path,parent:a});return gu(a,i)}async parseAsync(e,t){const n=await this.safeParseAsync(e,t);if(n.success)return n.data;throw n.error}async safeParseAsync(e,t){const n={common:{issues:[],contextualErrorMap:t==null?void 0:t.errorMap,async:!0},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:zn(e)},a=this._parse({data:e,path:n.path,parent:n}),i=await(Gi(a)?a:Promise.resolve(a));return gu(n,i)}refine(e,t){const n=a=>typeof t=="string"||typeof t>"u"?{message:t}:typeof t=="function"?t(a):t;return this._refinement((a,i)=>{const s=e(a),o=()=>i.addIssue({code:Q.custom,...n(a)});return typeof Promise<"u"&&s instanceof Promise?s.then(l=>l?!0:(o(),!1)):s?!0:(o(),!1)})}refinement(e,t){return this._refinement((n,a)=>e(n)?!0:(a.addIssue(typeof t=="function"?t(n,a):t),!1))}_refinement(e){return new Xt({schema:this,typeName:fe.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return wn.create(this,this._def)}nullable(){return gr.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Yt.create(this,this._def)}promise(){return ea.create(this,this._def)}or(e){return Ha.create([this,e],this._def)}and(e){return za.create(this,e,this._def)}transform(e){return new Xt({...Te(this._def),schema:this,typeName:fe.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t=typeof e=="function"?e:()=>e;return new Ka({...Te(this._def),innerType:this,defaultValue:t,typeName:fe.ZodDefault})}brand(){return new H0({typeName:fe.ZodBranded,type:this,...Te(this._def)})}catch(e){const t=typeof e=="function"?e:()=>e;return new Ji({...Te(this._def),innerType:this,catchValue:t,typeName:fe.ZodCatch})}describe(e){const t=this.constructor;return new t({...this._def,description:e})}pipe(e){return ci.create(this,e)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const ex=/^c[^\s-]{8,}$/i,tx=/^[a-z][a-z0-9]*$/,nx=/^([a-f0-9]{8}-[a-f0-9]{4}-[1-5][a-f0-9]{3}-[a-f0-9]{4}-[a-f0-9]{12}|00000000-0000-0000-0000-000000000000)$/i,rx=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|([^-]([a-zA-Z0-9-]*\.)+[a-zA-Z]{2,}))$/,ax=r=>r.precision?r.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${r.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${r.precision}}Z$`):r.precision===0?r.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):r.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$");class kn extends Ae{constructor(){super(...arguments),this._regex=(e,t,n)=>this.refinement(a=>e.test(a),{validation:t,code:Q.invalid_string,...Ee.errToObj(n)}),this.nonempty=e=>this.min(1,Ee.errToObj(e)),this.trim=()=>new kn({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==te.string){const i=this._getOrReturnCtx(e);return le(i,{code:Q.invalid_type,expected:te.string,received:i.parsedType}),xe}const n=new Ct;let a;for(const i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(a=this._getOrReturnCtx(e,a),le(a,{code:Q.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),n.dirty());else if(i.kind==="max")e.data.length>i.value&&(a=this._getOrReturnCtx(e,a),le(a,{code:Q.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),n.dirty());else if(i.kind==="length"){const s=e.data.length>i.value,o=e.data.length<i.value;(s||o)&&(a=this._getOrReturnCtx(e,a),s?le(a,{code:Q.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):o&&le(a,{code:Q.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),n.dirty())}else if(i.kind==="email")rx.test(e.data)||(a=this._getOrReturnCtx(e,a),le(a,{validation:"email",code:Q.invalid_string,message:i.message}),n.dirty());else if(i.kind==="uuid")nx.test(e.data)||(a=this._getOrReturnCtx(e,a),le(a,{validation:"uuid",code:Q.invalid_string,message:i.message}),n.dirty());else if(i.kind==="cuid")ex.test(e.data)||(a=this._getOrReturnCtx(e,a),le(a,{validation:"cuid",code:Q.invalid_string,message:i.message}),n.dirty());else if(i.kind==="cuid2")tx.test(e.data)||(a=this._getOrReturnCtx(e,a),le(a,{validation:"cuid2",code:Q.invalid_string,message:i.message}),n.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{a=this._getOrReturnCtx(e,a),le(a,{validation:"url",code:Q.invalid_string,message:i.message}),n.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(a=this._getOrReturnCtx(e,a),le(a,{validation:"regex",code:Q.invalid_string,message:i.message}),n.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="startsWith"?e.data.startsWith(i.value)||(a=this._getOrReturnCtx(e,a),le(a,{code:Q.invalid_string,validation:{startsWith:i.value},message:i.message}),n.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(a=this._getOrReturnCtx(e,a),le(a,{code:Q.invalid_string,validation:{endsWith:i.value},message:i.message}),n.dirty()):i.kind==="datetime"?ax(i).test(e.data)||(a=this._getOrReturnCtx(e,a),le(a,{code:Q.invalid_string,validation:"datetime",message:i.message}),n.dirty()):Pe.assertNever(i);return{status:n.value,value:e.data}}_addCheck(e){return new kn({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Ee.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Ee.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Ee.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Ee.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Ee.errToObj(e)})}datetime(e){var t;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(t=e==null?void 0:e.offset)!==null&&t!==void 0?t:!1,...Ee.errToObj(e==null?void 0:e.message)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...Ee.errToObj(t)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...Ee.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...Ee.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...Ee.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...Ee.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...Ee.errToObj(t)})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get minLength(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}kn.create=r=>{var e;return new kn({checks:[],typeName:fe.ZodString,coerce:(e=r==null?void 0:r.coerce)!==null&&e!==void 0?e:!1,...Te(r)})};function ix(r,e){const t=(r.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,a=t>n?t:n,i=parseInt(r.toFixed(a).replace(".","")),s=parseInt(e.toFixed(a).replace(".",""));return i%s/Math.pow(10,a)}class Zn extends Ae{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==te.number){const i=this._getOrReturnCtx(e);return le(i,{code:Q.invalid_type,expected:te.number,received:i.parsedType}),xe}let n;const a=new Ct;for(const i of this._def.checks)i.kind==="int"?Pe.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),le(n,{code:Q.invalid_type,expected:"integer",received:"float",message:i.message}),a.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(n=this._getOrReturnCtx(e,n),le(n,{code:Q.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),a.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(n=this._getOrReturnCtx(e,n),le(n,{code:Q.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),a.dirty()):i.kind==="multipleOf"?ix(e.data,i.value)!==0&&(n=this._getOrReturnCtx(e,n),le(n,{code:Q.not_multiple_of,multipleOf:i.value,message:i.message}),a.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),le(n,{code:Q.not_finite,message:i.message}),a.dirty()):Pe.assertNever(i);return{status:a.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,Ee.toString(t))}gt(e,t){return this.setLimit("min",e,!1,Ee.toString(t))}lte(e,t){return this.setLimit("max",e,!0,Ee.toString(t))}lt(e,t){return this.setLimit("max",e,!1,Ee.toString(t))}setLimit(e,t,n,a){return new Zn({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:Ee.toString(a)}]})}_addCheck(e){return new Zn({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Ee.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Ee.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Ee.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Ee.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Ee.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:Ee.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:Ee.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Pe.isInteger(e.value))}get isFinite(){let e=null,t=null;for(const n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(t===null||n.value>t)&&(t=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(t)&&Number.isFinite(e)}}Zn.create=r=>new Zn({checks:[],typeName:fe.ZodNumber,coerce:(r==null?void 0:r.coerce)||!1,...Te(r)});class Wa extends Ae{_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==te.bigint){const n=this._getOrReturnCtx(e);return le(n,{code:Q.invalid_type,expected:te.bigint,received:n.parsedType}),xe}return ft(e.data)}}Wa.create=r=>{var e;return new Wa({typeName:fe.ZodBigInt,coerce:(e=r==null?void 0:r.coerce)!==null&&e!==void 0?e:!1,...Te(r)})};class Oa extends Ae{_parse(e){if(this._def.coerce&&(e.data=Boolean(e.data)),this._getType(e)!==te.boolean){const n=this._getOrReturnCtx(e);return le(n,{code:Q.invalid_type,expected:te.boolean,received:n.parsedType}),xe}return ft(e.data)}}Oa.create=r=>new Oa({typeName:fe.ZodBoolean,coerce:(r==null?void 0:r.coerce)||!1,...Te(r)});class xr extends Ae{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==te.date){const i=this._getOrReturnCtx(e);return le(i,{code:Q.invalid_type,expected:te.date,received:i.parsedType}),xe}if(isNaN(e.data.getTime())){const i=this._getOrReturnCtx(e);return le(i,{code:Q.invalid_date}),xe}const n=new Ct;let a;for(const i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(a=this._getOrReturnCtx(e,a),le(a,{code:Q.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),n.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(a=this._getOrReturnCtx(e,a),le(a,{code:Q.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),n.dirty()):Pe.assertNever(i);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new xr({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:Ee.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:Ee.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e!=null?new Date(e):null}}xr.create=r=>new xr({checks:[],coerce:(r==null?void 0:r.coerce)||!1,typeName:fe.ZodDate,...Te(r)});class Ki extends Ae{_parse(e){if(this._getType(e)!==te.symbol){const n=this._getOrReturnCtx(e);return le(n,{code:Q.invalid_type,expected:te.symbol,received:n.parsedType}),xe}return ft(e.data)}}Ki.create=r=>new Ki({typeName:fe.ZodSymbol,...Te(r)});class La extends Ae{_parse(e){if(this._getType(e)!==te.undefined){const n=this._getOrReturnCtx(e);return le(n,{code:Q.invalid_type,expected:te.undefined,received:n.parsedType}),xe}return ft(e.data)}}La.create=r=>new La({typeName:fe.ZodUndefined,...Te(r)});class Ua extends Ae{_parse(e){if(this._getType(e)!==te.null){const n=this._getOrReturnCtx(e);return le(n,{code:Q.invalid_type,expected:te.null,received:n.parsedType}),xe}return ft(e.data)}}Ua.create=r=>new Ua({typeName:fe.ZodNull,...Te(r)});class Xr extends Ae{constructor(){super(...arguments),this._any=!0}_parse(e){return ft(e.data)}}Xr.create=r=>new Xr({typeName:fe.ZodAny,...Te(r)});class pr extends Ae{constructor(){super(...arguments),this._unknown=!0}_parse(e){return ft(e.data)}}pr.create=r=>new pr({typeName:fe.ZodUnknown,...Te(r)});class In extends Ae{_parse(e){const t=this._getOrReturnCtx(e);return le(t,{code:Q.invalid_type,expected:te.never,received:t.parsedType}),xe}}In.create=r=>new In({typeName:fe.ZodNever,...Te(r)});class $i extends Ae{_parse(e){if(this._getType(e)!==te.undefined){const n=this._getOrReturnCtx(e);return le(n,{code:Q.invalid_type,expected:te.void,received:n.parsedType}),xe}return ft(e.data)}}$i.create=r=>new $i({typeName:fe.ZodVoid,...Te(r)});class Yt extends Ae{_parse(e){const{ctx:t,status:n}=this._processInputParams(e),a=this._def;if(t.parsedType!==te.array)return le(t,{code:Q.invalid_type,expected:te.array,received:t.parsedType}),xe;if(a.exactLength!==null){const s=t.data.length>a.exactLength.value,o=t.data.length<a.exactLength.value;(s||o)&&(le(t,{code:s?Q.too_big:Q.too_small,minimum:o?a.exactLength.value:void 0,maximum:s?a.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:a.exactLength.message}),n.dirty())}if(a.minLength!==null&&t.data.length<a.minLength.value&&(le(t,{code:Q.too_small,minimum:a.minLength.value,type:"array",inclusive:!0,exact:!1,message:a.minLength.message}),n.dirty()),a.maxLength!==null&&t.data.length>a.maxLength.value&&(le(t,{code:Q.too_big,maximum:a.maxLength.value,type:"array",inclusive:!0,exact:!1,message:a.maxLength.message}),n.dirty()),t.common.async)return Promise.all([...t.data].map((s,o)=>a.type._parseAsync(new pn(t,s,t.path,o)))).then(s=>Ct.mergeArray(n,s));const i=[...t.data].map((s,o)=>a.type._parseSync(new pn(t,s,t.path,o)));return Ct.mergeArray(n,i)}get element(){return this._def.type}min(e,t){return new Yt({...this._def,minLength:{value:e,message:Ee.toString(t)}})}max(e,t){return new Yt({...this._def,maxLength:{value:e,message:Ee.toString(t)}})}length(e,t){return new Yt({...this._def,exactLength:{value:e,message:Ee.toString(t)}})}nonempty(e){return this.min(1,e)}}Yt.create=(r,e)=>new Yt({type:r,minLength:null,maxLength:null,exactLength:null,typeName:fe.ZodArray,...Te(e)});var Zi;(function(r){r.mergeShapes=(e,t)=>({...e,...t})})(Zi||(Zi={}));function Or(r){if(r instanceof He){const e={};for(const t in r.shape){const n=r.shape[t];e[t]=wn.create(Or(n))}return new He({...r._def,shape:()=>e})}else return r instanceof Yt?Yt.create(Or(r.element)):r instanceof wn?wn.create(Or(r.unwrap())):r instanceof gr?gr.create(Or(r.unwrap())):r instanceof fn?fn.create(r.items.map(e=>Or(e))):r}class He extends Ae{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),t=Pe.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==te.object){const c=this._getOrReturnCtx(e);return le(c,{code:Q.invalid_type,expected:te.object,received:c.parsedType}),xe}const{status:n,ctx:a}=this._processInputParams(e),{shape:i,keys:s}=this._getCached(),o=[];if(!(this._def.catchall instanceof In&&this._def.unknownKeys==="strip"))for(const c in a.data)s.includes(c)||o.push(c);const l=[];for(const c of s){const u=i[c],d=a.data[c];l.push({key:{status:"valid",value:c},value:u._parse(new pn(a,d,a.path,c)),alwaysSet:c in a.data})}if(this._def.catchall instanceof In){const c=this._def.unknownKeys;if(c==="passthrough")for(const u of o)l.push({key:{status:"valid",value:u},value:{status:"valid",value:a.data[u]}});else if(c==="strict")o.length>0&&(le(a,{code:Q.unrecognized_keys,keys:o}),n.dirty());else if(c!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const c=this._def.catchall;for(const u of o){const d=a.data[u];l.push({key:{status:"valid",value:u},value:c._parse(new pn(a,d,a.path,u)),alwaysSet:u in a.data})}}return a.common.async?Promise.resolve().then(async()=>{const c=[];for(const u of l){const d=await u.key;c.push({key:d,value:await u.value,alwaysSet:u.alwaysSet})}return c}).then(c=>Ct.mergeObjectSync(n,c)):Ct.mergeObjectSync(n,l)}get shape(){return this._def.shape()}strict(e){return Ee.errToObj,new He({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(t,n)=>{var a,i,s,o;const l=(s=(i=(a=this._def).errorMap)===null||i===void 0?void 0:i.call(a,t,n).message)!==null&&s!==void 0?s:n.defaultError;return t.code==="unrecognized_keys"?{message:(o=Ee.errToObj(e).message)!==null&&o!==void 0?o:l}:{message:l}}}:{}})}strip(){return new He({...this._def,unknownKeys:"strip"})}passthrough(){return new He({...this._def,unknownKeys:"passthrough"})}extend(e){return new He({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new He({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>Zi.mergeShapes(this._def.shape(),e._def.shape()),typeName:fe.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new He({...this._def,catchall:e})}pick(e){const t={};return Pe.objectKeys(e).forEach(n=>{e[n]&&this.shape[n]&&(t[n]=this.shape[n])}),new He({...this._def,shape:()=>t})}omit(e){const t={};return Pe.objectKeys(this.shape).forEach(n=>{e[n]||(t[n]=this.shape[n])}),new He({...this._def,shape:()=>t})}deepPartial(){return Or(this)}partial(e){const t={};return Pe.objectKeys(this.shape).forEach(n=>{const a=this.shape[n];e&&!e[n]?t[n]=a:t[n]=a.optional()}),new He({...this._def,shape:()=>t})}required(e){const t={};return Pe.objectKeys(this.shape).forEach(n=>{if(e&&!e[n])t[n]=this.shape[n];else{let i=this.shape[n];for(;i instanceof wn;)i=i._def.innerType;t[n]=i}}),new He({...this._def,shape:()=>t})}keyof(){return U0(Pe.objectKeys(this.shape))}}He.create=(r,e)=>new He({shape:()=>r,unknownKeys:"strip",catchall:In.create(),typeName:fe.ZodObject,...Te(e)});He.strictCreate=(r,e)=>new He({shape:()=>r,unknownKeys:"strict",catchall:In.create(),typeName:fe.ZodObject,...Te(e)});He.lazycreate=(r,e)=>new He({shape:r,unknownKeys:"strip",catchall:In.create(),typeName:fe.ZodObject,...Te(e)});class Ha extends Ae{_parse(e){const{ctx:t}=this._processInputParams(e),n=this._def.options;function a(i){for(const o of i)if(o.result.status==="valid")return o.result;for(const o of i)if(o.result.status==="dirty")return t.common.issues.push(...o.ctx.common.issues),o.result;const s=i.map(o=>new gn(o.ctx.common.issues));return le(t,{code:Q.invalid_union,unionErrors:s}),xe}if(t.common.async)return Promise.all(n.map(async i=>{const s={...t,common:{...t.common,issues:[]},parent:null};return{result:await i._parseAsync({data:t.data,path:t.path,parent:s}),ctx:s}})).then(a);{let i;const s=[];for(const l of n){const c={...t,common:{...t.common,issues:[]},parent:null},u=l._parseSync({data:t.data,path:t.path,parent:c});if(u.status==="valid")return u;u.status==="dirty"&&!i&&(i={result:u,ctx:c}),c.common.issues.length&&s.push(c.common.issues)}if(i)return t.common.issues.push(...i.ctx.common.issues),i.result;const o=s.map(l=>new gn(l));return le(t,{code:Q.invalid_union,unionErrors:o}),xe}}get options(){return this._def.options}}Ha.create=(r,e)=>new Ha({options:r,typeName:fe.ZodUnion,...Te(e)});const Mi=r=>r instanceof qa?Mi(r.schema):r instanceof Xt?Mi(r.innerType()):r instanceof Va?[r.value]:r instanceof Yn?r.options:r instanceof Ga?Object.keys(r.enum):r instanceof Ka?Mi(r._def.innerType):r instanceof La?[void 0]:r instanceof Ua?[null]:null;class Ro extends Ae{_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==te.object)return le(t,{code:Q.invalid_type,expected:te.object,received:t.parsedType}),xe;const n=this.discriminator,a=t.data[n],i=this.optionsMap.get(a);return i?t.common.async?i._parseAsync({data:t.data,path:t.path,parent:t}):i._parseSync({data:t.data,path:t.path,parent:t}):(le(t,{code:Q.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),xe)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,n){const a=new Map;for(const i of t){const s=Mi(i.shape[e]);if(!s)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const o of s){if(a.has(o))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(o)}`);a.set(o,i)}}return new Ro({typeName:fe.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:a,...Te(n)})}}function gc(r,e){const t=zn(r),n=zn(e);if(r===e)return{valid:!0,data:r};if(t===te.object&&n===te.object){const a=Pe.objectKeys(e),i=Pe.objectKeys(r).filter(o=>a.indexOf(o)!==-1),s={...r,...e};for(const o of i){const l=gc(r[o],e[o]);if(!l.valid)return{valid:!1};s[o]=l.data}return{valid:!0,data:s}}else if(t===te.array&&n===te.array){if(r.length!==e.length)return{valid:!1};const a=[];for(let i=0;i<r.length;i++){const s=r[i],o=e[i],l=gc(s,o);if(!l.valid)return{valid:!1};a.push(l.data)}return{valid:!0,data:a}}else return t===te.date&&n===te.date&&+r==+e?{valid:!0,data:r}:{valid:!1}}class za extends Ae{_parse(e){const{status:t,ctx:n}=this._processInputParams(e),a=(i,s)=>{if(xc(i)||xc(s))return xe;const o=gc(i.value,s.value);return o.valid?((bc(i)||bc(s))&&t.dirty(),{status:t.value,value:o.data}):(le(n,{code:Q.invalid_intersection_types}),xe)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([i,s])=>a(i,s)):a(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}za.create=(r,e,t)=>new za({left:r,right:e,typeName:fe.ZodIntersection,...Te(t)});class fn extends Ae{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==te.array)return le(n,{code:Q.invalid_type,expected:te.array,received:n.parsedType}),xe;if(n.data.length<this._def.items.length)return le(n,{code:Q.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),xe;!this._def.rest&&n.data.length>this._def.items.length&&(le(n,{code:Q.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const i=[...n.data].map((s,o)=>{const l=this._def.items[o]||this._def.rest;return l?l._parse(new pn(n,s,n.path,o)):null}).filter(s=>!!s);return n.common.async?Promise.all(i).then(s=>Ct.mergeArray(t,s)):Ct.mergeArray(t,i)}get items(){return this._def.items}rest(e){return new fn({...this._def,rest:e})}}fn.create=(r,e)=>{if(!Array.isArray(r))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new fn({items:r,typeName:fe.ZodTuple,rest:null,...Te(e)})};class ja extends Ae{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==te.object)return le(n,{code:Q.invalid_type,expected:te.object,received:n.parsedType}),xe;const a=[],i=this._def.keyType,s=this._def.valueType;for(const o in n.data)a.push({key:i._parse(new pn(n,o,n.path,o)),value:s._parse(new pn(n,n.data[o],n.path,o))});return n.common.async?Ct.mergeObjectAsync(t,a):Ct.mergeObjectSync(t,a)}get element(){return this._def.valueType}static create(e,t,n){return t instanceof Ae?new ja({keyType:e,valueType:t,typeName:fe.ZodRecord,...Te(n)}):new ja({keyType:kn.create(),valueType:e,typeName:fe.ZodRecord,...Te(t)})}}class Yi extends Ae{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==te.map)return le(n,{code:Q.invalid_type,expected:te.map,received:n.parsedType}),xe;const a=this._def.keyType,i=this._def.valueType,s=[...n.data.entries()].map(([o,l],c)=>({key:a._parse(new pn(n,o,n.path,[c,"key"])),value:i._parse(new pn(n,l,n.path,[c,"value"]))}));if(n.common.async){const o=new Map;return Promise.resolve().then(async()=>{for(const l of s){const c=await l.key,u=await l.value;if(c.status==="aborted"||u.status==="aborted")return xe;(c.status==="dirty"||u.status==="dirty")&&t.dirty(),o.set(c.value,u.value)}return{status:t.value,value:o}})}else{const o=new Map;for(const l of s){const c=l.key,u=l.value;if(c.status==="aborted"||u.status==="aborted")return xe;(c.status==="dirty"||u.status==="dirty")&&t.dirty(),o.set(c.value,u.value)}return{status:t.value,value:o}}}}Yi.create=(r,e,t)=>new Yi({valueType:e,keyType:r,typeName:fe.ZodMap,...Te(t)});class br extends Ae{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==te.set)return le(n,{code:Q.invalid_type,expected:te.set,received:n.parsedType}),xe;const a=this._def;a.minSize!==null&&n.data.size<a.minSize.value&&(le(n,{code:Q.too_small,minimum:a.minSize.value,type:"set",inclusive:!0,exact:!1,message:a.minSize.message}),t.dirty()),a.maxSize!==null&&n.data.size>a.maxSize.value&&(le(n,{code:Q.too_big,maximum:a.maxSize.value,type:"set",inclusive:!0,exact:!1,message:a.maxSize.message}),t.dirty());const i=this._def.valueType;function s(l){const c=new Set;for(const u of l){if(u.status==="aborted")return xe;u.status==="dirty"&&t.dirty(),c.add(u.value)}return{status:t.value,value:c}}const o=[...n.data.values()].map((l,c)=>i._parse(new pn(n,l,n.path,c)));return n.common.async?Promise.all(o).then(l=>s(l)):s(o)}min(e,t){return new br({...this._def,minSize:{value:e,message:Ee.toString(t)}})}max(e,t){return new br({...this._def,maxSize:{value:e,message:Ee.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}br.create=(r,e)=>new br({valueType:r,minSize:null,maxSize:null,typeName:fe.ZodSet,...Te(e)});class Vr extends Ae{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==te.function)return le(t,{code:Q.invalid_type,expected:te.function,received:t.parsedType}),xe;function n(o,l){return qi({data:o,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,ji(),Na].filter(c=>!!c),issueData:{code:Q.invalid_arguments,argumentsError:l}})}function a(o,l){return qi({data:o,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,ji(),Na].filter(c=>!!c),issueData:{code:Q.invalid_return_type,returnTypeError:l}})}const i={errorMap:t.common.contextualErrorMap},s=t.data;return this._def.returns instanceof ea?ft(async(...o)=>{const l=new gn([]),c=await this._def.args.parseAsync(o,i).catch(h=>{throw l.addIssue(n(o,h)),l}),u=await s(...c);return await this._def.returns._def.type.parseAsync(u,i).catch(h=>{throw l.addIssue(a(u,h)),l})}):ft((...o)=>{const l=this._def.args.safeParse(o,i);if(!l.success)throw new gn([n(o,l.error)]);const c=s(...l.data),u=this._def.returns.safeParse(c,i);if(!u.success)throw new gn([a(c,u.error)]);return u.data})}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new Vr({...this._def,args:fn.create(e).rest(pr.create())})}returns(e){return new Vr({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,n){return new Vr({args:e||fn.create([]).rest(pr.create()),returns:t||pr.create(),typeName:fe.ZodFunction,...Te(n)})}}class qa extends Ae{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}qa.create=(r,e)=>new qa({getter:r,typeName:fe.ZodLazy,...Te(e)});class Va extends Ae{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return le(t,{received:t.data,code:Q.invalid_literal,expected:this._def.value}),xe}return{status:"valid",value:e.data}}get value(){return this._def.value}}Va.create=(r,e)=>new Va({value:r,typeName:fe.ZodLiteral,...Te(e)});function U0(r,e){return new Yn({values:r,typeName:fe.ZodEnum,...Te(e)})}class Yn extends Ae{_parse(e){if(typeof e.data!="string"){const t=this._getOrReturnCtx(e),n=this._def.values;return le(t,{expected:Pe.joinValues(n),received:t.parsedType,code:Q.invalid_type}),xe}if(this._def.values.indexOf(e.data)===-1){const t=this._getOrReturnCtx(e),n=this._def.values;return le(t,{received:t.data,code:Q.invalid_enum_value,options:n}),xe}return ft(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e){return Yn.create(e)}exclude(e){return Yn.create(this.options.filter(t=>!e.includes(t)))}}Yn.create=U0;class Ga extends Ae{_parse(e){const t=Pe.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==te.string&&n.parsedType!==te.number){const a=Pe.objectValues(t);return le(n,{expected:Pe.joinValues(a),received:n.parsedType,code:Q.invalid_type}),xe}if(t.indexOf(e.data)===-1){const a=Pe.objectValues(t);return le(n,{received:n.data,code:Q.invalid_enum_value,options:a}),xe}return ft(e.data)}get enum(){return this._def.values}}Ga.create=(r,e)=>new Ga({values:r,typeName:fe.ZodNativeEnum,...Te(e)});class ea extends Ae{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==te.promise&&t.common.async===!1)return le(t,{code:Q.invalid_type,expected:te.promise,received:t.parsedType}),xe;const n=t.parsedType===te.promise?t.data:Promise.resolve(t.data);return ft(n.then(a=>this._def.type.parseAsync(a,{path:t.path,errorMap:t.common.contextualErrorMap})))}}ea.create=(r,e)=>new ea({type:r,typeName:fe.ZodPromise,...Te(e)});class Xt extends Ae{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===fe.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:n}=this._processInputParams(e),a=this._def.effect||null;if(a.type==="preprocess"){const s=a.transform(n.data);return n.common.async?Promise.resolve(s).then(o=>this._def.schema._parseAsync({data:o,path:n.path,parent:n})):this._def.schema._parseSync({data:s,path:n.path,parent:n})}const i={addIssue:s=>{le(n,s),s.fatal?t.abort():t.dirty()},get path(){return n.path}};if(i.addIssue=i.addIssue.bind(i),a.type==="refinement"){const s=o=>{const l=a.refinement(o,i);if(n.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return o};if(n.common.async===!1){const o=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return o.status==="aborted"?xe:(o.status==="dirty"&&t.dirty(),s(o.value),{status:t.value,value:o.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(o=>o.status==="aborted"?xe:(o.status==="dirty"&&t.dirty(),s(o.value).then(()=>({status:t.value,value:o.value}))))}if(a.type==="transform")if(n.common.async===!1){const s=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!Vi(s))return s;const o=a.transform(s.value,i);if(o instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:o}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(s=>Vi(s)?Promise.resolve(a.transform(s.value,i)).then(o=>({status:t.value,value:o})):s);Pe.assertNever(a)}}Xt.create=(r,e,t)=>new Xt({schema:r,typeName:fe.ZodEffects,effect:e,...Te(t)});Xt.createWithPreprocess=(r,e,t)=>new Xt({schema:e,effect:{type:"preprocess",transform:r},typeName:fe.ZodEffects,...Te(t)});class wn extends Ae{_parse(e){return this._getType(e)===te.undefined?ft(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}wn.create=(r,e)=>new wn({innerType:r,typeName:fe.ZodOptional,...Te(e)});class gr extends Ae{_parse(e){return this._getType(e)===te.null?ft(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}gr.create=(r,e)=>new gr({innerType:r,typeName:fe.ZodNullable,...Te(e)});class Ka extends Ae{_parse(e){const{ctx:t}=this._processInputParams(e);let n=t.data;return t.parsedType===te.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}Ka.create=(r,e)=>new Ka({innerType:r,typeName:fe.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Te(e)});class Ji extends Ae{_parse(e){const{ctx:t}=this._processInputParams(e),n=this._def.innerType._parse({data:t.data,path:t.path,parent:{...t,common:{...t.common,issues:[]}}});return Gi(n)?n.then(a=>({status:"valid",value:a.status==="valid"?a.value:this._def.catchValue()})):{status:"valid",value:n.status==="valid"?n.value:this._def.catchValue()}}removeCatch(){return this._def.innerType}}Ji.create=(r,e)=>new Ji({innerType:r,typeName:fe.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Te(e)});class Qi extends Ae{_parse(e){if(this._getType(e)!==te.nan){const n=this._getOrReturnCtx(e);return le(n,{code:Q.invalid_type,expected:te.nan,received:n.parsedType}),xe}return{status:"valid",value:e.data}}}Qi.create=r=>new Qi({typeName:fe.ZodNaN,...Te(r)});const sx=Symbol("zod_brand");class H0 extends Ae{_parse(e){const{ctx:t}=this._processInputParams(e),n=t.data;return this._def.type._parse({data:n,path:t.path,parent:t})}unwrap(){return this._def.type}}class ci extends Ae{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?xe:i.status==="dirty"?(t.dirty(),L0(i.value)):this._def.out._parseAsync({data:i.value,path:n.path,parent:n})})();{const a=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return a.status==="aborted"?xe:a.status==="dirty"?(t.dirty(),{status:"dirty",value:a.value}):this._def.out._parseSync({data:a.value,path:n.path,parent:n})}}static create(e,t){return new ci({in:e,out:t,typeName:fe.ZodPipeline})}}const z0=(r,e={},t)=>r?Xr.create().superRefine((n,a)=>{if(!r(n)){const i=typeof e=="function"?e(n):e,s=typeof i=="string"?{message:i}:i;a.addIssue({code:"custom",...s,fatal:t})}}):Xr.create(),ox={object:He.lazycreate};var fe;(function(r){r.ZodString="ZodString",r.ZodNumber="ZodNumber",r.ZodNaN="ZodNaN",r.ZodBigInt="ZodBigInt",r.ZodBoolean="ZodBoolean",r.ZodDate="ZodDate",r.ZodSymbol="ZodSymbol",r.ZodUndefined="ZodUndefined",r.ZodNull="ZodNull",r.ZodAny="ZodAny",r.ZodUnknown="ZodUnknown",r.ZodNever="ZodNever",r.ZodVoid="ZodVoid",r.ZodArray="ZodArray",r.ZodObject="ZodObject",r.ZodUnion="ZodUnion",r.ZodDiscriminatedUnion="ZodDiscriminatedUnion",r.ZodIntersection="ZodIntersection",r.ZodTuple="ZodTuple",r.ZodRecord="ZodRecord",r.ZodMap="ZodMap",r.ZodSet="ZodSet",r.ZodFunction="ZodFunction",r.ZodLazy="ZodLazy",r.ZodLiteral="ZodLiteral",r.ZodEnum="ZodEnum",r.ZodEffects="ZodEffects",r.ZodNativeEnum="ZodNativeEnum",r.ZodOptional="ZodOptional",r.ZodNullable="ZodNullable",r.ZodDefault="ZodDefault",r.ZodCatch="ZodCatch",r.ZodPromise="ZodPromise",r.ZodBranded="ZodBranded",r.ZodPipeline="ZodPipeline"})(fe||(fe={}));const cx=(r,e={message:`Input not instance of ${r.name}`})=>z0(t=>t instanceof r,e,!0),j0=kn.create,q0=Zn.create,lx=Qi.create,ux=Wa.create,V0=Oa.create,dx=xr.create,px=Ki.create,fx=La.create,hx=Ua.create,yx=Xr.create,mx=pr.create,xx=In.create,bx=$i.create,gx=Yt.create,wx=He.create,vx=He.strictCreate,Tx=Ha.create,Ax=Ro.create,Cx=za.create,Ex=fn.create,_x=ja.create,kx=Yi.create,Ix=br.create,Sx=Vr.create,Px=qa.create,Bx=Va.create,Rx=Yn.create,Mx=Ga.create,Dx=ea.create,wu=Xt.create,Fx=wn.create,Nx=gr.create,Wx=Xt.createWithPreprocess,Ox=ci.create,Lx=()=>j0().optional(),Ux=()=>q0().optional(),Hx=()=>V0().optional(),zx={string:r=>kn.create({...r,coerce:!0}),number:r=>Zn.create({...r,coerce:!0}),boolean:r=>Oa.create({...r,coerce:!0}),bigint:r=>Wa.create({...r,coerce:!0}),date:r=>xr.create({...r,coerce:!0})},jx=xe;var _=Object.freeze({__proto__:null,defaultErrorMap:Na,setErrorMap:Qm,getErrorMap:ji,makeIssue:qi,EMPTY_PATH:Xm,addIssueToContext:le,ParseStatus:Ct,INVALID:xe,DIRTY:L0,OK:ft,isAborted:xc,isDirty:bc,isValid:Vi,isAsync:Gi,get util(){return Pe},ZodParsedType:te,getParsedType:zn,ZodType:Ae,ZodString:kn,ZodNumber:Zn,ZodBigInt:Wa,ZodBoolean:Oa,ZodDate:xr,ZodSymbol:Ki,ZodUndefined:La,ZodNull:Ua,ZodAny:Xr,ZodUnknown:pr,ZodNever:In,ZodVoid:$i,ZodArray:Yt,get objectUtil(){return Zi},ZodObject:He,ZodUnion:Ha,ZodDiscriminatedUnion:Ro,ZodIntersection:za,ZodTuple:fn,ZodRecord:ja,ZodMap:Yi,ZodSet:br,ZodFunction:Vr,ZodLazy:qa,ZodLiteral:Va,ZodEnum:Yn,ZodNativeEnum:Ga,ZodPromise:ea,ZodEffects:Xt,ZodTransformer:Xt,ZodOptional:wn,ZodNullable:gr,ZodDefault:Ka,ZodCatch:Ji,ZodNaN:Qi,BRAND:sx,ZodBranded:H0,ZodPipeline:ci,custom:z0,Schema:Ae,ZodSchema:Ae,late:ox,get ZodFirstPartyTypeKind(){return fe},coerce:zx,any:yx,array:gx,bigint:ux,boolean:V0,date:dx,discriminatedUnion:Ax,effect:wu,enum:Rx,function:Sx,instanceof:cx,intersection:Cx,lazy:Px,literal:Bx,map:kx,nan:lx,nativeEnum:Mx,never:xx,null:hx,nullable:Nx,number:q0,object:wx,oboolean:Hx,onumber:Ux,optional:Fx,ostring:Lx,pipeline:Ox,preprocess:Wx,promise:Dx,record:_x,set:Ix,strictObject:vx,string:j0,symbol:px,transformer:wu,tuple:Ex,undefined:fx,union:Tx,unknown:mx,void:bx,NEVER:jx,ZodIssueCode:Q,quotelessJson:Jm,ZodError:gn});const G0="c6634ad2d97b74baf15ff556016830c251050e6c36b9da508ce3ec80095d3dc1",qx=()=>typeof window<"u",vu=qx()?_.instanceof(File):_.instanceof(Buffer),Vx=_.union([vu,_.object({data:_.union([vu,_.string()]),name:_.string()})]),fr=_.union([Vx,_.string()]),K0=1e4,Gx=_.union([_.array(_.number()),_.string()]),Kx=_.union([_.string(),_.number(),_.bigint(),_.custom(r=>O.isBigNumber(r)),_.custom(r=>zr.isBN(r))]).transform(r=>{let e=zr.isBN(r)?new zr(r).toString():O.from(r).toString();return O.from(e)});Kx.transform(r=>r.toString());const $0=_.union([_.bigint(),_.custom(r=>O.isBigNumber(r)),_.custom(r=>zr.isBN(r))]).transform(r=>zr.isBN(r)?new zr(r).toString():O.from(r).toString()),sa=_.number().max(K0,"Cannot exceed 100%").min(0,"Cannot be below 0%"),$x=_.number().max(100,"Cannot exceed 100%").min(0,"Cannot be below 0%"),Zx=_.union([_.string().regex(/^([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/,"Invalid hex color"),_.string().regex(/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/,"Invalid hex color").transform(r=>r.replace("#","")),_.string().length(0)]),Rn=_.union([_.string().regex(/^([0-9]+\.?[0-9]*|\.[0-9]+)$/,"Invalid amount"),_.number().min(0,"Amount cannot be negative")]).transform(r=>typeof r=="number"?r.toString():r),ta=_.union([Rn,_.literal("unlimited")]).default("unlimited"),Z0=_.date().transform(r=>O.from(Math.floor(r.getTime()/1e3)));Z0.default(new Date(0));Z0.default(new Date(Date.now()+1e3*60*60*24*365*10));function Yx(r,e){if(typeof r!="object"||r===null)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function Jx(r){var e=Yx(r,"string");return typeof e=="symbol"?e:String(e)}function S(r,e,t){return e=Jx(e),e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}const Tu=_.object({}).catchall(_.union([$0,_.unknown()])),Au=_.union([_.array(Tu),Tu]).optional(),Sn=_.object({name:_.union([_.string(),_.number()]).optional(),description:_.string().nullable().optional(),image:fr.nullable().optional(),external_url:fr.nullable().optional(),animation_url:fr.optional(),background_color:Zx.optional(),properties:Au,attributes:Au}).catchall(_.union([$0,_.unknown()])),Mo=_.union([Sn,_.string()]),Y0=Sn.extend({id:_.string(),uri:_.string(),image:_.string().nullable().optional(),external_url:_.string().nullable().optional(),animation_url:_.string().nullable().optional()}),hr=100;_.object({start:_.number().default(0),count:_.number().default(hr)}).default({start:0,count:hr});const Do=[{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"}],lt=[{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"approved",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!1,internalType:"bool",name:"approved",type:"bool"}],name:"ApprovalForAll",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"approve",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getApproved",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"ownerOf",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"bytes",name:"data",type:"bytes"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"bool",name:"_approved",type:"bool"}],name:"setApprovalForAll",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"transferFrom",outputs:[],stateMutability:"nonpayable",type:"function"}],Et=[{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_owner",type:"address"},{indexed:!0,internalType:"address",name:"_operator",type:"address"},{indexed:!1,internalType:"bool",name:"_approved",type:"bool"}],name:"ApprovalForAll",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_operator",type:"address"},{indexed:!0,internalType:"address",name:"_from",type:"address"},{indexed:!0,internalType:"address",name:"_to",type:"address"},{indexed:!1,internalType:"uint256[]",name:"_ids",type:"uint256[]"},{indexed:!1,internalType:"uint256[]",name:"_values",type:"uint256[]"}],name:"TransferBatch",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_operator",type:"address"},{indexed:!0,internalType:"address",name:"_from",type:"address"},{indexed:!0,internalType:"address",name:"_to",type:"address"},{indexed:!1,internalType:"uint256",name:"_id",type:"uint256"},{indexed:!1,internalType:"uint256",name:"_value",type:"uint256"}],name:"TransferSingle",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"string",name:"_value",type:"string"},{indexed:!0,internalType:"uint256",name:"_id",type:"uint256"}],name:"URI",type:"event"},{inputs:[{internalType:"address",name:"_owner",type:"address"},{internalType:"uint256",name:"_id",type:"uint256"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address[]",name:"_owners",type:"address[]"},{internalType:"uint256[]",name:"_ids",type:"uint256[]"}],name:"balanceOfBatch",outputs:[{internalType:"uint256[]",name:"",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_owner",type:"address"},{internalType:"address",name:"_operator",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_from",type:"address"},{internalType:"address",name:"_to",type:"address"},{internalType:"uint256[]",name:"_ids",type:"uint256[]"},{internalType:"uint256[]",name:"_values",type:"uint256[]"},{internalType:"bytes",name:"_data",type:"bytes"}],name:"safeBatchTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_from",type:"address"},{internalType:"address",name:"_to",type:"address"},{internalType:"uint256",name:"_id",type:"uint256"},{internalType:"uint256",name:"_value",type:"uint256"},{internalType:"bytes",name:"_data",type:"bytes"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_operator",type:"address"},{internalType:"bool",name:"_approved",type:"bool"}],name:"setApprovalForAll",outputs:[],stateMutability:"nonpayable",type:"function"}],Qx=[{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"burn",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"burnFrom",outputs:[],stateMutability:"nonpayable",type:"function"}],J0=[{anonymous:!1,inputs:[{components:[{internalType:"uint256",name:"startTimestamp",type:"uint256"},{internalType:"uint256",name:"maxClaimableSupply",type:"uint256"},{internalType:"uint256",name:"supplyClaimed",type:"uint256"},{internalType:"uint256",name:"quantityLimitPerWallet",type:"uint256"},{internalType:"bytes32",name:"merkleRoot",type:"bytes32"},{internalType:"uint256",name:"pricePerToken",type:"uint256"},{internalType:"address",name:"currency",type:"address"},{internalType:"string",name:"metadata",type:"string"}],indexed:!1,internalType:"struct IClaimCondition.ClaimCondition[]",name:"claimConditions",type:"tuple[]"},{indexed:!1,internalType:"bool",name:"resetEligibility",type:"bool"}],name:"ClaimConditionsUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"claimConditionIndex",type:"uint256"},{indexed:!0,internalType:"address",name:"claimer",type:"address"},{indexed:!0,internalType:"address",name:"receiver",type:"address"},{indexed:!1,internalType:"uint256",name:"startTokenId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"quantityClaimed",type:"uint256"}],name:"TokensClaimed",type:"event"},{inputs:[{internalType:"address",name:"receiver",type:"address"},{internalType:"uint256",name:"quantity",type:"uint256"},{internalType:"address",name:"currency",type:"address"},{internalType:"uint256",name:"pricePerToken",type:"uint256"},{components:[{internalType:"bytes32[]",name:"proof",type:"bytes32[]"},{internalType:"uint256",name:"quantityLimitPerWallet",type:"uint256"},{internalType:"uint256",name:"pricePerToken",type:"uint256"},{internalType:"address",name:"currency",type:"address"}],internalType:"struct IDrop.AllowlistProof",name:"allowlistProof",type:"tuple"},{internalType:"bytes",name:"data",type:"bytes"}],name:"claim",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{components:[{internalType:"uint256",name:"startTimestamp",type:"uint256"},{internalType:"uint256",name:"maxClaimableSupply",type:"uint256"},{internalType:"uint256",name:"supplyClaimed",type:"uint256"},{internalType:"uint256",name:"quantityLimitPerWallet",type:"uint256"},{internalType:"bytes32",name:"merkleRoot",type:"bytes32"},{internalType:"uint256",name:"pricePerToken",type:"uint256"},{internalType:"address",name:"currency",type:"address"},{internalType:"string",name:"metadata",type:"string"}],internalType:"struct IClaimCondition.ClaimCondition[]",name:"phases",type:"tuple[]"},{internalType:"bool",name:"resetClaimEligibility",type:"bool"}],name:"setClaimConditions",outputs:[],stateMutability:"nonpayable",type:"function"}],Xx=[{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"spender",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{components:[{internalType:"uint256",name:"startTimestamp",type:"uint256"},{internalType:"uint256",name:"maxClaimableSupply",type:"uint256"},{internalType:"uint256",name:"supplyClaimed",type:"uint256"},{internalType:"uint256",name:"quantityLimitPerTransaction",type:"uint256"},{internalType:"uint256",name:"waitTimeInSecondsBetweenClaims",type:"uint256"},{internalType:"bytes32",name:"merkleRoot",type:"bytes32"},{internalType:"uint256",name:"pricePerToken",type:"uint256"},{internalType:"address",name:"currency",type:"address"}],indexed:!1,internalType:"struct IDropClaimCondition_V2.ClaimCondition[]",name:"claimConditions",type:"tuple[]"}],name:"ClaimConditionsUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"string",name:"prevURI",type:"string"},{indexed:!1,internalType:"string",name:"newURI",type:"string"}],name:"ContractURIUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"maxTotalSupply",type:"uint256"}],name:"MaxTotalSupplyUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"count",type:"uint256"}],name:"MaxWalletClaimCountUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"claimConditionIndex",type:"uint256"},{indexed:!0,internalType:"address",name:"claimer",type:"address"},{indexed:!0,internalType:"address",name:"receiver",type:"address"},{indexed:!1,internalType:"uint256",name:"quantityClaimed",type:"uint256"}],name:"TokensClaimed",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Transfer",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"wallet",type:"address"},{indexed:!1,internalType:"uint256",name:"count",type:"uint256"}],name:"WalletClaimCountUpdated",type:"event"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"receiver",type:"address"},{internalType:"uint256",name:"quantity",type:"uint256"},{internalType:"address",name:"currency",type:"address"},{internalType:"uint256",name:"pricePerToken",type:"uint256"},{internalType:"bytes32[]",name:"proofs",type:"bytes32[]"},{internalType:"uint256",name:"proofMaxQuantityPerTransaction",type:"uint256"}],name:"claim",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{components:[{internalType:"uint256",name:"startTimestamp",type:"uint256"},{internalType:"uint256",name:"maxClaimableSupply",type:"uint256"},{internalType:"uint256",name:"supplyClaimed",type:"uint256"},{internalType:"uint256",name:"quantityLimitPerTransaction",type:"uint256"},{internalType:"uint256",name:"waitTimeInSecondsBetweenClaims",type:"uint256"},{internalType:"bytes32",name:"merkleRoot",type:"bytes32"},{internalType:"uint256",name:"pricePerToken",type:"uint256"},{internalType:"address",name:"currency",type:"address"}],internalType:"struct IDropClaimCondition_V2.ClaimCondition[]",name:"phases",type:"tuple[]"},{internalType:"bool",name:"resetClaimEligibility",type:"bool"}],name:"setClaimConditions",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"}],Q0=[{anonymous:!1,inputs:[{components:[{internalType:"uint256",name:"startTimestamp",type:"uint256"},{internalType:"uint256",name:"maxClaimableSupply",type:"uint256"},{internalType:"uint256",name:"supplyClaimed",type:"uint256"},{internalType:"uint256",name:"quantityLimitPerWallet",type:"uint256"},{internalType:"bytes32",name:"merkleRoot",type:"bytes32"},{internalType:"uint256",name:"pricePerToken",type:"uint256"},{internalType:"address",name:"currency",type:"address"},{internalType:"string",name:"metadata",type:"string"}],indexed:!1,internalType:"struct IClaimCondition.ClaimCondition",name:"condition",type:"tuple"},{indexed:!1,internalType:"bool",name:"resetEligibility",type:"bool"}],name:"ClaimConditionUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"claimer",type:"address"},{indexed:!0,internalType:"address",name:"receiver",type:"address"},{indexed:!0,internalType:"uint256",name:"startTokenId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"quantityClaimed",type:"uint256"}],name:"TokensClaimed",type:"event"},{inputs:[{internalType:"address",name:"receiver",type:"address"},{internalType:"uint256",name:"quantity",type:"uint256"},{internalType:"address",name:"currency",type:"address"},{internalType:"uint256",name:"pricePerToken",type:"uint256"},{components:[{internalType:"bytes32[]",name:"proof",type:"bytes32[]"},{internalType:"uint256",name:"quantityLimitPerWallet",type:"uint256"},{internalType:"uint256",name:"pricePerToken",type:"uint256"},{internalType:"address",name:"currency",type:"address"}],internalType:"struct IDropSinglePhase.AllowlistProof",name:"allowlistProof",type:"tuple"},{internalType:"bytes",name:"data",type:"bytes"}],name:"claim",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{components:[{internalType:"uint256",name:"startTimestamp",type:"uint256"},{internalType:"uint256",name:"maxClaimableSupply",type:"uint256"},{internalType:"uint256",name:"supplyClaimed",type:"uint256"},{internalType:"uint256",name:"quantityLimitPerWallet",type:"uint256"},{internalType:"bytes32",name:"merkleRoot",type:"bytes32"},{internalType:"uint256",name:"pricePerToken",type:"uint256"},{internalType:"address",name:"currency",type:"address"},{internalType:"string",name:"metadata",type:"string"}],internalType:"struct IClaimCondition.ClaimCondition",name:"phase",type:"tuple"},{internalType:"bool",name:"resetClaimEligibility",type:"bool"}],name:"setClaimConditions",outputs:[],stateMutability:"nonpayable",type:"function"}],X0=[{anonymous:!1,inputs:[{components:[{internalType:"uint256",name:"startTimestamp",type:"uint256"},{internalType:"uint256",name:"maxClaimableSupply",type:"uint256"},{internalType:"uint256",name:"supplyClaimed",type:"uint256"},{internalType:"uint256",name:"quantityLimitPerTransaction",type:"uint256"},{internalType:"uint256",name:"waitTimeInSecondsBetweenClaims",type:"uint256"},{internalType:"bytes32",name:"merkleRoot",type:"bytes32"},{internalType:"uint256",name:"pricePerToken",type:"uint256"},{internalType:"address",name:"currency",type:"address"}],indexed:!1,internalType:"struct IClaimCondition_V1.ClaimCondition",name:"condition",type:"tuple"},{indexed:!1,internalType:"bool",name:"resetEligibility",type:"bool"}],name:"ClaimConditionUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"claimer",type:"address"},{indexed:!0,internalType:"address",name:"receiver",type:"address"},{indexed:!0,internalType:"uint256",name:"startTokenId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"quantityClaimed",type:"uint256"}],name:"TokensClaimed",type:"event"},{inputs:[{internalType:"address",name:"receiver",type:"address"},{internalType:"uint256",name:"quantity",type:"uint256"},{internalType:"address",name:"currency",type:"address"},{internalType:"uint256",name:"pricePerToken",type:"uint256"},{components:[{internalType:"bytes32[]",name:"proof",type:"bytes32[]"},{internalType:"uint256",name:"maxQuantityInAllowlist",type:"uint256"}],internalType:"struct IDropSinglePhase_V1.AllowlistProof",name:"allowlistProof",type:"tuple"},{internalType:"bytes",name:"data",type:"bytes"}],name:"claim",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{components:[{internalType:"uint256",name:"startTimestamp",type:"uint256"},{internalType:"uint256",name:"maxClaimableSupply",type:"uint256"},{internalType:"uint256",name:"supplyClaimed",type:"uint256"},{internalType:"uint256",name:"quantityLimitPerTransaction",type:"uint256"},{internalType:"uint256",name:"waitTimeInSecondsBetweenClaims",type:"uint256"},{internalType:"bytes32",name:"merkleRoot",type:"bytes32"},{internalType:"uint256",name:"pricePerToken",type:"uint256"},{internalType:"address",name:"currency",type:"address"}],internalType:"struct IClaimCondition_V1.ClaimCondition",name:"phase",type:"tuple"},{internalType:"bool",name:"resetClaimEligibility",type:"bool"}],name:"setClaimConditions",outputs:[],stateMutability:"nonpayable",type:"function"}],It=[{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"spender",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"who",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"}],ep=[{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"mintedTo",type:"address"},{indexed:!1,internalType:"uint256",name:"quantityMinted",type:"uint256"}],name:"TokensMinted",type:"event"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"mintTo",outputs:[],stateMutability:"nonpayable",type:"function"}],il=[{inputs:[{internalType:"bytes[]",name:"data",type:"bytes[]"}],name:"multicall",outputs:[{internalType:"bytes[]",name:"results",type:"bytes[]"}],stateMutability:"nonpayable",type:"function"}],eb=[{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"signer",type:"address"},{indexed:!0,internalType:"address",name:"mintedTo",type:"address"},{components:[{internalType:"address",name:"to",type:"address"},{internalType:"address",name:"primarySaleRecipient",type:"address"},{internalType:"uint256",name:"quantity",type:"uint256"},{internalType:"uint256",name:"pricePerToken",type:"uint256"},{internalType:"address",name:"currency",type:"address"},{internalType:"uint128",name:"validityStartTimestamp",type:"uint128"},{internalType:"uint128",name:"validityEndTimestamp",type:"uint128"},{internalType:"bytes32",name:"uid",type:"bytes32"}],indexed:!1,internalType:"struct ISignatureMintERC20.MintRequest",name:"mintRequest",type:"tuple"}],name:"TokensMintedWithSignature",type:"event"},{inputs:[{components:[{internalType:"address",name:"to",type:"address"},{internalType:"address",name:"primarySaleRecipient",type:"address"},{internalType:"uint256",name:"quantity",type:"uint256"},{internalType:"uint256",name:"pricePerToken",type:"uint256"},{internalType:"address",name:"currency",type:"address"},{internalType:"uint128",name:"validityStartTimestamp",type:"uint128"},{internalType:"uint128",name:"validityEndTimestamp",type:"uint128"},{internalType:"bytes32",name:"uid",type:"bytes32"}],internalType:"struct ISignatureMintERC20.MintRequest",name:"req",type:"tuple"},{internalType:"bytes",name:"signature",type:"bytes"}],name:"mintWithSignature",outputs:[{internalType:"address",name:"signer",type:"address"}],stateMutability:"payable",type:"function"},{inputs:[{components:[{internalType:"address",name:"to",type:"address"},{internalType:"address",name:"primarySaleRecipient",type:"address"},{internalType:"uint256",name:"quantity",type:"uint256"},{internalType:"uint256",name:"pricePerToken",type:"uint256"},{internalType:"address",name:"currency",type:"address"},{internalType:"uint128",name:"validityStartTimestamp",type:"uint128"},{internalType:"uint128",name:"validityEndTimestamp",type:"uint128"},{internalType:"bytes32",name:"uid",type:"bytes32"}],internalType:"struct ISignatureMintERC20.MintRequest",name:"req",type:"tuple"},{internalType:"bytes",name:"signature",type:"bytes"}],name:"verify",outputs:[{internalType:"bool",name:"success",type:"bool"},{internalType:"address",name:"signer",type:"address"}],stateMutability:"view",type:"function"}],tb=[{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"burn",outputs:[],stateMutability:"nonpayable",type:"function"}],nb=[{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"claimer",type:"address"},{indexed:!0,internalType:"address",name:"receiver",type:"address"},{indexed:!0,internalType:"uint256",name:"startTokenId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"quantityClaimed",type:"uint256"}],name:"TokensClaimed",type:"event"},{inputs:[{internalType:"address",name:"_receiver",type:"address"},{internalType:"uint256",name:"_quantity",type:"uint256"}],name:"claim",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"_claimer",type:"address"},{internalType:"uint256",name:"_quantity",type:"uint256"}],name:"verifyClaim",outputs:[],stateMutability:"view",type:"function"}],tp=[{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"index",type:"uint256"},{indexed:!1,internalType:"string",name:"revealedURI",type:"string"}],name:"TokenURIRevealed",type:"event"},{inputs:[{internalType:"bytes",name:"data",type:"bytes"},{internalType:"bytes",name:"key",type:"bytes"}],name:"encryptDecrypt",outputs:[{internalType:"bytes",name:"result",type:"bytes"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"uint256",name:"identifier",type:"uint256"},{internalType:"bytes",name:"key",type:"bytes"}],name:"reveal",outputs:[{internalType:"string",name:"revealedURI",type:"string"}],stateMutability:"nonpayable",type:"function"}],rb=[{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"approved",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!1,internalType:"bool",name:"approved",type:"bool"}],name:"ApprovalForAll",type:"event"},{anonymous:!1,inputs:[{components:[{internalType:"uint256",name:"startTimestamp",type:"uint256"},{internalType:"uint256",name:"maxClaimableSupply",type:"uint256"},{internalType:"uint256",name:"supplyClaimed",type:"uint256"},{internalType:"uint256",name:"quantityLimitPerTransaction",type:"uint256"},{internalType:"uint256",name:"waitTimeInSecondsBetweenClaims",type:"uint256"},{internalType:"bytes32",name:"merkleRoot",type:"bytes32"},{internalType:"uint256",name:"pricePerToken",type:"uint256"},{internalType:"address",name:"currency",type:"address"}],indexed:!1,internalType:"struct IDropClaimCondition_V2.ClaimCondition[]",name:"claimConditions",type:"tuple[]"}],name:"ClaimConditionsUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"maxTotalSupply",type:"uint256"}],name:"MaxTotalSupplyUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"count",type:"uint256"}],name:"MaxWalletClaimCountUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"endTokenId",type:"uint256"},{indexed:!1,internalType:"string",name:"revealedURI",type:"string"}],name:"NFTRevealed",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"claimConditionIndex",type:"uint256"},{indexed:!0,internalType:"address",name:"claimer",type:"address"},{indexed:!0,internalType:"address",name:"receiver",type:"address"},{indexed:!1,internalType:"uint256",name:"startTokenId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"quantityClaimed",type:"uint256"}],name:"TokensClaimed",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"startTokenId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"endTokenId",type:"uint256"},{indexed:!1,internalType:"string",name:"baseURI",type:"string"},{indexed:!1,internalType:"bytes",name:"encryptedBaseURI",type:"bytes"}],name:"TokensLazyMinted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Transfer",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"wallet",type:"address"},{indexed:!1,internalType:"uint256",name:"count",type:"uint256"}],name:"WalletClaimCountUpdated",type:"event"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"approve",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"balance",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"receiver",type:"address"},{internalType:"uint256",name:"quantity",type:"uint256"},{internalType:"address",name:"currency",type:"address"},{internalType:"uint256",name:"pricePerToken",type:"uint256"},{internalType:"bytes32[]",name:"proofs",type:"bytes32[]"},{internalType:"uint256",name:"proofMaxQuantityPerTransaction",type:"uint256"}],name:"claim",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getApproved",outputs:[{internalType:"address",name:"operator",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"string",name:"baseURIForTokens",type:"string"},{internalType:"bytes",name:"encryptedBaseURI",type:"bytes"}],name:"lazyMint",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"ownerOf",outputs:[{internalType:"address",name:"owner",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"bytes",name:"data",type:"bytes"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"bool",name:"_approved",type:"bool"}],name:"setApprovalForAll",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{internalType:"uint256",name:"startTimestamp",type:"uint256"},{internalType:"uint256",name:"maxClaimableSupply",type:"uint256"},{internalType:"uint256",name:"supplyClaimed",type:"uint256"},{internalType:"uint256",name:"quantityLimitPerTransaction",type:"uint256"},{internalType:"uint256",name:"waitTimeInSecondsBetweenClaims",type:"uint256"},{internalType:"bytes32",name:"merkleRoot",type:"bytes32"},{internalType:"uint256",name:"pricePerToken",type:"uint256"},{internalType:"address",name:"currency",type:"address"}],internalType:"struct IDropClaimCondition_V2.ClaimCondition[]",name:"phases",type:"tuple[]"},{internalType:"bool",name:"resetClaimEligibility",type:"bool"}],name:"setClaimConditions",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"transferFrom",outputs:[],stateMutability:"nonpayable",type:"function"}],ab=[{inputs:[{internalType:"uint256",name:"_index",type:"uint256"}],name:"tokenByIndex",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_owner",type:"address"},{internalType:"uint256",name:"_index",type:"uint256"}],name:"tokenOfOwnerByIndex",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"}],ib=[{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"}],zt=[{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"startTokenId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"endTokenId",type:"uint256"},{indexed:!1,internalType:"string",name:"baseURI",type:"string"},{indexed:!1,internalType:"bytes",name:"encryptedBaseURI",type:"bytes"}],name:"TokensLazyMinted",type:"event"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"string",name:"baseURIForTokens",type:"string"},{internalType:"bytes",name:"extraData",type:"bytes"}],name:"lazyMint",outputs:[{internalType:"uint256",name:"batchId",type:"uint256"}],stateMutability:"nonpayable",type:"function"}],np=[{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"mintedTo",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenIdMinted",type:"uint256"},{indexed:!1,internalType:"string",name:"uri",type:"string"}],name:"TokensMinted",type:"event"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"string",name:"uri",type:"string"}],name:"mintTo",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"nonpayable",type:"function"}],sb=[{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"signer",type:"address"},{indexed:!0,internalType:"address",name:"mintedTo",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenIdMinted",type:"uint256"},{components:[{internalType:"address",name:"to",type:"address"},{internalType:"address",name:"royaltyRecipient",type:"address"},{internalType:"uint256",name:"royaltyBps",type:"uint256"},{internalType:"address",name:"primarySaleRecipient",type:"address"},{internalType:"string",name:"uri",type:"string"},{internalType:"uint256",name:"quantity",type:"uint256"},{internalType:"uint256",name:"pricePerToken",type:"uint256"},{internalType:"address",name:"currency",type:"address"},{internalType:"uint128",name:"validityStartTimestamp",type:"uint128"},{internalType:"uint128",name:"validityEndTimestamp",type:"uint128"},{internalType:"bytes32",name:"uid",type:"bytes32"}],indexed:!1,internalType:"struct ISignatureMintERC721.MintRequest",name:"mintRequest",type:"tuple"}],name:"TokensMintedWithSignature",type:"event"},{inputs:[{components:[{internalType:"address",name:"to",type:"address"},{internalType:"address",name:"royaltyRecipient",type:"address"},{internalType:"uint256",name:"royaltyBps",type:"uint256"},{internalType:"address",name:"primarySaleRecipient",type:"address"},{internalType:"string",name:"uri",type:"string"},{internalType:"uint256",name:"quantity",type:"uint256"},{internalType:"uint256",name:"pricePerToken",type:"uint256"},{internalType:"address",name:"currency",type:"address"},{internalType:"uint128",name:"validityStartTimestamp",type:"uint128"},{internalType:"uint128",name:"validityEndTimestamp",type:"uint128"},{internalType:"bytes32",name:"uid",type:"bytes32"}],internalType:"struct ISignatureMintERC721.MintRequest",name:"req",type:"tuple"},{internalType:"bytes",name:"signature",type:"bytes"}],name:"mintWithSignature",outputs:[{internalType:"address",name:"signer",type:"address"}],stateMutability:"payable",type:"function"},{inputs:[{components:[{internalType:"address",name:"to",type:"address"},{internalType:"address",name:"royaltyRecipient",type:"address"},{internalType:"uint256",name:"royaltyBps",type:"uint256"},{internalType:"address",name:"primarySaleRecipient",type:"address"},{internalType:"string",name:"uri",type:"string"},{internalType:"uint256",name:"quantity",type:"uint256"},{internalType:"uint256",name:"pricePerToken",type:"uint256"},{internalType:"address",name:"currency",type:"address"},{internalType:"uint128",name:"validityStartTimestamp",type:"uint128"},{internalType:"uint128",name:"validityEndTimestamp",type:"uint128"},{internalType:"bytes32",name:"uid",type:"bytes32"}],internalType:"struct ISignatureMintERC721.MintRequest",name:"req",type:"tuple"},{internalType:"bytes",name:"signature",type:"bytes"}],name:"verify",outputs:[{internalType:"bool",name:"success",type:"bool"},{internalType:"address",name:"signer",type:"address"}],stateMutability:"view",type:"function"}],ob=[{inputs:[{components:[{internalType:"address",name:"to",type:"address"},{internalType:"address",name:"royaltyRecipient",type:"address"},{internalType:"uint256",name:"royaltyBps",type:"uint256"},{internalType:"address",name:"primarySaleRecipient",type:"address"},{internalType:"string",name:"uri",type:"string"},{internalType:"uint256",name:"price",type:"uint256"},{internalType:"address",name:"currency",type:"address"},{internalType:"uint128",name:"validityStartTimestamp",type:"uint128"},{internalType:"uint128",name:"validityEndTimestamp",type:"uint128"},{internalType:"bytes32",name:"uid",type:"bytes32"}],internalType:"struct ITokenERC721.MintRequest",name:"_req",type:"tuple"},{internalType:"bytes",name:"_signature",type:"bytes"}],name:"mintWithSignature",outputs:[{internalType:"uint256",name:"tokenIdMinted",type:"uint256"}],stateMutability:"payable",type:"function"},{inputs:[{components:[{internalType:"address",name:"to",type:"address"},{internalType:"address",name:"royaltyRecipient",type:"address"},{internalType:"uint256",name:"royaltyBps",type:"uint256"},{internalType:"address",name:"primarySaleRecipient",type:"address"},{internalType:"string",name:"uri",type:"string"},{internalType:"uint256",name:"price",type:"uint256"},{internalType:"address",name:"currency",type:"address"},{internalType:"uint128",name:"validityStartTimestamp",type:"uint128"},{internalType:"uint128",name:"validityEndTimestamp",type:"uint128"},{internalType:"bytes32",name:"uid",type:"bytes32"}],internalType:"struct ITokenERC721.MintRequest",name:"_req",type:"tuple"},{internalType:"bytes",name:"_signature",type:"bytes"}],name:"verify",outputs:[{internalType:"bool",name:"",type:"bool"},{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"}],cb=[{anonymous:!1,inputs:[{indexed:!0,internalType:"string",name:"tier",type:"string"},{indexed:!0,internalType:"uint256",name:"startTokenId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"endTokenId",type:"uint256"},{indexed:!1,internalType:"string",name:"baseURI",type:"string"},{indexed:!1,internalType:"bytes",name:"encryptedBaseURI",type:"bytes"}],name:"TokensLazyMinted",type:"event"},{inputs:[],name:"getBaseURICount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_index",type:"uint256"}],name:"getBatchIdAtIndex",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getMetadataForAllTiers",outputs:[{components:[{internalType:"string",name:"tier",type:"string"},{components:[{internalType:"uint256",name:"startIdInclusive",type:"uint256"},{internalType:"uint256",name:"endIdNonInclusive",type:"uint256"}],internalType:"struct LazyMintWithTier.TokenRange[]",name:"ranges",type:"tuple[]"},{internalType:"string[]",name:"baseURIs",type:"string[]"}],internalType:"struct LazyMintWithTier.TierMetadata[]",name:"metadataForAllTiers",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_amount",type:"uint256"},{internalType:"string",name:"_baseURIForTokens",type:"string"},{internalType:"string",name:"_tier",type:"string"},{internalType:"bytes",name:"_data",type:"bytes"}],name:"lazyMint",outputs:[{internalType:"uint256",name:"batchId",type:"uint256"}],stateMutability:"nonpayable",type:"function"}],lb=[{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"uint256",name:"id",type:"uint256"},{internalType:"uint256",name:"value",type:"uint256"}],name:"burn",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"uint256[]",name:"ids",type:"uint256[]"},{internalType:"uint256[]",name:"values",type:"uint256[]"}],name:"burnBatch",outputs:[],stateMutability:"nonpayable",type:"function"}],ub=[{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"claimer",type:"address"},{indexed:!0,internalType:"address",name:"receiver",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"quantityClaimed",type:"uint256"}],name:"TokensClaimed",type:"event"},{inputs:[{internalType:"address",name:"_receiver",type:"address"},{internalType:"uint256",name:"_tokenId",type:"uint256"},{internalType:"uint256",name:"_quantity",type:"uint256"}],name:"claim",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"_claimer",type:"address"},{internalType:"uint256",name:"_tokenId",type:"uint256"},{internalType:"uint256",name:"_quantity",type:"uint256"}],name:"verifyClaim",outputs:[],stateMutability:"view",type:"function"}],db=[{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"},{components:[{internalType:"uint256",name:"startTimestamp",type:"uint256"},{internalType:"uint256",name:"maxClaimableSupply",type:"uint256"},{internalType:"uint256",name:"supplyClaimed",type:"uint256"},{internalType:"uint256",name:"quantityLimitPerWallet",type:"uint256"},{internalType:"bytes32",name:"merkleRoot",type:"bytes32"},{internalType:"uint256",name:"pricePerToken",type:"uint256"},{internalType:"address",name:"currency",type:"address"},{internalType:"string",name:"metadata",type:"string"}],indexed:!1,internalType:"struct IClaimCondition.ClaimCondition[]",name:"claimConditions",type:"tuple[]"},{indexed:!1,internalType:"bool",name:"resetEligibility",type:"bool"}],name:"ClaimConditionsUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"claimConditionIndex",type:"uint256"},{indexed:!0,internalType:"address",name:"claimer",type:"address"},{indexed:!0,internalType:"address",name:"receiver",type:"address"},{indexed:!1,internalType:"uint256",name:"tokenId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"quantityClaimed",type:"uint256"}],name:"TokensClaimed",type:"event"},{inputs:[{internalType:"address",name:"receiver",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"quantity",type:"uint256"},{internalType:"address",name:"currency",type:"address"},{internalType:"uint256",name:"pricePerToken",type:"uint256"},{components:[{internalType:"bytes32[]",name:"proof",type:"bytes32[]"},{internalType:"uint256",name:"quantityLimitPerWallet",type:"uint256"},{internalType:"uint256",name:"pricePerToken",type:"uint256"},{internalType:"address",name:"currency",type:"address"}],internalType:"struct IDrop1155.AllowlistProof",name:"allowlistProof",type:"tuple"},{internalType:"bytes",name:"data",type:"bytes"}],name:"claim",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"},{components:[{internalType:"uint256",name:"startTimestamp",type:"uint256"},{internalType:"uint256",name:"maxClaimableSupply",type:"uint256"},{internalType:"uint256",name:"supplyClaimed",type:"uint256"},{internalType:"uint256",name:"quantityLimitPerWallet",type:"uint256"},{internalType:"bytes32",name:"merkleRoot",type:"bytes32"},{internalType:"uint256",name:"pricePerToken",type:"uint256"},{internalType:"address",name:"currency",type:"address"},{internalType:"string",name:"metadata",type:"string"}],internalType:"struct IClaimCondition.ClaimCondition[]",name:"phases",type:"tuple[]"},{internalType:"bool",name:"resetClaimEligibility",type:"bool"}],name:"setClaimConditions",outputs:[],stateMutability:"nonpayable",type:"function"}],rp=[{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!1,internalType:"bool",name:"approved",type:"bool"}],name:"ApprovalForAll",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"},{components:[{internalType:"uint256",name:"startTimestamp",type:"uint256"},{internalType:"uint256",name:"maxClaimableSupply",type:"uint256"},{internalType:"uint256",name:"supplyClaimed",type:"uint256"},{internalType:"uint256",name:"quantityLimitPerTransaction",type:"uint256"},{internalType:"uint256",name:"waitTimeInSecondsBetweenClaims",type:"uint256"},{internalType:"bytes32",name:"merkleRoot",type:"bytes32"},{internalType:"uint256",name:"pricePerToken",type:"uint256"},{internalType:"address",name:"currency",type:"address"}],indexed:!1,internalType:"struct IDropClaimCondition_V2.ClaimCondition[]",name:"claimConditions",type:"tuple[]"}],name:"ClaimConditionsUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"tokenId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"maxTotalSupply",type:"uint256"}],name:"MaxTotalSupplyUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"tokenId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"count",type:"uint256"}],name:"MaxWalletClaimCountUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"},{indexed:!1,internalType:"address",name:"saleRecipient",type:"address"}],name:"SaleRecipientForTokenUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"claimConditionIndex",type:"uint256"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"},{indexed:!0,internalType:"address",name:"claimer",type:"address"},{indexed:!1,internalType:"address",name:"receiver",type:"address"},{indexed:!1,internalType:"uint256",name:"quantityClaimed",type:"uint256"}],name:"TokensClaimed",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"startTokenId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"endTokenId",type:"uint256"},{indexed:!1,internalType:"string",name:"baseURI",type:"string"}],name:"TokensLazyMinted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256[]",name:"ids",type:"uint256[]"},{indexed:!1,internalType:"uint256[]",name:"values",type:"uint256[]"}],name:"TransferBatch",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"id",type:"uint256"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"TransferSingle",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"string",name:"value",type:"string"},{indexed:!0,internalType:"uint256",name:"id",type:"uint256"}],name:"URI",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"tokenId",type:"uint256"},{indexed:!0,internalType:"address",name:"wallet",type:"address"},{indexed:!1,internalType:"uint256",name:"count",type:"uint256"}],name:"WalletClaimCountUpdated",type:"event"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"uint256",name:"id",type:"uint256"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address[]",name:"accounts",type:"address[]"},{internalType:"uint256[]",name:"ids",type:"uint256[]"}],name:"balanceOfBatch",outputs:[{internalType:"uint256[]",name:"",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"receiver",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"quantity",type:"uint256"},{internalType:"address",name:"currency",type:"address"},{internalType:"uint256",name:"pricePerToken",type:"uint256"},{internalType:"bytes32[]",name:"proofs",type:"bytes32[]"},{internalType:"uint256",name:"proofMaxQuantityPerTransaction",type:"uint256"}],name:"claim",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"address",name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"string",name:"baseURIForTokens",type:"string"}],name:"lazyMint",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256[]",name:"ids",type:"uint256[]"},{internalType:"uint256[]",name:"amounts",type:"uint256[]"},{internalType:"bytes",name:"data",type:"bytes"}],name:"safeBatchTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"id",type:"uint256"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"bytes",name:"data",type:"bytes"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"bool",name:"approved",type:"bool"}],name:"setApprovalForAll",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"},{components:[{internalType:"uint256",name:"startTimestamp",type:"uint256"},{internalType:"uint256",name:"maxClaimableSupply",type:"uint256"},{internalType:"uint256",name:"supplyClaimed",type:"uint256"},{internalType:"uint256",name:"quantityLimitPerTransaction",type:"uint256"},{internalType:"uint256",name:"waitTimeInSecondsBetweenClaims",type:"uint256"},{internalType:"bytes32",name:"merkleRoot",type:"bytes32"},{internalType:"uint256",name:"pricePerToken",type:"uint256"},{internalType:"address",name:"currency",type:"address"}],internalType:"struct IDropClaimCondition_V2.ClaimCondition[]",name:"phases",type:"tuple[]"},{internalType:"bool",name:"resetClaimEligibility",type:"bool"}],name:"setClaimConditions",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"}],pb=[{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"},{components:[{internalType:"uint256",name:"startTimestamp",type:"uint256"},{internalType:"uint256",name:"maxClaimableSupply",type:"uint256"},{internalType:"uint256",name:"supplyClaimed",type:"uint256"},{internalType:"uint256",name:"quantityLimitPerWallet",type:"uint256"},{internalType:"bytes32",name:"merkleRoot",type:"bytes32"},{internalType:"uint256",name:"pricePerToken",type:"uint256"},{internalType:"address",name:"currency",type:"address"},{internalType:"string",name:"metadata",type:"string"}],indexed:!1,internalType:"struct IClaimCondition.ClaimCondition",name:"condition",type:"tuple"},{indexed:!1,internalType:"bool",name:"resetEligibility",type:"bool"}],name:"ClaimConditionUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"claimer",type:"address"},{indexed:!0,internalType:"address",name:"receiver",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"quantityClaimed",type:"uint256"}],name:"TokensClaimed",type:"event"},{inputs:[{internalType:"address",name:"receiver",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"quantity",type:"uint256"},{internalType:"address",name:"currency",type:"address"},{internalType:"uint256",name:"pricePerToken",type:"uint256"},{components:[{internalType:"bytes32[]",name:"proof",type:"bytes32[]"},{internalType:"uint256",name:"quantityLimitPerWallet",type:"uint256"},{internalType:"uint256",name:"pricePerToken",type:"uint256"},{internalType:"address",name:"currency",type:"address"}],internalType:"struct IDropSinglePhase1155.AllowlistProof",name:"allowlistProof",type:"tuple"},{internalType:"bytes",name:"data",type:"bytes"}],name:"claim",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"},{components:[{internalType:"uint256",name:"startTimestamp",type:"uint256"},{internalType:"uint256",name:"maxClaimableSupply",type:"uint256"},{internalType:"uint256",name:"supplyClaimed",type:"uint256"},{internalType:"uint256",name:"quantityLimitPerWallet",type:"uint256"},{internalType:"bytes32",name:"merkleRoot",type:"bytes32"},{internalType:"uint256",name:"pricePerToken",type:"uint256"},{internalType:"address",name:"currency",type:"address"},{internalType:"string",name:"metadata",type:"string"}],internalType:"struct IClaimCondition.ClaimCondition",name:"phase",type:"tuple"},{internalType:"bool",name:"resetClaimEligibility",type:"bool"}],name:"setClaimConditions",outputs:[],stateMutability:"nonpayable",type:"function"}],fb=[{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"},{components:[{internalType:"uint256",name:"startTimestamp",type:"uint256"},{internalType:"uint256",name:"maxClaimableSupply",type:"uint256"},{internalType:"uint256",name:"supplyClaimed",type:"uint256"},{internalType:"uint256",name:"quantityLimitPerTransaction",type:"uint256"},{internalType:"uint256",name:"waitTimeInSecondsBetweenClaims",type:"uint256"},{internalType:"bytes32",name:"merkleRoot",type:"bytes32"},{internalType:"uint256",name:"pricePerToken",type:"uint256"},{internalType:"address",name:"currency",type:"address"}],indexed:!1,internalType:"struct IClaimCondition_V1.ClaimCondition",name:"condition",type:"tuple"},{indexed:!1,internalType:"bool",name:"resetEligibility",type:"bool"}],name:"ClaimConditionUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"claimer",type:"address"},{indexed:!0,internalType:"address",name:"receiver",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"quantityClaimed",type:"uint256"}],name:"TokensClaimed",type:"event"},{inputs:[{internalType:"address",name:"receiver",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"quantity",type:"uint256"},{internalType:"address",name:"currency",type:"address"},{internalType:"uint256",name:"pricePerToken",type:"uint256"},{components:[{internalType:"bytes32[]",name:"proof",type:"bytes32[]"},{internalType:"uint256",name:"maxQuantityInAllowlist",type:"uint256"}],internalType:"struct IDropSinglePhase1155_V1.AllowlistProof",name:"allowlistProof",type:"tuple"},{internalType:"bytes",name:"data",type:"bytes"}],name:"claim",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"},{components:[{internalType:"uint256",name:"startTimestamp",type:"uint256"},{internalType:"uint256",name:"maxClaimableSupply",type:"uint256"},{internalType:"uint256",name:"supplyClaimed",type:"uint256"},{internalType:"uint256",name:"quantityLimitPerTransaction",type:"uint256"},{internalType:"uint256",name:"waitTimeInSecondsBetweenClaims",type:"uint256"},{internalType:"bytes32",name:"merkleRoot",type:"bytes32"},{internalType:"uint256",name:"pricePerToken",type:"uint256"},{internalType:"address",name:"currency",type:"address"}],internalType:"struct IClaimCondition_V1.ClaimCondition",name:"phase",type:"tuple"},{internalType:"bool",name:"resetClaimEligibility",type:"bool"}],name:"setClaimConditions",outputs:[],stateMutability:"nonpayable",type:"function"}],hb=[{inputs:[],name:"nextTokenIdToMint",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"}],ap=[{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"mintedTo",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenIdMinted",type:"uint256"},{indexed:!1,internalType:"string",name:"uri",type:"string"},{indexed:!1,internalType:"uint256",name:"quantityMinted",type:"uint256"}],name:"TokensMinted",type:"event"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"string",name:"uri",type:"string"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"mintTo",outputs:[],stateMutability:"nonpayable",type:"function"}],yb=[{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"signer",type:"address"},{indexed:!0,internalType:"address",name:"mintedTo",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenIdMinted",type:"uint256"},{components:[{internalType:"address",name:"to",type:"address"},{internalType:"address",name:"royaltyRecipient",type:"address"},{internalType:"uint256",name:"royaltyBps",type:"uint256"},{internalType:"address",name:"primarySaleRecipient",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"string",name:"uri",type:"string"},{internalType:"uint256",name:"quantity",type:"uint256"},{internalType:"uint256",name:"pricePerToken",type:"uint256"},{internalType:"address",name:"currency",type:"address"},{internalType:"uint128",name:"validityStartTimestamp",type:"uint128"},{internalType:"uint128",name:"validityEndTimestamp",type:"uint128"},{internalType:"bytes32",name:"uid",type:"bytes32"}],indexed:!1,internalType:"struct ISignatureMintERC1155.MintRequest",name:"mintRequest",type:"tuple"}],name:"TokensMintedWithSignature",type:"event"},{inputs:[{components:[{internalType:"address",name:"to",type:"address"},{internalType:"address",name:"royaltyRecipient",type:"address"},{internalType:"uint256",name:"royaltyBps",type:"uint256"},{internalType:"address",name:"primarySaleRecipient",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"string",name:"uri",type:"string"},{internalType:"uint256",name:"quantity",type:"uint256"},{internalType:"uint256",name:"pricePerToken",type:"uint256"},{internalType:"address",name:"currency",type:"address"},{internalType:"uint128",name:"validityStartTimestamp",type:"uint128"},{internalType:"uint128",name:"validityEndTimestamp",type:"uint128"},{internalType:"bytes32",name:"uid",type:"bytes32"}],internalType:"struct ISignatureMintERC1155.MintRequest",name:"req",type:"tuple"},{internalType:"bytes",name:"signature",type:"bytes"}],name:"mintWithSignature",outputs:[{internalType:"address",name:"signer",type:"address"}],stateMutability:"payable",type:"function"},{inputs:[{components:[{internalType:"address",name:"to",type:"address"},{internalType:"address",name:"royaltyRecipient",type:"address"},{internalType:"uint256",name:"royaltyBps",type:"uint256"},{internalType:"address",name:"primarySaleRecipient",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"string",name:"uri",type:"string"},{internalType:"uint256",name:"quantity",type:"uint256"},{internalType:"uint256",name:"pricePerToken",type:"uint256"},{internalType:"address",name:"currency",type:"address"},{internalType:"uint128",name:"validityStartTimestamp",type:"uint128"},{internalType:"uint128",name:"validityEndTimestamp",type:"uint128"},{internalType:"bytes32",name:"uid",type:"bytes32"}],internalType:"struct ISignatureMintERC1155.MintRequest",name:"req",type:"tuple"},{internalType:"bytes",name:"signature",type:"bytes"}],name:"verify",outputs:[{internalType:"bool",name:"success",type:"bool"},{internalType:"address",name:"signer",type:"address"}],stateMutability:"view",type:"function"}],mb=[{inputs:[{internalType:"address",name:"forwarder",type:"address"}],name:"isTrustedForwarder",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"}],xb=[{anonymous:!1,inputs:[{indexed:!1,internalType:"string",name:"prevURI",type:"string"},{indexed:!1,internalType:"string",name:"newURI",type:"string"}],name:"AppURIUpdated",type:"event"},{inputs:[],name:"appURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"string",name:"_uri",type:"string"}],name:"setAppURI",outputs:[],stateMutability:"nonpayable",type:"function"}],bb=[{anonymous:!1,inputs:[{indexed:!1,internalType:"string",name:"prevURI",type:"string"},{indexed:!1,internalType:"string",name:"newURI",type:"string"}],name:"ContractURIUpdated",type:"event"},{inputs:[],name:"contractURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"string",name:"_uri",type:"string"}],name:"setContractURI",outputs:[],stateMutability:"nonpayable",type:"function"}],gb=[{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"listingId",type:"uint256"},{indexed:!0,internalType:"address",name:"buyer",type:"address"},{indexed:!1,internalType:"bool",name:"approved",type:"bool"}],name:"BuyerApprovedForListing",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"listingCreator",type:"address"},{indexed:!0,internalType:"uint256",name:"listingId",type:"uint256"}],name:"CancelledListing",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"listingId",type:"uint256"},{indexed:!0,internalType:"address",name:"currency",type:"address"},{indexed:!1,internalType:"uint256",name:"pricePerToken",type:"uint256"}],name:"CurrencyApprovedForListing",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"listingCreator",type:"address"},{indexed:!0,internalType:"uint256",name:"listingId",type:"uint256"},{indexed:!0,internalType:"address",name:"assetContract",type:"address"},{components:[{internalType:"uint256",name:"listingId",type:"uint256"},{internalType:"address",name:"listingCreator",type:"address"},{internalType:"address",name:"assetContract",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"quantity",type:"uint256"},{internalType:"address",name:"currency",type:"address"},{internalType:"uint256",name:"pricePerToken",type:"uint256"},{internalType:"uint128",name:"startTimestamp",type:"uint128"},{internalType:"uint128",name:"endTimestamp",type:"uint128"},{internalType:"bool",name:"reserved",type:"bool"},{internalType:"enum IDirectListings.TokenType",name:"tokenType",type:"uint8"},{internalType:"enum IDirectListings.Status",name:"status",type:"uint8"}],indexed:!1,internalType:"struct IDirectListings.Listing",name:"listing",type:"tuple"}],name:"NewListing",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"listingCreator",type:"address"},{indexed:!0,internalType:"uint256",name:"listingId",type:"uint256"},{indexed:!0,internalType:"address",name:"assetContract",type:"address"},{indexed:!1,internalType:"uint256",name:"tokenId",type:"uint256"},{indexed:!1,internalType:"address",name:"buyer",type:"address"},{indexed:!1,internalType:"uint256",name:"quantityBought",type:"uint256"},{indexed:!1,internalType:"uint256",name:"totalPricePaid",type:"uint256"}],name:"NewSale",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"listingCreator",type:"address"},{indexed:!0,internalType:"uint256",name:"listingId",type:"uint256"},{indexed:!0,internalType:"address",name:"assetContract",type:"address"},{components:[{internalType:"uint256",name:"listingId",type:"uint256"},{internalType:"address",name:"listingCreator",type:"address"},{internalType:"address",name:"assetContract",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"quantity",type:"uint256"},{internalType:"address",name:"currency",type:"address"},{internalType:"uint256",name:"pricePerToken",type:"uint256"},{internalType:"uint128",name:"startTimestamp",type:"uint128"},{internalType:"uint128",name:"endTimestamp",type:"uint128"},{internalType:"bool",name:"reserved",type:"bool"},{internalType:"enum IDirectListings.TokenType",name:"tokenType",type:"uint8"},{internalType:"enum IDirectListings.Status",name:"status",type:"uint8"}],indexed:!1,internalType:"struct IDirectListings.Listing",name:"listing",type:"tuple"}],name:"UpdatedListing",type:"event"},{inputs:[{internalType:"uint256",name:"_listingId",type:"uint256"},{internalType:"address",name:"_buyer",type:"address"},{internalType:"bool",name:"_toApprove",type:"bool"}],name:"approveBuyerForListing",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_listingId",type:"uint256"},{internalType:"address",name:"_currency",type:"address"},{internalType:"uint256",name:"_pricePerTokenInCurrency",type:"uint256"}],name:"approveCurrencyForListing",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_listingId",type:"uint256"},{internalType:"address",name:"_buyFor",type:"address"},{internalType:"uint256",name:"_quantity",type:"uint256"},{internalType:"address",name:"_currency",type:"address"},{internalType:"uint256",name:"_expectedTotalPrice",type:"uint256"}],name:"buyFromListing",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint256",name:"_listingId",type:"uint256"}],name:"cancelListing",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{internalType:"address",name:"assetContract",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"quantity",type:"uint256"},{internalType:"address",name:"currency",type:"address"},{internalType:"uint256",name:"pricePerToken",type:"uint256"},{internalType:"uint128",name:"startTimestamp",type:"uint128"},{internalType:"uint128",name:"endTimestamp",type:"uint128"},{internalType:"bool",name:"reserved",type:"bool"}],internalType:"struct IDirectListings.ListingParameters",name:"_params",type:"tuple"}],name:"createListing",outputs:[{internalType:"uint256",name:"listingId",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_startId",type:"uint256"},{internalType:"uint256",name:"_endId",type:"uint256"}],name:"getAllListings",outputs:[{components:[{internalType:"uint256",name:"listingId",type:"uint256"},{internalType:"address",name:"listingCreator",type:"address"},{internalType:"address",name:"assetContract",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"quantity",type:"uint256"},{internalType:"address",name:"currency",type:"address"},{internalType:"uint256",name:"pricePerToken",type:"uint256"},{internalType:"uint128",name:"startTimestamp",type:"uint128"},{internalType:"uint128",name:"endTimestamp",type:"uint128"},{internalType:"bool",name:"reserved",type:"bool"},{internalType:"enum IDirectListings.TokenType",name:"tokenType",type:"uint8"},{internalType:"enum IDirectListings.Status",name:"status",type:"uint8"}],internalType:"struct IDirectListings.Listing[]",name:"listings",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_startId",type:"uint256"},{internalType:"uint256",name:"_endId",type:"uint256"}],name:"getAllValidListings",outputs:[{components:[{internalType:"uint256",name:"listingId",type:"uint256"},{internalType:"address",name:"listingCreator",type:"address"},{internalType:"address",name:"assetContract",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"quantity",type:"uint256"},{internalType:"address",name:"currency",type:"address"},{internalType:"uint256",name:"pricePerToken",type:"uint256"},{internalType:"uint128",name:"startTimestamp",type:"uint128"},{internalType:"uint128",name:"endTimestamp",type:"uint128"},{internalType:"bool",name:"reserved",type:"bool"},{internalType:"enum IDirectListings.TokenType",name:"tokenType",type:"uint8"},{internalType:"enum IDirectListings.Status",name:"status",type:"uint8"}],internalType:"struct IDirectListings.Listing[]",name:"listings",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_listingId",type:"uint256"}],name:"getListing",outputs:[{components:[{internalType:"uint256",name:"listingId",type:"uint256"},{internalType:"address",name:"listingCreator",type:"address"},{internalType:"address",name:"assetContract",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"quantity",type:"uint256"},{internalType:"address",name:"currency",type:"address"},{internalType:"uint256",name:"pricePerToken",type:"uint256"},{internalType:"uint128",name:"startTimestamp",type:"uint128"},{internalType:"uint128",name:"endTimestamp",type:"uint128"},{internalType:"bool",name:"reserved",type:"bool"},{internalType:"enum IDirectListings.TokenType",name:"tokenType",type:"uint8"},{internalType:"enum IDirectListings.Status",name:"status",type:"uint8"}],internalType:"struct IDirectListings.Listing",name:"listing",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalListings",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_listingId",type:"uint256"},{components:[{internalType:"address",name:"assetContract",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"quantity",type:"uint256"},{internalType:"address",name:"currency",type:"address"},{internalType:"uint256",name:"pricePerToken",type:"uint256"},{internalType:"uint128",name:"startTimestamp",type:"uint128"},{internalType:"uint128",name:"endTimestamp",type:"uint128"},{internalType:"bool",name:"reserved",type:"bool"}],internalType:"struct IDirectListings.ListingParameters",name:"_params",type:"tuple"}],name:"updateListing",outputs:[],stateMutability:"nonpayable",type:"function"}],wb=[{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"auctionId",type:"uint256"},{indexed:!0,internalType:"address",name:"assetContract",type:"address"},{indexed:!0,internalType:"address",name:"closer",type:"address"},{indexed:!1,internalType:"uint256",name:"tokenId",type:"uint256"},{indexed:!1,internalType:"address",name:"auctionCreator",type:"address"},{indexed:!1,internalType:"address",name:"winningBidder",type:"address"}],name:"AuctionClosed",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"auctionCreator",type:"address"},{indexed:!0,internalType:"uint256",name:"auctionId",type:"uint256"}],name:"CancelledAuction",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"auctionCreator",type:"address"},{indexed:!0,internalType:"uint256",name:"auctionId",type:"uint256"},{indexed:!0,internalType:"address",name:"assetContract",type:"address"},{components:[{internalType:"uint256",name:"auctionId",type:"uint256"},{internalType:"address",name:"auctionCreator",type:"address"},{internalType:"address",name:"assetContract",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"quantity",type:"uint256"},{internalType:"address",name:"currency",type:"address"},{internalType:"uint256",name:"minimumBidAmount",type:"uint256"},{internalType:"uint256",name:"buyoutBidAmount",type:"uint256"},{internalType:"uint64",name:"timeBufferInSeconds",type:"uint64"},{internalType:"uint64",name:"bidBufferBps",type:"uint64"},{internalType:"uint64",name:"startTimestamp",type:"uint64"},{internalType:"uint64",name:"endTimestamp",type:"uint64"},{internalType:"enum IEnglishAuctions.TokenType",name:"tokenType",type:"uint8"},{internalType:"enum IEnglishAuctions.Status",name:"status",type:"uint8"}],indexed:!1,internalType:"struct IEnglishAuctions.Auction",name:"auction",type:"tuple"}],name:"NewAuction",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"auctionId",type:"uint256"},{indexed:!0,internalType:"address",name:"bidder",type:"address"},{indexed:!0,internalType:"address",name:"assetContract",type:"address"},{indexed:!1,internalType:"uint256",name:"bidAmount",type:"uint256"},{components:[{internalType:"uint256",name:"auctionId",type:"uint256"},{internalType:"address",name:"auctionCreator",type:"address"},{internalType:"address",name:"assetContract",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"quantity",type:"uint256"},{internalType:"address",name:"currency",type:"address"},{internalType:"uint256",name:"minimumBidAmount",type:"uint256"},{internalType:"uint256",name:"buyoutBidAmount",type:"uint256"},{internalType:"uint64",name:"timeBufferInSeconds",type:"uint64"},{internalType:"uint64",name:"bidBufferBps",type:"uint64"},{internalType:"uint64",name:"startTimestamp",type:"uint64"},{internalType:"uint64",name:"endTimestamp",type:"uint64"},{internalType:"enum IEnglishAuctions.TokenType",name:"tokenType",type:"uint8"},{internalType:"enum IEnglishAuctions.Status",name:"status",type:"uint8"}],indexed:!1,internalType:"struct IEnglishAuctions.Auction",name:"auction",type:"tuple"}],name:"NewBid",type:"event"},{inputs:[{internalType:"uint256",name:"_auctionId",type:"uint256"},{internalType:"uint256",name:"_bidAmount",type:"uint256"}],name:"bidInAuction",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint256",name:"_auctionId",type:"uint256"}],name:"cancelAuction",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_auctionId",type:"uint256"}],name:"collectAuctionPayout",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_auctionId",type:"uint256"}],name:"collectAuctionTokens",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{internalType:"address",name:"assetContract",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"quantity",type:"uint256"},{internalType:"address",name:"currency",type:"address"},{internalType:"uint256",name:"minimumBidAmount",type:"uint256"},{internalType:"uint256",name:"buyoutBidAmount",type:"uint256"},{internalType:"uint64",name:"timeBufferInSeconds",type:"uint64"},{internalType:"uint64",name:"bidBufferBps",type:"uint64"},{internalType:"uint64",name:"startTimestamp",type:"uint64"},{internalType:"uint64",name:"endTimestamp",type:"uint64"}],internalType:"struct IEnglishAuctions.AuctionParameters",name:"_params",type:"tuple"}],name:"createAuction",outputs:[{internalType:"uint256",name:"auctionId",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_startId",type:"uint256"},{internalType:"uint256",name:"_endId",type:"uint256"}],name:"getAllAuctions",outputs:[{components:[{internalType:"uint256",name:"auctionId",type:"uint256"},{internalType:"address",name:"auctionCreator",type:"address"},{internalType:"address",name:"assetContract",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"quantity",type:"uint256"},{internalType:"address",name:"currency",type:"address"},{internalType:"uint256",name:"minimumBidAmount",type:"uint256"},{internalType:"uint256",name:"buyoutBidAmount",type:"uint256"},{internalType:"uint64",name:"timeBufferInSeconds",type:"uint64"},{internalType:"uint64",name:"bidBufferBps",type:"uint64"},{internalType:"uint64",name:"startTimestamp",type:"uint64"},{internalType:"uint64",name:"endTimestamp",type:"uint64"},{internalType:"enum IEnglishAuctions.TokenType",name:"tokenType",type:"uint8"},{internalType:"enum IEnglishAuctions.Status",name:"status",type:"uint8"}],internalType:"struct IEnglishAuctions.Auction[]",name:"auctions",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_startId",type:"uint256"},{internalType:"uint256",name:"_endId",type:"uint256"}],name:"getAllValidAuctions",outputs:[{components:[{internalType:"uint256",name:"auctionId",type:"uint256"},{internalType:"address",name:"auctionCreator",type:"address"},{internalType:"address",name:"assetContract",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"quantity",type:"uint256"},{internalType:"address",name:"currency",type:"address"},{internalType:"uint256",name:"minimumBidAmount",type:"uint256"},{internalType:"uint256",name:"buyoutBidAmount",type:"uint256"},{internalType:"uint64",name:"timeBufferInSeconds",type:"uint64"},{internalType:"uint64",name:"bidBufferBps",type:"uint64"},{internalType:"uint64",name:"startTimestamp",type:"uint64"},{internalType:"uint64",name:"endTimestamp",type:"uint64"},{internalType:"enum IEnglishAuctions.TokenType",name:"tokenType",type:"uint8"},{internalType:"enum IEnglishAuctions.Status",name:"status",type:"uint8"}],internalType:"struct IEnglishAuctions.Auction[]",name:"auctions",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_auctionId",type:"uint256"}],name:"getAuction",outputs:[{components:[{internalType:"uint256",name:"auctionId",type:"uint256"},{internalType:"address",name:"auctionCreator",type:"address"},{internalType:"address",name:"assetContract",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"quantity",type:"uint256"},{internalType:"address",name:"currency",type:"address"},{internalType:"uint256",name:"minimumBidAmount",type:"uint256"},{internalType:"uint256",name:"buyoutBidAmount",type:"uint256"},{internalType:"uint64",name:"timeBufferInSeconds",type:"uint64"},{internalType:"uint64",name:"bidBufferBps",type:"uint64"},{internalType:"uint64",name:"startTimestamp",type:"uint64"},{internalType:"uint64",name:"endTimestamp",type:"uint64"},{internalType:"enum IEnglishAuctions.TokenType",name:"tokenType",type:"uint8"},{internalType:"enum IEnglishAuctions.Status",name:"status",type:"uint8"}],internalType:"struct IEnglishAuctions.Auction",name:"auction",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_auctionId",type:"uint256"}],name:"getWinningBid",outputs:[{internalType:"address",name:"bidder",type:"address"},{internalType:"address",name:"currency",type:"address"},{internalType:"uint256",name:"bidAmount",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_auctionId",type:"uint256"}],name:"isAuctionExpired",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_auctionId",type:"uint256"},{internalType:"uint256",name:"_bidAmount",type:"uint256"}],name:"isNewWinningBid",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"}],vb=[{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"offeror",type:"address"},{indexed:!0,internalType:"uint256",name:"offerId",type:"uint256"},{indexed:!0,internalType:"address",name:"assetContract",type:"address"},{indexed:!1,internalType:"uint256",name:"tokenId",type:"uint256"},{indexed:!1,internalType:"address",name:"seller",type:"address"},{indexed:!1,internalType:"uint256",name:"quantityBought",type:"uint256"},{indexed:!1,internalType:"uint256",name:"totalPricePaid",type:"uint256"}],name:"AcceptedOffer",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"offeror",type:"address"},{indexed:!0,internalType:"uint256",name:"offerId",type:"uint256"}],name:"CancelledOffer",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"offeror",type:"address"},{indexed:!0,internalType:"uint256",name:"offerId",type:"uint256"},{indexed:!0,internalType:"address",name:"assetContract",type:"address"},{components:[{internalType:"uint256",name:"offerId",type:"uint256"},{internalType:"address",name:"offeror",type:"address"},{internalType:"address",name:"assetContract",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"quantity",type:"uint256"},{internalType:"address",name:"currency",type:"address"},{internalType:"uint256",name:"totalPrice",type:"uint256"},{internalType:"uint256",name:"expirationTimestamp",type:"uint256"},{internalType:"enum IOffers.TokenType",name:"tokenType",type:"uint8"},{internalType:"enum IOffers.Status",name:"status",type:"uint8"}],indexed:!1,internalType:"struct IOffers.Offer",name:"offer",type:"tuple"}],name:"NewOffer",type:"event"},{inputs:[{internalType:"uint256",name:"_offerId",type:"uint256"}],name:"acceptOffer",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_offerId",type:"uint256"}],name:"cancelOffer",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_startId",type:"uint256"},{internalType:"uint256",name:"_endId",type:"uint256"}],name:"getAllOffers",outputs:[{components:[{internalType:"uint256",name:"offerId",type:"uint256"},{internalType:"address",name:"offeror",type:"address"},{internalType:"address",name:"assetContract",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"quantity",type:"uint256"},{internalType:"address",name:"currency",type:"address"},{internalType:"uint256",name:"totalPrice",type:"uint256"},{internalType:"uint256",name:"expirationTimestamp",type:"uint256"},{internalType:"enum IOffers.TokenType",name:"tokenType",type:"uint8"},{internalType:"enum IOffers.Status",name:"status",type:"uint8"}],internalType:"struct IOffers.Offer[]",name:"offers",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_startId",type:"uint256"},{internalType:"uint256",name:"_endId",type:"uint256"}],name:"getAllValidOffers",outputs:[{components:[{internalType:"uint256",name:"offerId",type:"uint256"},{internalType:"address",name:"offeror",type:"address"},{internalType:"address",name:"assetContract",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"quantity",type:"uint256"},{internalType:"address",name:"currency",type:"address"},{internalType:"uint256",name:"totalPrice",type:"uint256"},{internalType:"uint256",name:"expirationTimestamp",type:"uint256"},{internalType:"enum IOffers.TokenType",name:"tokenType",type:"uint8"},{internalType:"enum IOffers.Status",name:"status",type:"uint8"}],internalType:"struct IOffers.Offer[]",name:"offers",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_offerId",type:"uint256"}],name:"getOffer",outputs:[{components:[{internalType:"uint256",name:"offerId",type:"uint256"},{internalType:"address",name:"offeror",type:"address"},{internalType:"address",name:"assetContract",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"quantity",type:"uint256"},{internalType:"address",name:"currency",type:"address"},{internalType:"uint256",name:"totalPrice",type:"uint256"},{internalType:"uint256",name:"expirationTimestamp",type:"uint256"},{internalType:"enum IOffers.TokenType",name:"tokenType",type:"uint8"},{internalType:"enum IOffers.Status",name:"status",type:"uint8"}],internalType:"struct IOffers.Offer",name:"offer",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[{components:[{internalType:"address",name:"assetContract",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"quantity",type:"uint256"},{internalType:"address",name:"currency",type:"address"},{internalType:"uint256",name:"totalPrice",type:"uint256"},{internalType:"uint256",name:"expirationTimestamp",type:"uint256"}],internalType:"struct IOffers.OfferParams",name:"_params",type:"tuple"}],name:"makeOffer",outputs:[{internalType:"uint256",name:"offerId",type:"uint256"}],stateMutability:"nonpayable",type:"function"}],Tb=[{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"packId",type:"uint256"},{indexed:!1,internalType:"address",name:"recipient",type:"address"},{indexed:!1,internalType:"uint256",name:"totalPacksCreated",type:"uint256"}],name:"PackCreated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"opener",type:"address"},{indexed:!0,internalType:"uint256",name:"packId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"amountToOpen",type:"uint256"},{indexed:!1,internalType:"uint256",name:"requestId",type:"uint256"}],name:"PackOpenRequested",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"packId",type:"uint256"},{indexed:!0,internalType:"address",name:"opener",type:"address"},{indexed:!1,internalType:"uint256",name:"numOfPacksOpened",type:"uint256"},{components:[{internalType:"address",name:"assetContract",type:"address"},{internalType:"enum ITokenBundle.TokenType",name:"tokenType",type:"uint8"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"totalAmount",type:"uint256"}],indexed:!1,internalType:"struct ITokenBundle.Token[]",name:"rewardUnitsDistributed",type:"tuple[]"}],name:"PackOpened",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"packId",type:"uint256"},{indexed:!0,internalType:"uint256",name:"requestId",type:"uint256"}],name:"PackRandomnessFulfilled",type:"event"},{inputs:[{internalType:"address",name:"_opener",type:"address"}],name:"canClaimRewards",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"claimRewards",outputs:[{components:[{internalType:"address",name:"assetContract",type:"address"},{internalType:"enum ITokenBundle.TokenType",name:"tokenType",type:"uint8"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"totalAmount",type:"uint256"}],internalType:"struct ITokenBundle.Token[]",name:"rewardUnits",type:"tuple[]"}],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{internalType:"address",name:"assetContract",type:"address"},{internalType:"enum ITokenBundle.TokenType",name:"tokenType",type:"uint8"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"totalAmount",type:"uint256"}],internalType:"struct ITokenBundle.Token[]",name:"contents",type:"tuple[]"},{internalType:"uint256[]",name:"numOfRewardUnits",type:"uint256[]"},{internalType:"string",name:"packUri",type:"string"},{internalType:"uint128",name:"openStartTimestamp",type:"uint128"},{internalType:"uint128",name:"amountDistributedPerOpen",type:"uint128"},{internalType:"address",name:"recipient",type:"address"}],name:"createPack",outputs:[{internalType:"uint256",name:"packId",type:"uint256"},{internalType:"uint256",name:"packTotalSupply",type:"uint256"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint256",name:"packId",type:"uint256"},{internalType:"uint256",name:"amountToOpen",type:"uint256"}],name:"openPack",outputs:[{internalType:"uint256",name:"requestId",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_packId",type:"uint256"},{internalType:"uint256",name:"_amountToOpen",type:"uint256"},{internalType:"uint32",name:"_callBackGasLimit",type:"uint32"}],name:"openPackAndClaimRewards",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"nonpayable",type:"function"}],Ab=[{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"previousAdminRole",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"newAdminRole",type:"bytes32"}],name:"RoleAdminChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleGranted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleRevoked",type:"event"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleAdmin",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"grantRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"hasRole",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"renounceRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"revokeRole",outputs:[],stateMutability:"nonpayable",type:"function"}],Cb=[{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"previousAdminRole",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"newAdminRole",type:"bytes32"}],name:"RoleAdminChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleGranted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleRevoked",type:"event"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleAdmin",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"uint256",name:"index",type:"uint256"}],name:"getRoleMember",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleMemberCount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"grantRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"hasRole",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"renounceRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"revokeRole",outputs:[],stateMutability:"nonpayable",type:"function"}],Eb=[{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"platformFeeRecipient",type:"address"},{indexed:!1,internalType:"uint256",name:"platformFeeBps",type:"uint256"}],name:"PlatformFeeInfoUpdated",type:"event"},{inputs:[],name:"getPlatformFeeInfo",outputs:[{internalType:"address",name:"",type:"address"},{internalType:"uint16",name:"",type:"uint16"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_platformFeeRecipient",type:"address"},{internalType:"uint256",name:"_platformFeeBps",type:"uint256"}],name:"setPlatformFeeInfo",outputs:[],stateMutability:"nonpayable",type:"function"}],_b=[{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"recipient",type:"address"}],name:"PrimarySaleRecipientUpdated",type:"event"},{inputs:[],name:"primarySaleRecipient",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_saleRecipient",type:"address"}],name:"setPrimarySaleRecipient",outputs:[],stateMutability:"nonpayable",type:"function"}],kb=[{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes4",name:"functionSelector",type:"bytes4"},{indexed:!0,internalType:"address",name:"pluginAddress",type:"address"}],name:"PluginAdded",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes4",name:"functionSelector",type:"bytes4"},{indexed:!0,internalType:"address",name:"pluginAddress",type:"address"}],name:"PluginRemoved",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes4",name:"functionSelector",type:"bytes4"},{indexed:!0,internalType:"string",name:"functionSignature",type:"string"},{indexed:!0,internalType:"address",name:"pluginAddress",type:"address"}],name:"PluginSet",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes4",name:"functionSelector",type:"bytes4"},{indexed:!0,internalType:"address",name:"oldPluginAddress",type:"address"},{indexed:!0,internalType:"address",name:"newPluginAddress",type:"address"}],name:"PluginUpdated",type:"event"},{inputs:[{components:[{internalType:"bytes4",name:"functionSelector",type:"bytes4"},{internalType:"string",name:"functionSignature",type:"string"},{internalType:"address",name:"pluginAddress",type:"address"}],internalType:"struct IPluginMap.Plugin",name:"plugin",type:"tuple"}],name:"addPlugin",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"pluginAddress",type:"address"}],name:"getAllFunctionsOfPlugin",outputs:[{internalType:"bytes4[]",name:"",type:"bytes4[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"getAllPlugins",outputs:[{components:[{internalType:"bytes4",name:"functionSelector",type:"bytes4"},{internalType:"string",name:"functionSignature",type:"string"},{internalType:"address",name:"pluginAddress",type:"address"}],internalType:"struct IPluginMap.Plugin[]",name:"",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes4",name:"functionSelector",type:"bytes4"}],name:"getPluginForFunction",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes4",name:"functionSelector",type:"bytes4"}],name:"removePlugin",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{internalType:"bytes4",name:"functionSelector",type:"bytes4"},{internalType:"string",name:"functionSignature",type:"string"},{internalType:"address",name:"pluginAddress",type:"address"}],internalType:"struct IPluginMap.Plugin",name:"plugin",type:"tuple"}],name:"updatePlugin",outputs:[],stateMutability:"nonpayable",type:"function"}],Ib=[{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"newRoyaltyRecipient",type:"address"},{indexed:!1,internalType:"uint256",name:"newRoyaltyBps",type:"uint256"}],name:"DefaultRoyalty",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"},{indexed:!0,internalType:"address",name:"royaltyRecipient",type:"address"},{indexed:!1,internalType:"uint256",name:"royaltyBps",type:"uint256"}],name:"RoyaltyForToken",type:"event"},{inputs:[],name:"getDefaultRoyaltyInfo",outputs:[{internalType:"address",name:"",type:"address"},{internalType:"uint16",name:"",type:"uint16"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getRoyaltyInfoForToken",outputs:[{internalType:"address",name:"",type:"address"},{internalType:"uint16",name:"",type:"uint16"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"salePrice",type:"uint256"}],name:"royaltyInfo",outputs:[{internalType:"address",name:"receiver",type:"address"},{internalType:"uint256",name:"royaltyAmount",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_royaltyRecipient",type:"address"},{internalType:"uint256",name:"_royaltyBps",type:"uint256"}],name:"setDefaultRoyaltyInfo",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"address",name:"recipient",type:"address"},{internalType:"uint256",name:"bps",type:"uint256"}],name:"setRoyaltyInfoForToken",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"}],Sb=[{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"prevOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnerUpdated",type:"event"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_newOwner",type:"address"}],name:"setOwner",outputs:[],stateMutability:"nonpayable",type:"function"}];var Xi={},Pb={get exports(){return Xi},set exports(r){Xi=r}};(function(r,e){var t=function(){function a(){this.fetch=!1,this.DOMException=globalThis.DOMException}return a.prototype=globalThis,new a}();(function(a){(function(i){var s={searchParams:"URLSearchParams"in a,iterable:"Symbol"in a&&"iterator"in Symbol,blob:"FileReader"in a&&"Blob"in a&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in a,arrayBuffer:"ArrayBuffer"in a};function o(k){return k&&DataView.prototype.isPrototypeOf(k)}if(s.arrayBuffer)var l=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],c=ArrayBuffer.isView||function(k){return k&&l.indexOf(Object.prototype.toString.call(k))>-1};function u(k){if(typeof k!="string"&&(k=String(k)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(k))throw new TypeError("Invalid character in header field name");return k.toLowerCase()}function d(k){return typeof k!="string"&&(k=String(k)),k}function h(k){var U={next:function(){var Z=k.shift();return{done:Z===void 0,value:Z}}};return s.iterable&&(U[Symbol.iterator]=function(){return U}),U}function m(k){this.map={},k instanceof m?k.forEach(function(U,Z){this.append(Z,U)},this):Array.isArray(k)?k.forEach(function(U){this.append(U[0],U[1])},this):k&&Object.getOwnPropertyNames(k).forEach(function(U){this.append(U,k[U])},this)}m.prototype.append=function(k,U){k=u(k),U=d(U);var Z=this.map[k];this.map[k]=Z?Z+", "+U:U},m.prototype.delete=function(k){delete this.map[u(k)]},m.prototype.get=function(k){return k=u(k),this.has(k)?this.map[k]:null},m.prototype.has=function(k){return this.map.hasOwnProperty(u(k))},m.prototype.set=function(k,U){this.map[u(k)]=d(U)},m.prototype.forEach=function(k,U){for(var Z in this.map)this.map.hasOwnProperty(Z)&&k.call(U,this.map[Z],Z,this)},m.prototype.keys=function(){var k=[];return this.forEach(function(U,Z){k.push(Z)}),h(k)},m.prototype.values=function(){var k=[];return this.forEach(function(U){k.push(U)}),h(k)},m.prototype.entries=function(){var k=[];return this.forEach(function(U,Z){k.push([Z,U])}),h(k)},s.iterable&&(m.prototype[Symbol.iterator]=m.prototype.entries);function b(k){if(k.bodyUsed)return Promise.reject(new TypeError("Already read"));k.bodyUsed=!0}function x(k){return new Promise(function(U,Z){k.onload=function(){U(k.result)},k.onerror=function(){Z(k.error)}})}function f(k){var U=new FileReader,Z=x(U);return U.readAsArrayBuffer(k),Z}function w(k){var U=new FileReader,Z=x(U);return U.readAsText(k),Z}function A(k){for(var U=new Uint8Array(k),Z=new Array(U.length),J=0;J<U.length;J++)Z[J]=String.fromCharCode(U[J]);return Z.join("")}function T(k){if(k.slice)return k.slice(0);var U=new Uint8Array(k.byteLength);return U.set(new Uint8Array(k)),U.buffer}function E(){return this.bodyUsed=!1,this._initBody=function(k){this._bodyInit=k,k?typeof k=="string"?this._bodyText=k:s.blob&&Blob.prototype.isPrototypeOf(k)?this._bodyBlob=k:s.formData&&FormData.prototype.isPrototypeOf(k)?this._bodyFormData=k:s.searchParams&&URLSearchParams.prototype.isPrototypeOf(k)?this._bodyText=k.toString():s.arrayBuffer&&s.blob&&o(k)?(this._bodyArrayBuffer=T(k.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):s.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(k)||c(k))?this._bodyArrayBuffer=T(k):this._bodyText=k=Object.prototype.toString.call(k):this._bodyText="",this.headers.get("content-type")||(typeof k=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):s.searchParams&&URLSearchParams.prototype.isPrototypeOf(k)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},s.blob&&(this.blob=function(){var k=b(this);if(k)return k;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?b(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(f)}),this.text=function(){var k=b(this);if(k)return k;if(this._bodyBlob)return w(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(A(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},s.formData&&(this.formData=function(){return this.text().then(W)}),this.json=function(){return this.text().then(JSON.parse)},this}var I=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function D(k){var U=k.toUpperCase();return I.indexOf(U)>-1?U:k}function F(k,U){U=U||{};var Z=U.body;if(k instanceof F){if(k.bodyUsed)throw new TypeError("Already read");this.url=k.url,this.credentials=k.credentials,U.headers||(this.headers=new m(k.headers)),this.method=k.method,this.mode=k.mode,this.signal=k.signal,!Z&&k._bodyInit!=null&&(Z=k._bodyInit,k.bodyUsed=!0)}else this.url=String(k);if(this.credentials=U.credentials||this.credentials||"same-origin",(U.headers||!this.headers)&&(this.headers=new m(U.headers)),this.method=D(U.method||this.method||"GET"),this.mode=U.mode||this.mode||null,this.signal=U.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&Z)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(Z)}F.prototype.clone=function(){return new F(this,{body:this._bodyInit})};function W(k){var U=new FormData;return k.trim().split("&").forEach(function(Z){if(Z){var J=Z.split("="),ie=J.shift().replace(/\+/g," "),ne=J.join("=").replace(/\+/g," ");U.append(decodeURIComponent(ie),decodeURIComponent(ne))}}),U}function q(k){var U=new m,Z=k.replace(/\r?\n[\t ]+/g," ");return Z.split(/\r?\n/).forEach(function(J){var ie=J.split(":"),ne=ie.shift().trim();if(ne){var de=ie.join(":").trim();U.append(ne,de)}}),U}E.call(F.prototype);function R(k,U){U||(U={}),this.type="default",this.status=U.status===void 0?200:U.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in U?U.statusText:"OK",this.headers=new m(U.headers),this.url=U.url||"",this._initBody(k)}E.call(R.prototype),R.prototype.clone=function(){return new R(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new m(this.headers),url:this.url})},R.error=function(){var k=new R(null,{status:0,statusText:""});return k.type="error",k};var L=[301,302,303,307,308];R.redirect=function(k,U){if(L.indexOf(U)===-1)throw new RangeError("Invalid status code");return new R(null,{status:U,headers:{location:k}})},i.DOMException=a.DOMException;try{new i.DOMException}catch{i.DOMException=function(U,Z){this.message=U,this.name=Z;var J=Error(U);this.stack=J.stack},i.DOMException.prototype=Object.create(Error.prototype),i.DOMException.prototype.constructor=i.DOMException}function V(k,U){return new Promise(function(Z,J){var ie=new F(k,U);if(ie.signal&&ie.signal.aborted)return J(new i.DOMException("Aborted","AbortError"));var ne=new XMLHttpRequest;function de(){ne.abort()}ne.onload=function(){var ue={status:ne.status,statusText:ne.statusText,headers:q(ne.getAllResponseHeaders()||"")};ue.url="responseURL"in ne?ne.responseURL:ue.headers.get("X-Request-URL");var v="response"in ne?ne.response:ne.responseText;Z(new R(v,ue))},ne.onerror=function(){J(new TypeError("Network request failed"))},ne.ontimeout=function(){J(new TypeError("Network request failed"))},ne.onabort=function(){J(new i.DOMException("Aborted","AbortError"))},ne.open(ie.method,ie.url,!0),ie.credentials==="include"?ne.withCredentials=!0:ie.credentials==="omit"&&(ne.withCredentials=!1),"responseType"in ne&&s.blob&&(ne.responseType="blob"),ie.headers.forEach(function(ue,v){ne.setRequestHeader(v,ue)}),ie.signal&&(ie.signal.addEventListener("abort",de),ne.onreadystatechange=function(){ne.readyState===4&&ie.signal.removeEventListener("abort",de)}),ne.send(typeof ie._bodyInit>"u"?null:ie._bodyInit)})}return V.polyfill=!0,a.fetch||(a.fetch=V,a.Headers=m,a.Request=F,a.Response=R),i.Headers=m,i.Request=F,i.Response=R,i.fetch=V,Object.defineProperty(i,"__esModule",{value:!0}),i})({})})(t),t.fetch.ponyfill=!0,delete t.fetch.polyfill;var n=t;e=n.fetch,e.default=n.fetch,e.fetch=n.fetch,e.Headers=n.Headers,e.Request=n.Request,e.Response=n.Response,r.exports=e})(Pb,Xi);const na=$f(Xi);var wc={},Bb={get exports(){return wc},set exports(r){wc=r}};(function(r){var e=Object.prototype.hasOwnProperty,t="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(t=!1));function a(l,c,u){this.fn=l,this.context=c,this.once=u||!1}function i(l,c,u,d,h){if(typeof u!="function")throw new TypeError("The listener must be a function");var m=new a(u,d||l,h),b=t?t+c:c;return l._events[b]?l._events[b].fn?l._events[b]=[l._events[b],m]:l._events[b].push(m):(l._events[b]=m,l._eventsCount++),l}function s(l,c){--l._eventsCount===0?l._events=new n:delete l._events[c]}function o(){this._events=new n,this._eventsCount=0}o.prototype.eventNames=function(){var c=[],u,d;if(this._eventsCount===0)return c;for(d in u=this._events)e.call(u,d)&&c.push(t?d.slice(1):d);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(u)):c},o.prototype.listeners=function(c){var u=t?t+c:c,d=this._events[u];if(!d)return[];if(d.fn)return[d.fn];for(var h=0,m=d.length,b=new Array(m);h<m;h++)b[h]=d[h].fn;return b},o.prototype.listenerCount=function(c){var u=t?t+c:c,d=this._events[u];return d?d.fn?1:d.length:0},o.prototype.emit=function(c,u,d,h,m,b){var x=t?t+c:c;if(!this._events[x])return!1;var f=this._events[x],w=arguments.length,A,T;if(f.fn){switch(f.once&&this.removeListener(c,f.fn,void 0,!0),w){case 1:return f.fn.call(f.context),!0;case 2:return f.fn.call(f.context,u),!0;case 3:return f.fn.call(f.context,u,d),!0;case 4:return f.fn.call(f.context,u,d,h),!0;case 5:return f.fn.call(f.context,u,d,h,m),!0;case 6:return f.fn.call(f.context,u,d,h,m,b),!0}for(T=1,A=new Array(w-1);T<w;T++)A[T-1]=arguments[T];f.fn.apply(f.context,A)}else{var E=f.length,I;for(T=0;T<E;T++)switch(f[T].once&&this.removeListener(c,f[T].fn,void 0,!0),w){case 1:f[T].fn.call(f[T].context);break;case 2:f[T].fn.call(f[T].context,u);break;case 3:f[T].fn.call(f[T].context,u,d);break;case 4:f[T].fn.call(f[T].context,u,d,h);break;default:if(!A)for(I=1,A=new Array(w-1);I<w;I++)A[I-1]=arguments[I];f[T].fn.apply(f[T].context,A)}}return!0},o.prototype.on=function(c,u,d){return i(this,c,u,d,!1)},o.prototype.once=function(c,u,d){return i(this,c,u,d,!0)},o.prototype.removeListener=function(c,u,d,h){var m=t?t+c:c;if(!this._events[m])return this;if(!u)return s(this,m),this;var b=this._events[m];if(b.fn)b.fn===u&&(!h||b.once)&&(!d||b.context===d)&&s(this,m);else{for(var x=0,f=[],w=b.length;x<w;x++)(b[x].fn!==u||h&&!b[x].once||d&&b[x].context!==d)&&f.push(b[x]);f.length?this._events[m]=f.length===1?f[0]:f:s(this,m)}return this},o.prototype.removeAllListeners=function(c){var u;return c?(u=t?t+c:c,this._events[u]&&s(this,u)):(this._events=new n,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=t,o.EventEmitter=o,r.exports=o})(Bb);const es=wc,Rb=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{inputs:[{components:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"value",type:"uint256"},{internalType:"uint256",name:"gas",type:"uint256"},{internalType:"uint256",name:"nonce",type:"uint256"},{internalType:"bytes",name:"data",type:"bytes"}],internalType:"struct Forwarder.ForwardRequest",name:"req",type:"tuple"},{internalType:"bytes",name:"signature",type:"bytes"}],name:"execute",outputs:[{internalType:"bool",name:"",type:"bool"},{internalType:"bytes",name:"",type:"bytes"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"}],name:"getNonce",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{components:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"value",type:"uint256"},{internalType:"uint256",name:"gas",type:"uint256"},{internalType:"uint256",name:"nonce",type:"uint256"},{internalType:"bytes",name:"data",type:"bytes"}],internalType:"struct Forwarder.ForwardRequest",name:"req",type:"tuple"},{internalType:"bytes",name:"signature",type:"bytes"}],name:"verify",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"}];var Mb=typeof self=="object"?self.FormData:window.FormData;let Ai;const Db=new Uint8Array(16);function Fb(){if(!Ai&&(Ai=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Ai))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Ai(Db)}const st=[];for(let r=0;r<256;++r)st.push((r+256).toString(16).slice(1));function Nb(r,e=0){return(st[r[e+0]]+st[r[e+1]]+st[r[e+2]]+st[r[e+3]]+"-"+st[r[e+4]]+st[r[e+5]]+"-"+st[r[e+6]]+st[r[e+7]]+"-"+st[r[e+8]]+st[r[e+9]]+"-"+st[r[e+10]]+st[r[e+11]]+st[r[e+12]]+st[r[e+13]]+st[r[e+14]]+st[r[e+15]]).toLowerCase()}const Wb=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Cu={randomUUID:Wb};function Ob(r,e,t){if(Cu.randomUUID&&!e&&!r)return Cu.randomUUID();r=r||{};const n=r.random||(r.rng||Fb)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){t=t||0;for(let a=0;a<16;++a)e[t+a]=n[a];return e}return Nb(n)}function Lb(r,e){if(typeof r!="object"||r===null)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function Ub(r){var e=Lb(r,"string");return typeof e=="symbol"?e:String(e)}function Di(r,e,t){return e=Ub(e),e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}const rc={"ipfs://":["https://gateway.ipfscdn.io/ipfs/","https://cloudflare-ipfs.com/ipfs/","https://ipfs.io/ipfs/"]},Hb="https://upload.nftlabs.co",Eu="https://api.pinata.cloud/pinning/pinFileToIPFS";function zb(r){const e={...r,...rc};for(const t of Object.keys(rc))if(r&&r[t]){const n=r[t].map(a=>a.replace(/\/$/,"")+"/");e[t]=[...n,...rc[t]]}return e}function _u(){return typeof window<"u"}function ts(r){return globalThis.File&&r instanceof File}function Ur(r){return globalThis.Buffer&&r instanceof Buffer}function ns(r){return!!(r&&r.name&&r.data&&typeof r.name=="string"&&(typeof r.data=="string"||Ur(r.data)))}function li(r){return ts(r)||Ur(r)||ns(r)}function jb(r,e){if(ts(r)&&ts(e)){if(r.name===e.name&&r.lastModified===e.lastModified&&r.size===e.size)return!0}else{if(Ur(r)&&Ur(e))return r.equals(e);if(ns(r)&&ns(e)&&r.name===e.name){if(typeof r.data=="string"&&typeof e.data=="string")return r.data===e.data;if(Ur(r.data)&&Ur(e.data))return r.data.equals(e.data)}}return!1}function qb(r,e){for(const t of Object.keys(e))for(const n of e[t])if(r.startsWith(n))return r.replace(n,t);return r}function sl(r,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;const n=Object.keys(e).find(i=>r.startsWith(i)),a=n?e[n]:[];if(!(!n&&t>0||n&&t>=a.length))return n?r.replace(n,a[t]):r}function vc(r,e){return typeof r=="string"?qb(r,e):typeof r=="object"?!r||li(r)?r:Array.isArray(r)?r.map(t=>vc(t,e)):Object.fromEntries(Object.entries(r).map(t=>{let[n,a]=t;return[n,vc(a,e)]})):r}function rs(r,e){return typeof r=="string"?sl(r,e):typeof r=="object"?!r||li(r)?r:Array.isArray(r)?r.map(t=>rs(t,e)):Object.fromEntries(Object.entries(r).map(t=>{let[n,a]=t;return[n,rs(a,e)]})):r}function Tc(r){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];if(li(r))return e.push(r),e;if(typeof r=="object"){if(!r)return e;Array.isArray(r)?r.forEach(t=>Tc(t,e)):Object.keys(r).map(t=>Tc(r[t],e))}return e}function Ac(r,e){if(li(r)){if(e.length)return r=e.shift(),r;console.warn("Not enough URIs to replace all files in object.")}return typeof r=="object"?r&&(Array.isArray(r)?r.map(t=>Ac(t,e)):Object.fromEntries(Object.entries(r).map(t=>{let[n,a]=t;return[n,Ac(a,e)]}))):r}class Vb{async download(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;if(n>3)throw new Error("[FAILED_TO_DOWNLOAD_ERROR] Failed to download from URI - too many attempts failed.");const a=sl(e,t,n);if(!a)throw new Error("[FAILED_TO_DOWNLOAD_ERROR] Unable to download from URI - all gateway URLs failed to respond.");const i=await na(a);return i.status>=500||i.status===403||i.status===408?(console.warn(`Request to ${a} failed with status ${i.status} - ${i.statusText}`),this.download(e,t,n+1)):i}}class Gb{constructor(e){Di(this,"uploadWithGatewayUrl",void 0),this.uploadWithGatewayUrl=(e==null?void 0:e.uploadWithGatewayUrl)||!1}async uploadBatch(e,t){if(t!=null&&t.uploadWithoutDirectory&&e.length>1)throw new Error("[UPLOAD_WITHOUT_DIRECTORY_ERROR] Cannot upload more than one file or object without directory!");const n=new Mb,{form:a,fileNames:i}=this.buildFormData(n,e,t);return _u()?this.uploadBatchBrowser(a,i,t):this.uploadBatchNode(a,i,t)}async getUploadToken(){const e=await na(`${Hb}/grant`,{method:"GET",headers:{"X-APP-NAME":{}.CI?"Storage SDK CI":"Storage SDK"}});if(!e.ok)throw new Error("Failed to get upload token");return await e.text()}buildFormData(e,t,n){const a=new Map,i=[];for(let o=0;o<t.length;o++){const l=t[o];let c="",u=l;if(ts(l))if(n!=null&&n.rewriteFileNames){let h="";if(l.name){const m=l.name.lastIndexOf(".");m>-1&&(h=l.name.substring(m))}c=`${o+n.rewriteFileNames.fileStartNumber}${h}`}else c=`${l.name}`;else ns(l)?(u=l.data,n!=null&&n.rewriteFileNames?c=`${o+n.rewriteFileNames.fileStartNumber}`:c=`${l.name}`):n!=null&&n.rewriteFileNames?c=`${o+n.rewriteFileNames.fileStartNumber}`:c=`${o}`;const d=n!=null&&n.uploadWithoutDirectory?"files":`files/${c}`;if(a.has(c)){if(jb(a.get(c),l)){i.push(c);continue}throw new Error(`[DUPLICATE_FILE_NAME_ERROR] File name ${c} was passed for more than one different file.`)}a.set(c,l),i.push(c),_u()?e.append("file",new Blob([u]),d):e.append("file",u,{filepath:d})}const s={name:"Storage SDK",keyvalues:{...n==null?void 0:n.metadata}};return e.append("pinataMetadata",JSON.stringify(s)),n!=null&&n.uploadWithoutDirectory&&e.append("pinataOptions",JSON.stringify({wrapWithDirectory:!1})),{form:e,fileNames:i.map(o=>encodeURIComponent(o))}}async uploadBatchBrowser(e,t,n){const a=await this.getUploadToken();return new Promise((i,s)=>{const o=new XMLHttpRequest;let l=setTimeout(()=>{o.abort(),s(new Error("Request to upload timed out! No upload progress received in 30s"))},3e4);o.upload.addEventListener("loadstart",()=>{console.log(`[${Date.now()}] [IPFS] Started`)}),o.upload.addEventListener("progress",c=>{console.log(`[IPFS] Progress Event ${c.loaded}/${c.total}`),clearTimeout(l),c.loaded<c.total?l=setTimeout(()=>{o.abort(),s(new Error("Request to upload timed out! No upload progress received in 30s"))},3e4):console.log(`[${Date.now()}] [IPFS] Uploaded files. Waiting for response.`),c.lengthComputable&&(n!=null&&n.onProgress)&&(n==null||n.onProgress({progress:c.loaded,total:c.total}))}),o.addEventListener("load",()=>{if(console.log(`[${Date.now()}] [IPFS] Load`),clearTimeout(l),o.status>=200&&o.status<300){let c;try{c=JSON.parse(o.responseText)}catch{return s(new Error("Failed to parse JSON from upload response"))}const u=c.IpfsHash;if(!u)throw new Error("Failed to get IPFS hash from upload response");return n!=null&&n.uploadWithoutDirectory?i([`ipfs://${u}`]):i(t.map(d=>`ipfs://${u}/${d}`))}return s(new Error(`Upload failed with status ${o.status} - ${o.responseText}`))}),o.addEventListener("error",()=>(console.log("[IPFS] Load"),clearTimeout(l),o.readyState!==0&&o.readyState!==4||o.status===0?s(new Error("This looks like a network error, the endpoint might be blocked by an internet provider or a firewall.")):s(new Error("Unknown upload error occured")))),o.open("POST",Eu),o.setRequestHeader("Authorization",`Bearer ${a}`),o.send(e)})}async uploadBatchNode(e,t,n){const a=await this.getUploadToken();n!=null&&n.onProgress&&console.warn("The onProgress option is only supported in the browser");const i=await na(Eu,{method:"POST",headers:{Authorization:`Bearer ${a}`,...e.getHeaders()},body:e.getBuffer()}),s=await i.json();if(!i.ok)throw console.warn(s),new Error("Failed to upload files to IPFS");const o=s.IpfsHash;if(!o)throw new Error("Failed to upload files to IPFS");return n!=null&&n.uploadWithoutDirectory?[`ipfs://${o}`]:t.map(l=>`ipfs://${o}/${l}`)}}class Ta{constructor(e){Di(this,"uploader",void 0),Di(this,"downloader",void 0),Di(this,"gatewayUrls",void 0),this.uploader=(e==null?void 0:e.uploader)||new Gb,this.downloader=(e==null?void 0:e.downloader)||new Vb,this.gatewayUrls=zb(e==null?void 0:e.gatewayUrls)}resolveScheme(e){return sl(e,this.gatewayUrls)}async download(e){return this.downloader.download(e,this.gatewayUrls)}async downloadJSON(e){const n=await(await this.download(e)).json();return rs(n,this.gatewayUrls)}async upload(e,t){const[n]=await this.uploadBatch([e],t);return n}async uploadBatch(e,t){if(e=e.filter(i=>i!==void 0),!e.length)return[];const n=e.map(i=>li(i)||typeof i=="string").every(i=>!!i);let a=[];if(n)a=await this.uploader.uploadBatch(e,t);else{const i=(await this.uploadAndReplaceFilesWithHashes(e,t)).map(s=>typeof s=="string"?s:JSON.stringify(s));a=await this.uploader.uploadBatch(i,t)}return t!=null&&t.uploadWithGatewayUrl||this.uploader.uploadWithGatewayUrl?a.map(i=>this.resolveScheme(i)):a}async uploadAndReplaceFilesWithHashes(e,t){let n=e;n=vc(n,this.gatewayUrls);const a=Tc(n);if(a.length){const i=await this.uploader.uploadBatch(a,t);n=Ac(n,i)}return(t!=null&&t.uploadWithGatewayUrl||this.uploader.uploadWithGatewayUrl)&&(n=rs(n,this.gatewayUrls)),n}}const Kb=[{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes4",name:"functionSelector",type:"bytes4"},{indexed:!0,internalType:"address",name:"pluginAddress",type:"address"}],name:"PluginAdded",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes4",name:"functionSelector",type:"bytes4"},{indexed:!0,internalType:"address",name:"pluginAddress",type:"address"}],name:"PluginRemoved",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes4",name:"functionSelector",type:"bytes4"},{indexed:!0,internalType:"string",name:"functionSignature",type:"string"},{indexed:!0,internalType:"address",name:"pluginAddress",type:"address"}],name:"PluginSet",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes4",name:"functionSelector",type:"bytes4"},{indexed:!0,internalType:"address",name:"oldPluginAddress",type:"address"},{indexed:!0,internalType:"address",name:"newPluginAddress",type:"address"}],name:"PluginUpdated",type:"event"},{stateMutability:"payable",type:"fallback"},{inputs:[{internalType:"bytes4",name:"_selector",type:"bytes4"}],name:"_getPluginForFunction",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{components:[{internalType:"bytes4",name:"functionSelector",type:"bytes4"},{internalType:"string",name:"functionSignature",type:"string"},{internalType:"address",name:"pluginAddress",type:"address"}],internalType:"struct IPluginMap.Plugin",name:"_plugin",type:"tuple"}],name:"addPlugin",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_pluginAddress",type:"address"}],name:"getAllFunctionsOfPlugin",outputs:[{internalType:"bytes4[]",name:"registered",type:"bytes4[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"getAllPlugins",outputs:[{components:[{internalType:"bytes4",name:"functionSelector",type:"bytes4"},{internalType:"string",name:"functionSignature",type:"string"},{internalType:"address",name:"pluginAddress",type:"address"}],internalType:"struct IPluginMap.Plugin[]",name:"registered",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes4",name:"_selector",type:"bytes4"}],name:"getPluginForFunction",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes[]",name:"data",type:"bytes[]"}],name:"multicall",outputs:[{internalType:"bytes[]",name:"results",type:"bytes[]"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"pluginMap",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes4",name:"_selector",type:"bytes4"}],name:"removePlugin",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{components:[{internalType:"bytes4",name:"functionSelector",type:"bytes4"},{internalType:"string",name:"functionSignature",type:"string"},{internalType:"address",name:"pluginAddress",type:"address"}],internalType:"struct IPluginMap.Plugin",name:"_plugin",type:"tuple"}],name:"updatePlugin",outputs:[],stateMutability:"nonpayable",type:"function"},{stateMutability:"payable",type:"receive"}],ip=[{inputs:[],name:"contractType",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"pure",type:"function"},{inputs:[],name:"contractURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"contractVersion",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"string",name:"_uri",type:"string"}],name:"setContractURI",outputs:[],stateMutability:"nonpayable",type:"function"}],$b=[{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"}];var Fi={},ui={},Fo={},No={};No.byteLength=Jb;No.toByteArray=Xb;No.fromByteArray=ng;var nn=[],Ot=[],Zb=typeof Uint8Array<"u"?Uint8Array:Array,ac="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Rr=0,Yb=ac.length;Rr<Yb;++Rr)nn[Rr]=ac[Rr],Ot[ac.charCodeAt(Rr)]=Rr;Ot["-".charCodeAt(0)]=62;Ot["_".charCodeAt(0)]=63;function sp(r){var e=r.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=r.indexOf("=");t===-1&&(t=e);var n=t===e?0:4-t%4;return[t,n]}function Jb(r){var e=sp(r),t=e[0],n=e[1];return(t+n)*3/4-n}function Qb(r,e,t){return(e+t)*3/4-t}function Xb(r){var e,t=sp(r),n=t[0],a=t[1],i=new Zb(Qb(r,n,a)),s=0,o=a>0?n-4:n,l;for(l=0;l<o;l+=4)e=Ot[r.charCodeAt(l)]<<18|Ot[r.charCodeAt(l+1)]<<12|Ot[r.charCodeAt(l+2)]<<6|Ot[r.charCodeAt(l+3)],i[s++]=e>>16&255,i[s++]=e>>8&255,i[s++]=e&255;return a===2&&(e=Ot[r.charCodeAt(l)]<<2|Ot[r.charCodeAt(l+1)]>>4,i[s++]=e&255),a===1&&(e=Ot[r.charCodeAt(l)]<<10|Ot[r.charCodeAt(l+1)]<<4|Ot[r.charCodeAt(l+2)]>>2,i[s++]=e>>8&255,i[s++]=e&255),i}function eg(r){return nn[r>>18&63]+nn[r>>12&63]+nn[r>>6&63]+nn[r&63]}function tg(r,e,t){for(var n,a=[],i=e;i<t;i+=3)n=(r[i]<<16&16711680)+(r[i+1]<<8&65280)+(r[i+2]&255),a.push(eg(n));return a.join("")}function ng(r){for(var e,t=r.length,n=t%3,a=[],i=16383,s=0,o=t-n;s<o;s+=i)a.push(tg(r,s,s+i>o?o:s+i));return n===1?(e=r[t-1],a.push(nn[e>>2]+nn[e<<4&63]+"==")):n===2&&(e=(r[t-2]<<8)+r[t-1],a.push(nn[e>>10]+nn[e>>4&63]+nn[e<<2&63]+"=")),a.join("")}var ol={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */ol.read=function(r,e,t,n,a){var i,s,o=a*8-n-1,l=(1<<o)-1,c=l>>1,u=-7,d=t?a-1:0,h=t?-1:1,m=r[e+d];for(d+=h,i=m&(1<<-u)-1,m>>=-u,u+=o;u>0;i=i*256+r[e+d],d+=h,u-=8);for(s=i&(1<<-u)-1,i>>=-u,u+=n;u>0;s=s*256+r[e+d],d+=h,u-=8);if(i===0)i=1-c;else{if(i===l)return s?NaN:(m?-1:1)*(1/0);s=s+Math.pow(2,n),i=i-c}return(m?-1:1)*s*Math.pow(2,i-n)};ol.write=function(r,e,t,n,a,i){var s,o,l,c=i*8-a-1,u=(1<<c)-1,d=u>>1,h=a===23?Math.pow(2,-24)-Math.pow(2,-77):0,m=n?0:i-1,b=n?1:-1,x=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(o=isNaN(e)?1:0,s=u):(s=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-s))<1&&(s--,l*=2),s+d>=1?e+=h/l:e+=h*Math.pow(2,1-d),e*l>=2&&(s++,l/=2),s+d>=u?(o=0,s=u):s+d>=1?(o=(e*l-1)*Math.pow(2,a),s=s+d):(o=e*Math.pow(2,d-1)*Math.pow(2,a),s=0));a>=8;r[t+m]=o&255,m+=b,o/=256,a-=8);for(s=s<<a|o,c+=a;c>0;r[t+m]=s&255,m+=b,s/=256,c-=8);r[t+m-b]|=x*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(r){const e=No,t=ol,n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;r.Buffer=o,r.SlowBuffer=A,r.INSPECT_MAX_BYTES=50;const a=2147483647;r.kMaxLength=a,o.TYPED_ARRAY_SUPPORT=i(),!o.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function i(){try{const g=new Uint8Array(1),p={foo:function(){return 42}};return Object.setPrototypeOf(p,Uint8Array.prototype),Object.setPrototypeOf(g,p),g.foo()===42}catch{return!1}}Object.defineProperty(o.prototype,"parent",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.buffer}}),Object.defineProperty(o.prototype,"offset",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.byteOffset}});function s(g){if(g>a)throw new RangeError('The value "'+g+'" is invalid for option "size"');const p=new Uint8Array(g);return Object.setPrototypeOf(p,o.prototype),p}function o(g,p,y){if(typeof g=="number"){if(typeof p=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return d(g)}return l(g,p,y)}o.poolSize=8192;function l(g,p,y){if(typeof g=="string")return h(g,p);if(ArrayBuffer.isView(g))return b(g);if(g==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof g);if(xt(g,ArrayBuffer)||g&&xt(g.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(xt(g,SharedArrayBuffer)||g&&xt(g.buffer,SharedArrayBuffer)))return x(g,p,y);if(typeof g=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const C=g.valueOf&&g.valueOf();if(C!=null&&C!==g)return o.from(C,p,y);const M=f(g);if(M)return M;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof g[Symbol.toPrimitive]=="function")return o.from(g[Symbol.toPrimitive]("string"),p,y);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof g)}o.from=function(g,p,y){return l(g,p,y)},Object.setPrototypeOf(o.prototype,Uint8Array.prototype),Object.setPrototypeOf(o,Uint8Array);function c(g){if(typeof g!="number")throw new TypeError('"size" argument must be of type number');if(g<0)throw new RangeError('The value "'+g+'" is invalid for option "size"')}function u(g,p,y){return c(g),g<=0?s(g):p!==void 0?typeof y=="string"?s(g).fill(p,y):s(g).fill(p):s(g)}o.alloc=function(g,p,y){return u(g,p,y)};function d(g){return c(g),s(g<0?0:w(g)|0)}o.allocUnsafe=function(g){return d(g)},o.allocUnsafeSlow=function(g){return d(g)};function h(g,p){if((typeof p!="string"||p==="")&&(p="utf8"),!o.isEncoding(p))throw new TypeError("Unknown encoding: "+p);const y=T(g,p)|0;let C=s(y);const M=C.write(g,p);return M!==y&&(C=C.slice(0,M)),C}function m(g){const p=g.length<0?0:w(g.length)|0,y=s(p);for(let C=0;C<p;C+=1)y[C]=g[C]&255;return y}function b(g){if(xt(g,Uint8Array)){const p=new Uint8Array(g);return x(p.buffer,p.byteOffset,p.byteLength)}return m(g)}function x(g,p,y){if(p<0||g.byteLength<p)throw new RangeError('"offset" is outside of buffer bounds');if(g.byteLength<p+(y||0))throw new RangeError('"length" is outside of buffer bounds');let C;return p===void 0&&y===void 0?C=new Uint8Array(g):y===void 0?C=new Uint8Array(g,p):C=new Uint8Array(g,p,y),Object.setPrototypeOf(C,o.prototype),C}function f(g){if(o.isBuffer(g)){const p=w(g.length)|0,y=s(p);return y.length===0||g.copy(y,0,0,p),y}if(g.length!==void 0)return typeof g.length!="number"||Vt(g.length)?s(0):m(g);if(g.type==="Buffer"&&Array.isArray(g.data))return m(g.data)}function w(g){if(g>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return g|0}function A(g){return+g!=g&&(g=0),o.alloc(+g)}o.isBuffer=function(p){return p!=null&&p._isBuffer===!0&&p!==o.prototype},o.compare=function(p,y){if(xt(p,Uint8Array)&&(p=o.from(p,p.offset,p.byteLength)),xt(y,Uint8Array)&&(y=o.from(y,y.offset,y.byteLength)),!o.isBuffer(p)||!o.isBuffer(y))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(p===y)return 0;let C=p.length,M=y.length;for(let z=0,G=Math.min(C,M);z<G;++z)if(p[z]!==y[z]){C=p[z],M=y[z];break}return C<M?-1:M<C?1:0},o.isEncoding=function(p){switch(String(p).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(p,y){if(!Array.isArray(p))throw new TypeError('"list" argument must be an Array of Buffers');if(p.length===0)return o.alloc(0);let C;if(y===void 0)for(y=0,C=0;C<p.length;++C)y+=p[C].length;const M=o.allocUnsafe(y);let z=0;for(C=0;C<p.length;++C){let G=p[C];if(xt(G,Uint8Array))z+G.length>M.length?(o.isBuffer(G)||(G=o.from(G)),G.copy(M,z)):Uint8Array.prototype.set.call(M,G,z);else if(o.isBuffer(G))G.copy(M,z);else throw new TypeError('"list" argument must be an Array of Buffers');z+=G.length}return M};function T(g,p){if(o.isBuffer(g))return g.length;if(ArrayBuffer.isView(g)||xt(g,ArrayBuffer))return g.byteLength;if(typeof g!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof g);const y=g.length,C=arguments.length>2&&arguments[2]===!0;if(!C&&y===0)return 0;let M=!1;for(;;)switch(p){case"ascii":case"latin1":case"binary":return y;case"utf8":case"utf-8":return Dn(g).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return y*2;case"hex":return y>>>1;case"base64":return Fn(g).length;default:if(M)return C?-1:Dn(g).length;p=(""+p).toLowerCase(),M=!0}}o.byteLength=T;function E(g,p,y){let C=!1;if((p===void 0||p<0)&&(p=0),p>this.length||((y===void 0||y>this.length)&&(y=this.length),y<=0)||(y>>>=0,p>>>=0,y<=p))return"";for(g||(g="utf8");;)switch(g){case"hex":return de(this,p,y);case"utf8":case"utf-8":return U(this,p,y);case"ascii":return ie(this,p,y);case"latin1":case"binary":return ne(this,p,y);case"base64":return k(this,p,y);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ue(this,p,y);default:if(C)throw new TypeError("Unknown encoding: "+g);g=(g+"").toLowerCase(),C=!0}}o.prototype._isBuffer=!0;function I(g,p,y){const C=g[p];g[p]=g[y],g[y]=C}o.prototype.swap16=function(){const p=this.length;if(p%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let y=0;y<p;y+=2)I(this,y,y+1);return this},o.prototype.swap32=function(){const p=this.length;if(p%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let y=0;y<p;y+=4)I(this,y,y+3),I(this,y+1,y+2);return this},o.prototype.swap64=function(){const p=this.length;if(p%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let y=0;y<p;y+=8)I(this,y,y+7),I(this,y+1,y+6),I(this,y+2,y+5),I(this,y+3,y+4);return this},o.prototype.toString=function(){const p=this.length;return p===0?"":arguments.length===0?U(this,0,p):E.apply(this,arguments)},o.prototype.toLocaleString=o.prototype.toString,o.prototype.equals=function(p){if(!o.isBuffer(p))throw new TypeError("Argument must be a Buffer");return this===p?!0:o.compare(this,p)===0},o.prototype.inspect=function(){let p="";const y=r.INSPECT_MAX_BYTES;return p=this.toString("hex",0,y).replace(/(.{2})/g,"$1 ").trim(),this.length>y&&(p+=" ... "),"<Buffer "+p+">"},n&&(o.prototype[n]=o.prototype.inspect),o.prototype.compare=function(p,y,C,M,z){if(xt(p,Uint8Array)&&(p=o.from(p,p.offset,p.byteLength)),!o.isBuffer(p))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof p);if(y===void 0&&(y=0),C===void 0&&(C=p?p.length:0),M===void 0&&(M=0),z===void 0&&(z=this.length),y<0||C>p.length||M<0||z>this.length)throw new RangeError("out of range index");if(M>=z&&y>=C)return 0;if(M>=z)return-1;if(y>=C)return 1;if(y>>>=0,C>>>=0,M>>>=0,z>>>=0,this===p)return 0;let G=z-M,ve=C-y;const Ne=Math.min(G,ve),De=this.slice(M,z),Oe=p.slice(y,C);for(let Re=0;Re<Ne;++Re)if(De[Re]!==Oe[Re]){G=De[Re],ve=Oe[Re];break}return G<ve?-1:ve<G?1:0};function D(g,p,y,C,M){if(g.length===0)return-1;if(typeof y=="string"?(C=y,y=0):y>2147483647?y=2147483647:y<-2147483648&&(y=-2147483648),y=+y,Vt(y)&&(y=M?0:g.length-1),y<0&&(y=g.length+y),y>=g.length){if(M)return-1;y=g.length-1}else if(y<0)if(M)y=0;else return-1;if(typeof p=="string"&&(p=o.from(p,C)),o.isBuffer(p))return p.length===0?-1:F(g,p,y,C,M);if(typeof p=="number")return p=p&255,typeof Uint8Array.prototype.indexOf=="function"?M?Uint8Array.prototype.indexOf.call(g,p,y):Uint8Array.prototype.lastIndexOf.call(g,p,y):F(g,[p],y,C,M);throw new TypeError("val must be string, number or Buffer")}function F(g,p,y,C,M){let z=1,G=g.length,ve=p.length;if(C!==void 0&&(C=String(C).toLowerCase(),C==="ucs2"||C==="ucs-2"||C==="utf16le"||C==="utf-16le")){if(g.length<2||p.length<2)return-1;z=2,G/=2,ve/=2,y/=2}function Ne(Oe,Re){return z===1?Oe[Re]:Oe.readUInt16BE(Re*z)}let De;if(M){let Oe=-1;for(De=y;De<G;De++)if(Ne(g,De)===Ne(p,Oe===-1?0:De-Oe)){if(Oe===-1&&(Oe=De),De-Oe+1===ve)return Oe*z}else Oe!==-1&&(De-=De-Oe),Oe=-1}else for(y+ve>G&&(y=G-ve),De=y;De>=0;De--){let Oe=!0;for(let Re=0;Re<ve;Re++)if(Ne(g,De+Re)!==Ne(p,Re)){Oe=!1;break}if(Oe)return De}return-1}o.prototype.includes=function(p,y,C){return this.indexOf(p,y,C)!==-1},o.prototype.indexOf=function(p,y,C){return D(this,p,y,C,!0)},o.prototype.lastIndexOf=function(p,y,C){return D(this,p,y,C,!1)};function W(g,p,y,C){y=Number(y)||0;const M=g.length-y;C?(C=Number(C),C>M&&(C=M)):C=M;const z=p.length;C>z/2&&(C=z/2);let G;for(G=0;G<C;++G){const ve=parseInt(p.substr(G*2,2),16);if(Vt(ve))return G;g[y+G]=ve}return G}function q(g,p,y,C){return dt(Dn(p,g.length-y),g,y,C)}function R(g,p,y,C){return dt(tr(p),g,y,C)}function L(g,p,y,C){return dt(Fn(p),g,y,C)}function V(g,p,y,C){return dt(da(p,g.length-y),g,y,C)}o.prototype.write=function(p,y,C,M){if(y===void 0)M="utf8",C=this.length,y=0;else if(C===void 0&&typeof y=="string")M=y,C=this.length,y=0;else if(isFinite(y))y=y>>>0,isFinite(C)?(C=C>>>0,M===void 0&&(M="utf8")):(M=C,C=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const z=this.length-y;if((C===void 0||C>z)&&(C=z),p.length>0&&(C<0||y<0)||y>this.length)throw new RangeError("Attempt to write outside buffer bounds");M||(M="utf8");let G=!1;for(;;)switch(M){case"hex":return W(this,p,y,C);case"utf8":case"utf-8":return q(this,p,y,C);case"ascii":case"latin1":case"binary":return R(this,p,y,C);case"base64":return L(this,p,y,C);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return V(this,p,y,C);default:if(G)throw new TypeError("Unknown encoding: "+M);M=(""+M).toLowerCase(),G=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function k(g,p,y){return p===0&&y===g.length?e.fromByteArray(g):e.fromByteArray(g.slice(p,y))}function U(g,p,y){y=Math.min(g.length,y);const C=[];let M=p;for(;M<y;){const z=g[M];let G=null,ve=z>239?4:z>223?3:z>191?2:1;if(M+ve<=y){let Ne,De,Oe,Re;switch(ve){case 1:z<128&&(G=z);break;case 2:Ne=g[M+1],(Ne&192)===128&&(Re=(z&31)<<6|Ne&63,Re>127&&(G=Re));break;case 3:Ne=g[M+1],De=g[M+2],(Ne&192)===128&&(De&192)===128&&(Re=(z&15)<<12|(Ne&63)<<6|De&63,Re>2047&&(Re<55296||Re>57343)&&(G=Re));break;case 4:Ne=g[M+1],De=g[M+2],Oe=g[M+3],(Ne&192)===128&&(De&192)===128&&(Oe&192)===128&&(Re=(z&15)<<18|(Ne&63)<<12|(De&63)<<6|Oe&63,Re>65535&&Re<1114112&&(G=Re))}}G===null?(G=65533,ve=1):G>65535&&(G-=65536,C.push(G>>>10&1023|55296),G=56320|G&1023),C.push(G),M+=ve}return J(C)}const Z=4096;function J(g){const p=g.length;if(p<=Z)return String.fromCharCode.apply(String,g);let y="",C=0;for(;C<p;)y+=String.fromCharCode.apply(String,g.slice(C,C+=Z));return y}function ie(g,p,y){let C="";y=Math.min(g.length,y);for(let M=p;M<y;++M)C+=String.fromCharCode(g[M]&127);return C}function ne(g,p,y){let C="";y=Math.min(g.length,y);for(let M=p;M<y;++M)C+=String.fromCharCode(g[M]);return C}function de(g,p,y){const C=g.length;(!p||p<0)&&(p=0),(!y||y<0||y>C)&&(y=C);let M="";for(let z=p;z<y;++z)M+=Pt[g[z]];return M}function ue(g,p,y){const C=g.slice(p,y);let M="";for(let z=0;z<C.length-1;z+=2)M+=String.fromCharCode(C[z]+C[z+1]*256);return M}o.prototype.slice=function(p,y){const C=this.length;p=~~p,y=y===void 0?C:~~y,p<0?(p+=C,p<0&&(p=0)):p>C&&(p=C),y<0?(y+=C,y<0&&(y=0)):y>C&&(y=C),y<p&&(y=p);const M=this.subarray(p,y);return Object.setPrototypeOf(M,o.prototype),M};function v(g,p,y){if(g%1!==0||g<0)throw new RangeError("offset is not uint");if(g+p>y)throw new RangeError("Trying to access beyond buffer length")}o.prototype.readUintLE=o.prototype.readUIntLE=function(p,y,C){p=p>>>0,y=y>>>0,C||v(p,y,this.length);let M=this[p],z=1,G=0;for(;++G<y&&(z*=256);)M+=this[p+G]*z;return M},o.prototype.readUintBE=o.prototype.readUIntBE=function(p,y,C){p=p>>>0,y=y>>>0,C||v(p,y,this.length);let M=this[p+--y],z=1;for(;y>0&&(z*=256);)M+=this[p+--y]*z;return M},o.prototype.readUint8=o.prototype.readUInt8=function(p,y){return p=p>>>0,y||v(p,1,this.length),this[p]},o.prototype.readUint16LE=o.prototype.readUInt16LE=function(p,y){return p=p>>>0,y||v(p,2,this.length),this[p]|this[p+1]<<8},o.prototype.readUint16BE=o.prototype.readUInt16BE=function(p,y){return p=p>>>0,y||v(p,2,this.length),this[p]<<8|this[p+1]},o.prototype.readUint32LE=o.prototype.readUInt32LE=function(p,y){return p=p>>>0,y||v(p,4,this.length),(this[p]|this[p+1]<<8|this[p+2]<<16)+this[p+3]*16777216},o.prototype.readUint32BE=o.prototype.readUInt32BE=function(p,y){return p=p>>>0,y||v(p,4,this.length),this[p]*16777216+(this[p+1]<<16|this[p+2]<<8|this[p+3])},o.prototype.readBigUInt64LE=Gt(function(p){p=p>>>0,Xe(p,"offset");const y=this[p],C=this[p+7];(y===void 0||C===void 0)&&Ye(p,this.length-8);const M=y+this[++p]*2**8+this[++p]*2**16+this[++p]*2**24,z=this[++p]+this[++p]*2**8+this[++p]*2**16+C*2**24;return BigInt(M)+(BigInt(z)<<BigInt(32))}),o.prototype.readBigUInt64BE=Gt(function(p){p=p>>>0,Xe(p,"offset");const y=this[p],C=this[p+7];(y===void 0||C===void 0)&&Ye(p,this.length-8);const M=y*2**24+this[++p]*2**16+this[++p]*2**8+this[++p],z=this[++p]*2**24+this[++p]*2**16+this[++p]*2**8+C;return(BigInt(M)<<BigInt(32))+BigInt(z)}),o.prototype.readIntLE=function(p,y,C){p=p>>>0,y=y>>>0,C||v(p,y,this.length);let M=this[p],z=1,G=0;for(;++G<y&&(z*=256);)M+=this[p+G]*z;return z*=128,M>=z&&(M-=Math.pow(2,8*y)),M},o.prototype.readIntBE=function(p,y,C){p=p>>>0,y=y>>>0,C||v(p,y,this.length);let M=y,z=1,G=this[p+--M];for(;M>0&&(z*=256);)G+=this[p+--M]*z;return z*=128,G>=z&&(G-=Math.pow(2,8*y)),G},o.prototype.readInt8=function(p,y){return p=p>>>0,y||v(p,1,this.length),this[p]&128?(255-this[p]+1)*-1:this[p]},o.prototype.readInt16LE=function(p,y){p=p>>>0,y||v(p,2,this.length);const C=this[p]|this[p+1]<<8;return C&32768?C|4294901760:C},o.prototype.readInt16BE=function(p,y){p=p>>>0,y||v(p,2,this.length);const C=this[p+1]|this[p]<<8;return C&32768?C|4294901760:C},o.prototype.readInt32LE=function(p,y){return p=p>>>0,y||v(p,4,this.length),this[p]|this[p+1]<<8|this[p+2]<<16|this[p+3]<<24},o.prototype.readInt32BE=function(p,y){return p=p>>>0,y||v(p,4,this.length),this[p]<<24|this[p+1]<<16|this[p+2]<<8|this[p+3]},o.prototype.readBigInt64LE=Gt(function(p){p=p>>>0,Xe(p,"offset");const y=this[p],C=this[p+7];(y===void 0||C===void 0)&&Ye(p,this.length-8);const M=this[p+4]+this[p+5]*2**8+this[p+6]*2**16+(C<<24);return(BigInt(M)<<BigInt(32))+BigInt(y+this[++p]*2**8+this[++p]*2**16+this[++p]*2**24)}),o.prototype.readBigInt64BE=Gt(function(p){p=p>>>0,Xe(p,"offset");const y=this[p],C=this[p+7];(y===void 0||C===void 0)&&Ye(p,this.length-8);const M=(y<<24)+this[++p]*2**16+this[++p]*2**8+this[++p];return(BigInt(M)<<BigInt(32))+BigInt(this[++p]*2**24+this[++p]*2**16+this[++p]*2**8+C)}),o.prototype.readFloatLE=function(p,y){return p=p>>>0,y||v(p,4,this.length),t.read(this,p,!0,23,4)},o.prototype.readFloatBE=function(p,y){return p=p>>>0,y||v(p,4,this.length),t.read(this,p,!1,23,4)},o.prototype.readDoubleLE=function(p,y){return p=p>>>0,y||v(p,8,this.length),t.read(this,p,!0,52,8)},o.prototype.readDoubleBE=function(p,y){return p=p>>>0,y||v(p,8,this.length),t.read(this,p,!1,52,8)};function B(g,p,y,C,M,z){if(!o.isBuffer(g))throw new TypeError('"buffer" argument must be a Buffer instance');if(p>M||p<z)throw new RangeError('"value" argument is out of bounds');if(y+C>g.length)throw new RangeError("Index out of range")}o.prototype.writeUintLE=o.prototype.writeUIntLE=function(p,y,C,M){if(p=+p,y=y>>>0,C=C>>>0,!M){const ve=Math.pow(2,8*C)-1;B(this,p,y,C,ve,0)}let z=1,G=0;for(this[y]=p&255;++G<C&&(z*=256);)this[y+G]=p/z&255;return y+C},o.prototype.writeUintBE=o.prototype.writeUIntBE=function(p,y,C,M){if(p=+p,y=y>>>0,C=C>>>0,!M){const ve=Math.pow(2,8*C)-1;B(this,p,y,C,ve,0)}let z=C-1,G=1;for(this[y+z]=p&255;--z>=0&&(G*=256);)this[y+z]=p/G&255;return y+C},o.prototype.writeUint8=o.prototype.writeUInt8=function(p,y,C){return p=+p,y=y>>>0,C||B(this,p,y,1,255,0),this[y]=p&255,y+1},o.prototype.writeUint16LE=o.prototype.writeUInt16LE=function(p,y,C){return p=+p,y=y>>>0,C||B(this,p,y,2,65535,0),this[y]=p&255,this[y+1]=p>>>8,y+2},o.prototype.writeUint16BE=o.prototype.writeUInt16BE=function(p,y,C){return p=+p,y=y>>>0,C||B(this,p,y,2,65535,0),this[y]=p>>>8,this[y+1]=p&255,y+2},o.prototype.writeUint32LE=o.prototype.writeUInt32LE=function(p,y,C){return p=+p,y=y>>>0,C||B(this,p,y,4,4294967295,0),this[y+3]=p>>>24,this[y+2]=p>>>16,this[y+1]=p>>>8,this[y]=p&255,y+4},o.prototype.writeUint32BE=o.prototype.writeUInt32BE=function(p,y,C){return p=+p,y=y>>>0,C||B(this,p,y,4,4294967295,0),this[y]=p>>>24,this[y+1]=p>>>16,this[y+2]=p>>>8,this[y+3]=p&255,y+4};function N(g,p,y,C,M){St(p,C,M,g,y,7);let z=Number(p&BigInt(4294967295));g[y++]=z,z=z>>8,g[y++]=z,z=z>>8,g[y++]=z,z=z>>8,g[y++]=z;let G=Number(p>>BigInt(32)&BigInt(4294967295));return g[y++]=G,G=G>>8,g[y++]=G,G=G>>8,g[y++]=G,G=G>>8,g[y++]=G,y}function P(g,p,y,C,M){St(p,C,M,g,y,7);let z=Number(p&BigInt(4294967295));g[y+7]=z,z=z>>8,g[y+6]=z,z=z>>8,g[y+5]=z,z=z>>8,g[y+4]=z;let G=Number(p>>BigInt(32)&BigInt(4294967295));return g[y+3]=G,G=G>>8,g[y+2]=G,G=G>>8,g[y+1]=G,G=G>>8,g[y]=G,y+8}o.prototype.writeBigUInt64LE=Gt(function(p,y=0){return N(this,p,y,BigInt(0),BigInt("0xffffffffffffffff"))}),o.prototype.writeBigUInt64BE=Gt(function(p,y=0){return P(this,p,y,BigInt(0),BigInt("0xffffffffffffffff"))}),o.prototype.writeIntLE=function(p,y,C,M){if(p=+p,y=y>>>0,!M){const Ne=Math.pow(2,8*C-1);B(this,p,y,C,Ne-1,-Ne)}let z=0,G=1,ve=0;for(this[y]=p&255;++z<C&&(G*=256);)p<0&&ve===0&&this[y+z-1]!==0&&(ve=1),this[y+z]=(p/G>>0)-ve&255;return y+C},o.prototype.writeIntBE=function(p,y,C,M){if(p=+p,y=y>>>0,!M){const Ne=Math.pow(2,8*C-1);B(this,p,y,C,Ne-1,-Ne)}let z=C-1,G=1,ve=0;for(this[y+z]=p&255;--z>=0&&(G*=256);)p<0&&ve===0&&this[y+z+1]!==0&&(ve=1),this[y+z]=(p/G>>0)-ve&255;return y+C},o.prototype.writeInt8=function(p,y,C){return p=+p,y=y>>>0,C||B(this,p,y,1,127,-128),p<0&&(p=255+p+1),this[y]=p&255,y+1},o.prototype.writeInt16LE=function(p,y,C){return p=+p,y=y>>>0,C||B(this,p,y,2,32767,-32768),this[y]=p&255,this[y+1]=p>>>8,y+2},o.prototype.writeInt16BE=function(p,y,C){return p=+p,y=y>>>0,C||B(this,p,y,2,32767,-32768),this[y]=p>>>8,this[y+1]=p&255,y+2},o.prototype.writeInt32LE=function(p,y,C){return p=+p,y=y>>>0,C||B(this,p,y,4,2147483647,-2147483648),this[y]=p&255,this[y+1]=p>>>8,this[y+2]=p>>>16,this[y+3]=p>>>24,y+4},o.prototype.writeInt32BE=function(p,y,C){return p=+p,y=y>>>0,C||B(this,p,y,4,2147483647,-2147483648),p<0&&(p=4294967295+p+1),this[y]=p>>>24,this[y+1]=p>>>16,this[y+2]=p>>>8,this[y+3]=p&255,y+4},o.prototype.writeBigInt64LE=Gt(function(p,y=0){return N(this,p,y,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),o.prototype.writeBigInt64BE=Gt(function(p,y=0){return P(this,p,y,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function H(g,p,y,C,M,z){if(y+C>g.length)throw new RangeError("Index out of range");if(y<0)throw new RangeError("Index out of range")}function Y(g,p,y,C,M){return p=+p,y=y>>>0,M||H(g,p,y,4),t.write(g,p,y,C,23,4),y+4}o.prototype.writeFloatLE=function(p,y,C){return Y(this,p,y,!0,C)},o.prototype.writeFloatBE=function(p,y,C){return Y(this,p,y,!1,C)};function we(g,p,y,C,M){return p=+p,y=y>>>0,M||H(g,p,y,8),t.write(g,p,y,C,52,8),y+8}o.prototype.writeDoubleLE=function(p,y,C){return we(this,p,y,!0,C)},o.prototype.writeDoubleBE=function(p,y,C){return we(this,p,y,!1,C)},o.prototype.copy=function(p,y,C,M){if(!o.isBuffer(p))throw new TypeError("argument should be a Buffer");if(C||(C=0),!M&&M!==0&&(M=this.length),y>=p.length&&(y=p.length),y||(y=0),M>0&&M<C&&(M=C),M===C||p.length===0||this.length===0)return 0;if(y<0)throw new RangeError("targetStart out of bounds");if(C<0||C>=this.length)throw new RangeError("Index out of range");if(M<0)throw new RangeError("sourceEnd out of bounds");M>this.length&&(M=this.length),p.length-y<M-C&&(M=p.length-y+C);const z=M-C;return this===p&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(y,C,M):Uint8Array.prototype.set.call(p,this.subarray(C,M),y),z},o.prototype.fill=function(p,y,C,M){if(typeof p=="string"){if(typeof y=="string"?(M=y,y=0,C=this.length):typeof C=="string"&&(M=C,C=this.length),M!==void 0&&typeof M!="string")throw new TypeError("encoding must be a string");if(typeof M=="string"&&!o.isEncoding(M))throw new TypeError("Unknown encoding: "+M);if(p.length===1){const G=p.charCodeAt(0);(M==="utf8"&&G<128||M==="latin1")&&(p=G)}}else typeof p=="number"?p=p&255:typeof p=="boolean"&&(p=Number(p));if(y<0||this.length<y||this.length<C)throw new RangeError("Out of range index");if(C<=y)return this;y=y>>>0,C=C===void 0?this.length:C>>>0,p||(p=0);let z;if(typeof p=="number")for(z=y;z<C;++z)this[z]=p;else{const G=o.isBuffer(p)?p:o.from(p,M),ve=G.length;if(ve===0)throw new TypeError('The value "'+p+'" is invalid for argument "value"');for(z=0;z<C-y;++z)this[z+y]=G[z%ve]}return this};const X={};function ye(g,p,y){X[g]=class extends y{constructor(){super(),Object.defineProperty(this,"message",{value:p.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${g}]`,this.stack,delete this.name}get code(){return g}set code(M){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:M,writable:!0})}toString(){return`${this.name} [${g}]: ${this.message}`}}}ye("ERR_BUFFER_OUT_OF_BOUNDS",function(g){return g?`${g} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),ye("ERR_INVALID_ARG_TYPE",function(g,p){return`The "${g}" argument must be of type number. Received type ${typeof p}`},TypeError),ye("ERR_OUT_OF_RANGE",function(g,p,y){let C=`The value of "${g}" is out of range.`,M=y;return Number.isInteger(y)&&Math.abs(y)>2**32?M=We(String(y)):typeof y=="bigint"&&(M=String(y),(y>BigInt(2)**BigInt(32)||y<-(BigInt(2)**BigInt(32)))&&(M=We(M)),M+="n"),C+=` It must be ${p}. Received ${M}`,C},RangeError);function We(g){let p="",y=g.length;const C=g[0]==="-"?1:0;for(;y>=C+4;y-=3)p=`_${g.slice(y-3,y)}${p}`;return`${g.slice(0,y)}${p}`}function $e(g,p,y){Xe(p,"offset"),(g[p]===void 0||g[p+y]===void 0)&&Ye(p,g.length-(y+1))}function St(g,p,y,C,M,z){if(g>y||g<p){const G=typeof p=="bigint"?"n":"";let ve;throw z>3?p===0||p===BigInt(0)?ve=`>= 0${G} and < 2${G} ** ${(z+1)*8}${G}`:ve=`>= -(2${G} ** ${(z+1)*8-1}${G}) and < 2 ** ${(z+1)*8-1}${G}`:ve=`>= ${p}${G} and <= ${y}${G}`,new X.ERR_OUT_OF_RANGE("value",ve,g)}$e(C,M,z)}function Xe(g,p){if(typeof g!="number")throw new X.ERR_INVALID_ARG_TYPE(p,"number",g)}function Ye(g,p,y){throw Math.floor(g)!==g?(Xe(g,y),new X.ERR_OUT_OF_RANGE(y||"offset","an integer",g)):p<0?new X.ERR_BUFFER_OUT_OF_BOUNDS:new X.ERR_OUT_OF_RANGE(y||"offset",`>= ${y?1:0} and <= ${p}`,g)}const Ir=/[^+/0-9A-Za-z-_]/g;function er(g){if(g=g.split("=")[0],g=g.trim().replace(Ir,""),g.length<2)return"";for(;g.length%4!==0;)g=g+"=";return g}function Dn(g,p){p=p||1/0;let y;const C=g.length;let M=null;const z=[];for(let G=0;G<C;++G){if(y=g.charCodeAt(G),y>55295&&y<57344){if(!M){if(y>56319){(p-=3)>-1&&z.push(239,191,189);continue}else if(G+1===C){(p-=3)>-1&&z.push(239,191,189);continue}M=y;continue}if(y<56320){(p-=3)>-1&&z.push(239,191,189),M=y;continue}y=(M-55296<<10|y-56320)+65536}else M&&(p-=3)>-1&&z.push(239,191,189);if(M=null,y<128){if((p-=1)<0)break;z.push(y)}else if(y<2048){if((p-=2)<0)break;z.push(y>>6|192,y&63|128)}else if(y<65536){if((p-=3)<0)break;z.push(y>>12|224,y>>6&63|128,y&63|128)}else if(y<1114112){if((p-=4)<0)break;z.push(y>>18|240,y>>12&63|128,y>>6&63|128,y&63|128)}else throw new Error("Invalid code point")}return z}function tr(g){const p=[];for(let y=0;y<g.length;++y)p.push(g.charCodeAt(y)&255);return p}function da(g,p){let y,C,M;const z=[];for(let G=0;G<g.length&&!((p-=2)<0);++G)y=g.charCodeAt(G),C=y>>8,M=y%256,z.push(M),z.push(C);return z}function Fn(g){return e.toByteArray(er(g))}function dt(g,p,y,C){let M;for(M=0;M<C&&!(M+y>=p.length||M>=g.length);++M)p[M+y]=g[M];return M}function xt(g,p){return g instanceof p||g!=null&&g.constructor!=null&&g.constructor.name!=null&&g.constructor.name===p.name}function Vt(g){return g!==g}const Pt=function(){const g="0123456789abcdef",p=new Array(256);for(let y=0;y<16;++y){const C=y*16;for(let M=0;M<16;++M)p[C+M]=g[y]+g[M]}return p}();function Gt(g){return typeof BigInt>"u"?Nn:g}function Nn(){throw new Error("BigInt not supported")}})(Fo);var rg=function(e){for(var t=new Buffer(e.length),n=0,a=e.length-1;n<=a;++n,--a)t[n]=e[a],t[a]=e[n];return t},ra={},ag={get exports(){return ra},set exports(r){ra=r}},as={},ig={get exports(){return as},set exports(r){as=r}},ku;function ke(){return ku||(ku=1,function(r,e){(function(t,n){r.exports=n()})(be,function(){var t=t||function(n,a){var i=Object.create||function(){function f(){}return function(w){var A;return f.prototype=w,A=new f,f.prototype=null,A}}(),s={},o=s.lib={},l=o.Base=function(){return{extend:function(f){var w=i(this);return f&&w.mixIn(f),(!w.hasOwnProperty("init")||this.init===w.init)&&(w.init=function(){w.$super.init.apply(this,arguments)}),w.init.prototype=w,w.$super=this,w},create:function(){var f=this.extend();return f.init.apply(f,arguments),f},init:function(){},mixIn:function(f){for(var w in f)f.hasOwnProperty(w)&&(this[w]=f[w]);f.hasOwnProperty("toString")&&(this.toString=f.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),c=o.WordArray=l.extend({init:function(f,w){f=this.words=f||[],w!=a?this.sigBytes=w:this.sigBytes=f.length*4},toString:function(f){return(f||d).stringify(this)},concat:function(f){var w=this.words,A=f.words,T=this.sigBytes,E=f.sigBytes;if(this.clamp(),T%4)for(var I=0;I<E;I++){var D=A[I>>>2]>>>24-I%4*8&255;w[T+I>>>2]|=D<<24-(T+I)%4*8}else for(var I=0;I<E;I+=4)w[T+I>>>2]=A[I>>>2];return this.sigBytes+=E,this},clamp:function(){var f=this.words,w=this.sigBytes;f[w>>>2]&=4294967295<<32-w%4*8,f.length=n.ceil(w/4)},clone:function(){var f=l.clone.call(this);return f.words=this.words.slice(0),f},random:function(f){for(var w=[],A=function(F){var F=F,W=987654321,q=4294967295;return function(){W=36969*(W&65535)+(W>>16)&q,F=18e3*(F&65535)+(F>>16)&q;var R=(W<<16)+F&q;return R/=4294967296,R+=.5,R*(n.random()>.5?1:-1)}},T=0,E;T<f;T+=4){var I=A((E||n.random())*4294967296);E=I()*987654071,w.push(I()*4294967296|0)}return new c.init(w,f)}}),u=s.enc={},d=u.Hex={stringify:function(f){for(var w=f.words,A=f.sigBytes,T=[],E=0;E<A;E++){var I=w[E>>>2]>>>24-E%4*8&255;T.push((I>>>4).toString(16)),T.push((I&15).toString(16))}return T.join("")},parse:function(f){for(var w=f.length,A=[],T=0;T<w;T+=2)A[T>>>3]|=parseInt(f.substr(T,2),16)<<24-T%8*4;return new c.init(A,w/2)}},h=u.Latin1={stringify:function(f){for(var w=f.words,A=f.sigBytes,T=[],E=0;E<A;E++){var I=w[E>>>2]>>>24-E%4*8&255;T.push(String.fromCharCode(I))}return T.join("")},parse:function(f){for(var w=f.length,A=[],T=0;T<w;T++)A[T>>>2]|=(f.charCodeAt(T)&255)<<24-T%4*8;return new c.init(A,w)}},m=u.Utf8={stringify:function(f){try{return decodeURIComponent(escape(h.stringify(f)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(f){return h.parse(unescape(encodeURIComponent(f)))}},b=o.BufferedBlockAlgorithm=l.extend({reset:function(){this._data=new c.init,this._nDataBytes=0},_append:function(f){typeof f=="string"&&(f=m.parse(f)),this._data.concat(f),this._nDataBytes+=f.sigBytes},_process:function(f){var w=this._data,A=w.words,T=w.sigBytes,E=this.blockSize,I=E*4,D=T/I;f?D=n.ceil(D):D=n.max((D|0)-this._minBufferSize,0);var F=D*E,W=n.min(F*4,T);if(F){for(var q=0;q<F;q+=E)this._doProcessBlock(A,q);var R=A.splice(0,F);w.sigBytes-=W}return new c.init(R,W)},clone:function(){var f=l.clone.call(this);return f._data=this._data.clone(),f},_minBufferSize:0});o.Hasher=b.extend({cfg:l.extend(),init:function(f){this.cfg=this.cfg.extend(f),this.reset()},reset:function(){b.reset.call(this),this._doReset()},update:function(f){return this._append(f),this._process(),this},finalize:function(f){f&&this._append(f);var w=this._doFinalize();return w},blockSize:16,_createHelper:function(f){return function(w,A){return new f.init(A).finalize(w)}},_createHmacHelper:function(f){return function(w,A){return new x.HMAC.init(f,A).finalize(w)}}});var x=s.algo={};return s}(Math);return t})}(ig)),as}(function(r,e){(function(t,n){r.exports=n(ke())})(be,function(t){return function(n){var a=t,i=a.lib,s=i.WordArray,o=i.Hasher,l=a.algo,c=[],u=[];(function(){function m(w){for(var A=n.sqrt(w),T=2;T<=A;T++)if(!(w%T))return!1;return!0}function b(w){return(w-(w|0))*4294967296|0}for(var x=2,f=0;f<64;)m(x)&&(f<8&&(c[f]=b(n.pow(x,1/2))),u[f]=b(n.pow(x,1/3)),f++),x++})();var d=[],h=l.SHA256=o.extend({_doReset:function(){this._hash=new s.init(c.slice(0))},_doProcessBlock:function(m,b){for(var x=this._hash.words,f=x[0],w=x[1],A=x[2],T=x[3],E=x[4],I=x[5],D=x[6],F=x[7],W=0;W<64;W++){if(W<16)d[W]=m[b+W]|0;else{var q=d[W-15],R=(q<<25|q>>>7)^(q<<14|q>>>18)^q>>>3,L=d[W-2],V=(L<<15|L>>>17)^(L<<13|L>>>19)^L>>>10;d[W]=R+d[W-7]+V+d[W-16]}var k=E&I^~E&D,U=f&w^f&A^w&A,Z=(f<<30|f>>>2)^(f<<19|f>>>13)^(f<<10|f>>>22),J=(E<<26|E>>>6)^(E<<21|E>>>11)^(E<<7|E>>>25),ie=F+J+k+u[W]+d[W],ne=Z+U;F=D,D=I,I=E,E=T+ie|0,T=A,A=w,w=f,f=ie+ne|0}x[0]=x[0]+f|0,x[1]=x[1]+w|0,x[2]=x[2]+A|0,x[3]=x[3]+T|0,x[4]=x[4]+E|0,x[5]=x[5]+I|0,x[6]=x[6]+D|0,x[7]=x[7]+F|0},_doFinalize:function(){var m=this._data,b=m.words,x=this._nDataBytes*8,f=m.sigBytes*8;return b[f>>>5]|=128<<24-f%32,b[(f+64>>>9<<4)+14]=n.floor(x/4294967296),b[(f+64>>>9<<4)+15]=x,m.sigBytes=b.length*4,this._process(),this._hash},clone:function(){var m=o.clone.call(this);return m._hash=this._hash.clone(),m}});a.SHA256=o._createHelper(h),a.HmacSHA256=o._createHmacHelper(h)}(Math),t.SHA256})})(ag);var Cc={},sg={get exports(){return Cc},set exports(r){Cc=r}};(function(r,e){(function(t,n){r.exports=n()})(be,function(){function t(s,o){var l=o?"":"";return s?l+=" ":l+="",l}function n(s,o){var l=[];for(var c in s)s.hasOwnProperty(c)&&(o&&typeof s[c]=="function"||l.push(c));return l}function a(s,o,l,c,u,d,h){var m="",b=0,x,f,w=c.slice(0);if(w.push([o,l])&&c.length>0&&(c.forEach(function(T,E){E>0&&(m+=(T[1]?" ":"")+"  "),!f&&T[0]===o&&(f=!0)}),m+=t(s,l)+s,u&&(typeof o!="object"||o instanceof Date)&&(m+=": "+o),f&&(m+=" (circular ref.)"),h(m)),!f&&typeof o=="object"){var A=n(o,d);A.forEach(function(T){x=++b===A.length,a(T,o[T],x,w,u,d,h)})}}var i={};return i.asLines=function(s,o,l,c){var u=typeof l!="function"?l:!1;a(".",s,!1,[],o,u,c||l)},i.asTree=function(s,o,l){var c="";return a(".",s,!1,[],o,l,function(u){c+=u+`
`}),c},i})})(sg);var oa={},Ec={},og={get exports(){return Ec},set exports(r){Ec=r}},is={},cg={get exports(){return is},set exports(r){is=r}},Iu;function Wo(){return Iu||(Iu=1,function(r,e){(function(t,n){r.exports=n(ke())})(be,function(t){return function(n){var a=t,i=a.lib,s=i.Base,o=i.WordArray,l=a.x64={};l.Word=s.extend({init:function(c,u){this.high=c,this.low=u}}),l.WordArray=s.extend({init:function(c,u){c=this.words=c||[],u!=n?this.sigBytes=u:this.sigBytes=c.length*8},toX32:function(){for(var c=this.words,u=c.length,d=[],h=0;h<u;h++){var m=c[h];d.push(m.high),d.push(m.low)}return o.create(d,this.sigBytes)},clone:function(){for(var c=s.clone.call(this),u=c.words=this.words.slice(0),d=u.length,h=0;h<d;h++)u[h]=u[h].clone();return c}})}(),t})}(cg)),is}var ss={},lg={get exports(){return ss},set exports(r){ss=r}},Su;function ug(){return Su||(Su=1,function(r,e){(function(t,n){r.exports=n(ke())})(be,function(t){return function(){if(typeof ArrayBuffer=="function"){var n=t,a=n.lib,i=a.WordArray,s=i.init,o=i.init=function(l){if(l instanceof ArrayBuffer&&(l=new Uint8Array(l)),(l instanceof Int8Array||typeof Uint8ClampedArray<"u"&&l instanceof Uint8ClampedArray||l instanceof Int16Array||l instanceof Uint16Array||l instanceof Int32Array||l instanceof Uint32Array||l instanceof Float32Array||l instanceof Float64Array)&&(l=new Uint8Array(l.buffer,l.byteOffset,l.byteLength)),l instanceof Uint8Array){for(var c=l.byteLength,u=[],d=0;d<c;d++)u[d>>>2]|=l[d]<<24-d%4*8;s.call(this,u,c)}else s.apply(this,arguments)};o.prototype=i}}(),t.lib.WordArray})}(lg)),ss}var os={},dg={get exports(){return os},set exports(r){os=r}},Pu;function pg(){return Pu||(Pu=1,function(r,e){(function(t,n){r.exports=n(ke())})(be,function(t){return function(){var n=t,a=n.lib,i=a.WordArray,s=n.enc;s.Utf16=s.Utf16BE={stringify:function(l){for(var c=l.words,u=l.sigBytes,d=[],h=0;h<u;h+=2){var m=c[h>>>2]>>>16-h%4*8&65535;d.push(String.fromCharCode(m))}return d.join("")},parse:function(l){for(var c=l.length,u=[],d=0;d<c;d++)u[d>>>1]|=l.charCodeAt(d)<<16-d%2*16;return i.create(u,c*2)}},s.Utf16LE={stringify:function(l){for(var c=l.words,u=l.sigBytes,d=[],h=0;h<u;h+=2){var m=o(c[h>>>2]>>>16-h%4*8&65535);d.push(String.fromCharCode(m))}return d.join("")},parse:function(l){for(var c=l.length,u=[],d=0;d<c;d++)u[d>>>1]|=o(l.charCodeAt(d)<<16-d%2*16);return i.create(u,c*2)}};function o(l){return l<<8&4278255360|l>>>8&16711935}}(),t.enc.Utf16})}(dg)),os}var cs={},fg={get exports(){return cs},set exports(r){cs=r}},Bu;function ca(){return Bu||(Bu=1,function(r,e){(function(t,n){r.exports=n(ke())})(be,function(t){return function(){var n=t,a=n.lib,i=a.WordArray,s=n.enc;s.Base64={stringify:function(l){var c=l.words,u=l.sigBytes,d=this._map;l.clamp();for(var h=[],m=0;m<u;m+=3)for(var b=c[m>>>2]>>>24-m%4*8&255,x=c[m+1>>>2]>>>24-(m+1)%4*8&255,f=c[m+2>>>2]>>>24-(m+2)%4*8&255,w=b<<16|x<<8|f,A=0;A<4&&m+A*.75<u;A++)h.push(d.charAt(w>>>6*(3-A)&63));var T=d.charAt(64);if(T)for(;h.length%4;)h.push(T);return h.join("")},parse:function(l){var c=l.length,u=this._map,d=this._reverseMap;if(!d){d=this._reverseMap=[];for(var h=0;h<u.length;h++)d[u.charCodeAt(h)]=h}var m=u.charAt(64);if(m){var b=l.indexOf(m);b!==-1&&(c=b)}return o(l,c,d)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function o(l,c,u){for(var d=[],h=0,m=0;m<c;m++)if(m%4){var b=u[l.charCodeAt(m-1)]<<m%4*2,x=u[l.charCodeAt(m)]>>>6-m%4*2;d[h>>>2]|=(b|x)<<24-h%4*8,h++}return i.create(d,h)}}(),t.enc.Base64})}(fg)),cs}var ls={},hg={get exports(){return ls},set exports(r){ls=r}},Ru;function la(){return Ru||(Ru=1,function(r,e){(function(t,n){r.exports=n(ke())})(be,function(t){return function(n){var a=t,i=a.lib,s=i.WordArray,o=i.Hasher,l=a.algo,c=[];(function(){for(var x=0;x<64;x++)c[x]=n.abs(n.sin(x+1))*4294967296|0})();var u=l.MD5=o.extend({_doReset:function(){this._hash=new s.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(x,f){for(var w=0;w<16;w++){var A=f+w,T=x[A];x[A]=(T<<8|T>>>24)&16711935|(T<<24|T>>>8)&4278255360}var E=this._hash.words,I=x[f+0],D=x[f+1],F=x[f+2],W=x[f+3],q=x[f+4],R=x[f+5],L=x[f+6],V=x[f+7],k=x[f+8],U=x[f+9],Z=x[f+10],J=x[f+11],ie=x[f+12],ne=x[f+13],de=x[f+14],ue=x[f+15],v=E[0],B=E[1],N=E[2],P=E[3];v=d(v,B,N,P,I,7,c[0]),P=d(P,v,B,N,D,12,c[1]),N=d(N,P,v,B,F,17,c[2]),B=d(B,N,P,v,W,22,c[3]),v=d(v,B,N,P,q,7,c[4]),P=d(P,v,B,N,R,12,c[5]),N=d(N,P,v,B,L,17,c[6]),B=d(B,N,P,v,V,22,c[7]),v=d(v,B,N,P,k,7,c[8]),P=d(P,v,B,N,U,12,c[9]),N=d(N,P,v,B,Z,17,c[10]),B=d(B,N,P,v,J,22,c[11]),v=d(v,B,N,P,ie,7,c[12]),P=d(P,v,B,N,ne,12,c[13]),N=d(N,P,v,B,de,17,c[14]),B=d(B,N,P,v,ue,22,c[15]),v=h(v,B,N,P,D,5,c[16]),P=h(P,v,B,N,L,9,c[17]),N=h(N,P,v,B,J,14,c[18]),B=h(B,N,P,v,I,20,c[19]),v=h(v,B,N,P,R,5,c[20]),P=h(P,v,B,N,Z,9,c[21]),N=h(N,P,v,B,ue,14,c[22]),B=h(B,N,P,v,q,20,c[23]),v=h(v,B,N,P,U,5,c[24]),P=h(P,v,B,N,de,9,c[25]),N=h(N,P,v,B,W,14,c[26]),B=h(B,N,P,v,k,20,c[27]),v=h(v,B,N,P,ne,5,c[28]),P=h(P,v,B,N,F,9,c[29]),N=h(N,P,v,B,V,14,c[30]),B=h(B,N,P,v,ie,20,c[31]),v=m(v,B,N,P,R,4,c[32]),P=m(P,v,B,N,k,11,c[33]),N=m(N,P,v,B,J,16,c[34]),B=m(B,N,P,v,de,23,c[35]),v=m(v,B,N,P,D,4,c[36]),P=m(P,v,B,N,q,11,c[37]),N=m(N,P,v,B,V,16,c[38]),B=m(B,N,P,v,Z,23,c[39]),v=m(v,B,N,P,ne,4,c[40]),P=m(P,v,B,N,I,11,c[41]),N=m(N,P,v,B,W,16,c[42]),B=m(B,N,P,v,L,23,c[43]),v=m(v,B,N,P,U,4,c[44]),P=m(P,v,B,N,ie,11,c[45]),N=m(N,P,v,B,ue,16,c[46]),B=m(B,N,P,v,F,23,c[47]),v=b(v,B,N,P,I,6,c[48]),P=b(P,v,B,N,V,10,c[49]),N=b(N,P,v,B,de,15,c[50]),B=b(B,N,P,v,R,21,c[51]),v=b(v,B,N,P,ie,6,c[52]),P=b(P,v,B,N,W,10,c[53]),N=b(N,P,v,B,Z,15,c[54]),B=b(B,N,P,v,D,21,c[55]),v=b(v,B,N,P,k,6,c[56]),P=b(P,v,B,N,ue,10,c[57]),N=b(N,P,v,B,L,15,c[58]),B=b(B,N,P,v,ne,21,c[59]),v=b(v,B,N,P,q,6,c[60]),P=b(P,v,B,N,J,10,c[61]),N=b(N,P,v,B,F,15,c[62]),B=b(B,N,P,v,U,21,c[63]),E[0]=E[0]+v|0,E[1]=E[1]+B|0,E[2]=E[2]+N|0,E[3]=E[3]+P|0},_doFinalize:function(){var x=this._data,f=x.words,w=this._nDataBytes*8,A=x.sigBytes*8;f[A>>>5]|=128<<24-A%32;var T=n.floor(w/4294967296),E=w;f[(A+64>>>9<<4)+15]=(T<<8|T>>>24)&16711935|(T<<24|T>>>8)&4278255360,f[(A+64>>>9<<4)+14]=(E<<8|E>>>24)&16711935|(E<<24|E>>>8)&4278255360,x.sigBytes=(f.length+1)*4,this._process();for(var I=this._hash,D=I.words,F=0;F<4;F++){var W=D[F];D[F]=(W<<8|W>>>24)&16711935|(W<<24|W>>>8)&4278255360}return I},clone:function(){var x=o.clone.call(this);return x._hash=this._hash.clone(),x}});function d(x,f,w,A,T,E,I){var D=x+(f&w|~f&A)+T+I;return(D<<E|D>>>32-E)+f}function h(x,f,w,A,T,E,I){var D=x+(f&A|w&~A)+T+I;return(D<<E|D>>>32-E)+f}function m(x,f,w,A,T,E,I){var D=x+(f^w^A)+T+I;return(D<<E|D>>>32-E)+f}function b(x,f,w,A,T,E,I){var D=x+(w^(f|~A))+T+I;return(D<<E|D>>>32-E)+f}a.MD5=o._createHelper(u),a.HmacMD5=o._createHmacHelper(u)}(Math),t.MD5})}(hg)),ls}var us={},yg={get exports(){return us},set exports(r){us=r}},Mu;function cl(){return Mu||(Mu=1,function(r,e){(function(t,n){r.exports=n(ke())})(be,function(t){return function(){var n=t,a=n.lib,i=a.WordArray,s=a.Hasher,o=n.algo,l=[],c=o.SHA1=s.extend({_doReset:function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(u,d){for(var h=this._hash.words,m=h[0],b=h[1],x=h[2],f=h[3],w=h[4],A=0;A<80;A++){if(A<16)l[A]=u[d+A]|0;else{var T=l[A-3]^l[A-8]^l[A-14]^l[A-16];l[A]=T<<1|T>>>31}var E=(m<<5|m>>>27)+w+l[A];A<20?E+=(b&x|~b&f)+1518500249:A<40?E+=(b^x^f)+1859775393:A<60?E+=(b&x|b&f|x&f)-1894007588:E+=(b^x^f)-899497514,w=f,f=x,x=b<<30|b>>>2,b=m,m=E}h[0]=h[0]+m|0,h[1]=h[1]+b|0,h[2]=h[2]+x|0,h[3]=h[3]+f|0,h[4]=h[4]+w|0},_doFinalize:function(){var u=this._data,d=u.words,h=this._nDataBytes*8,m=u.sigBytes*8;return d[m>>>5]|=128<<24-m%32,d[(m+64>>>9<<4)+14]=Math.floor(h/4294967296),d[(m+64>>>9<<4)+15]=h,u.sigBytes=d.length*4,this._process(),this._hash},clone:function(){var u=s.clone.call(this);return u._hash=this._hash.clone(),u}});n.SHA1=s._createHelper(c),n.HmacSHA1=s._createHmacHelper(c)}(),t.SHA1})}(yg)),us}var ds={},mg={get exports(){return ds},set exports(r){ds=r}},Du;function xg(){return Du||(Du=1,function(r,e){(function(t,n,a){r.exports=n(ke(),ra)})(be,function(t){return function(){var n=t,a=n.lib,i=a.WordArray,s=n.algo,o=s.SHA256,l=s.SHA224=o.extend({_doReset:function(){this._hash=new i.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var c=o._doFinalize.call(this);return c.sigBytes-=4,c}});n.SHA224=o._createHelper(l),n.HmacSHA224=o._createHmacHelper(l)}(),t.SHA224})}(mg)),ds}var ps={},bg={get exports(){return ps},set exports(r){ps=r}},Fu;function op(){return Fu||(Fu=1,function(r,e){(function(t,n,a){r.exports=n(ke(),Wo())})(be,function(t){return function(){var n=t,a=n.lib,i=a.Hasher,s=n.x64,o=s.Word,l=s.WordArray,c=n.algo;function u(){return o.create.apply(o,arguments)}var d=[u(1116352408,3609767458),u(1899447441,602891725),u(3049323471,3964484399),u(3921009573,2173295548),u(961987163,4081628472),u(1508970993,3053834265),u(2453635748,2937671579),u(2870763221,3664609560),u(3624381080,2734883394),u(310598401,1164996542),u(607225278,1323610764),u(1426881987,3590304994),u(1925078388,4068182383),u(2162078206,991336113),u(2614888103,633803317),u(3248222580,3479774868),u(3835390401,2666613458),u(4022224774,944711139),u(264347078,2341262773),u(604807628,2007800933),u(770255983,1495990901),u(1249150122,1856431235),u(1555081692,3175218132),u(1996064986,2198950837),u(2554220882,3999719339),u(2821834349,766784016),u(2952996808,2566594879),u(3210313671,3203337956),u(3336571891,1034457026),u(3584528711,2466948901),u(113926993,3758326383),u(338241895,168717936),u(666307205,1188179964),u(773529912,1546045734),u(1294757372,1522805485),u(1396182291,2643833823),u(1695183700,2343527390),u(1986661051,1014477480),u(2177026350,1206759142),u(2456956037,344077627),u(2730485921,1290863460),u(2820302411,3158454273),u(3259730800,3505952657),u(3345764771,106217008),u(3516065817,3606008344),u(3600352804,1432725776),u(4094571909,1467031594),u(275423344,851169720),u(430227734,3100823752),u(506948616,1363258195),u(659060556,3750685593),u(883997877,3785050280),u(958139571,3318307427),u(1322822218,3812723403),u(1537002063,2003034995),u(1747873779,3602036899),u(1955562222,1575990012),u(2024104815,1125592928),u(2227730452,2716904306),u(2361852424,442776044),u(2428436474,593698344),u(2756734187,3733110249),u(3204031479,2999351573),u(3329325298,3815920427),u(3391569614,3928383900),u(3515267271,566280711),u(3940187606,3454069534),u(4118630271,4000239992),u(116418474,1914138554),u(174292421,2731055270),u(289380356,3203993006),u(460393269,320620315),u(685471733,587496836),u(852142971,1086792851),u(1017036298,365543100),u(1126000580,2618297676),u(1288033470,3409855158),u(1501505948,4234509866),u(1607167915,987167468),u(1816402316,1246189591)],h=[];(function(){for(var b=0;b<80;b++)h[b]=u()})();var m=c.SHA512=i.extend({_doReset:function(){this._hash=new l.init([new o.init(1779033703,4089235720),new o.init(3144134277,2227873595),new o.init(1013904242,4271175723),new o.init(2773480762,1595750129),new o.init(1359893119,2917565137),new o.init(2600822924,725511199),new o.init(528734635,4215389547),new o.init(1541459225,327033209)])},_doProcessBlock:function(b,x){for(var f=this._hash.words,w=f[0],A=f[1],T=f[2],E=f[3],I=f[4],D=f[5],F=f[6],W=f[7],q=w.high,R=w.low,L=A.high,V=A.low,k=T.high,U=T.low,Z=E.high,J=E.low,ie=I.high,ne=I.low,de=D.high,ue=D.low,v=F.high,B=F.low,N=W.high,P=W.low,H=q,Y=R,we=L,X=V,ye=k,We=U,$e=Z,St=J,Xe=ie,Ye=ne,Ir=de,er=ue,Dn=v,tr=B,da=N,Fn=P,dt=0;dt<80;dt++){var xt=h[dt];if(dt<16)var Vt=xt.high=b[x+dt*2]|0,Pt=xt.low=b[x+dt*2+1]|0;else{var Gt=h[dt-15],Nn=Gt.high,g=Gt.low,p=(Nn>>>1|g<<31)^(Nn>>>8|g<<24)^Nn>>>7,y=(g>>>1|Nn<<31)^(g>>>8|Nn<<24)^(g>>>7|Nn<<25),C=h[dt-2],M=C.high,z=C.low,G=(M>>>19|z<<13)^(M<<3|z>>>29)^M>>>6,ve=(z>>>19|M<<13)^(z<<3|M>>>29)^(z>>>6|M<<26),Ne=h[dt-7],De=Ne.high,Oe=Ne.low,Re=h[dt-16],Pf=Re.high,Tl=Re.low,Pt=y+Oe,Vt=p+De+(Pt>>>0<y>>>0?1:0),Pt=Pt+ve,Vt=Vt+G+(Pt>>>0<ve>>>0?1:0),Pt=Pt+Tl,Vt=Vt+Pf+(Pt>>>0<Tl>>>0?1:0);xt.high=Vt,xt.low=Pt}var Bf=Xe&Ir^~Xe&Dn,Al=Ye&er^~Ye&tr,Rf=H&we^H&ye^we&ye,Mf=Y&X^Y&We^X&We,Df=(H>>>28|Y<<4)^(H<<30|Y>>>2)^(H<<25|Y>>>7),Cl=(Y>>>28|H<<4)^(Y<<30|H>>>2)^(Y<<25|H>>>7),Ff=(Xe>>>14|Ye<<18)^(Xe>>>18|Ye<<14)^(Xe<<23|Ye>>>9),Nf=(Ye>>>14|Xe<<18)^(Ye>>>18|Xe<<14)^(Ye<<23|Xe>>>9),El=d[dt],Wf=El.high,_l=El.low,Bt=Fn+Nf,Wn=da+Ff+(Bt>>>0<Fn>>>0?1:0),Bt=Bt+Al,Wn=Wn+Bf+(Bt>>>0<Al>>>0?1:0),Bt=Bt+_l,Wn=Wn+Wf+(Bt>>>0<_l>>>0?1:0),Bt=Bt+Pt,Wn=Wn+Vt+(Bt>>>0<Pt>>>0?1:0),kl=Cl+Mf,Of=Df+Rf+(kl>>>0<Cl>>>0?1:0);da=Dn,Fn=tr,Dn=Ir,tr=er,Ir=Xe,er=Ye,Ye=St+Bt|0,Xe=$e+Wn+(Ye>>>0<St>>>0?1:0)|0,$e=ye,St=We,ye=we,We=X,we=H,X=Y,Y=Bt+kl|0,H=Wn+Of+(Y>>>0<Bt>>>0?1:0)|0}R=w.low=R+Y,w.high=q+H+(R>>>0<Y>>>0?1:0),V=A.low=V+X,A.high=L+we+(V>>>0<X>>>0?1:0),U=T.low=U+We,T.high=k+ye+(U>>>0<We>>>0?1:0),J=E.low=J+St,E.high=Z+$e+(J>>>0<St>>>0?1:0),ne=I.low=ne+Ye,I.high=ie+Xe+(ne>>>0<Ye>>>0?1:0),ue=D.low=ue+er,D.high=de+Ir+(ue>>>0<er>>>0?1:0),B=F.low=B+tr,F.high=v+Dn+(B>>>0<tr>>>0?1:0),P=W.low=P+Fn,W.high=N+da+(P>>>0<Fn>>>0?1:0)},_doFinalize:function(){var b=this._data,x=b.words,f=this._nDataBytes*8,w=b.sigBytes*8;x[w>>>5]|=128<<24-w%32,x[(w+128>>>10<<5)+30]=Math.floor(f/4294967296),x[(w+128>>>10<<5)+31]=f,b.sigBytes=x.length*4,this._process();var A=this._hash.toX32();return A},clone:function(){var b=i.clone.call(this);return b._hash=this._hash.clone(),b},blockSize:1024/32});n.SHA512=i._createHelper(m),n.HmacSHA512=i._createHmacHelper(m)}(),t.SHA512})}(bg)),ps}var fs={},gg={get exports(){return fs},set exports(r){fs=r}},Nu;function wg(){return Nu||(Nu=1,function(r,e){(function(t,n,a){r.exports=n(ke(),Wo(),op())})(be,function(t){return function(){var n=t,a=n.x64,i=a.Word,s=a.WordArray,o=n.algo,l=o.SHA512,c=o.SHA384=l.extend({_doReset:function(){this._hash=new s.init([new i.init(3418070365,3238371032),new i.init(1654270250,914150663),new i.init(2438529370,812702999),new i.init(355462360,4144912697),new i.init(1731405415,4290775857),new i.init(2394180231,1750603025),new i.init(3675008525,1694076839),new i.init(1203062813,3204075428)])},_doFinalize:function(){var u=l._doFinalize.call(this);return u.sigBytes-=16,u}});n.SHA384=l._createHelper(c),n.HmacSHA384=l._createHmacHelper(c)}(),t.SHA384})}(gg)),fs}var hs={},vg={get exports(){return hs},set exports(r){hs=r}},Wu;function Tg(){return Wu||(Wu=1,function(r,e){(function(t,n,a){r.exports=n(ke(),Wo())})(be,function(t){return function(n){var a=t,i=a.lib,s=i.WordArray,o=i.Hasher,l=a.x64,c=l.Word,u=a.algo,d=[],h=[],m=[];(function(){for(var f=1,w=0,A=0;A<24;A++){d[f+5*w]=(A+1)*(A+2)/2%64;var T=w%5,E=(2*f+3*w)%5;f=T,w=E}for(var f=0;f<5;f++)for(var w=0;w<5;w++)h[f+5*w]=w+(2*f+3*w)%5*5;for(var I=1,D=0;D<24;D++){for(var F=0,W=0,q=0;q<7;q++){if(I&1){var R=(1<<q)-1;R<32?W^=1<<R:F^=1<<R-32}I&128?I=I<<1^113:I<<=1}m[D]=c.create(F,W)}})();var b=[];(function(){for(var f=0;f<25;f++)b[f]=c.create()})();var x=u.SHA3=o.extend({cfg:o.cfg.extend({outputLength:512}),_doReset:function(){for(var f=this._state=[],w=0;w<25;w++)f[w]=new c.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(f,w){for(var A=this._state,T=this.blockSize/2,E=0;E<T;E++){var I=f[w+2*E],D=f[w+2*E+1];I=(I<<8|I>>>24)&16711935|(I<<24|I>>>8)&4278255360,D=(D<<8|D>>>24)&16711935|(D<<24|D>>>8)&4278255360;var F=A[E];F.high^=D,F.low^=I}for(var W=0;W<24;W++){for(var q=0;q<5;q++){for(var R=0,L=0,V=0;V<5;V++){var F=A[q+5*V];R^=F.high,L^=F.low}var k=b[q];k.high=R,k.low=L}for(var q=0;q<5;q++)for(var U=b[(q+4)%5],Z=b[(q+1)%5],J=Z.high,ie=Z.low,R=U.high^(J<<1|ie>>>31),L=U.low^(ie<<1|J>>>31),V=0;V<5;V++){var F=A[q+5*V];F.high^=R,F.low^=L}for(var ne=1;ne<25;ne++){var F=A[ne],de=F.high,ue=F.low,v=d[ne];if(v<32)var R=de<<v|ue>>>32-v,L=ue<<v|de>>>32-v;else var R=ue<<v-32|de>>>64-v,L=de<<v-32|ue>>>64-v;var B=b[h[ne]];B.high=R,B.low=L}var N=b[0],P=A[0];N.high=P.high,N.low=P.low;for(var q=0;q<5;q++)for(var V=0;V<5;V++){var ne=q+5*V,F=A[ne],H=b[ne],Y=b[(q+1)%5+5*V],we=b[(q+2)%5+5*V];F.high=H.high^~Y.high&we.high,F.low=H.low^~Y.low&we.low}var F=A[0],X=m[W];F.high^=X.high,F.low^=X.low}},_doFinalize:function(){var f=this._data,w=f.words;this._nDataBytes*8;var A=f.sigBytes*8,T=this.blockSize*32;w[A>>>5]|=1<<24-A%32,w[(n.ceil((A+1)/T)*T>>>5)-1]|=128,f.sigBytes=w.length*4,this._process();for(var E=this._state,I=this.cfg.outputLength/8,D=I/8,F=[],W=0;W<D;W++){var q=E[W],R=q.high,L=q.low;R=(R<<8|R>>>24)&16711935|(R<<24|R>>>8)&4278255360,L=(L<<8|L>>>24)&16711935|(L<<24|L>>>8)&4278255360,F.push(L),F.push(R)}return new s.init(F,I)},clone:function(){for(var f=o.clone.call(this),w=f._state=this._state.slice(0),A=0;A<25;A++)w[A]=w[A].clone();return f}});a.SHA3=o._createHelper(x),a.HmacSHA3=o._createHmacHelper(x)}(Math),t.SHA3})}(vg)),hs}var ys={},Ag={get exports(){return ys},set exports(r){ys=r}},Ou;function Cg(){return Ou||(Ou=1,function(r,e){(function(t,n){r.exports=n(ke())})(be,function(t){/** @preserve
			(c) 2012 by Cdric Mesnil. All rights reserved.

			Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:

			    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
			    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.

			THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
			*/return function(n){var a=t,i=a.lib,s=i.WordArray,o=i.Hasher,l=a.algo,c=s.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),u=s.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),d=s.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),h=s.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),m=s.create([0,1518500249,1859775393,2400959708,2840853838]),b=s.create([1352829926,1548603684,1836072691,2053994217,0]),x=l.RIPEMD160=o.extend({_doReset:function(){this._hash=s.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(D,F){for(var W=0;W<16;W++){var q=F+W,R=D[q];D[q]=(R<<8|R>>>24)&16711935|(R<<24|R>>>8)&4278255360}var L=this._hash.words,V=m.words,k=b.words,U=c.words,Z=u.words,J=d.words,ie=h.words,ne,de,ue,v,B,N,P,H,Y,we;N=ne=L[0],P=de=L[1],H=ue=L[2],Y=v=L[3],we=B=L[4];for(var X,W=0;W<80;W+=1)X=ne+D[F+U[W]]|0,W<16?X+=f(de,ue,v)+V[0]:W<32?X+=w(de,ue,v)+V[1]:W<48?X+=A(de,ue,v)+V[2]:W<64?X+=T(de,ue,v)+V[3]:X+=E(de,ue,v)+V[4],X=X|0,X=I(X,J[W]),X=X+B|0,ne=B,B=v,v=I(ue,10),ue=de,de=X,X=N+D[F+Z[W]]|0,W<16?X+=E(P,H,Y)+k[0]:W<32?X+=T(P,H,Y)+k[1]:W<48?X+=A(P,H,Y)+k[2]:W<64?X+=w(P,H,Y)+k[3]:X+=f(P,H,Y)+k[4],X=X|0,X=I(X,ie[W]),X=X+we|0,N=we,we=Y,Y=I(H,10),H=P,P=X;X=L[1]+ue+Y|0,L[1]=L[2]+v+we|0,L[2]=L[3]+B+N|0,L[3]=L[4]+ne+P|0,L[4]=L[0]+de+H|0,L[0]=X},_doFinalize:function(){var D=this._data,F=D.words,W=this._nDataBytes*8,q=D.sigBytes*8;F[q>>>5]|=128<<24-q%32,F[(q+64>>>9<<4)+14]=(W<<8|W>>>24)&16711935|(W<<24|W>>>8)&4278255360,D.sigBytes=(F.length+1)*4,this._process();for(var R=this._hash,L=R.words,V=0;V<5;V++){var k=L[V];L[V]=(k<<8|k>>>24)&16711935|(k<<24|k>>>8)&4278255360}return R},clone:function(){var D=o.clone.call(this);return D._hash=this._hash.clone(),D}});function f(D,F,W){return D^F^W}function w(D,F,W){return D&F|~D&W}function A(D,F,W){return(D|~F)^W}function T(D,F,W){return D&W|F&~W}function E(D,F,W){return D^(F|~W)}function I(D,F){return D<<F|D>>>32-F}a.RIPEMD160=o._createHelper(x),a.HmacRIPEMD160=o._createHmacHelper(x)}(),t.RIPEMD160})}(Ag)),ys}var ms={},Eg={get exports(){return ms},set exports(r){ms=r}},Lu;function ll(){return Lu||(Lu=1,function(r,e){(function(t,n){r.exports=n(ke())})(be,function(t){(function(){var n=t,a=n.lib,i=a.Base,s=n.enc,o=s.Utf8,l=n.algo;l.HMAC=i.extend({init:function(c,u){c=this._hasher=new c.init,typeof u=="string"&&(u=o.parse(u));var d=c.blockSize,h=d*4;u.sigBytes>h&&(u=c.finalize(u)),u.clamp();for(var m=this._oKey=u.clone(),b=this._iKey=u.clone(),x=m.words,f=b.words,w=0;w<d;w++)x[w]^=1549556828,f[w]^=909522486;m.sigBytes=b.sigBytes=h,this.reset()},reset:function(){var c=this._hasher;c.reset(),c.update(this._iKey)},update:function(c){return this._hasher.update(c),this},finalize:function(c){var u=this._hasher,d=u.finalize(c);u.reset();var h=u.finalize(this._oKey.clone().concat(d));return h}})})()})}(Eg)),ms}var xs={},_g={get exports(){return xs},set exports(r){xs=r}},Uu;function kg(){return Uu||(Uu=1,function(r,e){(function(t,n,a){r.exports=n(ke(),cl(),ll())})(be,function(t){return function(){var n=t,a=n.lib,i=a.Base,s=a.WordArray,o=n.algo,l=o.SHA1,c=o.HMAC,u=o.PBKDF2=i.extend({cfg:i.extend({keySize:128/32,hasher:l,iterations:1}),init:function(d){this.cfg=this.cfg.extend(d)},compute:function(d,h){for(var m=this.cfg,b=c.create(m.hasher,d),x=s.create(),f=s.create([1]),w=x.words,A=f.words,T=m.keySize,E=m.iterations;w.length<T;){var I=b.update(h).finalize(f);b.reset();for(var D=I.words,F=D.length,W=I,q=1;q<E;q++){W=b.finalize(W),b.reset();for(var R=W.words,L=0;L<F;L++)D[L]^=R[L]}x.concat(I),A[0]++}return x.sigBytes=T*4,x}});n.PBKDF2=function(d,h,m){return u.create(m).compute(d,h)}}(),t.PBKDF2})}(_g)),xs}var bs={},Ig={get exports(){return bs},set exports(r){bs=r}},Hu;function Er(){return Hu||(Hu=1,function(r,e){(function(t,n,a){r.exports=n(ke(),cl(),ll())})(be,function(t){return function(){var n=t,a=n.lib,i=a.Base,s=a.WordArray,o=n.algo,l=o.MD5,c=o.EvpKDF=i.extend({cfg:i.extend({keySize:128/32,hasher:l,iterations:1}),init:function(u){this.cfg=this.cfg.extend(u)},compute:function(u,d){for(var h=this.cfg,m=h.hasher.create(),b=s.create(),x=b.words,f=h.keySize,w=h.iterations;x.length<f;){A&&m.update(A);var A=m.update(u).finalize(d);m.reset();for(var T=1;T<w;T++)A=m.finalize(A),m.reset();b.concat(A)}return b.sigBytes=f*4,b}});n.EvpKDF=function(u,d,h){return c.create(h).compute(u,d)}}(),t.EvpKDF})}(Ig)),bs}var gs={},Sg={get exports(){return gs},set exports(r){gs=r}},zu;function ut(){return zu||(zu=1,function(r,e){(function(t,n,a){r.exports=n(ke(),Er())})(be,function(t){t.lib.Cipher||function(n){var a=t,i=a.lib,s=i.Base,o=i.WordArray,l=i.BufferedBlockAlgorithm,c=a.enc;c.Utf8;var u=c.Base64,d=a.algo,h=d.EvpKDF,m=i.Cipher=l.extend({cfg:s.extend(),createEncryptor:function(R,L){return this.create(this._ENC_XFORM_MODE,R,L)},createDecryptor:function(R,L){return this.create(this._DEC_XFORM_MODE,R,L)},init:function(R,L,V){this.cfg=this.cfg.extend(V),this._xformMode=R,this._key=L,this.reset()},reset:function(){l.reset.call(this),this._doReset()},process:function(R){return this._append(R),this._process()},finalize:function(R){R&&this._append(R);var L=this._doFinalize();return L},keySize:128/32,ivSize:128/32,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function R(L){return typeof L=="string"?q:D}return function(L){return{encrypt:function(V,k,U){return R(k).encrypt(L,V,k,U)},decrypt:function(V,k,U){return R(k).decrypt(L,V,k,U)}}}}()});i.StreamCipher=m.extend({_doFinalize:function(){var R=this._process(!0);return R},blockSize:1});var b=a.mode={},x=i.BlockCipherMode=s.extend({createEncryptor:function(R,L){return this.Encryptor.create(R,L)},createDecryptor:function(R,L){return this.Decryptor.create(R,L)},init:function(R,L){this._cipher=R,this._iv=L}}),f=b.CBC=function(){var R=x.extend();R.Encryptor=R.extend({processBlock:function(V,k){var U=this._cipher,Z=U.blockSize;L.call(this,V,k,Z),U.encryptBlock(V,k),this._prevBlock=V.slice(k,k+Z)}}),R.Decryptor=R.extend({processBlock:function(V,k){var U=this._cipher,Z=U.blockSize,J=V.slice(k,k+Z);U.decryptBlock(V,k),L.call(this,V,k,Z),this._prevBlock=J}});function L(V,k,U){var Z=this._iv;if(Z){var J=Z;this._iv=n}else var J=this._prevBlock;for(var ie=0;ie<U;ie++)V[k+ie]^=J[ie]}return R}(),w=a.pad={},A=w.Pkcs7={pad:function(R,L){for(var V=L*4,k=V-R.sigBytes%V,U=k<<24|k<<16|k<<8|k,Z=[],J=0;J<k;J+=4)Z.push(U);var ie=o.create(Z,k);R.concat(ie)},unpad:function(R){var L=R.words[R.sigBytes-1>>>2]&255;R.sigBytes-=L}};i.BlockCipher=m.extend({cfg:m.cfg.extend({mode:f,padding:A}),reset:function(){m.reset.call(this);var R=this.cfg,L=R.iv,V=R.mode;if(this._xformMode==this._ENC_XFORM_MODE)var k=V.createEncryptor;else{var k=V.createDecryptor;this._minBufferSize=1}this._mode&&this._mode.__creator==k?this._mode.init(this,L&&L.words):(this._mode=k.call(V,this,L&&L.words),this._mode.__creator=k)},_doProcessBlock:function(R,L){this._mode.processBlock(R,L)},_doFinalize:function(){var R=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){R.pad(this._data,this.blockSize);var L=this._process(!0)}else{var L=this._process(!0);R.unpad(L)}return L},blockSize:128/32});var T=i.CipherParams=s.extend({init:function(R){this.mixIn(R)},toString:function(R){return(R||this.formatter).stringify(this)}}),E=a.format={},I=E.OpenSSL={stringify:function(R){var L=R.ciphertext,V=R.salt;if(V)var k=o.create([1398893684,1701076831]).concat(V).concat(L);else var k=L;return k.toString(u)},parse:function(R){var L=u.parse(R),V=L.words;if(V[0]==1398893684&&V[1]==1701076831){var k=o.create(V.slice(2,4));V.splice(0,4),L.sigBytes-=16}return T.create({ciphertext:L,salt:k})}},D=i.SerializableCipher=s.extend({cfg:s.extend({format:I}),encrypt:function(R,L,V,k){k=this.cfg.extend(k);var U=R.createEncryptor(V,k),Z=U.finalize(L),J=U.cfg;return T.create({ciphertext:Z,key:V,iv:J.iv,algorithm:R,mode:J.mode,padding:J.padding,blockSize:R.blockSize,formatter:k.format})},decrypt:function(R,L,V,k){k=this.cfg.extend(k),L=this._parse(L,k.format);var U=R.createDecryptor(V,k).finalize(L.ciphertext);return U},_parse:function(R,L){return typeof R=="string"?L.parse(R,this):R}}),F=a.kdf={},W=F.OpenSSL={execute:function(R,L,V,k){k||(k=o.random(64/8));var U=h.create({keySize:L+V}).compute(R,k),Z=o.create(U.words.slice(L),V*4);return U.sigBytes=L*4,T.create({key:U,iv:Z,salt:k})}},q=i.PasswordBasedCipher=D.extend({cfg:D.cfg.extend({kdf:W}),encrypt:function(R,L,V,k){k=this.cfg.extend(k);var U=k.kdf.execute(V,R.keySize,R.ivSize);k.iv=U.iv;var Z=D.encrypt.call(this,R,L,U.key,k);return Z.mixIn(U),Z},decrypt:function(R,L,V,k){k=this.cfg.extend(k),L=this._parse(L,k.format);var U=k.kdf.execute(V,R.keySize,R.ivSize,L.salt);k.iv=U.iv;var Z=D.decrypt.call(this,R,L,U.key,k);return Z}})}()})}(Sg)),gs}var ws={},Pg={get exports(){return ws},set exports(r){ws=r}},ju;function Bg(){return ju||(ju=1,function(r,e){(function(t,n,a){r.exports=n(ke(),ut())})(be,function(t){return t.mode.CFB=function(){var n=t.lib.BlockCipherMode.extend();n.Encryptor=n.extend({processBlock:function(i,s){var o=this._cipher,l=o.blockSize;a.call(this,i,s,l,o),this._prevBlock=i.slice(s,s+l)}}),n.Decryptor=n.extend({processBlock:function(i,s){var o=this._cipher,l=o.blockSize,c=i.slice(s,s+l);a.call(this,i,s,l,o),this._prevBlock=c}});function a(i,s,o,l){var c=this._iv;if(c){var u=c.slice(0);this._iv=void 0}else var u=this._prevBlock;l.encryptBlock(u,0);for(var d=0;d<o;d++)i[s+d]^=u[d]}return n}(),t.mode.CFB})}(Pg)),ws}var vs={},Rg={get exports(){return vs},set exports(r){vs=r}},qu;function Mg(){return qu||(qu=1,function(r,e){(function(t,n,a){r.exports=n(ke(),ut())})(be,function(t){return t.mode.CTR=function(){var n=t.lib.BlockCipherMode.extend(),a=n.Encryptor=n.extend({processBlock:function(i,s){var o=this._cipher,l=o.blockSize,c=this._iv,u=this._counter;c&&(u=this._counter=c.slice(0),this._iv=void 0);var d=u.slice(0);o.encryptBlock(d,0),u[l-1]=u[l-1]+1|0;for(var h=0;h<l;h++)i[s+h]^=d[h]}});return n.Decryptor=a,n}(),t.mode.CTR})}(Rg)),vs}var Ts={},Dg={get exports(){return Ts},set exports(r){Ts=r}},Vu;function Fg(){return Vu||(Vu=1,function(r,e){(function(t,n,a){r.exports=n(ke(),ut())})(be,function(t){/** @preserve
 * Counter block mode compatible with  Dr Brian Gladman fileenc.c
 * derived from CryptoJS.mode.CTR
 * Jan Hruby jhruby.web@gmail.com
 */return t.mode.CTRGladman=function(){var n=t.lib.BlockCipherMode.extend();function a(o){if((o>>24&255)===255){var l=o>>16&255,c=o>>8&255,u=o&255;l===255?(l=0,c===255?(c=0,u===255?u=0:++u):++c):++l,o=0,o+=l<<16,o+=c<<8,o+=u}else o+=1<<24;return o}function i(o){return(o[0]=a(o[0]))===0&&(o[1]=a(o[1])),o}var s=n.Encryptor=n.extend({processBlock:function(o,l){var c=this._cipher,u=c.blockSize,d=this._iv,h=this._counter;d&&(h=this._counter=d.slice(0),this._iv=void 0),i(h);var m=h.slice(0);c.encryptBlock(m,0);for(var b=0;b<u;b++)o[l+b]^=m[b]}});return n.Decryptor=s,n}(),t.mode.CTRGladman})}(Dg)),Ts}var As={},Ng={get exports(){return As},set exports(r){As=r}},Gu;function Wg(){return Gu||(Gu=1,function(r,e){(function(t,n,a){r.exports=n(ke(),ut())})(be,function(t){return t.mode.OFB=function(){var n=t.lib.BlockCipherMode.extend(),a=n.Encryptor=n.extend({processBlock:function(i,s){var o=this._cipher,l=o.blockSize,c=this._iv,u=this._keystream;c&&(u=this._keystream=c.slice(0),this._iv=void 0),o.encryptBlock(u,0);for(var d=0;d<l;d++)i[s+d]^=u[d]}});return n.Decryptor=a,n}(),t.mode.OFB})}(Ng)),As}var Cs={},Og={get exports(){return Cs},set exports(r){Cs=r}},Ku;function Lg(){return Ku||(Ku=1,function(r,e){(function(t,n,a){r.exports=n(ke(),ut())})(be,function(t){return t.mode.ECB=function(){var n=t.lib.BlockCipherMode.extend();return n.Encryptor=n.extend({processBlock:function(a,i){this._cipher.encryptBlock(a,i)}}),n.Decryptor=n.extend({processBlock:function(a,i){this._cipher.decryptBlock(a,i)}}),n}(),t.mode.ECB})}(Og)),Cs}var Es={},Ug={get exports(){return Es},set exports(r){Es=r}},$u;function Hg(){return $u||($u=1,function(r,e){(function(t,n,a){r.exports=n(ke(),ut())})(be,function(t){return t.pad.AnsiX923={pad:function(n,a){var i=n.sigBytes,s=a*4,o=s-i%s,l=i+o-1;n.clamp(),n.words[l>>>2]|=o<<24-l%4*8,n.sigBytes+=o},unpad:function(n){var a=n.words[n.sigBytes-1>>>2]&255;n.sigBytes-=a}},t.pad.Ansix923})}(Ug)),Es}var _s={},zg={get exports(){return _s},set exports(r){_s=r}},Zu;function jg(){return Zu||(Zu=1,function(r,e){(function(t,n,a){r.exports=n(ke(),ut())})(be,function(t){return t.pad.Iso10126={pad:function(n,a){var i=a*4,s=i-n.sigBytes%i;n.concat(t.lib.WordArray.random(s-1)).concat(t.lib.WordArray.create([s<<24],1))},unpad:function(n){var a=n.words[n.sigBytes-1>>>2]&255;n.sigBytes-=a}},t.pad.Iso10126})}(zg)),_s}var ks={},qg={get exports(){return ks},set exports(r){ks=r}},Yu;function Vg(){return Yu||(Yu=1,function(r,e){(function(t,n,a){r.exports=n(ke(),ut())})(be,function(t){return t.pad.Iso97971={pad:function(n,a){n.concat(t.lib.WordArray.create([2147483648],1)),t.pad.ZeroPadding.pad(n,a)},unpad:function(n){t.pad.ZeroPadding.unpad(n),n.sigBytes--}},t.pad.Iso97971})}(qg)),ks}var Is={},Gg={get exports(){return Is},set exports(r){Is=r}},Ju;function Kg(){return Ju||(Ju=1,function(r,e){(function(t,n,a){r.exports=n(ke(),ut())})(be,function(t){return t.pad.ZeroPadding={pad:function(n,a){var i=a*4;n.clamp(),n.sigBytes+=i-(n.sigBytes%i||i)},unpad:function(n){for(var a=n.words,i=n.sigBytes-1;!(a[i>>>2]>>>24-i%4*8&255);)i--;n.sigBytes=i+1}},t.pad.ZeroPadding})}(Gg)),Is}var Ss={},$g={get exports(){return Ss},set exports(r){Ss=r}},Qu;function Zg(){return Qu||(Qu=1,function(r,e){(function(t,n,a){r.exports=n(ke(),ut())})(be,function(t){return t.pad.NoPadding={pad:function(){},unpad:function(){}},t.pad.NoPadding})}($g)),Ss}var Ps={},Yg={get exports(){return Ps},set exports(r){Ps=r}},Xu;function Jg(){return Xu||(Xu=1,function(r,e){(function(t,n,a){r.exports=n(ke(),ut())})(be,function(t){return function(n){var a=t,i=a.lib,s=i.CipherParams,o=a.enc,l=o.Hex,c=a.format;c.Hex={stringify:function(u){return u.ciphertext.toString(l)},parse:function(u){var d=l.parse(u);return s.create({ciphertext:d})}}}(),t.format.Hex})}(Yg)),Ps}var Bs={},Qg={get exports(){return Bs},set exports(r){Bs=r}},ed;function Xg(){return ed||(ed=1,function(r,e){(function(t,n,a){r.exports=n(ke(),ca(),la(),Er(),ut())})(be,function(t){return function(){var n=t,a=n.lib,i=a.BlockCipher,s=n.algo,o=[],l=[],c=[],u=[],d=[],h=[],m=[],b=[],x=[],f=[];(function(){for(var T=[],E=0;E<256;E++)E<128?T[E]=E<<1:T[E]=E<<1^283;for(var I=0,D=0,E=0;E<256;E++){var F=D^D<<1^D<<2^D<<3^D<<4;F=F>>>8^F&255^99,o[I]=F,l[F]=I;var W=T[I],q=T[W],R=T[q],L=T[F]*257^F*16843008;c[I]=L<<24|L>>>8,u[I]=L<<16|L>>>16,d[I]=L<<8|L>>>24,h[I]=L;var L=R*16843009^q*65537^W*257^I*16843008;m[F]=L<<24|L>>>8,b[F]=L<<16|L>>>16,x[F]=L<<8|L>>>24,f[F]=L,I?(I=W^T[T[T[R^W]]],D^=T[T[D]]):I=D=1}})();var w=[0,1,2,4,8,16,32,64,128,27,54],A=s.AES=i.extend({_doReset:function(){if(!(this._nRounds&&this._keyPriorReset===this._key)){for(var T=this._keyPriorReset=this._key,E=T.words,I=T.sigBytes/4,D=this._nRounds=I+6,F=(D+1)*4,W=this._keySchedule=[],q=0;q<F;q++)if(q<I)W[q]=E[q];else{var R=W[q-1];q%I?I>6&&q%I==4&&(R=o[R>>>24]<<24|o[R>>>16&255]<<16|o[R>>>8&255]<<8|o[R&255]):(R=R<<8|R>>>24,R=o[R>>>24]<<24|o[R>>>16&255]<<16|o[R>>>8&255]<<8|o[R&255],R^=w[q/I|0]<<24),W[q]=W[q-I]^R}for(var L=this._invKeySchedule=[],V=0;V<F;V++){var q=F-V;if(V%4)var R=W[q];else var R=W[q-4];V<4||q<=4?L[V]=R:L[V]=m[o[R>>>24]]^b[o[R>>>16&255]]^x[o[R>>>8&255]]^f[o[R&255]]}}},encryptBlock:function(T,E){this._doCryptBlock(T,E,this._keySchedule,c,u,d,h,o)},decryptBlock:function(T,E){var I=T[E+1];T[E+1]=T[E+3],T[E+3]=I,this._doCryptBlock(T,E,this._invKeySchedule,m,b,x,f,l);var I=T[E+1];T[E+1]=T[E+3],T[E+3]=I},_doCryptBlock:function(T,E,I,D,F,W,q,R){for(var L=this._nRounds,V=T[E]^I[0],k=T[E+1]^I[1],U=T[E+2]^I[2],Z=T[E+3]^I[3],J=4,ie=1;ie<L;ie++){var ne=D[V>>>24]^F[k>>>16&255]^W[U>>>8&255]^q[Z&255]^I[J++],de=D[k>>>24]^F[U>>>16&255]^W[Z>>>8&255]^q[V&255]^I[J++],ue=D[U>>>24]^F[Z>>>16&255]^W[V>>>8&255]^q[k&255]^I[J++],v=D[Z>>>24]^F[V>>>16&255]^W[k>>>8&255]^q[U&255]^I[J++];V=ne,k=de,U=ue,Z=v}var ne=(R[V>>>24]<<24|R[k>>>16&255]<<16|R[U>>>8&255]<<8|R[Z&255])^I[J++],de=(R[k>>>24]<<24|R[U>>>16&255]<<16|R[Z>>>8&255]<<8|R[V&255])^I[J++],ue=(R[U>>>24]<<24|R[Z>>>16&255]<<16|R[V>>>8&255]<<8|R[k&255])^I[J++],v=(R[Z>>>24]<<24|R[V>>>16&255]<<16|R[k>>>8&255]<<8|R[U&255])^I[J++];T[E]=ne,T[E+1]=de,T[E+2]=ue,T[E+3]=v},keySize:256/32});n.AES=i._createHelper(A)}(),t.AES})}(Qg)),Bs}var Rs={},e2={get exports(){return Rs},set exports(r){Rs=r}},td;function t2(){return td||(td=1,function(r,e){(function(t,n,a){r.exports=n(ke(),ca(),la(),Er(),ut())})(be,function(t){return function(){var n=t,a=n.lib,i=a.WordArray,s=a.BlockCipher,o=n.algo,l=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],c=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],u=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],d=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],h=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],m=o.DES=s.extend({_doReset:function(){for(var w=this._key,A=w.words,T=[],E=0;E<56;E++){var I=l[E]-1;T[E]=A[I>>>5]>>>31-I%32&1}for(var D=this._subKeys=[],F=0;F<16;F++){for(var W=D[F]=[],q=u[F],E=0;E<24;E++)W[E/6|0]|=T[(c[E]-1+q)%28]<<31-E%6,W[4+(E/6|0)]|=T[28+(c[E+24]-1+q)%28]<<31-E%6;W[0]=W[0]<<1|W[0]>>>31;for(var E=1;E<7;E++)W[E]=W[E]>>>(E-1)*4+3;W[7]=W[7]<<5|W[7]>>>27}for(var R=this._invSubKeys=[],E=0;E<16;E++)R[E]=D[15-E]},encryptBlock:function(w,A){this._doCryptBlock(w,A,this._subKeys)},decryptBlock:function(w,A){this._doCryptBlock(w,A,this._invSubKeys)},_doCryptBlock:function(w,A,T){this._lBlock=w[A],this._rBlock=w[A+1],b.call(this,4,252645135),b.call(this,16,65535),x.call(this,2,858993459),x.call(this,8,16711935),b.call(this,1,1431655765);for(var E=0;E<16;E++){for(var I=T[E],D=this._lBlock,F=this._rBlock,W=0,q=0;q<8;q++)W|=d[q][((F^I[q])&h[q])>>>0];this._lBlock=F,this._rBlock=D^W}var R=this._lBlock;this._lBlock=this._rBlock,this._rBlock=R,b.call(this,1,1431655765),x.call(this,8,16711935),x.call(this,2,858993459),b.call(this,16,65535),b.call(this,4,252645135),w[A]=this._lBlock,w[A+1]=this._rBlock},keySize:64/32,ivSize:64/32,blockSize:64/32});function b(w,A){var T=(this._lBlock>>>w^this._rBlock)&A;this._rBlock^=T,this._lBlock^=T<<w}function x(w,A){var T=(this._rBlock>>>w^this._lBlock)&A;this._lBlock^=T,this._rBlock^=T<<w}n.DES=s._createHelper(m);var f=o.TripleDES=s.extend({_doReset:function(){var w=this._key,A=w.words;this._des1=m.createEncryptor(i.create(A.slice(0,2))),this._des2=m.createEncryptor(i.create(A.slice(2,4))),this._des3=m.createEncryptor(i.create(A.slice(4,6)))},encryptBlock:function(w,A){this._des1.encryptBlock(w,A),this._des2.decryptBlock(w,A),this._des3.encryptBlock(w,A)},decryptBlock:function(w,A){this._des3.decryptBlock(w,A),this._des2.encryptBlock(w,A),this._des1.decryptBlock(w,A)},keySize:192/32,ivSize:64/32,blockSize:64/32});n.TripleDES=s._createHelper(f)}(),t.TripleDES})}(e2)),Rs}var Ms={},n2={get exports(){return Ms},set exports(r){Ms=r}},nd;function r2(){return nd||(nd=1,function(r,e){(function(t,n,a){r.exports=n(ke(),ca(),la(),Er(),ut())})(be,function(t){return function(){var n=t,a=n.lib,i=a.StreamCipher,s=n.algo,o=s.RC4=i.extend({_doReset:function(){for(var u=this._key,d=u.words,h=u.sigBytes,m=this._S=[],b=0;b<256;b++)m[b]=b;for(var b=0,x=0;b<256;b++){var f=b%h,w=d[f>>>2]>>>24-f%4*8&255;x=(x+m[b]+w)%256;var A=m[b];m[b]=m[x],m[x]=A}this._i=this._j=0},_doProcessBlock:function(u,d){u[d]^=l.call(this)},keySize:256/32,ivSize:0});function l(){for(var u=this._S,d=this._i,h=this._j,m=0,b=0;b<4;b++){d=(d+1)%256,h=(h+u[d])%256;var x=u[d];u[d]=u[h],u[h]=x,m|=u[(u[d]+u[h])%256]<<24-b*8}return this._i=d,this._j=h,m}n.RC4=i._createHelper(o);var c=s.RC4Drop=o.extend({cfg:o.cfg.extend({drop:192}),_doReset:function(){o._doReset.call(this);for(var u=this.cfg.drop;u>0;u--)l.call(this)}});n.RC4Drop=i._createHelper(c)}(),t.RC4})}(n2)),Ms}var Ds={},a2={get exports(){return Ds},set exports(r){Ds=r}},rd;function i2(){return rd||(rd=1,function(r,e){(function(t,n,a){r.exports=n(ke(),ca(),la(),Er(),ut())})(be,function(t){return function(){var n=t,a=n.lib,i=a.StreamCipher,s=n.algo,o=[],l=[],c=[],u=s.Rabbit=i.extend({_doReset:function(){for(var h=this._key.words,m=this.cfg.iv,b=0;b<4;b++)h[b]=(h[b]<<8|h[b]>>>24)&16711935|(h[b]<<24|h[b]>>>8)&4278255360;var x=this._X=[h[0],h[3]<<16|h[2]>>>16,h[1],h[0]<<16|h[3]>>>16,h[2],h[1]<<16|h[0]>>>16,h[3],h[2]<<16|h[1]>>>16],f=this._C=[h[2]<<16|h[2]>>>16,h[0]&4294901760|h[1]&65535,h[3]<<16|h[3]>>>16,h[1]&4294901760|h[2]&65535,h[0]<<16|h[0]>>>16,h[2]&4294901760|h[3]&65535,h[1]<<16|h[1]>>>16,h[3]&4294901760|h[0]&65535];this._b=0;for(var b=0;b<4;b++)d.call(this);for(var b=0;b<8;b++)f[b]^=x[b+4&7];if(m){var w=m.words,A=w[0],T=w[1],E=(A<<8|A>>>24)&16711935|(A<<24|A>>>8)&4278255360,I=(T<<8|T>>>24)&16711935|(T<<24|T>>>8)&4278255360,D=E>>>16|I&4294901760,F=I<<16|E&65535;f[0]^=E,f[1]^=D,f[2]^=I,f[3]^=F,f[4]^=E,f[5]^=D,f[6]^=I,f[7]^=F;for(var b=0;b<4;b++)d.call(this)}},_doProcessBlock:function(h,m){var b=this._X;d.call(this),o[0]=b[0]^b[5]>>>16^b[3]<<16,o[1]=b[2]^b[7]>>>16^b[5]<<16,o[2]=b[4]^b[1]>>>16^b[7]<<16,o[3]=b[6]^b[3]>>>16^b[1]<<16;for(var x=0;x<4;x++)o[x]=(o[x]<<8|o[x]>>>24)&16711935|(o[x]<<24|o[x]>>>8)&4278255360,h[m+x]^=o[x]},blockSize:128/32,ivSize:64/32});function d(){for(var h=this._X,m=this._C,b=0;b<8;b++)l[b]=m[b];m[0]=m[0]+1295307597+this._b|0,m[1]=m[1]+3545052371+(m[0]>>>0<l[0]>>>0?1:0)|0,m[2]=m[2]+886263092+(m[1]>>>0<l[1]>>>0?1:0)|0,m[3]=m[3]+1295307597+(m[2]>>>0<l[2]>>>0?1:0)|0,m[4]=m[4]+3545052371+(m[3]>>>0<l[3]>>>0?1:0)|0,m[5]=m[5]+886263092+(m[4]>>>0<l[4]>>>0?1:0)|0,m[6]=m[6]+1295307597+(m[5]>>>0<l[5]>>>0?1:0)|0,m[7]=m[7]+3545052371+(m[6]>>>0<l[6]>>>0?1:0)|0,this._b=m[7]>>>0<l[7]>>>0?1:0;for(var b=0;b<8;b++){var x=h[b]+m[b],f=x&65535,w=x>>>16,A=((f*f>>>17)+f*w>>>15)+w*w,T=((x&4294901760)*x|0)+((x&65535)*x|0);c[b]=A^T}h[0]=c[0]+(c[7]<<16|c[7]>>>16)+(c[6]<<16|c[6]>>>16)|0,h[1]=c[1]+(c[0]<<8|c[0]>>>24)+c[7]|0,h[2]=c[2]+(c[1]<<16|c[1]>>>16)+(c[0]<<16|c[0]>>>16)|0,h[3]=c[3]+(c[2]<<8|c[2]>>>24)+c[1]|0,h[4]=c[4]+(c[3]<<16|c[3]>>>16)+(c[2]<<16|c[2]>>>16)|0,h[5]=c[5]+(c[4]<<8|c[4]>>>24)+c[3]|0,h[6]=c[6]+(c[5]<<16|c[5]>>>16)+(c[4]<<16|c[4]>>>16)|0,h[7]=c[7]+(c[6]<<8|c[6]>>>24)+c[5]|0}n.Rabbit=i._createHelper(u)}(),t.Rabbit})}(a2)),Ds}var Fs={},s2={get exports(){return Fs},set exports(r){Fs=r}},ad;function o2(){return ad||(ad=1,function(r,e){(function(t,n,a){r.exports=n(ke(),ca(),la(),Er(),ut())})(be,function(t){return function(){var n=t,a=n.lib,i=a.StreamCipher,s=n.algo,o=[],l=[],c=[],u=s.RabbitLegacy=i.extend({_doReset:function(){var h=this._key.words,m=this.cfg.iv,b=this._X=[h[0],h[3]<<16|h[2]>>>16,h[1],h[0]<<16|h[3]>>>16,h[2],h[1]<<16|h[0]>>>16,h[3],h[2]<<16|h[1]>>>16],x=this._C=[h[2]<<16|h[2]>>>16,h[0]&4294901760|h[1]&65535,h[3]<<16|h[3]>>>16,h[1]&4294901760|h[2]&65535,h[0]<<16|h[0]>>>16,h[2]&4294901760|h[3]&65535,h[1]<<16|h[1]>>>16,h[3]&4294901760|h[0]&65535];this._b=0;for(var f=0;f<4;f++)d.call(this);for(var f=0;f<8;f++)x[f]^=b[f+4&7];if(m){var w=m.words,A=w[0],T=w[1],E=(A<<8|A>>>24)&16711935|(A<<24|A>>>8)&4278255360,I=(T<<8|T>>>24)&16711935|(T<<24|T>>>8)&4278255360,D=E>>>16|I&4294901760,F=I<<16|E&65535;x[0]^=E,x[1]^=D,x[2]^=I,x[3]^=F,x[4]^=E,x[5]^=D,x[6]^=I,x[7]^=F;for(var f=0;f<4;f++)d.call(this)}},_doProcessBlock:function(h,m){var b=this._X;d.call(this),o[0]=b[0]^b[5]>>>16^b[3]<<16,o[1]=b[2]^b[7]>>>16^b[5]<<16,o[2]=b[4]^b[1]>>>16^b[7]<<16,o[3]=b[6]^b[3]>>>16^b[1]<<16;for(var x=0;x<4;x++)o[x]=(o[x]<<8|o[x]>>>24)&16711935|(o[x]<<24|o[x]>>>8)&4278255360,h[m+x]^=o[x]},blockSize:128/32,ivSize:64/32});function d(){for(var h=this._X,m=this._C,b=0;b<8;b++)l[b]=m[b];m[0]=m[0]+1295307597+this._b|0,m[1]=m[1]+3545052371+(m[0]>>>0<l[0]>>>0?1:0)|0,m[2]=m[2]+886263092+(m[1]>>>0<l[1]>>>0?1:0)|0,m[3]=m[3]+1295307597+(m[2]>>>0<l[2]>>>0?1:0)|0,m[4]=m[4]+3545052371+(m[3]>>>0<l[3]>>>0?1:0)|0,m[5]=m[5]+886263092+(m[4]>>>0<l[4]>>>0?1:0)|0,m[6]=m[6]+1295307597+(m[5]>>>0<l[5]>>>0?1:0)|0,m[7]=m[7]+3545052371+(m[6]>>>0<l[6]>>>0?1:0)|0,this._b=m[7]>>>0<l[7]>>>0?1:0;for(var b=0;b<8;b++){var x=h[b]+m[b],f=x&65535,w=x>>>16,A=((f*f>>>17)+f*w>>>15)+w*w,T=((x&4294901760)*x|0)+((x&65535)*x|0);c[b]=A^T}h[0]=c[0]+(c[7]<<16|c[7]>>>16)+(c[6]<<16|c[6]>>>16)|0,h[1]=c[1]+(c[0]<<8|c[0]>>>24)+c[7]|0,h[2]=c[2]+(c[1]<<16|c[1]>>>16)+(c[0]<<16|c[0]>>>16)|0,h[3]=c[3]+(c[2]<<8|c[2]>>>24)+c[1]|0,h[4]=c[4]+(c[3]<<16|c[3]>>>16)+(c[2]<<16|c[2]>>>16)|0,h[5]=c[5]+(c[4]<<8|c[4]>>>24)+c[3]|0,h[6]=c[6]+(c[5]<<16|c[5]>>>16)+(c[4]<<16|c[4]>>>16)|0,h[7]=c[7]+(c[6]<<8|c[6]>>>24)+c[5]|0}n.RabbitLegacy=i._createHelper(u)}(),t.RabbitLegacy})}(s2)),Fs}(function(r,e){(function(t,n,a){r.exports=n(ke(),Wo(),ug(),pg(),ca(),la(),cl(),ra,xg(),op(),wg(),Tg(),Cg(),ll(),kg(),Er(),ut(),Bg(),Mg(),Fg(),Wg(),Lg(),Hg(),jg(),Vg(),Kg(),Zg(),Jg(),Xg(),t2(),r2(),i2(),o2())})(be,function(t){return t})})(og);var c2=be&&be.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(oa,"__esModule",{value:!0});oa.Base=void 0;const Wt=Fo,ic=c2(Ec);class jn{print(){jn.print(this)}_bufferIndexOf(e,t){for(let n=0;n<e.length;n++)if(t.equals(e[n]))return n;return-1}static bufferify(e){if(!Wt.Buffer.isBuffer(e)){if(typeof e=="object"&&e.words)return Wt.Buffer.from(e.toString(ic.default.enc.Hex),"hex");if(jn.isHexString(e))return Wt.Buffer.from(e.replace(/^0x/,""),"hex");if(typeof e=="string")return Wt.Buffer.from(e);if(typeof e=="number"){let t=e.toString();return t.length%2&&(t=`0${t}`),Wt.Buffer.from(t,"hex")}else if(ArrayBuffer.isView(e))return Wt.Buffer.from(e.buffer,e.byteOffset,e.byteLength)}return e}static isHexString(e){return typeof e=="string"&&/^(0x)?[0-9A-Fa-f]*$/.test(e)}static print(e){console.log(e.toString())}bufferToHex(e,t=!0){return jn.bufferToHex(e,t)}static bufferToHex(e,t=!0){return`${t?"0x":""}${(e||Wt.Buffer.alloc(0)).toString("hex")}`}bufferify(e){return jn.bufferify(e)}bufferifyFn(e){return t=>{const n=e(t);return Wt.Buffer.isBuffer(n)?n:this._isHexString(n)?Wt.Buffer.from(n.replace("0x",""),"hex"):typeof n=="string"?Wt.Buffer.from(n):ArrayBuffer.isView(n)?Wt.Buffer.from(n.buffer,n.byteOffset,n.byteLength):Wt.Buffer.from(e(ic.default.enc.Hex.parse(t.toString("hex"))).toString(ic.default.enc.Hex),"hex")}}_isHexString(e){return jn.isHexString(e)}_log2(e){return e===1?0:1+this._log2(e/2|0)}_zip(e,t){return e.map((n,a)=>[n,t[a]])}}oa.Base=jn;oa.default=jn;var Oo=be&&be.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ui,"__esModule",{value:!0});ui.MerkleTree=void 0;const Fe=Fo,yn=Oo(rg),id=Oo(ra),l2=Oo(Cc),u2=Oo(oa);class Lt extends u2.default{constructor(e,t=id.default,n={}){if(super(),this.duplicateOdd=!1,this.hashLeaves=!1,this.isBitcoinTree=!1,this.leaves=[],this.layers=[],this.sortLeaves=!1,this.sortPairs=!1,this.sort=!1,this.fillDefaultHash=null,this.isBitcoinTree=!!n.isBitcoinTree,this.hashLeaves=!!n.hashLeaves,this.sortLeaves=!!n.sortLeaves,this.sortPairs=!!n.sortPairs,n.fillDefaultHash)if(typeof n.fillDefaultHash=="function")this.fillDefaultHash=n.fillDefaultHash;else if(Fe.Buffer.isBuffer(n.fillDefaultHash)||typeof n.fillDefaultHash=="string")this.fillDefaultHash=(a,i)=>n.fillDefaultHash;else throw new Error('method "fillDefaultHash" must be a function, Buffer, or string');this.sort=!!n.sort,this.sort&&(this.sortLeaves=!0,this.sortPairs=!0),this.duplicateOdd=!!n.duplicateOdd,this.hashFn=this.bufferifyFn(t),this.processLeaves(e)}processLeaves(e){if(this.hashLeaves&&(e=e.map(this.hashFn)),this.leaves=e.map(this.bufferify),this.sortLeaves&&(this.leaves=this.leaves.sort(Fe.Buffer.compare)),this.fillDefaultHash)for(let t=0;t<Math.pow(2,Math.ceil(Math.log2(this.leaves.length)));t++)t>=this.leaves.length&&this.leaves.push(this.bufferify(this.fillDefaultHash(t,this.hashFn)));this.layers=[this.leaves],this._createHashes(this.leaves)}_createHashes(e){for(;e.length>1;){const t=this.layers.length;this.layers.push([]);for(let n=0;n<e.length;n+=2){if(n+1===e.length&&e.length%2===1){let c=e[e.length-1],u=c;if(this.isBitcoinTree){c=Fe.Buffer.concat([yn.default(c),yn.default(c)]),u=this.hashFn(c),u=yn.default(this.hashFn(u)),this.layers[t].push(u);continue}else if(!this.duplicateOdd){this.layers[t].push(e[n]);continue}}const a=e[n],i=n+1===e.length?a:e[n+1];let s=null,o=null;this.isBitcoinTree?o=[yn.default(a),yn.default(i)]:o=[a,i],this.sortPairs&&o.sort(Fe.Buffer.compare),s=Fe.Buffer.concat(o);let l=this.hashFn(s);this.isBitcoinTree&&(l=yn.default(this.hashFn(l))),this.layers[t].push(l)}e=this.layers[t]}}addLeaf(e,t=!1){t&&(e=this.hashFn(e)),this.processLeaves(this.leaves.concat(e))}addLeaves(e,t=!1){t&&(e=e.map(this.hashFn)),this.processLeaves(this.leaves.concat(e))}getLeaves(e){return Array.isArray(e)?(this.hashLeaves&&(e=e.map(this.hashFn),this.sortLeaves&&(e=e.sort(Fe.Buffer.compare))),this.leaves.filter(t=>this._bufferIndexOf(e,t)!==-1)):this.leaves}getLeaf(e){return e<0||e>this.leaves.length-1?Fe.Buffer.from([]):this.leaves[e]}getLeafIndex(e){e=this.bufferify(e);const t=this.getLeaves();for(let n=0;n<t.length;n++)if(t[n].equals(e))return n;return-1}getLeafCount(){return this.leaves.length}getHexLeaves(){return this.leaves.map(e=>this.bufferToHex(e))}static marshalLeaves(e){return JSON.stringify(e.map(t=>Lt.bufferToHex(t)),null,2)}static unmarshalLeaves(e){let t=null;if(typeof e=="string")t=JSON.parse(e);else if(e instanceof Object)t=e;else throw new Error("Expected type of string or object");if(!t)return[];if(!Array.isArray(t))throw new Error("Expected JSON string to be array");return t.map(Lt.bufferify)}getLayers(){return this.layers}getHexLayers(){return this.layers.reduce((e,t)=>(Array.isArray(t)?e.push(t.map(n=>this.bufferToHex(n))):e.push(t),e),[])}getLayersFlat(){const e=this.layers.reduce((t,n)=>(Array.isArray(n)?t.unshift(...n):t.unshift(n),t),[]);return e.unshift(Fe.Buffer.from([0])),e}getHexLayersFlat(){return this.getLayersFlat().map(e=>this.bufferToHex(e))}getLayerCount(){return this.getLayers().length}getRoot(){return this.layers.length===0?Fe.Buffer.from([]):this.layers[this.layers.length-1][0]||Fe.Buffer.from([])}getHexRoot(){return this.bufferToHex(this.getRoot())}getProof(e,t){if(typeof e>"u")throw new Error("leaf is required");e=this.bufferify(e);const n=[];if(!Number.isInteger(t)){t=-1;for(let a=0;a<this.leaves.length;a++)Fe.Buffer.compare(e,this.leaves[a])===0&&(t=a)}if(t<=-1)return[];for(let a=0;a<this.layers.length;a++){const i=this.layers[a],s=t%2,o=s?t-1:this.isBitcoinTree&&t===i.length-1&&a<this.layers.length-1?t:t+1;o<i.length&&n.push({position:s?"left":"right",data:i[o]}),t=t/2|0}return n}getHexProof(e,t){return this.getProof(e,t).map(n=>this.bufferToHex(n.data))}getPositionalHexProof(e,t){return this.getProof(e,t).map(n=>[n.position==="left"?0:1,this.bufferToHex(n.data)])}static marshalProof(e){const t=e.map(n=>typeof n=="string"?n:Fe.Buffer.isBuffer(n)?Lt.bufferToHex(n):{position:n.position,data:Lt.bufferToHex(n.data)});return JSON.stringify(t,null,2)}static unmarshalProof(e){let t=null;if(typeof e=="string")t=JSON.parse(e);else if(e instanceof Object)t=e;else throw new Error("Expected type of string or object");if(!t)return[];if(!Array.isArray(t))throw new Error("Expected JSON string to be array");return t.map(n=>{if(typeof n=="string")return Lt.bufferify(n);if(n instanceof Object)return{position:n.position,data:Lt.bufferify(n.data)};throw new Error("Expected item to be of type string or object")})}getProofIndices(e,t){const n=Math.pow(2,t);let a=new Set;for(const c of e){let u=n+c;for(;u>1;)a.add(u^1),u=u/2|0}const i=e.map(c=>n+c),s=Array.from(a).sort((c,u)=>c-u).reverse();a=i.concat(s);const o=new Set,l=[];for(let c of a)if(!o.has(c))for(l.push(c);c>1&&(o.add(c),!!o.has(c^1));)c=c/2|0;return l.filter(c=>!e.includes(c-n))}getProofIndicesForUnevenTree(e,t){const n=Math.ceil(Math.log2(t)),a=[];for(let o=0;o<n;o++)t%2!==0&&a.push({index:o,leavesCount:t}),t=Math.ceil(t/2);const i=[];let s=e;for(let o=0;o<n;o++){let c=s.map(d=>d%2===0?d+1:d-1).filter(d=>!s.includes(d));const u=a.find(({index:d})=>d===o);u&&s.includes(u.leavesCount-1)&&(c=c.slice(0,-1)),i.push(c),s=[...new Set(s.map(d=>d%2===0?d/2:d%2===0?(d+1)/2:(d-1)/2))]}return i}getMultiProof(e,t){if(t||(t=e,e=this.getLayersFlat()),this.isUnevenTree()&&t.every(Number.isInteger))return this.getMultiProofForUnevenTree(t);if(!t.every(Number.isInteger)){let a=t;this.sortPairs&&(a=a.sort(Fe.Buffer.compare));let i=a.map(c=>this._bufferIndexOf(this.leaves,c)).sort((c,u)=>c===u?0:c>u?1:-1);if(!i.every(c=>c!==-1))throw new Error("Element does not exist in Merkle tree");const s=[],o=[];let l=[];for(let c=0;c<this.layers.length;c++){const u=this.layers[c];for(let d=0;d<i.length;d++){const h=i[d],m=this._getPairNode(u,h);s.push(u[h]),m&&o.push(m),l.push(h/2|0)}i=l.filter((d,h,m)=>m.indexOf(d)===h),l=[]}return o.filter(c=>!s.includes(c))}return this.getProofIndices(t,this._log2(e.length/2|0)).map(a=>e[a])}getMultiProofForUnevenTree(e,t){t||(t=e,e=this.getLayers());let n=[],a=t;for(const i of e){const s=[];for(const l of a){if(l%2===0){const u=l+1;if(!a.includes(u)&&i[u]){s.push(i[u]);continue}}const c=l-1;if(!a.includes(c)&&i[c]){s.push(i[c]);continue}}n=n.concat(s);const o=new Set;for(const l of a){if(l%2===0){o.add(l/2);continue}if(l%2===0){o.add((l+1)/2);continue}o.add((l-1)/2)}a=Array.from(o)}return n}getHexMultiProof(e,t){return this.getMultiProof(e,t).map(n=>this.bufferToHex(n))}getProofFlags(e,t){if(!Array.isArray(e)||e.length<=0)throw new Error("Invalid Inputs!");let n;if(e.every(Number.isInteger)?n=e.sort((o,l)=>o===l?0:o>l?1:-1):n=e.map(o=>this._bufferIndexOf(this.leaves,o)).sort((o,l)=>o===l?0:o>l?1:-1),!n.every(o=>o!==-1))throw new Error("Element does not exist in Merkle tree");const a=t.map(o=>this.bufferify(o)),i=[],s=[];for(let o=0;o<this.layers.length;o++){const l=this.layers[o];n=n.reduce((c,u)=>{if(!i.includes(l[u])){const h=this._getPairNode(l,u),m=a.includes(l[u])||a.includes(h);h&&s.push(!m),i.push(l[u]),i.push(h)}return c.push(u/2|0),c},[])}return s}verify(e,t,n){let a=this.bufferify(t);if(n=this.bufferify(n),!Array.isArray(e)||!t||!n)return!1;for(let i=0;i<e.length;i++){const s=e[i];let o=null,l=null;if(typeof s=="string")o=this.bufferify(s),l=!0;else if(Array.isArray(s))l=s[0]===0,o=this.bufferify(s[1]);else if(Fe.Buffer.isBuffer(s))o=s,l=!0;else if(s instanceof Object)o=this.bufferify(s.data),l=s.position==="left";else throw new Error("Expected node to be of type string or object");const c=[];this.isBitcoinTree?(c.push(yn.default(a)),c[l?"unshift":"push"](yn.default(o)),a=this.hashFn(Fe.Buffer.concat(c)),a=yn.default(this.hashFn(a))):this.sortPairs?Fe.Buffer.compare(a,o)===-1?(c.push(a,o),a=this.hashFn(Fe.Buffer.concat(c))):(c.push(o,a),a=this.hashFn(Fe.Buffer.concat(c))):(c.push(a),c[l?"unshift":"push"](o),a=this.hashFn(Fe.Buffer.concat(c)))}return Fe.Buffer.compare(a,n)===0}verifyMultiProof(e,t,n,a,i){if(this.isUnevenTree())return this.verifyMultiProofForUnevenTree(e,t,n,a,i);const o=Math.ceil(Math.log2(a));e=this.bufferify(e),n=n.map(d=>this.bufferify(d)),i=i.map(d=>this.bufferify(d));const l={};for(const[d,h]of this._zip(t,n))l[Math.pow(2,o)+d]=h;for(const[d,h]of this._zip(this.getProofIndices(t,o),i))l[d]=h;let c=Object.keys(l).map(d=>+d).sort((d,h)=>d-h);c=c.slice(0,c.length-1);let u=0;for(;u<c.length;){const d=c[u];if(d>=2&&{}.hasOwnProperty.call(l,d^1)){let h=[l[d-d%2],l[d-d%2+1]];this.sortPairs&&(h=h.sort(Fe.Buffer.compare));const m=h[1]?this.hashFn(Fe.Buffer.concat(h)):h[0];l[d/2|0]=m,c.push(d/2|0)}u+=1}return!t.length||{}.hasOwnProperty.call(l,1)&&l[1].equals(e)}verifyMultiProofWithFlags(e,t,n,a){e=this.bufferify(e),t=t.map(this.bufferify),n=n.map(this.bufferify);const i=t.length,s=a.length,o=[];let l=0,c=0,u=0;for(let d=0;d<s;d++){const h=a[d]?l<i?t[l++]:o[c++]:n[u++],m=l<i?t[l++]:o[c++],b=[h,m].sort(Fe.Buffer.compare);o[d]=this.hashFn(Fe.Buffer.concat(b))}return Fe.Buffer.compare(o[s-1],e)===0}verifyMultiProofForUnevenTree(e,t,n,a,i){e=this.bufferify(e),n=n.map(o=>this.bufferify(o)),i=i.map(o=>this.bufferify(o));const s=this.calculateRootForUnevenTree(t,n,a,i);return e.equals(s)}getDepth(){return this.getLayers().length-1}getLayersAsObject(){const e=this.getLayers().map(n=>n.map(a=>this.bufferToHex(a,!1))),t=[];for(let n=0;n<e.length;n++){const a=[];for(let i=0;i<e[n].length;i++){const s={[e[n][i]]:null};if(t.length){s[e[n][i]]={};const o=t.shift(),l=Object.keys(o)[0];if(s[e[n][i]][l]=o[l],t.length){const c=t.shift(),u=Object.keys(c)[0];s[e[n][i]][u]=c[u]}}a.push(s)}t.push(...a)}return t[0]}static verify(e,t,n,a=id.default,i={}){return new Lt([],a,i).verify(e,t,n)}static getMultiProof(e,t){return new Lt([]).getMultiProof(e,t)}resetTree(){this.leaves=[],this.layers=[]}_getPairNode(e,t){const n=t%2===0?t+1:t-1;return n<e.length?e[n]:null}_toTreeString(){const e=this.getLayersAsObject();return l2.default.asTree(e,!0)}toString(){return this._toTreeString()}isUnevenTree(e){const t=(e==null?void 0:e.length)||this.getDepth();return!this.isPowOf2(t)}isPowOf2(e){return e&&!(e&e-1)}calculateRootForUnevenTree(e,t,n,a){const i=this._zip(e,t).sort(([d],[h])=>d-h),s=i.map(([d])=>d),o=this.getProofIndicesForUnevenTree(s,n);let l=0;const c=[];for(let d=0;d<o.length;d++){const h=o[d],m=l;l+=h.length,c[d]=this._zip(h,a.slice(m,l))}const u=[i];for(let d=0;d<c.length;d++){const h=c[d].concat(u[d]).sort(([f],[w])=>f-w).map(([,f])=>f),m=u[d].map(([f])=>f),b=[...new Set(m.map(f=>f%2===0?f/2:f%2===0?(f+1)/2:(f-1)/2))],x=[];for(let f=0;f<b.length;f++){const w=b[f],A=h[f*2],T=h[f*2+1],E=T?this.hashFn(Fe.Buffer.concat([A,T])):A;x.push([w,E])}u.push(x)}return u[u.length-1][0][1]}}ui.MerkleTree=Lt;typeof window<"u"&&(window.MerkleTree=Lt);ui.default=Lt;var di={},cp=be&&be.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(di,"__esModule",{value:!0});di.MerkleMountainRange=void 0;const xa=Fo,d2=cp(ra),p2=cp(oa);class lp extends p2.default{constructor(e=d2.default,t=[],n,a,i){super(),this.root=xa.Buffer.alloc(0),this.size=0,this.width=0,this.hashes={},this.data={},t=t.map(this.bufferify),this.hashFn=this.bufferifyFn(e),this.hashLeafFn=n,this.peakBaggingFn=a,this.hashBranchFn=i;for(const s of t)this.append(s)}append(e){e=this.bufferify(e);const t=this.hashFn(e),n=this.bufferToHex(t);(!this.data[n]||this.bufferToHex(this.hashFn(this.data[n]))!==n)&&(this.data[n]=e);const a=this.hashLeaf(this.size+1,t);this.hashes[this.size+1]=a,this.width+=1;const i=this.getPeakIndexes(this.width);this.size=this.getSize(this.width);const s=[];for(let o=0;o<i.length;o++)s[o]=this._getOrCreateNode(i[o]);this.root=this.peakBagging(this.width,s)}hashLeaf(e,t){return t=this.bufferify(t),this.hashLeafFn?this.bufferify(this.hashLeafFn(e,t)):this.hashFn(xa.Buffer.concat([this.bufferify(e),t]))}hashBranch(e,t,n){return this.hashBranchFn?this.bufferify(this.hashBranchFn(e,t,n)):this.hashFn(xa.Buffer.concat([this.bufferify(e),this.bufferify(t),this.bufferify(n)]))}getPeaks(){const e=this.getPeakIndexes(this.width),t=[];for(let n=0;n<e.length;n++)t[n]=this.hashes[e[n]];return t}getLeafIndex(e){return e%2===1?this.getSize(e):this.getSize(e-1)+1}getPeakIndexes(e){const t=this.numOfPeaks(e),n=[];let a=0,i=0;for(let s=255;s>0&&!(e&1<<s-1&&(i=i+(1<<s)-1,n[a++]=i,n.length>=t));s--);if(a!==n.length)throw new Error("invalid bit calculation");return n}numOfPeaks(e){let t=e,n=0;for(;t>0;)t%2===1&&n++,t=t>>1;return n}peakBagging(e,t){const n=this.getSize(e);if(this.numOfPeaks(e)!==t.length)throw new Error("received invalid number of peaks");return e===0&&!t.length?xa.Buffer.alloc(0):this.peakBaggingFn?this.bufferify(this.peakBaggingFn(n,t)):this.hashFn(xa.Buffer.concat([this.bufferify(n),...t.map(this.bufferify)]))}getSize(e){return(e<<1)-this.numOfPeaks(e)}getRoot(){return this.root}getHexRoot(){return this.bufferToHex(this.getRoot())}getNode(e){return this.hashes[e]}mountainHeight(e){let t=1;for(;1<<t<=e+t;)t++;return t-1}heightAt(e){let t=e,n=0,a=0;for(;t>n;)t-=(1<<a)-1,a=this.mountainHeight(t),n=(1<<a)-1;return a-(n-t)}isLeaf(e){return this.heightAt(e)===1}getChildren(e){const t=e-(1<<this.heightAt(e)-1),n=e-1;if(t===n)throw new Error("not a parent");return[t,n]}getMerkleProof(e){if(e>this.size)throw new Error("out of range");if(!this.isLeaf(e))throw new Error("not a leaf");const t=this.root,n=this.width,a=this.getPeakIndexes(this.width),i=[];let s=0;for(let d=0;d<a.length;d++)i[d]=this.hashes[a[d]],a[d]>=e&&s===0&&(s=a[d]);let o=0,l=0,c=this.heightAt(s);const u=[];for(;s!==e;)c--,[o,l]=this.getChildren(s),s=e<=o?o:l,u[c-1]=this.hashes[e<=o?l:o];return{root:t,width:n,peakBagging:i,siblings:u}}verify(e,t,n,a,i,s){if(a=this.bufferify(a),this.getSize(t)<n)throw new Error("index is out of range");if(!e.equals(this.peakBagging(t,i)))throw new Error("invalid root hash from the peaks");let l=0,c;const u=this.getPeakIndexes(t);for(let f=0;f<u.length;f++)if(u[f]>=n){c=i[f],l=u[f];break}if(!c)throw new Error("target not found");let d=s.length+1;const h=new Array(d);let m=0,b=0;for(;d>0&&(h[--d]=l,l!==n);)[m,b]=this.getChildren(l),l=n>m?b:m;let x;for(;d<h.length;)l=h[d],d===0?x=this.hashLeaf(l,this.hashFn(a)):l-1===h[d-1]?x=this.hashBranch(l,s[d-1],x):x=this.hashBranch(l,x,s[d-1]),d++;if(!x.equals(c))throw new Error("hashed peak is invalid");return!0}peaksToPeakMap(e,t){const n={};let a=0,i=0,s=t.length;for(let o=1;o<=32;o++)a=32-o,i=1<<o-1,e&i?n[a]=t[--s]:n[a]=0;if(s!==0)throw new Error("invalid number of peaks");return n}peakMapToPeaks(e,t){const n=this.numOfPeaks(e),a=new Array(n);let i=0;for(let s=0;s<32;s++)t[s]!==0&&(a[i++]=t[s]);if(i!==n)throw new Error("invalid number of peaks");return a}peakUpdate(e,t,n){const a={},i=e+1;let s=this.getLeafIndex(i),o=this.hashLeaf(s,n),l=0,c=0,u=!1,d=!1,h=!1;for(let m=1;m<=32;m++)l=32-m,h?a[l]=t[l]:(c=1<<m-1,u=(e&c)!==0,d=(i&c)!==0,s++,u&&(o=this.hashBranch(s,t[l],o)),d?(u?a[l]=t[l]:a[l]=o,h=!0):a[l]=0);return a}rollUp(e,t,n,a){if(!e.equals(this.peakBagging(t,n)))throw new Error("invalid root hash from the peaks");let i=t,s=this.peaksToPeakMap(t,n);for(let o=0;o<a.length;o++)s=this.peakUpdate(i,s,a[o]),i++;return this.peakBagging(i,this.peakMapToPeaks(i,s))}_getOrCreateNode(e){if(e>this.size)throw new Error("out of range");if(!this.hashes[e]){const[t,n]=this.getChildren(e),a=this._getOrCreateNode(t),i=this._getOrCreateNode(n);this.hashes[e]=this.hashBranch(e,a,i)}return this.hashes[e]}}di.MerkleMountainRange=lp;di.default=lp;(function(r){var e=be&&be.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(r,"__esModule",{value:!0}),r.MerkleTree=void 0;const t=e(ui);r.MerkleTree=t.default;var n=di;Object.defineProperty(r,"MerkleMountainRange",{enumerable:!0,get:function(){return n.MerkleMountainRange}}),r.default=t.default})(Fi);var up=function r(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var n,a,i;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(a=n;a--!==0;)if(!r(e[a],t[a]))return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(a=n;a--!==0;)if(!Object.prototype.hasOwnProperty.call(t,i[a]))return!1;for(a=n;a--!==0;){var s=i[a];if(!r(e[s],t[s]))return!1}return!0}return e!==e&&t!==t};const f2=[{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_tokenId",type:"uint256"}],name:"tokenURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"}],h2=[{inputs:[{internalType:"uint256",name:"_id",type:"uint256"}],name:"uri",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"}],y2=[{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"index",type:"uint256"},{indexed:!1,internalType:"string",name:"revealedURI",type:"string"}],name:"TokenURIRevealed",type:"event"},{inputs:[{internalType:"bytes",name:"data",type:"bytes"},{internalType:"bytes",name:"key",type:"bytes"}],name:"encryptDecrypt",outputs:[{internalType:"bytes",name:"result",type:"bytes"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"uint256",name:"identifier",type:"uint256"}],name:"encryptedBaseURI",outputs:[{internalType:"bytes",name:"",type:"bytes"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"identifier",type:"uint256"},{internalType:"bytes",name:"key",type:"bytes"}],name:"reveal",outputs:[{internalType:"string",name:"revealedURI",type:"string"}],stateMutability:"nonpayable",type:"function"}],m2=[{inputs:[{internalType:"address",name:"_trustedForwarder",type:"address"},{internalType:"contract IContractPublisher",name:"_prevPublisher",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!0,internalType:"address",name:"publisher",type:"address"},{components:[{internalType:"string",name:"contractId",type:"string"},{internalType:"uint256",name:"publishTimestamp",type:"uint256"},{internalType:"string",name:"publishMetadataUri",type:"string"},{internalType:"bytes32",name:"bytecodeHash",type:"bytes32"},{internalType:"address",name:"implementation",type:"address"}],indexed:!1,internalType:"struct IContractPublisher.CustomContractInstance",name:"publishedContract",type:"tuple"}],name:"ContractPublished",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!0,internalType:"address",name:"publisher",type:"address"},{indexed:!0,internalType:"string",name:"contractId",type:"string"}],name:"ContractUnpublished",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"bool",name:"isPaused",type:"bool"}],name:"Paused",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"publisher",type:"address"},{indexed:!1,internalType:"string",name:"prevURI",type:"string"},{indexed:!1,internalType:"string",name:"newURI",type:"string"}],name:"PublisherProfileUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"previousAdminRole",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"newAdminRole",type:"bytes32"}],name:"RoleAdminChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleGranted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleRevoked",type:"event"},{inputs:[],name:"DEFAULT_ADMIN_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_publisher",type:"address"}],name:"getAllPublishedContracts",outputs:[{components:[{internalType:"string",name:"contractId",type:"string"},{internalType:"uint256",name:"publishTimestamp",type:"uint256"},{internalType:"string",name:"publishMetadataUri",type:"string"},{internalType:"bytes32",name:"bytecodeHash",type:"bytes32"},{internalType:"address",name:"implementation",type:"address"}],internalType:"struct IContractPublisher.CustomContractInstance[]",name:"published",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_publisher",type:"address"},{internalType:"string",name:"_contractId",type:"string"}],name:"getPublishedContract",outputs:[{components:[{internalType:"string",name:"contractId",type:"string"},{internalType:"uint256",name:"publishTimestamp",type:"uint256"},{internalType:"string",name:"publishMetadataUri",type:"string"},{internalType:"bytes32",name:"bytecodeHash",type:"bytes32"},{internalType:"address",name:"implementation",type:"address"}],internalType:"struct IContractPublisher.CustomContractInstance",name:"published",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_publisher",type:"address"},{internalType:"string",name:"_contractId",type:"string"}],name:"getPublishedContractVersions",outputs:[{components:[{internalType:"string",name:"contractId",type:"string"},{internalType:"uint256",name:"publishTimestamp",type:"uint256"},{internalType:"string",name:"publishMetadataUri",type:"string"},{internalType:"bytes32",name:"bytecodeHash",type:"bytes32"},{internalType:"address",name:"implementation",type:"address"}],internalType:"struct IContractPublisher.CustomContractInstance[]",name:"published",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"string",name:"compilerMetadataUri",type:"string"}],name:"getPublishedUriFromCompilerUri",outputs:[{internalType:"string[]",name:"publishedMetadataUris",type:"string[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"publisher",type:"address"}],name:"getPublisherProfileUri",outputs:[{internalType:"string",name:"uri",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleAdmin",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"uint256",name:"index",type:"uint256"}],name:"getRoleMember",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleMemberCount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"grantRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"hasRole",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"isPaused",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"forwarder",type:"address"}],name:"isTrustedForwarder",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes[]",name:"data",type:"bytes[]"}],name:"multicall",outputs:[{internalType:"bytes[]",name:"results",type:"bytes[]"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"prevPublisher",outputs:[{internalType:"contract IContractPublisher",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_publisher",type:"address"},{internalType:"string",name:"_contractId",type:"string"},{internalType:"string",name:"_publishMetadataUri",type:"string"},{internalType:"string",name:"_compilerMetadataUri",type:"string"},{internalType:"bytes32",name:"_bytecodeHash",type:"bytes32"},{internalType:"address",name:"_implementation",type:"address"}],name:"publishContract",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"renounceRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"revokeRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bool",name:"_pause",type:"bool"}],name:"setPause",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"publisher",type:"address"},{internalType:"string",name:"uri",type:"string"}],name:"setPublisherProfileUri",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_publisher",type:"address"},{internalType:"string",name:"_contractId",type:"string"}],name:"unpublishContract",outputs:[],stateMutability:"nonpayable",type:"function"}],x2=[{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"deployer",type:"address"},{indexed:!0,internalType:"address",name:"deployment",type:"address"},{indexed:!0,internalType:"uint256",name:"chainId",type:"uint256"},{indexed:!1,internalType:"string",name:"metadataUri",type:"string"}],name:"Added",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"deployer",type:"address"},{indexed:!0,internalType:"address",name:"deployment",type:"address"},{indexed:!0,internalType:"uint256",name:"chainId",type:"uint256"}],name:"Deleted",type:"event"},{inputs:[],name:"OPERATOR_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"_msgData",outputs:[{internalType:"bytes",name:"",type:"bytes"}],stateMutability:"view",type:"function"},{inputs:[],name:"_msgSender",outputs:[{internalType:"address",name:"sender",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_deployer",type:"address"},{internalType:"address",name:"_deployment",type:"address"},{internalType:"uint256",name:"_chainId",type:"uint256"},{internalType:"string",name:"metadataUri",type:"string"}],name:"add",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"contractType",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"pure",type:"function"},{inputs:[],name:"contractVersion",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"address",name:"_deployer",type:"address"}],name:"count",outputs:[{internalType:"uint256",name:"deploymentCount",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_deployer",type:"address"}],name:"getAll",outputs:[{components:[{internalType:"address",name:"deploymentAddress",type:"address"},{internalType:"uint256",name:"chainId",type:"uint256"},{internalType:"string",name:"metadataURI",type:"string"}],internalType:"struct ITWMultichainRegistry.Deployment[]",name:"allDeployments",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_chainId",type:"uint256"},{internalType:"address",name:"_deployment",type:"address"}],name:"getMetadataUri",outputs:[{internalType:"string",name:"metadataUri",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_deployer",type:"address"},{internalType:"address",name:"_deployment",type:"address"},{internalType:"uint256",name:"_chainId",type:"uint256"}],name:"remove",outputs:[],stateMutability:"nonpayable",type:"function"}],b2=[{inputs:[{internalType:"address",name:"_pluginMap",type:"address"},{internalType:"address[]",name:"_trustedForwarders",type:"address[]"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes4",name:"functionSelector",type:"bytes4"},{indexed:!0,internalType:"address",name:"pluginAddress",type:"address"}],name:"PluginAdded",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes4",name:"functionSelector",type:"bytes4"},{indexed:!0,internalType:"address",name:"pluginAddress",type:"address"}],name:"PluginRemoved",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes4",name:"functionSelector",type:"bytes4"},{indexed:!0,internalType:"string",name:"functionSignature",type:"string"},{indexed:!0,internalType:"address",name:"pluginAddress",type:"address"}],name:"PluginSet",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes4",name:"functionSelector",type:"bytes4"},{indexed:!0,internalType:"address",name:"oldPluginAddress",type:"address"},{indexed:!0,internalType:"address",name:"newPluginAddress",type:"address"}],name:"PluginUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"previousAdminRole",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"newAdminRole",type:"bytes32"}],name:"RoleAdminChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleGranted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleRevoked",type:"event"},{stateMutability:"payable",type:"fallback"},{inputs:[],name:"DEFAULT_ADMIN_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes4",name:"_selector",type:"bytes4"}],name:"_getPluginForFunction",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{components:[{internalType:"bytes4",name:"functionSelector",type:"bytes4"},{internalType:"string",name:"functionSignature",type:"string"},{internalType:"address",name:"pluginAddress",type:"address"}],internalType:"struct IPluginMap.Plugin",name:"_plugin",type:"tuple"}],name:"addPlugin",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_pluginAddress",type:"address"}],name:"getAllFunctionsOfPlugin",outputs:[{internalType:"bytes4[]",name:"registered",type:"bytes4[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"getAllPlugins",outputs:[{components:[{internalType:"bytes4",name:"functionSelector",type:"bytes4"},{internalType:"string",name:"functionSignature",type:"string"},{internalType:"address",name:"pluginAddress",type:"address"}],internalType:"struct IPluginMap.Plugin[]",name:"registered",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes4",name:"_selector",type:"bytes4"}],name:"getPluginForFunction",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleAdmin",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"uint256",name:"index",type:"uint256"}],name:"getRoleMember",outputs:[{internalType:"address",name:"member",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleMemberCount",outputs:[{internalType:"uint256",name:"count",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"grantRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"hasRole",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"hasRoleWithSwitch",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"forwarder",type:"address"}],name:"isTrustedForwarder",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes[]",name:"data",type:"bytes[]"}],name:"multicall",outputs:[{internalType:"bytes[]",name:"results",type:"bytes[]"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"pluginMap",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes4",name:"_selector",type:"bytes4"}],name:"removePlugin",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"renounceRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"revokeRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{components:[{internalType:"bytes4",name:"functionSelector",type:"bytes4"},{internalType:"string",name:"functionSignature",type:"string"},{internalType:"address",name:"pluginAddress",type:"address"}],internalType:"struct IPluginMap.Plugin",name:"_plugin",type:"tuple"}],name:"updatePlugin",outputs:[],stateMutability:"nonpayable",type:"function"},{stateMutability:"payable",type:"receive"}],g2=[{inputs:[{internalType:"address",name:"_trustedForwarder",type:"address"},{internalType:"address",name:"_registry",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"implementation",type:"address"},{indexed:!0,internalType:"bytes32",name:"contractType",type:"bytes32"},{indexed:!1,internalType:"uint256",name:"version",type:"uint256"}],name:"ImplementationAdded",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"implementation",type:"address"},{indexed:!1,internalType:"bool",name:"isApproved",type:"bool"}],name:"ImplementationApproved",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"implementation",type:"address"},{indexed:!1,internalType:"address",name:"proxy",type:"address"},{indexed:!0,internalType:"address",name:"deployer",type:"address"}],name:"ProxyDeployed",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"previousAdminRole",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"newAdminRole",type:"bytes32"}],name:"RoleAdminChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleGranted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleRevoked",type:"event"},{inputs:[],name:"DEFAULT_ADMIN_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"FACTORY_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_implementation",type:"address"}],name:"addImplementation",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"approval",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_implementation",type:"address"},{internalType:"bool",name:"_toApprove",type:"bool"}],name:"approveImplementation",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"",type:"bytes32"}],name:"currentVersion",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"_type",type:"bytes32"},{internalType:"bytes",name:"_data",type:"bytes"}],name:"deployProxy",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_implementation",type:"address"},{internalType:"bytes",name:"_data",type:"bytes"},{internalType:"bytes32",name:"_salt",type:"bytes32"}],name:"deployProxyByImplementation",outputs:[{internalType:"address",name:"deployedProxy",type:"address"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"_type",type:"bytes32"},{internalType:"bytes",name:"_data",type:"bytes"},{internalType:"bytes32",name:"_salt",type:"bytes32"}],name:"deployProxyDeterministic",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"deployer",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"_type",type:"bytes32"},{internalType:"uint256",name:"_version",type:"uint256"}],name:"getImplementation",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"_type",type:"bytes32"}],name:"getLatestImplementation",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleAdmin",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"uint256",name:"index",type:"uint256"}],name:"getRoleMember",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleMemberCount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"grantRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"hasRole",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"",type:"bytes32"},{internalType:"uint256",name:"",type:"uint256"}],name:"implementation",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"forwarder",type:"address"}],name:"isTrustedForwarder",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes[]",name:"data",type:"bytes[]"}],name:"multicall",outputs:[{internalType:"bytes[]",name:"results",type:"bytes[]"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"registry",outputs:[{internalType:"contract TWRegistry",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"renounceRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"revokeRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"}],w2=[{inputs:[{internalType:"address",name:"_trustedForwarder",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"deployer",type:"address"},{indexed:!0,internalType:"address",name:"deployment",type:"address"}],name:"Added",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"deployer",type:"address"},{indexed:!0,internalType:"address",name:"deployment",type:"address"}],name:"Deleted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"previousAdminRole",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"newAdminRole",type:"bytes32"}],name:"RoleAdminChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleGranted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleRevoked",type:"event"},{inputs:[],name:"DEFAULT_ADMIN_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"OPERATOR_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_deployer",type:"address"},{internalType:"address",name:"_deployment",type:"address"}],name:"add",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_deployer",type:"address"}],name:"count",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_deployer",type:"address"}],name:"getAll",outputs:[{internalType:"address[]",name:"",type:"address[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleAdmin",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"uint256",name:"index",type:"uint256"}],name:"getRoleMember",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleMemberCount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"grantRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"hasRole",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"forwarder",type:"address"}],name:"isTrustedForwarder",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes[]",name:"data",type:"bytes[]"}],name:"multicall",outputs:[{internalType:"bytes[]",name:"results",type:"bytes[]"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_deployer",type:"address"},{internalType:"address",name:"_deployment",type:"address"}],name:"remove",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"renounceRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"revokeRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"}];function v2(r){if(r.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),t=0;t<e.length;t++)e[t]=255;for(var n=0;n<r.length;n++){var a=r.charAt(n),i=a.charCodeAt(0);if(e[i]!==255)throw new TypeError(a+" is ambiguous");e[i]=n}var s=r.length,o=r.charAt(0),l=Math.log(s)/Math.log(256),c=Math.log(256)/Math.log(s);function u(m){if(m instanceof Uint8Array||(ArrayBuffer.isView(m)?m=new Uint8Array(m.buffer,m.byteOffset,m.byteLength):Array.isArray(m)&&(m=Uint8Array.from(m))),!(m instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(m.length===0)return"";for(var b=0,x=0,f=0,w=m.length;f!==w&&m[f]===0;)f++,b++;for(var A=(w-f)*c+1>>>0,T=new Uint8Array(A);f!==w;){for(var E=m[f],I=0,D=A-1;(E!==0||I<x)&&D!==-1;D--,I++)E+=256*T[D]>>>0,T[D]=E%s>>>0,E=E/s>>>0;if(E!==0)throw new Error("Non-zero carry");x=I,f++}for(var F=A-x;F!==A&&T[F]===0;)F++;for(var W=o.repeat(b);F<A;++F)W+=r.charAt(T[F]);return W}function d(m){if(typeof m!="string")throw new TypeError("Expected String");if(m.length===0)return new Uint8Array;for(var b=0,x=0,f=0;m[b]===o;)x++,b++;for(var w=(m.length-b)*l+1>>>0,A=new Uint8Array(w);m[b];){var T=e[m.charCodeAt(b)];if(T===255)return;for(var E=0,I=w-1;(T!==0||E<f)&&I!==-1;I--,E++)T+=s*A[I]>>>0,A[I]=T%256>>>0,T=T/256>>>0;if(T!==0)throw new Error("Non-zero carry");f=E,b++}for(var D=w-f;D!==w&&A[D]===0;)D++;for(var F=new Uint8Array(x+(w-D)),W=x;D!==w;)F[W++]=A[D++];return F}function h(m){var b=d(m);if(b)return b;throw new Error("Non-base"+s+" character")}return{encode:u,decodeUnsafe:d,decode:h}}var T2=v2;const A2=T2,C2="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";var E2=A2(C2);function _2(r,e){if(e.has(r))throw new TypeError("Cannot initialize the same private elements twice on an object")}function _c(r,e,t){_2(r,e),e.set(r,t)}function k2(r,e){return e.get?e.get.call(r):e.value}function dp(r,e,t){if(!e.has(r))throw new TypeError("attempted to "+t+" private field on non-instance");return e.get(r)}function Ns(r,e){var t=dp(r,e,"get");return k2(r,t)}function I2(r,e,t){if(e.set)e.set.call(r,t);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=t}}function kc(r,e,t){var n=dp(r,e,"set");return I2(r,n,t),t}let $;(function(r){r[r.Mainnet=1]="Mainnet",r[r.Goerli=5]="Goerli",r[r.Polygon=137]="Polygon",r[r.Mumbai=80001]="Mumbai",r[r.Localhost=1337]="Localhost",r[r.Hardhat=31337]="Hardhat",r[r.Fantom=250]="Fantom",r[r.FantomTestnet=4002]="FantomTestnet",r[r.Avalanche=43114]="Avalanche",r[r.AvalancheFujiTestnet=43113]="AvalancheFujiTestnet",r[r.Optimism=10]="Optimism",r[r.OptimismGoerli=420]="OptimismGoerli",r[r.Arbitrum=42161]="Arbitrum",r[r.ArbitrumGoerli=421613]="ArbitrumGoerli",r[r.BinanceSmartChainMainnet=56]="BinanceSmartChainMainnet",r[r.BinanceSmartChainTestnet=97]="BinanceSmartChainTestnet"})($||($={}));const S2=[$.Mainnet,$.Goerli,$.Polygon,$.Mumbai,$.Fantom,$.FantomTestnet,$.Avalanche,$.AvalancheFujiTestnet,$.Optimism,$.OptimismGoerli,$.Arbitrum,$.ArbitrumGoerli,$.BinanceSmartChainMainnet,$.BinanceSmartChainTestnet,$.Hardhat,$.Localhost];let Ic=vo;function P2(r){r&&r.length>0?Ic=r:Ic=vo}function B2(){return Ic}const R2="0xac0974bec39a17e36ba4a6b4d238ff944bacb478cbed5efcae784d7bf4f2ff80",nr="0xc82BbE41f2cF04e3a8efA18F7032BDD7f6d98a81",Ln="0x7c487845f98938Bb955B1D5AD069d9a30e4131fd",rr="0x5DBC7B840baa9daBcBe9D2492E45D7244B54A2A0",M2="0x664244560eBa21Bf82d7150C791bE1AbcD5B4cd7",D2="0xcdAD8FA86e18538aC207872E8ff3536501431B73",$a={[$.Mainnet]:{openzeppelinForwarder:nr,openzeppelinForwarderEOA:"0x76ce2CB1Ae48Fa067f4fb8c5f803111AE0B24BEA",biconomyForwarder:"0x84a0856b038eaAd1cC7E297cF34A7e72685A8693",twFactory:rr,twRegistry:Ln,twBYOCRegistry:se},[$.Goerli]:{openzeppelinForwarder:"0x5001A14CA6163143316a7C614e30e6041033Ac20",openzeppelinForwarderEOA:"0xe73c50cB9c5B378627ff625BB6e6725A4A5D65d2",biconomyForwarder:"0xE041608922d06a4F26C0d4c27d8bCD01daf1f792",twFactory:rr,twRegistry:Ln,twBYOCRegistry:"0xB1Bd9d7942A250BA2Dce27DD601F2ED4211A60C4"},[$.Polygon]:{openzeppelinForwarder:nr,openzeppelinForwarderEOA:"0x4f247c69184ad61036EC2Bb3213b69F10FbEDe1F",biconomyForwarder:"0x86C80a8aa58e0A4fa09A69624c31Ab2a6CAD56b8",twFactory:rr,twRegistry:Ln,twBYOCRegistry:"0x308473Be900F4185A56587dE54bDFF5E8f7a6AE7"},[$.Mumbai]:{openzeppelinForwarder:nr,openzeppelinForwarderEOA:"0xb1A2883fc4d287d9cB8Dbb96cFF60C76BEf2D250",biconomyForwarder:"0x9399BB24DBB5C4b782C70c2969F58716Ebbd6a3b",twFactory:rr,twRegistry:Ln,twBYOCRegistry:"0x3F17972CB27506eb4a6a3D59659e0B57a43fd16C"},[$.Avalanche]:{openzeppelinForwarder:nr,openzeppelinForwarderEOA:"0xb1A2883fc4d287d9cB8Dbb96cFF60C76BEf2D250",biconomyForwarder:"0x64CD353384109423a966dCd3Aa30D884C9b2E057",twFactory:rr,twRegistry:Ln,twBYOCRegistry:se},[$.AvalancheFujiTestnet]:{openzeppelinForwarder:nr,openzeppelinForwarderEOA:"0xe73c50cB9c5B378627ff625BB6e6725A4A5D65d2",biconomyForwarder:"0x6271Ca63D30507f2Dcbf99B52787032506D75BBF",twFactory:rr,twRegistry:Ln,twBYOCRegistry:"0x3E6eE864f850F5e5A98bc950B68E181Cf4010F23"},[$.Fantom]:{openzeppelinForwarder:nr,openzeppelinForwarderEOA:"0xb1A2883fc4d287d9cB8Dbb96cFF60C76BEf2D250",biconomyForwarder:"0x64CD353384109423a966dCd3Aa30D884C9b2E057",twFactory:"0x97EA0Fcc552D5A8Fb5e9101316AAd0D62Ea0876B",twRegistry:Ln,twBYOCRegistry:se},[$.FantomTestnet]:{openzeppelinForwarder:nr,openzeppelinForwarderEOA:"0x42D3048b595B6e1c28a588d70366CcC2AA4dB47b",biconomyForwarder:"0x69FB8Dca8067A5D38703b9e8b39cf2D51473E4b4",twFactory:rr,twRegistry:Ln,twBYOCRegistry:"0x3E6eE864f850F5e5A98bc950B68E181Cf4010F23"},[$.Arbitrum]:{openzeppelinForwarder:"0x8cbc8B5d71702032904750A66AEfE8B603eBC538",openzeppelinForwarderEOA:"0x4f247c69184ad61036EC2Bb3213b69F10FbEDe1F",biconomyForwarder:"0xfe0fa3C06d03bDC7fb49c892BbB39113B534fB57",twFactory:"0xd24b3de085CFd8c54b94feAD08a7962D343E6DE0",twRegistry:"0x7c487845f98938Bb955B1D5AD069d9a30e4131fd",twBYOCRegistry:se},[$.ArbitrumGoerli]:{openzeppelinForwarder:"0x8cbc8B5d71702032904750A66AEfE8B603eBC538",openzeppelinForwarderEOA:"0x119704314Ef304EaAAE4b3c7C9ABd59272A28310",biconomyForwarder:se,twFactory:"0xd24b3de085CFd8c54b94feAD08a7962D343E6DE0",twRegistry:"0x7c487845f98938Bb955B1D5AD069d9a30e4131fd",twBYOCRegistry:se},[$.Optimism]:{openzeppelinForwarder:"0x8cbc8B5d71702032904750A66AEfE8B603eBC538",openzeppelinForwarderEOA:"0x7e80648EB2071E26937F9D42A513ccf4815fc702",biconomyForwarder:"0xefba8a2a82ec1fb1273806174f5e28fbb917cf95",twFactory:"0xd24b3de085CFd8c54b94feAD08a7962D343E6DE0",twRegistry:"0x7c487845f98938Bb955B1D5AD069d9a30e4131fd",twBYOCRegistry:se},[$.OptimismGoerli]:{openzeppelinForwarder:"0x8cbc8B5d71702032904750A66AEfE8B603eBC538",openzeppelinForwarderEOA:"0x119704314Ef304EaAAE4b3c7C9ABd59272A28310",biconomyForwarder:se,twFactory:"0xd24b3de085CFd8c54b94feAD08a7962D343E6DE0",twRegistry:"0x7c487845f98938Bb955B1D5AD069d9a30e4131fd",twBYOCRegistry:se},[$.BinanceSmartChainMainnet]:{openzeppelinForwarder:"0x8cbc8B5d71702032904750A66AEfE8B603eBC538",openzeppelinForwarderEOA:"0xE8dd2Ff0212F86d3197b4AfDC6dAC6ac47eb10aC",biconomyForwarder:"0x86C80a8aa58e0A4fa09A69624c31Ab2a6CAD56b8",twBYOCRegistry:se,twFactory:"0xd24b3de085CFd8c54b94feAD08a7962D343E6DE0",twRegistry:"0x7c487845f98938Bb955B1D5AD069d9a30e4131fd"},[$.BinanceSmartChainTestnet]:{openzeppelinForwarder:"0x8cbc8B5d71702032904750A66AEfE8B603eBC538",openzeppelinForwarderEOA:"0x7e80648EB2071E26937F9D42A513ccf4815fc702",biconomyForwarder:"0x61456BF1715C1415730076BB79ae118E806E74d2",twBYOCRegistry:se,twFactory:"0xd24b3de085CFd8c54b94feAD08a7962D343E6DE0",twRegistry:"0x7c487845f98938Bb955B1D5AD069d9a30e4131fd"},[$.Hardhat]:{openzeppelinForwarder:se,openzeppelinForwarderEOA:se,biconomyForwarder:se,twFactory:se,twRegistry:se,twBYOCRegistry:se},[$.Localhost]:{openzeppelinForwarder:se,openzeppelinForwarderEOA:se,biconomyForwarder:se,twFactory:se,twRegistry:se,twBYOCRegistry:se}},sd={[$.Mainnet]:{"nft-drop":"0x60fF9952e0084A6DEac44203838cDC91ABeC8736","edition-drop":"0x74af262d0671F378F97a1EDC3d0970Dbe8A1C550","token-drop":"0xE1eE43D23f247b6A9aF81fcE2766E76709482728","signature-drop":"0x6fD690EB509BdE4C50028C5D9C0dE3750C2Fad6A"},[$.Polygon]:{"nft-drop":"0xB96508050Ba0925256184103560EBADA912Fcc69","edition-drop":"0x74af262d0671F378F97a1EDC3d0970Dbe8A1C550","token-drop":"0x5A8eA4Adad8289746D073947BA06D69A62499aaf","signature-drop":"0xBE2fDc35410E268e41Bec62DBb01AEb43245c7d5"},[$.Fantom]:{"nft-drop":"0x2A396b2D90BAcEF19cDa973586B2633d22710fC2","edition-drop":"0x06395FCF9AC6ED827f9dD6e776809cEF1Be0d21B","token-drop":"0x0148b28a38efaaC31b6aa0a6D9FEb70FE7C91FFa","signature-drop":"0xe135Ef65C2B2213C3fD56d0Bd6500A2cA147aC10"},[$.Avalanche]:{"nft-drop":"0x9cF91118C8ee2913F0588e0F10e36B3d63F68bF6","edition-drop":"0x135fC9D26E5eC51260ece1DF4ED424E2f55c7766","token-drop":"0xca0B071899E575BA86495D46c5066971b6f3A901","signature-drop":"0x1d47526C3292B0130ef0afD5F02c1DA052A017B3"},[$.Optimism]:{"nft-drop":"0xFBd7D24d80ee005671E731a7287DEB6073264dD1","edition-drop":"0xe135Ef65C2B2213C3fD56d0Bd6500A2cA147aC10","token-drop":"0x902Dd246e66d8C3CE652375a723F2a52b43b9AAE","signature-drop":"0x8a4cd3549e548bbEEb38C16E041FFf040a5acabD"},[$.Arbitrum]:{"nft-drop":"0xC4903c1Ff5367b9ac2c349B63DC2409421AaEE2a","edition-drop":"0xCcddcec1831646Beff2753249f1B9C580327E89F","token-drop":"0x1b5947e1a2d5a29D0df20931DeAB0B87818209B9","signature-drop":"0x2dF9851af45dd41C8584ac55D983C604da985Bc7"},[$.BinanceSmartChainMainnet]:{"nft-drop":"0x902Dd246e66d8C3CE652375a723F2a52b43b9AAE","edition-drop":"0x2A396b2D90BAcEF19cDa973586B2633d22710fC2","token-drop":"0xe135Ef65C2B2213C3fD56d0Bd6500A2cA147aC10","signature-drop":"0xFBd7D24d80ee005671E731a7287DEB6073264dD1"},[$.Goerli]:{"nft-drop":"0xD11c97DD5F5546B5bBd630D7D1d7327481B0b92C","edition-drop":"0x5A8eA4Adad8289746D073947BA06D69A62499aaf","token-drop":"0x5680933221B752EB443654a014f88B101F868d50","signature-drop":"0x1b5947e1a2d5a29D0df20931DeAB0B87818209B9"},[$.Mumbai]:{"nft-drop":"0xC4903c1Ff5367b9ac2c349B63DC2409421AaEE2a","edition-drop":"0xCcddcec1831646Beff2753249f1B9C580327E89F","token-drop":"0x1b5947e1a2d5a29D0df20931DeAB0B87818209B9","signature-drop":"0x2dF9851af45dd41C8584ac55D983C604da985Bc7"},[$.FantomTestnet]:{"nft-drop":"0x8a4cd3549e548bbEEb38C16E041FFf040a5acabD","edition-drop":"0x902Dd246e66d8C3CE652375a723F2a52b43b9AAE","token-drop":"0xFBd7D24d80ee005671E731a7287DEB6073264dD1","signature-drop":"0x5A8eA4Adad8289746D073947BA06D69A62499aaf"},[$.AvalancheFujiTestnet]:{"nft-drop":"0xD11c97DD5F5546B5bBd630D7D1d7327481B0b92C","edition-drop":"0xE1eE43D23f247b6A9aF81fcE2766E76709482728","token-drop":"0x6fD690EB509BdE4C50028C5D9C0dE3750C2Fad6A","signature-drop":"0xCcddcec1831646Beff2753249f1B9C580327E89F"},[$.OptimismGoerli]:{"nft-drop":"0xCcddcec1831646Beff2753249f1B9C580327E89F","edition-drop":"0x6fD690EB509BdE4C50028C5D9C0dE3750C2Fad6A","token-drop":"0xD11c97DD5F5546B5bBd630D7D1d7327481B0b92C","signature-drop":"0x1b5947e1a2d5a29D0df20931DeAB0B87818209B9"},[$.ArbitrumGoerli]:{"nft-drop":"0x9CfE807a5b124b962064Fa8F7FD823Cc701255b6","edition-drop":"0x9cF91118C8ee2913F0588e0F10e36B3d63F68bF6","token-drop":"0x1d47526C3292B0130ef0afD5F02c1DA052A017B3","signature-drop":"0xE1eE43D23f247b6A9aF81fcE2766E76709482728"},[$.BinanceSmartChainTestnet]:{"nft-drop":"","edition-drop":"","token-drop":"","signature-drop":""},[$.Hardhat]:{"nft-drop":"","edition-drop":"","token-drop":"","signature-drop":""},[$.Localhost]:{"nft-drop":"","edition-drop":"","token-drop":"","signature-drop":""}};function F2(r,e){if(r in sd){const t=sd[r];if(e in t)return t[e]}return null}function Sc(r,e){var t;return r===$.Hardhat||r===$.Localhost?e==="twFactory"?{}.factoryAddress:e==="twRegistry"?{}.registryAddress:se:(t=$a[r])==null?void 0:t[e]}function N2(){return{}.contractPublisherAddress?{}.contractPublisherAddress:M2}function od(){return{}.multiChainRegistryAddress?{}.multiChainRegistryAddress:D2}function pp(r){const e=S2.find(a=>a===r),t=e?$a[e].biconomyForwarder:se,n=e?$a[e].openzeppelinForwarder:se;return t!==se?[n,t]:[n]}const Lo=ce("0x80ac58cd"),Uo=ce("0xd9b67a26"),Jt="0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",fp={[$.Mainnet]:{name:"Ether",symbol:"ETH",decimals:18,wrapped:{address:"0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2",name:"Wrapped Ether",symbol:"WETH"}},[$.Goerli]:{name:"Grli Ether",symbol:"GOR",decimals:18,wrapped:{address:"0xb4fbf271143f4fbf7b91a5ded31805e42b2208d6",name:"Wrapped Ether",symbol:"WETH"}},[$.Polygon]:{name:"Matic",symbol:"MATIC",decimals:18,wrapped:{address:"0x0d500B1d8E8eF31E21C99d1Db9A6444d3ADf1270",name:"Wrapped Matic",symbol:"WMATIC"}},[$.Mumbai]:{name:"Matic",symbol:"MATIC",decimals:18,wrapped:{address:"0x9c3C9283D3e44854697Cd22D3Faa240Cfb032889",name:"Wrapped Matic",symbol:"WMATIC"}},[$.Avalanche]:{name:"Avalanche",symbol:"AVAX",decimals:18,wrapped:{address:"0xB31f66AA3C1e785363F0875A1B74E27b85FD66c7",name:"Wrapped AVAX",symbol:"WAVAX"}},[$.AvalancheFujiTestnet]:{name:"Avalanche",symbol:"AVAX",decimals:18,wrapped:{address:"0xd00ae08403B9bbb9124bB305C09058E32C39A48c",name:"Wrapped AVAX",symbol:"WAVAX"}},[$.Fantom]:{name:"Fantom",symbol:"FTM",decimals:18,wrapped:{address:"0x21be370D5312f44cB42ce377BC9b8a0cEF1A4C83",name:"Wrapped Fantom",symbol:"WFTM"}},[$.FantomTestnet]:{name:"Fantom",symbol:"FTM",decimals:18,wrapped:{address:"0xf1277d1Ed8AD466beddF92ef448A132661956621",name:"Wrapped Fantom",symbol:"WFTM"}},[$.Arbitrum]:{name:"Ether",symbol:"ETH",decimals:18,wrapped:{address:"0x82af49447d8a07e3bd95bd0d56f35241523fbab1",name:"Wrapped Ether",symbol:"WETH"}},[$.ArbitrumGoerli]:{name:"Arbitrum Goerli Ether",symbol:"AGOR",decimals:18,wrapped:{address:"0xe39Ab88f8A4777030A534146A9Ca3B52bd5D43A3",name:"Wrapped Ether",symbol:"WETH"}},[$.Optimism]:{name:"Ether",symbol:"ETH",decimals:18,wrapped:{address:"0x4200000000000000000000000000000000000006",name:"Wrapped Ether",symbol:"WETH"}},[$.OptimismGoerli]:{name:"Goerli Ether",symbol:"ETH",decimals:18,wrapped:{address:"0x4200000000000000000000000000000000000006",name:"Wrapped Ether",symbol:"WETH"}},[$.BinanceSmartChainMainnet]:{name:"Binance Chain Native Token",symbol:"BNB",decimals:18,wrapped:{address:"0xbb4CdB9CBd36B01bD1cBaEBF2De08d9173bc095c",name:"Wrapped Binance Chain Token",symbol:"WBNB"}},[$.BinanceSmartChainTestnet]:{name:"Binance Chain Native Token",symbol:"TBNB",decimals:18,wrapped:{address:"0xae13d989daC2f0dEbFf460aC112a837C89BAa7cd",name:"Wrapped Binance Chain Testnet Token",symbol:"WBNB"}},[$.Hardhat]:{name:"Ether",symbol:"ETH",decimals:18,wrapped:{address:"0x5FbDB2315678afecb367f032d93F642f64180aa3",name:"Wrapped Ether",symbol:"WETH"}},[$.Localhost]:{name:"Ether",symbol:"ETH",decimals:18,wrapped:{address:"0x5FbDB2315678afecb367f032d93F642f64180aa3",name:"Wrapped Ether",symbol:"WETH"}}};function Pc(r){const e=B2().find(t=>t.chainId===r);return e&&e.nativeCurrency?{name:e.nativeCurrency.name,symbol:e.nativeCurrency.symbol,decimals:18,wrapped:{address:se,name:`Wrapped ${e.nativeCurrency.name}`,symbol:`W${e.nativeCurrency.symbol}`}}:fp[r]||{name:"Ether",symbol:"ETH",decimals:18,wrapped:{address:se,name:"Wrapped Ether",symbol:"WETH"}}}const g6={[$.Mainnet]:"0x514910771AF9Ca656af840dff83E8264EcF986CA",[$.Goerli]:"0x326C977E6efc84E512bB9C30f76E30c160eD06FB",[$.BinanceSmartChainMainnet]:"0x404460C6A5EdE2D891e8297795264fDe62ADBB75",[$.Polygon]:"0xb0897686c545045aFc77CF20eC7A532E3120E0F1",[$.Mumbai]:"0x326C977E6efc84E512bB9C30f76E30c160eD06FB",[$.Avalanche]:"0x5947BB275c521040051D82396192181b413227A3",[$.AvalancheFujiTestnet]:"0x0b9d5D9136855f6FEc3c0993feE6E9CE8a297846",[$.Fantom]:"0x6F43FF82CCA38001B6699a8AC47A2d0E66939407",[$.FantomTestnet]:"0xfaFedb041c0DD4fA2Dc0d87a6B0979Ee6FA7af5F"};let wt;(function(r){r.Transaction="transaction",r.Signature="signature"})(wt||(wt={}));const hp=50,yp=250,W2={timeLimitMs:hp,sizeLimit:yp};class O2 extends R0{constructor(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:W2;super(e,t),S(this,"_timeLimitMs",void 0),S(this,"_sizeLimit",void 0),S(this,"_pendingBatchAggregator",void 0),S(this,"_pendingBatch",void 0),this._timeLimitMs=n.timeLimitMs||yp,this._sizeLimit=n.sizeLimit||hp,this._pendingBatchAggregator=null,this._pendingBatch=null}sendCurrentBatch(e){this._pendingBatchAggregator&&clearTimeout(this._pendingBatchAggregator);const t=this._pendingBatch||[];this._pendingBatch=null,this._pendingBatchAggregator=null;const n=t.map(a=>a.request);return this.emit("debug",{action:"requestBatch",request:on(e),provider:this}),Cr(this.connection,JSON.stringify(n)).then(a=>{this.emit("debug",{action:"response",request:n,response:a,provider:this}),t.forEach((i,s)=>{const o=a[s];if(o)if(o.error){const l=new Error(o.error.message);l.code=o.error.code,l.data=o.error.data,i.reject(l)}else i.resolve(o.result);else i.reject(new Error("No response for request"))})},a=>{this.emit("debug",{action:"response",error:a,request:n,provider:this}),t.forEach(i=>{i.reject(a)})})}send(e,t){const n={method:e,params:t,id:this._nextId++,jsonrpc:"2.0"};this._pendingBatch===null&&(this._pendingBatch=[]);const a={request:n,resolve:null,reject:null},i=new Promise((s,o)=>{a.resolve=s,a.reject=o});return this._pendingBatch.length===this._sizeLimit&&this.sendCurrentBatch(n),this._pendingBatch.push(a),this._pendingBatchAggregator||(this._pendingBatchAggregator=setTimeout(()=>{this.sendCurrentBatch(n)},this._timeLimitMs)),i}}const Ve=_.union([_.string(),_.number(),_.bigint(),_.custom(r=>O.isBigNumber(r))]).transform(r=>O.from(r)),Dt=Ve.transform(r=>r.toString()),mp=_.union([_.bigint(),_.custom(r=>O.isBigNumber(r))]).transform(r=>O.from(r).toString()),kt=_.string().refine(r=>wo(r),r=>({message:`${r} is not a valid address`})),xp=_.date().transform(r=>O.from(Math.floor(r.getTime()/1e3))),bp=xp.default(new Date(0)),L2=xp.default(new Date(Date.now()+1e3*60*60*24*365*10)),U2=_.object({gasLimit:Dt.optional(),gasPrice:Dt.optional(),maxFeePerGas:Dt.optional(),maxPriorityFeePerGas:Dt.optional(),nonce:Dt.optional(),value:Dt.optional(),blockTag:_.union([_.string(),_.number()]).optional(),from:kt.optional(),type:_.number().optional()}).strict(),H2=_.object({rpc:_.array(_.string().url()),chainId:_.number(),nativeCurrency:_.object({name:_.string(),symbol:_.string(),decimals:_.literal(18)})}),Ws=_.object({supportedChains:_.array(H2).default(vo),thirdwebApiKey:_.string().optional().default(G0),alchemyApiKey:_.string().optional().optional(),infuraApiKey:_.string().optional().optional(),readonlySettings:_.object({rpcUrl:_.string().url(),chainId:_.number().optional()}).optional(),gasSettings:_.object({maxPriceInGwei:_.number().min(1,"gas price cannot be less than 1").default(300),speed:_.enum(["standard","fast","fastest"]).default("fastest")}).default({maxPriceInGwei:300,speed:"fastest"}),gasless:_.union([_.object({openzeppelin:_.object({relayerUrl:_.string().url(),relayerForwarderAddress:_.string().optional(),useEOAForwarder:_.boolean().default(!1)}),experimentalChainlessSupport:_.boolean().default(!1)}),_.object({biconomy:_.object({apiId:_.string(),apiKey:_.string(),deadlineSeconds:_.number().min(1,"deadlineSeconds cannot be les than 1").default(3600)})})]).optional()}).default({gasSettings:{maxPriceInGwei:300,speed:"fastest"}}),z2=_.object({name:_.string(),symbol:_.string(),decimals:_.number()}),j2=z2.extend({value:Ve,displayValue:_.string()}),Xn=_.object({merkle:_.record(_.string()).default({})}),Bc=_.object({address:kt,maxClaimable:ta.default(0),price:ta.optional(),currencyAddress:kt.default(se).optional()}),Ho=_.union([_.array(_.string()).transform(r=>r.map(e=>Bc.parse({address:e}))),_.array(Bc)]),gp=Bc.extend({proof:_.array(_.string())}),wp=_.object({merkleRoot:_.string(),claims:_.array(gp)});_.object({merkleRoot:_.string(),snapshotUri:_.string()});const q2=_.object({name:_.string().optional()}).catchall(_.unknown()),zo=_.object({startTime:bp,currencyAddress:_.string().default(Jt),price:Rn.default(0),maxClaimableSupply:ta,maxClaimablePerWallet:ta,waitInSeconds:Dt.default(0),merkleRootHash:Gx.default(ze([0],32)),snapshot:_.optional(Ho).nullable(),metadata:q2.optional()}),V2=_.array(zo);zo.partial();const vp=zo.extend({availableSupply:ta,currentMintSupply:ta,currencyMetadata:j2.default({value:O.from("0"),displayValue:"0",symbol:"",decimals:18,name:""}),price:Ve,waitInSeconds:Ve,startTime:Ve.transform(r=>new Date(r.toNumber()*1e3)),snapshot:Ho.optional().nullable()});function G2(r){if(r===void 0){const e=Buffer.alloc(16);return Ob({},e),ge(Me(e.toString("hex")))}else return ge(r)}const ul=_.object({to:_.string().refine(r=>r.toLowerCase()!==se,{message:"Cannot create payload to mint to zero address"}),price:Rn.default(0),currencyAddress:_.string().default(Jt),mintStartTime:bp,mintEndTime:L2,uid:_.string().optional().transform(r=>G2(r)),primarySaleRecipient:_.string().default(se)}),Tp=ul.extend({quantity:Rn}),K2=Tp.extend({mintStartTime:Ve,mintEndTime:Ve}),dl=ul.extend({metadata:Mo,royaltyRecipient:_.string().default(se),royaltyBps:sa.default(0)}),Ap=dl.extend({uri:_.string(),royaltyBps:Ve,mintStartTime:Ve,mintEndTime:Ve}),$2=dl.extend({metadata:Mo.default(""),quantity:Dt}),Z2=$2.extend({tokenId:Dt}),Y2=Ap.extend({tokenId:Ve,quantity:Ve}),J2=dl.extend({metadata:Mo.default(""),quantity:Ve.default(1)}),Q2=Ap.extend({quantity:Ve.default(1)}),X2=[{name:"to",type:"address"},{name:"primarySaleRecipient",type:"address"},{name:"quantity",type:"uint256"},{name:"price",type:"uint256"},{name:"currency",type:"address"},{name:"validityStartTimestamp",type:"uint128"},{name:"validityEndTimestamp",type:"uint128"},{name:"uid",type:"bytes32"}],e1=[{name:"to",type:"address"},{name:"royaltyRecipient",type:"address"},{name:"royaltyBps",type:"uint256"},{name:"primarySaleRecipient",type:"address"},{name:"uri",type:"string"},{name:"price",type:"uint256"},{name:"currency",type:"address"},{name:"validityStartTimestamp",type:"uint128"},{name:"validityEndTimestamp",type:"uint128"},{name:"uid",type:"bytes32"}],t1=[{name:"to",type:"address"},{name:"royaltyRecipient",type:"address"},{name:"royaltyBps",type:"uint256"},{name:"primarySaleRecipient",type:"address"},{name:"tokenId",type:"uint256"},{name:"uri",type:"string"},{name:"quantity",type:"uint256"},{name:"pricePerToken",type:"uint256"},{name:"currency",type:"address"},{name:"validityStartTimestamp",type:"uint128"},{name:"validityEndTimestamp",type:"uint128"},{name:"uid",type:"bytes32"}],n1=[{name:"to",type:"address"},{name:"royaltyRecipient",type:"address"},{name:"royaltyBps",type:"uint256"},{name:"primarySaleRecipient",type:"address"},{name:"uri",type:"string"},{name:"quantity",type:"uint256"},{name:"pricePerToken",type:"uint256"},{name:"currency",type:"address"},{name:"validityStartTimestamp",type:"uint128"},{name:"validityEndTimestamp",type:"uint128"},{name:"uid",type:"bytes32"}],r1=[{name:"validityStartTimestamp",type:"uint128"},{name:"validityEndTimestamp",type:"uint128"},{name:"uid",type:"bytes32"},{name:"data",type:"bytes"}],Ft=_.object({name:_.string(),description:_.string().optional(),image:fr.optional(),external_link:_.string().url().optional()}),jt=Ft.extend({image:_.string().optional()}).catchall(_.unknown()),ht=_.object({seller_fee_basis_points:sa.default(0),fee_recipient:kt.default(se)}),_r=_.object({primary_sale_recipient:kt}),en=_.object({platform_fee_basis_points:sa.default(0),platform_fee_recipient:kt.default(se)}),qt=_.object({trusted_forwarders:_.array(kt).default([])}),it=_.object({symbol:_.string().optional().default("")}),Cp=Ft.merge(ht).merge(Xn).merge(it),a1=jt.merge(ht).merge(Xn).merge(it),i1=Cp.merge(en).merge(_r).merge(qt),Ep={deploy:i1,output:a1,input:Cp},_p=Ft.merge(ht).merge(Xn).merge(it),s1=jt.merge(ht).merge(Xn).merge(it),o1=_p.merge(en).merge(_r).merge(qt),c1={deploy:o1,output:s1,input:_p},kp=Ft,l1=jt,u1=kp.merge(en).merge(qt),Ip={deploy:u1,output:l1,input:kp},Sp=Ft.merge(ht).merge(it),d1=jt.merge(ht).merge(it),p1=Sp.merge(en).merge(qt),f1={deploy:p1,output:d1,input:Sp},Pp=_.object({address:kt,sharesBps:sa.gt(0,"Shares must be greater than 0")}),h1=Pp.extend({address:kt,sharesBps:sa}),Rc=Ft.extend({recipients:_.array(Pp).default([]).superRefine((r,e)=>{const t={};let n=0;for(let a=0;a<r.length;a++){const i=r[a];t[i.address]&&e.addIssue({code:_.ZodIssueCode.custom,message:"Duplicate address.",path:[a,"address"]}),t[i.address]=!0,n+=i.sharesBps,n>1e4&&e.addIssue({code:_.ZodIssueCode.custom,message:"Total shares cannot go over 100%.",path:[a,"sharesBps"]})}n!==1e4&&e.addIssue({code:_.ZodIssueCode.custom,message:`Total shares need to add up to 100%. Total shares are currently ${n/100}%`,path:[]})})}),y1=jt.extend({recipients:_.array(h1)}),m1=Rc.merge(Rc).merge(qt),x1={deploy:m1,output:y1,input:Rc},Bp=Ft.merge(it),b1=jt.merge(it),g1=Bp.merge(en).merge(_r).merge(qt),w1={deploy:g1,output:b1,input:Bp},Rp=Ft.merge(ht).merge(it),v1=jt.merge(ht).merge(it),T1=Rp.merge(en).merge(_r).merge(qt),A1={deploy:T1,output:v1,input:Rp},Mp=Ft.merge(ht).merge(it),C1=jt.merge(ht).merge(it),E1=Mp.merge(en).merge(_r).merge(qt),_1={deploy:E1,output:C1,input:Mp},Dp=_.object({voting_delay_in_blocks:_.number().min(0).default(0),voting_period_in_blocks:_.number().min(1).default(1),voting_token_address:kt,voting_quorum_fraction:$x.default(0),proposal_token_threshold:Dt.default(1)}),k1=Dp.extend({proposal_token_threshold:Ve}),Fp=Ft.merge(Dp),I1=jt.merge(k1),S1=Fp.merge(qt),P1={deploy:S1,output:I1,input:Fp};_.object({proposalId:Ve,proposer:_.string(),targets:_.array(_.string()),values:_.array(Ve),signatures:_.array(_.string()),calldatas:_.array(_.string()),startBlock:Ve,endBlock:Ve,description:_.string()});const cd=_.object({}).catchall(_.union([mp,_.unknown()]));_.union([_.array(cd),cd]).optional();const B1=_.object({supply:Ve,metadata:Y0});B1.extend({owner:_.string(),quantityOwned:Ve});_.object({supply:Dt,metadata:Sn});_.object({supply:Dt,metadata:Mo});_.object({toAddress:kt,amount:Rn});const Mc={"avalanche-fuji":$.AvalancheFujiTestnet,"avalanche-testnet":$.AvalancheFujiTestnet,"fantom-testnet":$.FantomTestnet,ethereum:$.Mainnet,matic:$.Polygon,mumbai:$.Mumbai,goerli:$.Goerli,polygon:$.Polygon,mainnet:$.Mainnet,optimism:$.Optimism,"optimism-goerli":$.OptimismGoerli,arbitrum:$.Arbitrum,"arbitrum-goerli":$.ArbitrumGoerli,fantom:$.Fantom,avalanche:$.Avalanche,binance:$.BinanceSmartChainMainnet,"binance-testnet":$.BinanceSmartChainTestnet,hardhat:$.Hardhat,localhost:$.Localhost};Object.fromEntries(Object.entries(Mc).map(r=>{let[e,t]=r;return[t,e]}));function R1(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Ws.parse(r).supportedChains.reduce((t,n)=>(t[n.chainId]=n,t),{})}function pl(r,e){if(typeof r=="string"&&r.startsWith("http"))return Dc(r);const t=M1(r),n=Ws.parse(e);typeof r!="number"&&typeof r!="string"&&(n.supportedChains=[r,...n.supportedChains]);const a=R1(n);let i="";try{i=mh(a[t],{thirdwebApiKey:n.thirdwebApiKey||G0,infuraApiKey:n.infuraApiKey,alchemyApiKey:n.alchemyApiKey})}catch(s){console.warn("Failed to get chain RPC",s)}if(!i)throw new Error(`No rpc url found for chain ${r}. Please provide a valid rpc url via the 'chains' property of the sdk options.`);return Dc(i,t)}function M1(r){if(typeof r=="number")return r;if(typeof r!="string")return r.chainId;if(!(r in Mc))throw new Error(`Cannot resolve chainId from: ${r} - please pass the chainId instead and specify it in the 'chains' property of the SDK options.`);return Mc[r]}const ld=new Map;function Dc(r,e){try{const t=r.match(/^(ws|http)s?:/i);if(t)switch(t[1]){case"http":const n=`${r}-${e||-1}`,a=ld.get(n);if(a)return a;const i=e?new O2(r,e):new Fm(r,e);return ld.set(n,i),i;case"ws":return new Po(r,e);default:return Ba(r)}else return Ba(r)}catch{return Ba(r)}}class fl extends Error{constructor(e){super(e?`Object with id ${e} NOT FOUND`:"NOT_FOUND")}}class D1 extends Error{constructor(e,t){super(`MISSING ROLE: ${e} does not have the '${t}' role`)}}class F1 extends Error{constructor(e){super(`DUPLICATE_LEAFS${e?` : ${e}`:""}`)}}class N1 extends Error{constructor(e){super(`Auction already started with existing bid${e?`, id: ${e}`:""}`)}}class Np extends Error{constructor(e,t){super(`Could not find listing.${e?` marketplace address: ${e}`:""}${t?` listing id: ${t}`:""}`)}}class Wp extends Error{constructor(e,t,n,a){super(`Incorrect listing type. Are you sure you're using the right method?.${e?` marketplace address: ${e}`:""}${t?` listing id: ${t}`:""}${a?` expected type: ${a}`:""}${n?` actual type: ${n}`:""}`)}}class ud extends Error{constructor(e,t){super(`Auction has not ended yet${e?`, id: ${e}`:""}${t?`, end time: ${t.toString()}`:""}`)}}class aa extends Error{constructor(e){super(`This functionality is not available because the contract does not implement the '${e.docLinks.contracts}' Extension. Learn how to unlock this functionality at https://portal.thirdweb.com/extensions `)}}var sc=new WeakMap,oc=new WeakMap;class W1 extends Error{constructor(e){var n;let t=`



 TRANSACTION ERROR 


`;if(t+=`Reason: ${e.reason}`,t+=`



 TRANSACTION INFORMATION 

`,t+=Un("from",e.from),t+=Un("to",e.contractName?`${e.to} (${e.contractName})`:e.to),t+=Un("chain",`${e.network.name} (${e.network.chainId})`),e.rpcUrl)try{const a=new URL(e.rpcUrl);t+=Un("rpc",a.hostname)}catch{}if(e.hash&&(t+=Un("tx hash",e.hash)),e.value&&e.value.gt(0)&&(t+=Un("value",`${al(e.value)} ${((n=fp[e.network.chainId])==null?void 0:n.symbol)||""}`)),t+=Un("data",`${e.data}`),e.method&&(t+=Un("method",e.method)),e.sources){const a=e.sources.find(i=>i.source.includes(e.reason));if(a){const i=a.source.split(`
`).map((l,c)=>`${c+1}  ${l}`),s=i.findIndex(l=>l.includes(e.reason));i[s]+="   <-- REVERT";const o=i.slice(s-8,s+4);t+=`



 SOLIDITY STACK TRACE 


`,t+=`File: ${a.filename.replace("node_modules/","")}

`,t+=o.join(`
`)}}t+=`



 DEBUGGING RESOURCES 


`,t+="Need helping debugging? Join our Discord: https://discord.gg/thirdweb",t+=`

`,super(t),_c(this,sc,{writable:!0,value:void 0}),_c(this,oc,{writable:!0,value:void 0}),kc(this,sc,e.reason),kc(this,oc,e)}get reason(){return Ns(this,sc)}get info(){return Ns(this,oc)}}function O1(r){if(r.reason)return r.reason;let e=r;return typeof r=="object"?e=JSON.stringify(r):typeof r!="string"&&(e=r.toString()),dd(/.*?"message":"([^"\\]*).*?/,e)||dd(/.*?"reason":"([^"\\]*).*?/,e)||r.message||""}function Un(r,e){if(e==="")return e;const t=Array(10-r.length).fill(" ").join("");return e.includes(`
`)?e=`

  `+e.split(`
`).join(`
  `):e=`${t}${e}`,`
${r}:${e}`}function dd(r,e){const t=e.match(r)||[];let n="";return(t==null?void 0:t.length)>0&&(n+=t[1]),n}function Os(r,e){return r?r&&r.toString().includes(e)||r&&r.message&&r.message.toString().includes(e)||r&&r.error&&r.error.toString().includes(e):!1}const L1=[{name:"from",type:"address"},{name:"to",type:"address"},{name:"value",type:"uint256"},{name:"gas",type:"uint256"},{name:"nonce",type:"uint256"},{name:"data",type:"bytes"}],U1=[{name:"from",type:"address"},{name:"to",type:"address"},{name:"value",type:"uint256"},{name:"gas",type:"uint256"},{name:"nonce",type:"uint256"},{name:"data",type:"bytes"},{name:"chainid",type:"uint256"}],H1=[{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"uint256",name:"batchId",type:"uint256"}],name:"getNonce",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"}],Mr={},pd={};async function fd(r,e,t){const n=t.join("|"),a=pd[n],i=Date.now()-a>=2e3;if(!(n in Mr)||i){const o=await r.functions[e](...t);Array.isArray(o)&&o.length>0?Mr[n]=O.from(o[0]):Mr[n]=O.from(o),pd[n]=Date.now()}const s=Mr[n];return Mr[n]=O.from(Mr[n]).add(1),s}function z1(r){switch(r){case $.Polygon:return"https://gasstation-mainnet.matic.network/v2";case $.Mumbai:return"https://gasstation-mumbai.matic.today/v2"}}const j1=rt("31","gwei"),q1=rt("1","gwei");function V1(r){switch(r){case $.Polygon:return j1;case $.Mumbai:return q1}}async function G1(r){const e=z1(r);try{const n=(await(await na(e)).json()).standard.maxPriorityFee;if(n>0){const a=parseFloat(n).toFixed(9);return rt(a,"gwei")}}catch(t){console.error("failed to fetch gas",t)}return V1(r)}async function Ls(r,e,t,n){var l,c;const a=r==null?void 0:r.provider;if(!a)throw new Error("missing provider");const i=tt.getPayload(e,t,n);let s="";const o=(await r.getAddress()).toLowerCase();if((l=a==null?void 0:a.provider)!=null&&l.isWalletConnect)s=await a.send("eth_signTypedData",[(await r.getAddress()).toLowerCase(),JSON.stringify(i)]);else try{s=await r._signTypedData(e,t,n)}catch(u){if((c=u==null?void 0:u.message)!=null&&c.includes("Method eth_signTypedData_v4 not supported"))s=await a.send("eth_signTypedData",[o,JSON.stringify(i)]);else try{await a.send("eth_signTypedData_v4",[o,JSON.stringify(i)])}catch(d){throw d}}return{payload:i,signature:uc(Yd(s))}}const K1=[{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"}],$1=[{constant:!0,inputs:[],name:"DOMAIN_SEPARATOR",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],payable:!1,stateMutability:"view",type:"function"},{inputs:[],name:"getDomainSeperator",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"}],Z1=[{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"nonces",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"}],name:"getNonce",outputs:[{internalType:"uint256",name:"nonce",type:"uint256"}],stateMutability:"view",type:"function"}];async function Y1(r,e){const t=new Ge(e,Z1,r);try{return await t.nonces(await r.getAddress())}catch{return await t.getNonce(await r.getAddress())}}async function J1(r,e){const t=new Ge(e,$1,r);try{return await t.DOMAIN_SEPARATOR()}catch{try{return await t.getDomainSeperator()}catch(a){console.error("Error getting domain separator",a)}}}async function Q1(r,e){return new Ge(e,K1,r).name()}async function X1(r,e){const t=await J1(r,e.verifyingContract),n={name:e.name,version:e.version,verifyingContract:e.verifyingContract,salt:ze(O.from(e.chainId).toHexString(),32)};return tt.hashDomain(n)===t?n:e}async function ew(r,e,t,n,a,i,s){const o=await X1(r,{name:await Q1(r,e),version:"1",chainId:await r.getChainId(),verifyingContract:e});s=s||(await Y1(r,e)).toString(),i=i||at;const l={owner:t,spender:n,value:a,nonce:s,deadline:i},c={Permit:[{name:"owner",type:"address"},{name:"spender",type:"address"},{name:"value",type:"uint256"},{name:"nonce",type:"uint256"},{name:"deadline",type:"uint256"}]},{signature:u}=await Ls(r,o,c,l);return{message:l,signature:u}}const Op=()=>typeof window<"u",Lp=()=>!Op();function tw(r,e){if(r.length===0||r.length===1||!e)return r;for(let t=0;t<r.length;t++)for(let n=t+1;n<r.length;n++)e(r[t],r[n])&&r.splice(n,1);return r}class pi extends es{constructor(e,t){super(),S(this,"provider",void 0),S(this,"signer",void 0),S(this,"options",void 0);try{this.options=Ws.parse(t)}catch(i){console.error("invalid sdk options object passed, falling back to default options",i),this.options=Ws.parse({})}const[n,a]=yt(e,this.options);this.signer=n,this.provider=a}updateSignerOrProvider(e){const[t,n]=yt(e,this.options);this.signer=t,this.provider=n}isReadOnly(){return!Zr.isSigner(this.signer)}getSigner(){return this.signer}getProvider(){return this.provider}getSignerOrProvider(){return this.getSigner()||this.getProvider()}}function yt(r,e){let t,n;return Zr.isSigner(r)&&(t=r,r.provider&&(n=r.provider)),e!=null&&e.readonlySettings&&(n=Dc(e.readonlySettings.rpcUrl,e.readonlySettings.chainId)),n||(si.isProvider(r)?n=r:Zr.isSigner(r)||(typeof r=="string"||typeof r=="number"?n=pl(r,e):n=Ba(r))),n||(n=Ba(),console.error("No provider found, using default provider on default chain!")),[t,n]}var Ci=new WeakMap;class pt extends pi{constructor(e,t,n,a){super(e,a),_c(this,Ci,{writable:!0,value:void 0}),S(this,"isValidContract",!1),S(this,"customOverrides",()=>({})),S(this,"writeContract",void 0),S(this,"readContract",void 0),S(this,"abi",void 0),this.abi=n,this.writeContract=new Ge(t,n,this.getSignerOrProvider()),this.readContract=this.writeContract.connect(this.getProvider()),kc(this,Ci,new Ta)}updateSignerOrProvider(e){super.updateSignerOrProvider(e),this.writeContract=this.writeContract.connect(this.getSignerOrProvider()),this.readContract=this.writeContract.connect(this.getProvider())}async getChainID(){const e=this.getProvider(),{chainId:t}=await e.getNetwork();return t}async getSignerAddress(){const e=this.getSigner();if(!e)throw new Error("This action requires a connected wallet to sign the transaction. Please pass a valid signer to the SDK.");return await e.getAddress()}callStatic(){return this.writeContract.callStatic}async getCallOverrides(){if(Op())return{};const e=await this.getProvider().getFeeData();if(e.maxFeePerGas&&e.maxPriorityFeePerGas){const n=await this.getChainID(),a=await this.getProvider().getBlock("latest"),i=a&&a.baseFeePerGas?a.baseFeePerGas:rt("1","gwei");let s;n===$.Mumbai||n===$.Polygon?s=await G1(n):s=O.from(e.maxPriorityFeePerGas);const o=this.getPreferredPriorityFee(s);return{maxFeePerGas:i.mul(2).add(o),maxPriorityFeePerGas:o}}else return{gasPrice:await this.getPreferredGasPrice()}}getPreferredPriorityFee(e){const t=this.options.gasSettings.speed,n=this.options.gasSettings.maxPriceInGwei;let a;switch(t){case"standard":a=O.from(0);break;case"fast":a=e.div(100).mul(5);break;case"fastest":a=e.div(100).mul(10);break}let i=e.add(a);const s=rt(n.toString(),"gwei"),o=rt("2.5","gwei");return i.gt(s)&&(i=s),i.lt(o)&&(i=o),i}async getPreferredGasPrice(){const e=await this.getProvider().getGasPrice(),t=this.options.gasSettings.speed,n=this.options.gasSettings.maxPriceInGwei;let a=e,i;switch(t){case"standard":i=O.from(1);break;case"fast":i=e.div(100).mul(5);break;case"fastest":i=e.div(100).mul(10);break}a=a.add(i);const s=rt(n.toString(),"gwei");return a.gt(s)&&(a=s),a}emitTransactionEvent(e,t){this.emit(wt.Transaction,{status:e,transactionHash:t})}async multiCall(e){return this.sendTransaction("multicall",[e])}async estimateGas(e,t){return this.writeContract.estimateGas[e](...t)}withTransactionOverride(e){this.customOverrides=e}async call(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];let i;try{if(n.length>0&&typeof n[n.length-1]=="object"){const u=n[n.length-1];i=U2.parse(u),n=n.slice(0,n.length-1)}}catch{}const s=ri(hn.parse(this.abi)).filter(u=>u.name===e);if(!s.length)throw new Error(`Function "${e}" not found in contract. Check your dashboard for the list of functions available`);const o=s.find(u=>u.name===e&&u.inputs.length===n.length);if(!o)throw new Error(`Function "${e}" requires ${s[0].inputs.length} arguments, but ${n.length} were provided.
Expected function signature: ${s[0].signature}`);const l=`${e}(${o.inputs.map(u=>u.type).join()})`,c=l in this.readContract.functions?l:e;return o.stateMutability==="view"||o.stateMutability==="pure"?this.readContract[c](...n):{receipt:await this.sendTransaction(c,n,i)}}async sendTransaction(e,t,n){var a;if(n||(n=await this.getCallOverrides()),n={...n,...this.customOverrides()},this.customOverrides=()=>({}),(a=this.options)!=null&&a.gasless&&("openzeppelin"in this.options.gasless||"biconomy"in this.options.gasless)){if(e==="multicall"&&Array.isArray(t[0])&&t[0].length>0){const l=await this.getSignerAddress();t[0]=t[0].map(c=>Bo(["bytes","address"],[c,l]))}const i=this.getProvider(),s=await this.sendGaslessTransaction(e,t,n);this.emitTransactionEvent("submitted",s);const o=await i.waitForTransaction(s);return this.emitTransactionEvent("completed",s),o}else{if(!this.isValidContract){const o=await this.getProvider().getCode(this.readContract.address);if(this.isValidContract=o!=="0x",!this.isValidContract)throw new Error("The address you're trying to send a transaction to is not a smart contract. Make sure you are on the correct network and the contract address is correct")}const i=await this.sendTransactionByFunction(e,t,n);this.emitTransactionEvent("submitted",i.hash);let s;try{s=await i.wait()}catch(o){try{await this.writeContract.callStatic[e](...t,...n.value?[{value:n.value}]:[])}catch(l){throw await this.formatError(l,e,t,n)}throw await this.formatError(o,e,t,n)}return this.emitTransactionEvent("completed",i.hash),s}}async sendTransactionByFunction(e,t,n){const a=this.writeContract.functions[e];if(!a)throw new Error(`invalid function: "${e.toString()}"`);if(!n.gasLimit)try{n.gasLimit=await this.writeContract.estimateGas[e](...t,n)}catch{try{await this.writeContract.callStatic[e](...t,...n.value?[{value:n.value}]:[])}catch(s){throw await this.formatError(s,e,t,n)}}try{return await a(...t,n)}catch(i){const s=await(n.from||this.getSignerAddress()),o=await(n.value?n.value:0),l=await this.getProvider().getBalance(s);throw l.eq(0)||o&&l.lt(o)?await this.formatError(new Error("You have insufficient funds in your account to execute this transaction."),e,t,n):await this.formatError(i,e,t,n)}}async formatError(e,t,n,a){var E,I,D;const i=this.getProvider(),s=await i.getNetwork(),o=await(a.from||this.getSignerAddress()),l=this.readContract.address,c=this.readContract.interface.encodeFunctionData(t,n),u=O.from(a.value||0),d=(E=i.connection)==null?void 0:E.url,h=this.readContract.interface.getFunction(t),m=n.map(F=>JSON.stringify(F).length<=80?JSON.stringify(F):JSON.stringify(F,void 0,2)),b=m.join(", ").length<=80?m.join(", "):`
`+m.map(F=>"  "+F.split(`
`).join(`
  `)).join(`,
`)+`
`,x=`${h.name}(${b})`,f=e.transactionHash||((I=e.transaction)==null?void 0:I.hash)||((D=e.receipt)==null?void 0:D.transactionHash),w=O1(e);let A,T;try{const F=await ua(this.readContract.address,this.getProvider(),Ns(this,Ci));F.name&&(T=F.name),F.metadata.sources&&(A=await Ef(F,Ns(this,Ci)))}catch{}return new W1({reason:w,from:o,to:l,method:x,data:c,network:s,rpcUrl:d,value:u,hash:f,contractName:T,sources:A})}async sendGaslessTransaction(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0;const a=this.getSigner();pe(a,"Cannot execute gasless transaction without valid signer");const i=await this.getChainID(),s=await this.getSignerAddress(),o=this.writeContract.address,l=(n==null?void 0:n.value)||0;if(O.from(l).gt(0))throw new Error("Cannot send native token value with gasless transaction");const c=this.writeContract.interface.encodeFunctionData(e,t);let u=O.from(0);try{u=(await this.readContract.estimateGas[e](...t)).mul(2)}catch{}u.lt(1e5)&&(u=O.from(5e5)),n.gasLimit&&O.from(n.gasLimit).gt(u)&&(u=O.from(n.gasLimit));const d={from:s,to:o,data:c,chainId:i,gasLimit:u,functionName:e.toString(),functionArgs:t,callOverrides:n};return await this.defaultGaslessSendFunction(d)}async signTypedData(e,t,n,a){this.emit(wt.Signature,{status:"submitted",message:a,signature:""});const{signature:i}=await Ls(e,t,n,a);return this.emit(wt.Signature,{status:"completed",message:a,signature:i}),i}parseLogs(e,t){if(!t||t.length===0)return[];const n=this.writeContract.interface.getEventTopic(e);return t.filter(i=>i.topics.indexOf(n)>=0).map(i=>this.writeContract.interface.parseLog(i))}async defaultGaslessSendFunction(e){return this.options.gasless&&"biconomy"in this.options.gasless?this.biconomySendFunction(e):this.defenderSendFunction(e)}async biconomySendFunction(e){var d,h;pe(this.options.gasless&&"biconomy"in this.options.gasless,"calling biconomySendFunction without biconomy");const t=this.getSigner(),n=this.getProvider();pe(t&&n,"signer and provider must be set");const a=new Ge(Sc(e.chainId,"biconomyForwarder"),H1,n),i=0,s=await fd(a,"getNonce",[e.from,i]),o={from:e.from,to:e.to,token:se,txGas:e.gasLimit.toNumber(),tokenGasPrice:"0",batchId:i,batchNonce:s.toNumber(),deadline:Math.floor(Date.now()/1e3+(((d=this.options)==null?void 0:d.gasless)&&"biconomy"in this.options.gasless&&((h=this.options.gasless.biconomy)==null?void 0:h.deadlineSeconds)||3600)),data:e.data},l=ce(cn(["address","address","address","uint256","uint256","uint256","uint256","uint256","bytes32"],[o.from,o.to,o.token,o.txGas,o.tokenGasPrice,o.batchId,o.batchNonce,o.deadline,Je(o.data)]));this.emit(wt.Signature,{status:"submitted",message:l,signature:""});const c=await t.signMessage(l);this.emit(wt.Signature,{status:"completed",message:l,signature:c});const u=await na("https://api.biconomy.io/api/v2/meta-tx/native",{method:"POST",body:JSON.stringify({from:e.from,apiId:this.options.gasless.biconomy.apiId,params:[o,c],to:e.to,gasLimit:e.gasLimit.toHexString()}),headers:{"x-api-key":this.options.gasless.biconomy.apiKey,"Content-Type":"application/json;charset=utf-8"}});if(u.ok){const m=await u.json();if(!m.txHash)throw new Error(`relay transaction failed: ${m.log}`);return m.txHash}throw new Error(`relay transaction failed with status: ${u.status} (${u.statusText})`)}async defenderSendFunction(e){pe(this.options.gasless&&"openzeppelin"in this.options.gasless,"calling openzeppelin gasless transaction without openzeppelin config in the SDK options");const t=this.getSigner(),n=this.getProvider();pe(t,"provider is not set"),pe(n,"provider is not set");const a=this.options.gasless.openzeppelin.relayerForwarderAddress||(this.options.gasless.openzeppelin.useEOAForwarder?$a[e.chainId].openzeppelinForwarderEOA:$a[e.chainId].openzeppelinForwarder),i=new Ge(a,Rb,n),s=await fd(i,"getNonce",[e.from]);let o,l,c;this.options.gasless.experimentalChainlessSupport?(o={name:"GSNv2 Forwarder",version:"0.0.1",verifyingContract:a},l={ForwardRequest:U1},c={from:e.from,to:e.to,value:O.from(0).toString(),gas:O.from(e.gasLimit).toString(),nonce:O.from(s).toString(),data:e.data,chainid:O.from(e.chainId).toString()}):(o={name:"GSNv2 Forwarder",version:"0.0.1",chainId:e.chainId,verifyingContract:a},l={ForwardRequest:L1},c={from:e.from,to:e.to,value:O.from(0).toString(),gas:O.from(e.gasLimit).toString(),nonce:O.from(s).toString(),data:e.data});let u;if(this.emit(wt.Signature,{status:"submitted",message:c,signature:""}),e.functionName==="approve"&&e.functionArgs.length===2){const b=e.functionArgs[0],x=e.functionArgs[1],{message:f,signature:w}=await ew(t,this.writeContract.address,e.from,b,x),{r:A,s:T,v:E}=Yd(w);c={to:this.readContract.address,owner:f.owner,spender:f.spender,value:O.from(f.value).toString(),nonce:O.from(f.nonce).toString(),deadline:O.from(f.deadline).toString(),r:A,s:T,v:E},u=w}else{const{signature:b}=await Ls(t,o,l,c);u=b}let d="forward";c!=null&&c.owner&&(d="permit");const h=JSON.stringify({request:c,signature:u,forwarderAddress:a,type:d});this.emit(wt.Signature,{status:"completed",message:c,signature:u});const m=await na(this.options.gasless.openzeppelin.relayerUrl,{method:"POST",body:h});if(m.ok){const b=await m.json();if(!b.result)throw new Error(`Relay transaction failed: ${b.message}`);return JSON.parse(b.result).txHash}throw new Error(`relay transaction failed with status: ${m.status} (${m.statusText})`)}}function Pn(r){return r.toLowerCase()===Jt||r.toLowerCase()===se}function Up(r){return Pn(r)?Jt:r}async function At(r,e,t){const n=await fi(r,t);return rt(Rn.parse(e),n.decimals)}async function fi(r,e){if(Pn(e)){const t=await r.getNetwork(),n=Pc(t.chainId);return{name:n.name,symbol:n.symbol,decimals:n.decimals}}else{const t=new Ge(e,$b,r),[n,a,i]=await Promise.all([t.name(),t.symbol(),t.decimals()]);return{name:n,symbol:a,decimals:i}}}async function ln(r,e,t){const n=await fi(r,e);return{...n,value:O.from(t),displayValue:$n(t,n.decimals)}}async function wr(r,e,t,n){if(Pn(t))n.value=e;else{const a=r.getSigner(),i=r.getProvider(),s=new pt(a||i,t,It,r.options),o=await r.getSignerAddress(),l=r.readContract.address;return(await s.readContract.allowance(o,l)).lt(e)&&await s.sendTransaction("approve",[l,e]),n}}async function Hp(r,e,t,n,a){const i=r.getSigner(),s=r.getProvider(),o=new pt(i||s,e,It,r.options),l=await r.getSignerAddress(),c=r.readContract.address,u=await o.readContract.allowance(l,c),d=O.from(t).mul(O.from(n)).div(rt("1",a));u.lt(d)&&await o.sendTransaction("approve",[c,u.add(d)])}async function w6(r,e,t){const n=r.getProvider(),a=new pt(n,e,It,{}),i=await r.getSignerAddress(),s=r.readContract.address;return(await a.readContract.allowance(i,s)).gte(t)}async function zp(r,e,t,n,a,i,s,o,l){let c=an(t.maxClaimablePerWallet,a),u=[ze([0],32)],d=t.price,h=t.currencyAddress;try{if(!t.merkleRootHash.toString().startsWith(se)){const f=await hl(r,t.merkleRootHash.toString(),await n(),i.getProvider(),s,l);if(f)u=f.proof,c=f.maxClaimable==="unlimited"?at:rt(f.maxClaimable,a),d=f.price===void 0||f.price==="unlimited"?at:await At(i.getProvider(),f.price,f.currencyAddress||se),h=f.currencyAddress||se;else if(l===Bn.V1)throw new Error("No claim found for this address")}}catch(f){if((f==null?void 0:f.message)==="No claim found for this address")throw f;console.warn("failed to check claim condition merkle root hash, continuing anyways",f)}const m=await i.getCallOverrides()||{},b=d.toString()!==at.toString()?d:t.price,x=h!==se?h:t.currencyAddress;return b.gt(0)&&(Pn(x)?m.value=O.from(b).mul(e).div(rt("1",a)):o&&await Hp(i,x,b,e,a)),{overrides:m,proofs:u,maxClaimable:c,price:b,currencyAddress:x,priceInProof:d,currencyAddressInProof:h}}async function nw(r,e,t){if(!e)return null;const n=e[r];if(n){const a=await t.downloadJSON(n);if(a.isShardedMerkleTree&&a.merkleRoot===r){const i=await Ut.fromUri(n,t);return(i==null?void 0:i.getAllEntries())||null}else{const i=wp.parse(a);if(r===i.merkleRoot)return i.claims.map(s=>({address:s.address,maxClaimable:s.maxClaimable,price:s.price,currencyAddress:s.currencyAddress}))}}return null}async function hl(r,e,t,n,a,i){if(!t)return null;const s=t[e];if(s){const o=await a.downloadJSON(s);if(o.isShardedMerkleTree&&o.merkleRoot===e)return await(await Ut.fromShardedMerkleTreeInfo(o,a)).getProof(r,n,i);const l=wp.parse(o);if(e===l.merkleRoot)return l.claims.find(c=>c.address.toLowerCase()===r.toLowerCase())||null}return null}async function jp(r,e,t){if(r>=t.length)throw Error(`Index out of bounds - got index: ${r} with ${t.length} conditions`);const n=t[r].currencyMetadata.decimals,a=t[r].price,i=$n(a,n),s=zo.parse({...t[r],price:i,...e}),o=vp.parse({...s,price:a});return t.map((l,c)=>{let u;c===r?u=o:u=l;const d=$n(u.price,n);return{...u,price:d}})}async function rw(r,e,t,n,a){const i=[];return{inputsWithSnapshots:await Promise.all(r.map(async o=>{if(o.snapshot&&o.snapshot.length>0){const l=await ow(o.snapshot,e,t,n,a);i.push(l),o.merkleRootHash=l.merkleRoot}else o.merkleRootHash=ze([0],32);return o})),snapshotInfos:i}}function aw(r,e){const t=O.from(r),n=O.from(e);return t.eq(n)?0:t.gt(n)?1:-1}async function qp(r,e,t,n,a){const{inputsWithSnapshots:i,snapshotInfos:s}=await rw(r,e,t,n,a),o=V2.parse(i),l=(await Promise.all(o.map(c=>iw(c,e,t,n)))).sort((c,u)=>aw(c.startTimestamp,u.startTimestamp));return{snapshotInfos:s,sortedConditions:l}}async function iw(r,e,t,n){const a=r.currencyAddress===se?Jt:r.currencyAddress,i=an(r.maxClaimableSupply,e),s=an(r.maxClaimablePerWallet,e);let o;return r.metadata&&(typeof r.metadata=="string"?o=r.metadata:o=await n.upload(r.metadata)),{startTimestamp:r.startTime,maxClaimableSupply:i,supplyClaimed:0,maxClaimablePerWallet:s,pricePerToken:await At(t,r.price,a),currency:a,merkleRoot:r.merkleRootHash.toString(),waitTimeInSecondsBetweenClaims:r.waitInSeconds||0,metadata:o}}function Us(r){return{startTimestamp:r.startTimestamp,maxClaimableSupply:r.maxClaimableSupply,supplyClaimed:r.supplyClaimed,merkleRoot:r.merkleRoot,pricePerToken:r.pricePerToken,currency:r.currency,quantityLimitPerTransaction:r.maxClaimablePerWallet,waitTimeInSecondsBetweenClaims:r.waitTimeInSecondsBetweenClaims||0}}function Hs(r){return{startTimestamp:r.startTimestamp,maxClaimableSupply:r.maxClaimableSupply,supplyClaimed:r.supplyClaimed,merkleRoot:r.merkleRoot,pricePerToken:r.pricePerToken,currency:r.currency,quantityLimitPerWallet:r.maxClaimablePerWallet,metadata:r.metadata||""}}function zs(r){return{startTimestamp:r.startTimestamp,maxClaimableSupply:r.maxClaimableSupply,supplyClaimed:r.supplyClaimed,merkleRoot:r.merkleRoot.toString(),pricePerToken:r.pricePerToken,currency:r.currency,maxClaimablePerWallet:r.quantityLimitPerTransaction,waitTimeInSecondsBetweenClaims:r.waitTimeInSecondsBetweenClaims}}function js(r){return{startTimestamp:r.startTimestamp,maxClaimableSupply:r.maxClaimableSupply,supplyClaimed:r.supplyClaimed,merkleRoot:r.merkleRoot.toString(),pricePerToken:r.pricePerToken,currency:r.currency,maxClaimablePerWallet:r.quantityLimitPerWallet,waitTimeInSecondsBetweenClaims:0,metadata:r.metadata}}async function qs(r,e,t,n,a,i){var h;const s=await ln(t,r.currency,r.pricePerToken),o=Ei(r.maxClaimableSupply,e),l=Ei(r.maxClaimablePerWallet,e),c=Ei(O.from(r.maxClaimableSupply).sub(r.supplyClaimed),e),u=Ei(r.supplyClaimed,e);let d;return r.metadata&&(d=await a.downloadJSON(r.metadata)),vp.parse({startTime:r.startTimestamp,maxClaimableSupply:o,maxClaimablePerWallet:l,currentMintSupply:u,availableSupply:c,waitInSeconds:(h=r.waitTimeInSecondsBetweenClaims)==null?void 0:h.toString(),price:O.from(r.pricePerToken),currency:r.currency,currencyAddress:r.currency,currencyMetadata:s,merkleRootHash:r.merkleRoot,snapshot:i?await nw(r.merkleRoot,n,a):void 0,metadata:d})}function Ei(r,e){return r.toString()===at.toString()?"unlimited":$n(r,e)}function an(r,e){return r==="unlimited"?at:rt(r,e)}async function Vp(r,e,t,n,a){let i={};const s=n||Jt,l=(await At(r.getProvider(),e,s)).mul(t);return l.gt(0)&&(s===Jt?i={value:l}:s!==Jt&&a&&await Hp(r,s,l,t,0)),i}const sw=2;let Bn;(function(r){r[r.V1=1]="V1",r[r.V2=2]="V2"})(Bn||(Bn={}));class Ut{constructor(e,t,n,a,i){S(this,"shardNybbles",void 0),S(this,"shards",void 0),S(this,"trees",void 0),S(this,"storage",void 0),S(this,"baseUri",void 0),S(this,"originalEntriesUri",void 0),S(this,"tokenDecimals",void 0),this.storage=e,this.shardNybbles=a,this.baseUri=t,this.originalEntriesUri=n,this.tokenDecimals=i,this.shards={},this.trees={}}static async fromUri(e,t){try{const n=await t.downloadJSON(e);if(n.isShardedMerkleTree)return Ut.fromShardedMerkleTreeInfo(n,t)}catch{return}}static async fromShardedMerkleTreeInfo(e,t){return new Ut(t,e.baseUri,e.originalEntriesUri,e.shardNybbles,e.tokenDecimals)}static hashEntry(e,t,n,a){switch(a){case Bn.V1:return cn(["address","uint256"],[e.address,an(e.maxClaimable,t)]);case Bn.V2:return cn(["address","uint256","uint256","address"],[e.address,an(e.maxClaimable,t),an(e.price||"unlimited",n),e.currencyAddress||se])}}static async fetchAndCacheDecimals(e,t,n){if(!n)return 18;let a=e[n];return a===void 0&&(a=(await fi(t,n)).decimals,e[n]=a),a}static async buildAndUpload(e,t,n,a,i){let s=arguments.length>5&&arguments[5]!==void 0?arguments[5]:sw;const o=Ho.parse(e),l={};for(const T of o){const E=T.address.slice(2,2+s).toLowerCase();l[E]===void 0&&(l[E]=[]),l[E].push(T)}const c={},u=await Promise.all(Object.entries(l).map(async T=>{let[E,I]=T;return[E,new Fi.MerkleTree(await Promise.all(I.map(async D=>{const F=await Ut.fetchAndCacheDecimals(c,n,D.currencyAddress);return Ut.hashEntry(D,t,F,i)})),Je,{sort:!0}).getHexRoot()]})),d=Object.fromEntries(u),h=new Fi.MerkleTree(Object.values(d),Je,{sort:!0}),m=[];for(const[T,E]of Object.entries(l)){const I={proofs:h.getProof(d[T]).map(D=>"0x"+D.data.toString("hex")),entries:E};m.push({data:JSON.stringify(I),name:`${T}.json`})}const b=await a.uploadBatch(m),x=b[0].slice(0,b[0].lastIndexOf("/")),f=await a.upload(o),w={merkleRoot:h.getHexRoot(),baseUri:x,originalEntriesUri:f,shardNybbles:s,tokenDecimals:t,isShardedMerkleTree:!0},A=await a.upload(w);return{shardedMerkleInfo:w,uri:A}}async getProof(e,t,n){const a=e.slice(2,2+this.shardNybbles).toLowerCase();let i=this.shards[a];const s={};if(i===void 0)try{i=this.shards[a]=await this.storage.downloadJSON(`${this.baseUri}/${a}.json`);const d=await Promise.all(i.entries.map(async h=>{const m=await Ut.fetchAndCacheDecimals(s,t,h.currencyAddress);return Ut.hashEntry(h,this.tokenDecimals,m,n)}));this.trees[a]=new Fi.MerkleTree(d,Je,{sort:!0})}catch{return null}const o=i.entries.find(d=>d.address.toLowerCase()===e.toLowerCase());if(!o)return null;const l=await Ut.fetchAndCacheDecimals(s,t,o.currencyAddress),c=Ut.hashEntry(o,this.tokenDecimals,l,n),u=this.trees[a].getProof(c).map(d=>"0x"+d.data.toString("hex"));return gp.parse({...o,proof:u.concat(i.proofs)})}async getAllEntries(){try{return await this.storage.downloadJSON(this.originalEntriesUri)}catch(e){return console.warn("Could not fetch original snapshot entries",e),[]}}}async function ow(r,e,t,n,a){const i=Ho.parse(r),s=i.map(c=>c.address);if(new Set(s).size<s.length)throw new F1;const l=await Ut.buildAndUpload(i,e,t,n,a);return{merkleRoot:l.shardedMerkleInfo.merkleRoot,snapshotUri:l.uri}}const Gp={admin:"",transfer:"TRANSFER_ROLE",minter:"MINTER_ROLE",pauser:"PAUSER_ROLE",lister:"LISTER_ROLE",asset:"ASSET_ROLE",unwrap:"UNWRAP_ROLE",factory:"FACTORY_ROLE"},Kp=Object.keys(Gp);function ba(r){return r==="admin"?ze([0],32):bo(Gp[r])}class yl{constructor(e){S(this,"contractWrapper",void 0),this.contractWrapper=e}encode(e,t){return this.contractWrapper.readContract.interface.encodeFunctionData(e,t)}decode(e,t){return this.contractWrapper.readContract.interface.decodeFunctionData(e,t)}}const Vs={name:"Royalty",namespace:"royalty",docLinks:{sdk:"sdk.contractroyalty",contracts:"Royalty"},abis:[Ib],features:{}},Gs={name:"PrimarySale",namespace:"sales",docLinks:{sdk:"sdk.contractprimarysale",contracts:"PrimarySale"},abis:[_b],features:{}},Ks={name:"PlatformFee",namespace:"platformFee",docLinks:{sdk:"sdk.platformfee",contracts:"PlatformFee"},abis:[Eb],features:{}},hd={name:"PermissionsEnumerable",namespace:"roles",docLinks:{sdk:"sdk.contractroles",contracts:"PermissionsEnumerable"},abis:[Cb],features:{}},$s={name:"Permissions",namespace:"roles",docLinks:{sdk:"sdk.contractroles",contracts:"Permissions"},abis:[Ab],features:{[hd.name]:hd}},Zs={name:"ContractMetadata",namespace:"metadata",docLinks:{sdk:"sdk.contractmetadata",contracts:"ContractMetadata"},abis:[bb],features:{}},Fc={name:"AppURI",namespace:"appURI",docLinks:{sdk:"sdk.appURI",contracts:"AppURI"},abis:[xb],features:{}},Ys={name:"Ownable",namespace:"owner",docLinks:{sdk:"sdk.owner",contracts:"Ownable"},abis:[Sb],features:{}},yd={name:"Gasless",namespace:"gasless",docLinks:{sdk:"sdk.gaslesstransaction",contracts:""},abis:[mb],features:{}},md={name:"PackVRF",namespace:"pack.vrf",docLinks:{sdk:"sdk.packvrf",contracts:"IPackVRFDirect"},abis:[Tb],features:{}},xd={name:"PluginRouter",namespace:"plugin.router",docLinks:{sdk:"sdk.pluginrouter",contracts:"IRouter"},abis:[kb],features:{}},bd={name:"DirectListings",namespace:"direct.listings",docLinks:{sdk:"",contracts:""},abis:[gb],features:{}},gd={name:"EnglishAuctions",namespace:"english.auctions",docLinks:{sdk:"",contracts:""},abis:[wb],features:{}},wd={name:"Offers",namespace:"offers",docLinks:{sdk:"",contracts:""},abis:[vb],features:{}};class Za{constructor(e,t,n){S(this,"featureName",Zs.name),S(this,"contractWrapper",void 0),S(this,"schema",void 0),S(this,"storage",void 0),this.contractWrapper=e,this.schema=t,this.storage=n}parseOutputMetadata(e){return this.schema.output.parse(e)}parseInputMetadata(e){return this.schema.input.parse(e)}async get(){let e;if(this.supportsContractMetadata(this.contractWrapper)){const t=await this.contractWrapper.readContract.contractURI();t&&t.includes("://")&&(e=await this.storage.downloadJSON(t))}if(!e)try{let t;try{Tt("name",this.contractWrapper)&&(t=await this.contractWrapper.readContract.name())}catch{}const n=await ua(this.contractWrapper.readContract.address,this.contractWrapper.getProvider(),this.storage);e={name:t||n.name,description:n.info.title}}catch{throw new Error("Could not fetch contract metadata")}return this.parseOutputMetadata(e)}async set(e){const t=await this._parseAndUploadMetadata(e),n=this.contractWrapper;if(this.supportsContractMetadata(n))return{receipt:await n.sendTransaction("setContractURI",[t]),data:this.get};throw new aa(Zs)}async update(e){return await this.set({...await this.get(),...e})}async _parseAndUploadMetadata(e){const t=this.parseInputMetadata(e);return this.storage.upload(t)}supportsContractMetadata(e){return oe(e,"ContractMetadata")}}class cw{constructor(e,t){S(this,"featureName",$s.name),S(this,"contractWrapper",void 0),S(this,"roles",void 0),this.contractWrapper=e,this.roles=t}async getAll(){pe(this.roles.length,"this contract has no support for roles");const e={};for(const t of this.roles)e[t]=await this.get(t);return e}async get(e){pe(this.roles.includes(e),`this contract does not support the "${e}" role`);const t=this.contractWrapper;if(Tt("getRoleMemberCount",t)&&Tt("getRoleMember",t)){const n=ba(e),a=(await t.readContract.getRoleMemberCount(n)).toNumber();return await Promise.all(Array.from(Array(a).keys()).map(i=>t.readContract.getRoleMember(n,i)))}throw new Error("Contract does not support enumerating roles. Please implement IPermissionsEnumerable to unlock this functionality.")}async setAll(e){const t=Object.keys(e);pe(t.length,"you must provide at least one role to set"),pe(t.every(s=>this.roles.includes(s)),"this contract does not support the given role");const n=await this.getAll(),a=[],i=t.sort(s=>s==="admin"?1:-1);for(let s=0;s<i.length;s++){const o=i[s],l=e[o]||[],c=n[o]||[],u=l.filter(h=>!c.includes(h)),d=c.filter(h=>!l.includes(h));if(u.length&&u.forEach(h=>{a.push(this.contractWrapper.readContract.interface.encodeFunctionData("grantRole",[ba(o),h]))}),d.length)for(let h=0;h<d.length;h++){const m=d[h],b=await this.getRevokeRoleFunctionName(m);a.push(this.contractWrapper.readContract.interface.encodeFunctionData(b,[ba(o),m]))}}return{receipt:await this.contractWrapper.multiCall(a)}}async verify(e,t){await Promise.all(e.map(async n=>{if(!(await this.get(n)).map(i=>i.toLowerCase()).includes(t.toLowerCase()))throw new D1(t,n)}))}async grant(e,t){return pe(this.roles.includes(e),`this contract does not support the "${e}" role`),{receipt:await this.contractWrapper.sendTransaction("grantRole",[ba(e),t])}}async revoke(e,t){pe(this.roles.includes(e),`this contract does not support the "${e}" role`);const n=await this.getRevokeRoleFunctionName(t);return{receipt:await this.contractWrapper.sendTransaction(n,[ba(e),t])}}async getRevokeRoleFunctionName(e){return(await this.contractWrapper.getSignerAddress()).toLowerCase()===e.toLowerCase()?"renounceRole":"revokeRole"}}class lw{constructor(e,t){S(this,"featureName",Vs.name),S(this,"contractWrapper",void 0),S(this,"metadata",void 0),this.contractWrapper=e,this.metadata=t}async getDefaultRoyaltyInfo(){const[e,t]=await this.contractWrapper.readContract.getDefaultRoyaltyInfo();return ht.parse({fee_recipient:e,seller_fee_basis_points:t})}async getTokenRoyaltyInfo(e){const[t,n]=await this.contractWrapper.readContract.getRoyaltyInfoForToken(e);return ht.parse({fee_recipient:t,seller_fee_basis_points:n})}async setDefaultRoyaltyInfo(e){const t=await this.metadata.get(),n=this.metadata.parseInputMetadata({...t,...e}),a=await this.metadata._parseAndUploadMetadata(n);if(Tt("setContractURI",this.contractWrapper)){const i=[this.contractWrapper.readContract.interface.encodeFunctionData("setDefaultRoyaltyInfo",[n.fee_recipient,n.seller_fee_basis_points]),this.contractWrapper.readContract.interface.encodeFunctionData("setContractURI",[a])];return{receipt:await this.contractWrapper.multiCall(i),data:()=>this.getDefaultRoyaltyInfo()}}else throw new Error("Updating royalties requires implementing ContractMetadata in your contract to support marketplaces like OpenSea.")}async setTokenRoyaltyInfo(e,t){return{receipt:await this.contractWrapper.sendTransaction("setRoyaltyInfoForToken",[e,t.fee_recipient,t.seller_fee_basis_points]),data:()=>this.getDefaultRoyaltyInfo()}}}class uw{constructor(e){S(this,"featureName",Gs.name),S(this,"contractWrapper",void 0),this.contractWrapper=e}async getRecipient(){return await this.contractWrapper.readContract.primarySaleRecipient()}async setRecipient(e){return{receipt:await this.contractWrapper.sendTransaction("setPrimarySaleRecipient",[e])}}}const ml={name:"Failed to load NFT metadata"};async function xl(r,e,t){const n=e.replace("{id}",ze(O.from(r).toHexString(),32).slice(2));let a;try{a=await t.downloadJSON(n)}catch{const s=e.replace("{id}",O.from(r).toString());try{a=await t.downloadJSON(s)}catch{console.warn(`failed to get token metadata: ${JSON.stringify({tokenId:r.toString(),tokenUri:e})} -- falling back to default metadata`),a=ml}}return Y0.parse({...a,id:O.from(r).toString(),uri:e})}async function bl(r,e,t,n){let a;const i=new Ge(r,Do,e),s=await i.supportsInterface(Lo),o=await i.supportsInterface(Uo);if(s)a=await new Ge(r,f2,e).tokenURI(t);else if(o)a=await new Ge(r,h2,e).uri(t);else throw Error("Contract must implement ERC 1155 or ERC 721.");if(!a)throw new fl;return xl(t,a,n)}async function $p(r,e){return typeof r=="string"?r:await e.upload(Sn.parse(r))}async function kr(r,e,t,n){if(dw(r))return r;if(pw(r))return await e.uploadBatch(r.map(i=>Sn.parse(i)),{rewriteFileNames:{fileStartNumber:t||0},onProgress:n==null?void 0:n.onProgress});throw new Error("NFT metadatas must all be of the same type (all URI or all NFTMetadataInput)")}function Gr(r){const e=r[0].substring(0,r[0].lastIndexOf("/"));for(let t=0;t<r.length;t++){const n=r[t].substring(0,r[t].lastIndexOf("/"));if(e!==n)throw new Error(`Can only create batches with the same base URI for every entry in the batch. Expected '${e}' but got '${n}'`)}return e.replace(/\/$/,"")+"/"}function dw(r){return r.find(e=>typeof e!="string")===void 0}function pw(r){return r.find(e=>typeof e!="object")===void 0}class Zp{constructor(e,t,n,a){S(this,"featureName",void 0),S(this,"contractWrapper",void 0),S(this,"storage",void 0),S(this,"nextTokenIdToMintFn",void 0),this.featureName=n,this.nextTokenIdToMintFn=a,this.contractWrapper=e,this.storage=t}async createDelayedRevealBatch(e,t,n,a){if(!n)throw new Error("Password is required");const i=await this.storage.uploadBatch([Sn.parse(e)],{rewriteFileNames:{fileStartNumber:0}}),s=Gr(i),o=await this.nextTokenIdToMintFn(),l=await this.storage.uploadBatch(t.map(E=>Sn.parse(E)),{onProgress:a==null?void 0:a.onProgress,rewriteFileNames:{fileStartNumber:o.toNumber()}}),c=Gr(l),u=await this.contractWrapper.readContract.getBaseURICount(),d=await this.hashDelayRevealPasword(u,n),h=await this.contractWrapper.readContract.encryptDecrypt(Me(c),d);let m;if(await this.isLegacyContract())m=h;else{const E=await this.contractWrapper.getChainID(),I=cn(["bytes","bytes","uint256"],[Me(c),d,E]);m=Ni.encode(["bytes","bytes32"],[h,I])}const x=await this.contractWrapper.sendTransaction("lazyMint",[l.length,s.endsWith("/")?s:`${s}/`,m]),f=this.contractWrapper.parseLogs("TokensLazyMinted",x==null?void 0:x.logs),w=f[0].args.startTokenId,A=f[0].args.endTokenId,T=[];for(let E=w;E.lte(A);E=E.add(1))T.push({id:E,receipt:x});return T}async reveal(e,t){if(!t)throw new Error("Password is required");const n=await this.hashDelayRevealPasword(e,t);try{const a=await this.contractWrapper.callStatic().reveal(e,n);if(!a.includes("://")||!a.endsWith("/"))throw new Error("invalid password")}catch{throw new Error("invalid password")}return{receipt:await this.contractWrapper.sendTransaction("reveal",[e,n])}}async getBatchesToReveal(){const e=await this.contractWrapper.readContract.getBaseURICount();if(e.isZero())return[];const t=Array.from(Array(e.toNumber()).keys()),n=await Promise.all(t.map(c=>{if(Tt("getBatchIdAtIndex",this.contractWrapper))return this.contractWrapper.readContract.getBatchIdAtIndex(c);if(Tt("baseURIIndices",this.contractWrapper))return this.contractWrapper.readContract.baseURIIndices(c);throw new Error("Contract does not have getBatchIdAtIndex or baseURIIndices.")})),a=n.slice(0,n.length-1),i=await Promise.all(Array.from([0,...a]).map(c=>this.getNftMetadata(c.toString()))),s=await this.isLegacyContract(),l=(await Promise.all(Array.from([...n]).map(c=>s?this.getLegacyEncryptedData(c):this.contractWrapper.readContract.encryptedData(c)))).map(c=>mr(c)>0?s?c:Ni.decode(["bytes","bytes32"],c)[0]:c);return i.map((c,u)=>({batchId:O.from(u),batchUri:c.uri,placeholderMetadata:c})).filter((c,u)=>mr(l[u])>0)}async hashDelayRevealPasword(e,t){const n=await this.contractWrapper.getChainID(),a=this.contractWrapper.readContract.address;return cn(["string","uint256","uint256","address"],[t,n,e,a])}async getNftMetadata(e){return bl(this.contractWrapper.readContract.address,this.contractWrapper.getProvider(),e,this.storage)}async isLegacyContract(){if(Tt("contractVersion",this.contractWrapper))try{return await this.contractWrapper.readContract.contractVersion()<=2}catch{return!1}return!1}async getLegacyEncryptedData(e){const n=await new Ge(this.contractWrapper.readContract.address,y2,this.contractWrapper.getProvider()).functions.encryptedBaseURI(e);return n.length>0?n[0]:"0x"}}const vd={name:"ERC20ClaimConditionsV1",namespace:"token.drop.claim",docLinks:{sdk:"sdk.erc20dclaimable",contracts:"DropSinglePhase_V1"},abis:[It,X0],features:{}},Ya={name:"ERC20ClaimConditionsV2",namespace:"token.drop.claim",docLinks:{sdk:"sdk.erc20dclaimable",contracts:"DropSinglePhase"},abis:[It,Q0],features:{}},Td={name:"ERC20ClaimPhasesV2",namespace:"token.drop.claim",docLinks:{sdk:"sdk.erc20dclaimable",contracts:"Drop"},abis:[It,J0],features:{}},Ad={name:"ERC20ClaimPhasesV1",namespace:"token.drop.claim",docLinks:{sdk:"sdk.erc20dclaimable",contracts:"Drop"},abis:[Xx],features:{}},Ja={name:"ERC20Burnable",namespace:"token.burn",docLinks:{sdk:"sdk.erc20burnable",contracts:"IBurnableERC20"},abis:[It,Qx],features:{}},Js={name:"ERC20SignatureMintable",namespace:"token.signature",docLinks:{sdk:"sdk.erc20signaturemintable",contracts:"ISignatureMintERC20"},abis:[It,eb],features:{}},Qs={name:"ERC20BatchMintable",namespace:"token.mint.batch",docLinks:{sdk:"sdk.erc20batchmintable",contracts:"IMulticall"},abis:[It,ep,il],features:{}},Qa={name:"ERC20Mintable",namespace:"token.mint",docLinks:{sdk:"sdk.erc20mintable",contracts:"IMintableERC20"},abis:[It,ep],features:{[Qs.name]:Qs}},Xs={name:"ERC20",namespace:"token",docLinks:{sdk:"sdk.erc20",contracts:"IERC20"},abis:[It],features:{[Ja.name]:Ja,[Qa.name]:Qa,[vd.name]:vd,[Ya.name]:Ya,[Ad.name]:Ad,[Td.name]:Td,[Js.name]:Js}},eo={name:"ERC721Burnable",namespace:"nft.burn",docLinks:{sdk:"sdk.erc721burnable",contracts:"IBurnableERC721"},abis:[lt,tb],features:{}},to={name:"ERC721Revealable",namespace:"nft.drop.revealer",docLinks:{sdk:"sdk.delayedreveal",contracts:"DelayedReveal"},abis:[lt,zt,tp],features:{}},no={name:"ERC721TieredDrop",namespace:"nft.tieredDrop",docLinks:{sdk:"sdk.erc721tiereddrop",contracts:"TieredDrop"},abis:[lt,cb],features:{}},Cd={name:"ERC721ClaimConditionsV1",namespace:"nft.drop.claim",docLinks:{sdk:"sdk.erc721claimable",contracts:"DropSinglePhase_V1"},abis:[lt,zt,X0],features:{}},ro={name:"ERC721ClaimConditionsV2",namespace:"nft.drop.claim",docLinks:{sdk:"sdk.erc721claimable",contracts:"DropSinglePhase"},abis:[lt,zt,Q0],features:{}},Ed={name:"ERC721ClaimPhasesV1",namespace:"nft.drop.claim",docLinks:{sdk:"sdk.erc721claimable",contracts:"Drop"},abis:[rb],features:{}},_d={name:"ERC721ClaimPhasesV2",namespace:"nft.drop.claim",docLinks:{sdk:"sdk.erc721claimable",contracts:"Drop"},abis:[lt,zt,J0],features:{}},Xa={name:"ERC721ClaimCustom",namespace:"nft.drop.claim",docLinks:{sdk:"sdk.erc721claimable",contracts:"IClaimableERC721"},abis:[lt,zt,nb],features:{}},ao={name:"ERC721LazyMintable",namespace:"nft.drop",docLinks:{sdk:"sdk.erc721lazymintable",contracts:"LazyMint"},abis:[lt,zt],features:{[to.name]:to,[Xa.name]:Xa,[Cd.name]:Cd,[ro.name]:ro,[Ed.name]:Ed,[_d.name]:_d}},io={name:"ERC721BatchMintable",namespace:"nft.mint.batch",docLinks:{sdk:"sdk.erc721batchmintable",contracts:"IMulticall"},abis:[lt,np,il],features:{}},ei={name:"ERC721Mintable",namespace:"nft.mint",docLinks:{sdk:"sdk.erc721mintable",contracts:"IMintableERC721"},abis:[lt,np],features:{[io.name]:io}},so={name:"ERC721SignatureMintV2",namespace:"nft.signature",docLinks:{sdk:"sdk.erc721signaturemint",contracts:"ISignatureMintERC721"},abis:[lt,sb],features:{}},kd={name:"ERC721SignatureMintV1",namespace:"nft.signature",docLinks:{sdk:"sdk.erc721signaturemint",contracts:"ISignatureMintERC721"},abis:[ob],features:{}},Nc={name:"ERC721Enumerable",namespace:"nft.query.owned",docLinks:{sdk:"sdk.erc721enumerable",contracts:"IERC721Enumerable"},abis:[lt,ab],features:{}},Kr={name:"ERC721Supply",namespace:"nft.query",docLinks:{sdk:"sdk.erc721supply",contracts:"IERC721Supply"},abis:[lt,ib],features:{[Nc.name]:Nc}},oo={name:"ERC721",namespace:"nft",docLinks:{sdk:"sdk.erc721",contracts:"IERC721"},abis:[lt],features:{[eo.name]:eo,[Kr.name]:Kr,[ei.name]:ei,[ao.name]:ao,[kd.name]:kd,[so.name]:so,[no.name]:no}},or={name:"ERC1155Burnable",namespace:"edition.burn",docLinks:{sdk:"sdk.erc1155burnable",contracts:"IBurnableERC1155"},abis:[Et,lb],features:{}},Id={name:"ERC1155ClaimConditionsV1",namespace:"edition.drop.claim",docLinks:{sdk:"sdk.erc1155claimable",contracts:"DropSinglePhase1155"},abis:[Et,zt,fb],features:{}},co={name:"ERC1155ClaimConditionsV2",namespace:"edition.drop.claim",docLinks:{sdk:"sdk.erc1155claimable",contracts:"DropSinglePhase1155"},abis:[Et,zt,pb],features:{}},Sd={name:"ERC1155ClaimPhasesV2",namespace:"edition.drop.claim",docLinks:{sdk:"sdk.erc1155claimable",contracts:"Drop1155"},abis:[Et,zt,db],features:{}},Pd={name:"ERC1155ClaimPhasesV1",namespace:"edition.drop.claim",docLinks:{sdk:"sdk.erc1155claimable",contracts:"Drop1155"},abis:[rp],features:{}},ti={name:"ERC1155ClaimCustom",namespace:"edition.drop.claim",docLinks:{sdk:"sdk.erc1155claimable",contracts:"IClaimableERC1155"},abis:[Et,zt,ub],features:{}},ia={name:"ERC1155Revealable",namespace:"edition.drop.revealer",docLinks:{sdk:"sdk.drop.delayedreveal",contracts:"DelayedReveal"},abis:[Et,zt,tp],features:{}},lo={name:"ERC1155LazyMintableV2",namespace:"edition.drop",docLinks:{sdk:"sdk.erc1155droppable",contracts:"LazyMint"},abis:[Et,zt],features:{[ia.name]:ia,[ti.name]:ti,[Id.name]:Id,[co.name]:co,[Sd.name]:Sd}},Bd={name:"ERC1155LazyMintableV1",namespace:"edition.drop",docLinks:{sdk:"sdk.erc1155droppable",contracts:"LazyMint"},abis:[rp],features:{[Pd.name]:Pd}},uo={name:"ERC1155SignatureMintable",namespace:"edition.signature",docLinks:{sdk:"sdk.erc1155signaturemintable",contracts:"ISignatureMintERC1155"},abis:[Et,yb],features:{}},po={name:"ERC1155BatchMintable",namespace:"edition.mint.batch",docLinks:{sdk:"sdk.erc1155batchmintable",contracts:"IMulticall"},abis:[Et,ap,il],features:{}},cr={name:"ERC1155Mintable",namespace:"edition.mint",docLinks:{sdk:"sdk.erc1155mintable",contracts:"IMintableERC1155"},abis:[Et,ap],features:{[po.name]:po}},lr={name:"ERC1155Enumerable",namespace:"edition.query",docLinks:{sdk:"sdk.erc1155",contracts:"IERC1155"},abis:[Et,hb],features:{}},fo={name:"ERC1155",namespace:"edition",docLinks:{sdk:"sdk.erc1155enumerable",contracts:"IERC1155Enumerable"},abis:[Et],features:{[or.name]:or,[lr.name]:lr,[cr.name]:cr,[Bd.name]:Bd,[lo.name]:lo,[ia.name]:ia,[uo.name]:uo}},fw={[Xs.name]:Xs,[oo.name]:oo,[fo.name]:fo,[Vs.name]:Vs,[Ks.name]:Ks,[Gs.name]:Gs,[$s.name]:$s,[Zs.name]:Zs,[Fc.name]:Fc,[Ys.name]:Ys,[yd.name]:yd,[md.name]:md,[xd.name]:xd,[bd.name]:bd,[gd.name]:gd,[wd.name]:wd};let Wc;try{Wc=new TextDecoder}catch{}let ae,yr,K=0;const hw=105,yw=57342,mw=57343,Rd=57337,Md=6,Dr={};let _e={},qe,ho,yo=0,ni=0,Qe,Zt,je=[],Oc=[],_t,bt,Aa,Dd={useRecords:!1,mapsAsObjects:!0},Lc=!1;class mo{constructor(e){if(e&&((e.keyMap||e._keyMap)&&!e.useRecords&&(e.useRecords=!1,e.mapsAsObjects=!0),e.useRecords===!1&&e.mapsAsObjects===void 0&&(e.mapsAsObjects=!0),e.getStructures&&(e.getShared=e.getStructures),e.getShared&&!e.structures&&((e.structures=[]).uninitialized=!0),e.keyMap)){this.mapKey=new Map;for(let[t,n]of Object.entries(e.keyMap))this.mapKey.set(n,t)}Object.assign(this,e)}decodeKey(e){return this.keyMap&&this.mapKey.get(e)||e}decode(e,t){if(ae)return Xp(()=>(ef(),this?this.decode(e,t):mo.prototype.decode.call(Dd,e,t)));yr=t>-1?t:e.length,K=0,ni=0,ho=null,Qe=null,ae=e;try{bt=e.dataView||(e.dataView=new DataView(e.buffer,e.byteOffset,e.byteLength))}catch(n){throw ae=null,e instanceof Uint8Array?n:new Error("Source must be a Uint8Array or Buffer but was a "+(e&&typeof e=="object"?e.constructor.name:typeof e))}if(this instanceof mo){if(_e=this,_t=this.sharedValues&&(this.pack?new Array(this.maxPrivatePackedValues||16).concat(this.sharedValues):this.sharedValues),this.structures)return qe=this.structures,Fd();(!qe||qe.length>0)&&(qe=[])}else _e=Dd,(!qe||qe.length>0)&&(qe=[]),_t=null;return Fd()}}function Fd(){try{let r=Ie();if(Qe){if(K>=Qe.postBundlePosition){let e=new Error("Unexpected bundle position");throw e.incomplete=!0,e}K=Qe.postBundlePosition,Qe=null}if(K==yr)qe=null,ae=null,Zt&&(Zt=null);else if(K>yr){let e=new Error("Unexpected end of CBOR data");throw e.incomplete=!0,e}else if(!Lc)throw new Error("Data read, but end of buffer not reached");return r}catch(r){throw ef(),(r instanceof RangeError||r.message.startsWith("Unexpected end of buffer"))&&(r.incomplete=!0),r}}function Ie(){let r=ae[K++],e=r>>5;if(r=r&31,r>23)switch(r){case 24:r=ae[K++];break;case 25:if(e==7)return ww();r=bt.getUint16(K),K+=2;break;case 26:if(e==7){let t=bt.getFloat32(K);if(_e.useFloat32>2){let n=tf[(ae[K]&127)<<1|ae[K+1]>>7];return K+=4,(n*t+(t>0?.5:-.5)>>0)/n}return K+=4,t}r=bt.getUint32(K),K+=4;break;case 27:if(e==7){let t=bt.getFloat64(K);return K+=8,t}if(e>1){if(bt.getUint32(K)>0)throw new Error("JavaScript does not support arrays, maps, or strings with length over 4294967295");r=bt.getUint32(K+4)}else _e.int64AsNumber?(r=bt.getUint32(K)*4294967296,r+=bt.getUint32(K+4)):r=bt.getBigUint64(K);K+=8;break;case 31:switch(e){case 2:case 3:throw new Error("Indefinite length not supported for byte or text strings");case 4:let t=[],n,a=0;for(;(n=Ie())!=Dr;)t[a++]=n;return e==4?t:e==3?t.join(""):Buffer.concat(t);case 5:let i;if(_e.mapsAsObjects){let s={};if(_e.keyMap)for(;(i=Ie())!=Dr;)s[sn(_e.decodeKey(i))]=Ie();else for(;(i=Ie())!=Dr;)s[sn(i)]=Ie();return s}else{Aa&&(_e.mapsAsObjects=!0,Aa=!1);let s=new Map;if(_e.keyMap)for(;(i=Ie())!=Dr;)s.set(_e.decodeKey(i),Ie());else for(;(i=Ie())!=Dr;)s.set(i,Ie());return s}case 7:return Dr;default:throw new Error("Invalid major type for indefinite length "+e)}default:throw new Error("Unknown token "+r)}switch(e){case 0:return r;case 1:return~r;case 2:return gw(r);case 3:if(ni>=K)return ho.slice(K-yo,(K+=r)-yo);if(ni==0&&yr<140&&r<32){let a=r<16?Yp(r):bw(r);if(a!=null)return a}return xw(r);case 4:let t=new Array(r);for(let a=0;a<r;a++)t[a]=Ie();return t;case 5:if(_e.mapsAsObjects){let a={};if(_e.keyMap)for(let i=0;i<r;i++)a[sn(_e.decodeKey(Ie()))]=Ie();else for(let i=0;i<r;i++)a[sn(Ie())]=Ie();return a}else{Aa&&(_e.mapsAsObjects=!0,Aa=!1);let a=new Map;if(_e.keyMap)for(let i=0;i<r;i++)a.set(_e.decodeKey(Ie()),Ie());else for(let i=0;i<r;i++)a.set(Ie(),Ie());return a}case 6:if(r>=Rd){let a=qe[r&8191];if(a)return a.read||(a.read=Uc(a)),a.read();if(r<65536){if(r==mw)return zc(Ie());if(r==yw){let i=Ca(),s=Ie();for(let o=2;o<i;o++)zc([s++,Ie()]);return Ie()}else if(r==Rd)return _w();if(_e.getShared&&(gl(),a=qe[r&8191],a))return a.read||(a.read=Uc(a)),a.read()}}let n=je[r];if(n)return n.handlesRead?n(Ie):n(Ie());{let a=Ie();for(let i=0;i<Oc.length;i++){let s=Oc[i](r,a);if(s!==void 0)return s}return new jo(a,r)}case 7:switch(r){case 20:return!1;case 21:return!0;case 22:return null;case 23:return;case 31:default:let a=(_t||ar())[r];if(a!==void 0)return a;throw new Error("Unknown token "+r)}default:if(isNaN(r)){let a=new Error("Unexpected end of CBOR data");throw a.incomplete=!0,a}throw new Error("Unknown CBOR token "+r)}}const Nd=/^[a-zA-Z_$][a-zA-Z\d_$]*$/;function Uc(r){function e(){let t=ae[K++];if(t=t&31,t>23)switch(t){case 24:t=ae[K++];break;case 25:t=bt.getUint16(K),K+=2;break;case 26:t=bt.getUint32(K),K+=4;break;default:throw new Error("Expected array header, but got "+ae[K-1])}let n=this.compiledReader;for(;n;){if(n.propertyCount===t)return n(Ie);n=n.next}if(this.slowReads++>=3){let i=this.length==t?this:this.slice(0,t);return n=_e.keyMap?new Function("r","return {"+i.map(s=>_e.decodeKey(s)).map(s=>Nd.test(s)?sn(s)+":r()":"["+JSON.stringify(s)+"]:r()").join(",")+"}"):new Function("r","return {"+i.map(s=>Nd.test(s)?sn(s)+":r()":"["+JSON.stringify(s)+"]:r()").join(",")+"}"),this.compiledReader&&(n.next=this.compiledReader),n.propertyCount=t,this.compiledReader=n,n(Ie)}let a={};if(_e.keyMap)for(let i=0;i<t;i++)a[sn(_e.decodeKey(this[i]))]=Ie();else for(let i=0;i<t;i++)a[sn(this[i])]=Ie();return a}return r.slowReads=0,e}function sn(r){return r==="__proto__"?"__proto_":r}let xw=Hc;function Hc(r){let e;if(r<16&&(e=Yp(r)))return e;if(r>64&&Wc)return Wc.decode(ae.subarray(K,K+=r));const t=K+r,n=[];for(e="";K<t;){const a=ae[K++];if(!(a&128))n.push(a);else if((a&224)===192){const i=ae[K++]&63;n.push((a&31)<<6|i)}else if((a&240)===224){const i=ae[K++]&63,s=ae[K++]&63;n.push((a&31)<<12|i<<6|s)}else if((a&248)===240){const i=ae[K++]&63,s=ae[K++]&63,o=ae[K++]&63;let l=(a&7)<<18|i<<12|s<<6|o;l>65535&&(l-=65536,n.push(l>>>10&1023|55296),l=56320|l&1023),n.push(l)}else n.push(a);n.length>=4096&&(e+=et.apply(String,n),n.length=0)}return n.length>0&&(e+=et.apply(String,n)),e}let et=String.fromCharCode;function bw(r){let e=K,t=new Array(r);for(let n=0;n<r;n++){const a=ae[K++];if((a&128)>0){K=e;return}t[n]=a}return et.apply(String,t)}function Yp(r){if(r<4)if(r<2){if(r===0)return"";{let e=ae[K++];if((e&128)>1){K-=1;return}return et(e)}}else{let e=ae[K++],t=ae[K++];if((e&128)>0||(t&128)>0){K-=2;return}if(r<3)return et(e,t);let n=ae[K++];if((n&128)>0){K-=3;return}return et(e,t,n)}else{let e=ae[K++],t=ae[K++],n=ae[K++],a=ae[K++];if((e&128)>0||(t&128)>0||(n&128)>0||(a&128)>0){K-=4;return}if(r<6){if(r===4)return et(e,t,n,a);{let i=ae[K++];if((i&128)>0){K-=5;return}return et(e,t,n,a,i)}}else if(r<8){let i=ae[K++],s=ae[K++];if((i&128)>0||(s&128)>0){K-=6;return}if(r<7)return et(e,t,n,a,i,s);let o=ae[K++];if((o&128)>0){K-=7;return}return et(e,t,n,a,i,s,o)}else{let i=ae[K++],s=ae[K++],o=ae[K++],l=ae[K++];if((i&128)>0||(s&128)>0||(o&128)>0||(l&128)>0){K-=8;return}if(r<10){if(r===8)return et(e,t,n,a,i,s,o,l);{let c=ae[K++];if((c&128)>0){K-=9;return}return et(e,t,n,a,i,s,o,l,c)}}else if(r<12){let c=ae[K++],u=ae[K++];if((c&128)>0||(u&128)>0){K-=10;return}if(r<11)return et(e,t,n,a,i,s,o,l,c,u);let d=ae[K++];if((d&128)>0){K-=11;return}return et(e,t,n,a,i,s,o,l,c,u,d)}else{let c=ae[K++],u=ae[K++],d=ae[K++],h=ae[K++];if((c&128)>0||(u&128)>0||(d&128)>0||(h&128)>0){K-=12;return}if(r<14){if(r===12)return et(e,t,n,a,i,s,o,l,c,u,d,h);{let m=ae[K++];if((m&128)>0){K-=13;return}return et(e,t,n,a,i,s,o,l,c,u,d,h,m)}}else{let m=ae[K++],b=ae[K++];if((m&128)>0||(b&128)>0){K-=14;return}if(r<15)return et(e,t,n,a,i,s,o,l,c,u,d,h,m,b);let x=ae[K++];if((x&128)>0){K-=15;return}return et(e,t,n,a,i,s,o,l,c,u,d,h,m,b,x)}}}}}function gw(r){return _e.copyBuffers?Uint8Array.prototype.slice.call(ae,K,K+=r):ae.subarray(K,K+=r)}let Jp=new Float32Array(1),_i=new Uint8Array(Jp.buffer,0,4);function ww(){let r=ae[K++],e=ae[K++],t=(r&127)>>2;if(t===31)return e||r&3?NaN:r&128?-1/0:1/0;if(t===0){let n=((r&3)<<8|e)/16777216;return r&128?-n:n}return _i[3]=r&128|(t>>1)+56,_i[2]=(r&7)<<5|e>>3,_i[1]=e<<5,_i[0]=0,Jp[0]}class jo{constructor(e,t){this.value=e,this.tag=t}}je[0]=r=>new Date(r);je[1]=r=>new Date(Math.round(r*1e3));je[2]=r=>{let e=BigInt(0);for(let t=0,n=r.byteLength;t<n;t++)e=BigInt(r[t])+e<<BigInt(8);return e};je[3]=r=>BigInt(-1)-je[2](r);je[4]=r=>Number(r[1]+"e"+r[0]);je[5]=r=>r[1]*Math.exp(r[0]*Math.log(2));const zc=r=>{let e=r[0]-57344,t=r[1],n=qe[e];n&&n.isShared&&((qe.restoreStructures||(qe.restoreStructures=[]))[e]=n),qe[e]=t,t.read=Uc(t);let a={};if(_e.keyMap)for(let i=2,s=r.length;i<s;i++){let o=_e.decodeKey(t[i-2]);a[sn(o)]=r[i]}else for(let i=2,s=r.length;i<s;i++){let o=t[i-2];a[sn(o)]=r[i]}return a};je[hw]=zc;je[14]=r=>Qe?Qe[0].slice(Qe.position0,Qe.position0+=r):new jo(r,14);je[15]=r=>Qe?Qe[1].slice(Qe.position1,Qe.position1+=r):new jo(r,15);let vw={Error,RegExp};je[27]=r=>(vw[r[0]]||Error)(r[1],r[2]);const Qp=r=>{if(ae[K++]!=132)throw new Error("Packed values structure must be followed by a 4 element array");let e=r();return _t=_t?e.concat(_t.slice(e.length)):e,_t.prefixes=r(),_t.suffixes=r(),r()};Qp.handlesRead=!0;je[51]=Qp;je[Md]=r=>{if(!_t)if(_e.getShared)gl();else return new jo(r,Md);if(typeof r=="number")return _t[16+(r>=0?2*r:-2*r-1)];throw new Error("No support for non-integer packed references yet")};je[25]=r=>stringRefs[r];je[256]=r=>{stringRefs=[];try{return r()}finally{stringRefs=null}};je[256].handlesRead=!0;je[28]=r=>{Zt||(Zt=new Map,Zt.id=0);let e=Zt.id++,t=ae[K],n;t>>5==4?n=[]:n={};let a={target:n};Zt.set(e,a);let i=r();return a.used?Object.assign(n,i):(a.target=i,i)};je[28].handlesRead=!0;je[29]=r=>{let e=Zt.get(r);return e.used=!0,e.target};je[258]=r=>new Set(r);(je[259]=r=>(_e.mapsAsObjects&&(_e.mapsAsObjects=!1,Aa=!0),r())).handlesRead=!0;function Fr(r,e){return typeof r=="string"?r+e:r instanceof Array?r.concat(e):Object.assign({},r,e)}function ar(){if(!_t)if(_e.getShared)gl();else throw new Error("No packed values available");return _t}const Tw=1399353956;Oc.push((r,e)=>{if(r>=225&&r<=255)return Fr(ar().prefixes[r-224],e);if(r>=28704&&r<=32767)return Fr(ar().prefixes[r-28672],e);if(r>=1879052288&&r<=2147483647)return Fr(ar().prefixes[r-1879048192],e);if(r>=216&&r<=223)return Fr(e,ar().suffixes[r-216]);if(r>=27647&&r<=28671)return Fr(e,ar().suffixes[r-27639]);if(r>=1811940352&&r<=1879048191)return Fr(e,ar().suffixes[r-1811939328]);if(r==Tw)return{packedValues:_t,structures:qe.slice(0),version:e};if(r==55799)return e});const Aw=new Uint8Array(new Uint16Array([1]).buffer)[0]==1,Wd=[Uint8Array],Cw=[64];for(let r=0;r<Wd.length;r++)Ew(Wd[r],Cw[r]);function Ew(r,e){let t="get"+r.name.slice(0,-5);typeof r!="function"&&(r=null);let n=r.BYTES_PER_ELEMENT;for(let a=0;a<2;a++){if(!a&&n==1)continue;let i=n==2?1:n==4?2:3;je[a?e:e-4]=n==1||a==Aw?s=>{if(!r)throw new Error("Could not find typed array for code "+e);return new r(Uint8Array.prototype.slice.call(s,0).buffer)}:s=>{if(!r)throw new Error("Could not find typed array for code "+e);let o=new DataView(s.buffer,s.byteOffset,s.byteLength),l=s.length>>i,c=new r(l),u=o[t];for(let d=0;d<l;d++)c[d]=u.call(o,d<<i,a);return c}}}function _w(){let r=Ca(),e=K+Ie();for(let n=2;n<r;n++){let a=Ca();K+=a}let t=K;return K=e,Qe=[Hc(Ca()),Hc(Ca())],Qe.position0=0,Qe.position1=0,Qe.postBundlePosition=K,K=t,Ie()}function Ca(){let r=ae[K++]&31;if(r>23)switch(r){case 24:r=ae[K++];break;case 25:r=bt.getUint16(K),K+=2;break;case 26:r=bt.getUint32(K),K+=4;break}return r}function gl(){if(_e.getShared){let r=Xp(()=>(ae=null,_e.getShared()))||{},e=r.structures||[];_e.sharedVersion=r.version,_t=_e.sharedValues=r.packedValues,qe===!0?_e.structures=qe=e:qe.splice.apply(qe,[0,e.length].concat(e))}}function Xp(r){let e=yr,t=K,n=yo,a=ni,i=ho,s=Zt,o=Qe,l=new Uint8Array(ae.slice(0,yr)),c=qe,u=_e,d=Lc,h=r();return yr=e,K=t,yo=n,ni=a,ho=i,Zt=s,Qe=o,ae=l,Lc=d,qe=c,_e=u,bt=new DataView(ae.buffer,ae.byteOffset,ae.byteLength),h}function ef(){ae=null,Zt=null,qe=null}const tf=new Array(147);for(let r=0;r<256;r++)tf[r]=Number("1e"+Math.floor(45.15-r*.30103));const kw=new mo({useRecords:!1}),Iw=kw.decode;function Sw(r,e){return Pw(r,e.abis)}function Pw(r,e){const t=ri(r),n=e.flatMap(i=>ri(i));return t.filter(i=>n.find(o=>o.name===i.name&&o.inputs.length===i.inputs.length&&o.inputs.every((l,c)=>{var u;return l.type==="tuple"||l.type==="tuple[]"?l.type===i.inputs[c].type&&((u=l.components)==null?void 0:u.every((d,h)=>{var m,b;return d.type===((b=(m=i.inputs[c].components)==null?void 0:m[h])==null?void 0:b.type)})):l.type===i.inputs[c].type}))!==void 0).length===n.length}async function Bw(r,e){const t=await ai(r,e);return rf(t.abi)}async function Rw(r,e){const t=await ai(r,e);return ri(t.abi,t.metadata)}function nf(r,e,t){var n,a,i,s,o,l,c,u,d,h;return((o=(s=(a=(n=e==null?void 0:e.output)==null?void 0:n.userdoc)==null?void 0:a[t])==null?void 0:s[Object.keys(((i=e==null?void 0:e.output)==null?void 0:i.userdoc[t])||{}).find(m=>m.includes(r||"unknown"))||""])==null?void 0:o.notice)||((h=(d=(c=(l=e==null?void 0:e.output)==null?void 0:l.devdoc)==null?void 0:c[t])==null?void 0:d[Object.keys(((u=e==null?void 0:e.output)==null?void 0:u.devdoc[t])||{}).find(m=>m.includes(r||"unknown"))||""])==null?void 0:h.details)}function rf(r){for(const e of r)if(e.type==="constructor")return e.inputs||[];return[]}function Mw(r,e){for(const t of r)if(t.type==="function"&&t.name===e)return t.inputs||[];return[]}function ri(r,e){var a,i,s,o;const t=(r||[]).filter(l=>l.type==="function"),n=[];for(const l of t){const c=nf(l.name,e,"methods"),u=((i=(a=l.inputs)==null?void 0:a.map(x=>`${x.name||"key"}: ${jc(x)}`))==null?void 0:i.join(", "))||"",d=u?`, ${u}`:"",h=(o=(s=l.outputs)==null?void 0:s.map(x=>jc(x,!0)))==null?void 0:o.join(", "),m=h?`: Promise<${h}>`:": Promise<TransactionResult>",b=`contract.call("${l.name}"${d})${m}`;n.push({inputs:l.inputs||[],outputs:l.outputs||[],name:l.name||"unknown",signature:b,stateMutability:l.stateMutability||"",comment:c})}return n}function Dw(r,e){const t=(r||[]).filter(a=>a.type==="event"),n=[];for(const a of t){const i=nf(a.name,e,"events");n.push({inputs:a.inputs||[],outputs:a.outputs||[],name:a.name||"unknown",comment:i})}return n}function jc(r){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,n=r.type,a=!1;return n.endsWith("[]")&&(a=!0,n=n.slice(0,-2)),n.startsWith("bytes")&&(n="BytesLike"),(n.startsWith("uint")||n.startsWith("int"))&&(n=e?"BigNumber":"BigNumberish"),n.startsWith("bool")&&(n="boolean"),n==="address"&&(n="string"),n==="tuple"&&r.components&&(n=`{ ${r.components.map(i=>jc(i,!1,!0)).join(", ")} }`),a&&(n+="[]"),t&&(n=`${r.name}: ${n}`),n}function Fw(r){if(r.startsWith("0x363d3d373d3d3d363d73"))return`0x${r.slice(22,62)}`;if(r.startsWith("0x36603057343d5230"))return`0x${r.slice(122,162)}`;if(r.startsWith("0x3d3d3d3d363d3d37363d73"))return`0x${r.slice(24,64)}`;if(r.startsWith("0x366000600037611000600036600073"))return`0x${r.slice(32,72)}`}async function xo(r,e){const t=await e.getCode(r);if(t==="0x"){const n=await e.getNetwork();throw new Error(`Contract at ${r} does not exist on chain '${n.name}' (chainId: ${n.chainId})`)}try{const n=Fw(t);if(n)return await xo(n,e)}catch{}try{const n=await e.getStorageAt(r,O.from("0x360894a13ba1a3210667c828492db98dca3e2076cc3735a920a3ca505d382bbc")),a=Yf(n);if(a!=="0x")return await xo(a,e)}catch{}return await Nw(t)}function Nw(r){const e=Ww(r),t=e[e.length-2]*256+e[e.length-1],n=Uint8Array.from(e.slice(e.length-2-t,-2)),a=Iw(n);if("ipfs"in a&&a.ipfs)try{return`ipfs://${E2.encode(a.ipfs)}`}catch(i){console.warn("feature-detection ipfs cbor failed",i)}}function Ww(r){if(r=r.toString(16),r.startsWith("0x")||(r=`0x${r}`),!Ow(r))throw new Error(`Given value "${r}" is not a valid hex string.`);r=r.replace(/^0x/i,"");const e=[];for(let t=0;t<r.length;t+=2)e.push(parseInt(r.slice(t,t+2),16));return e}function Ow(r){return(typeof r=="string"||typeof r=="number")&&/^(-)?0x[0-9a-f]*$/i.test(r.toString())}async function af(r,e){return Vo.parse(JSON.parse(await(await e.download(r)).text()))}async function ai(r,e){const t=await af(r,e),n=await(await e.download(t.bytecodeUri)).text(),a=await Vc(t.metadataUri,e);return X5.parse({...t,...a,bytecode:n})}async function sf(r,e){const t=await(await e.download(r)).text();return $5.parse(JSON.parse(t))}function of(r){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:fw;const t={};for(const n in e){const a=e[n],i=Sw(r,a),s=of(r,a.features);t[n]={...a,features:s,enabled:i}}return t}function cf(r,e){const t=of(r);return lf(t,e)}function he(r,e){if(!r)throw new aa(e);return r}function oe(r,e){return cf(hn.parse(r.abi),e)}function lf(r,e){const t=Object.keys(r);if(!t.includes(e)){let a=!1;for(const i of t){const s=r[i];if(a=lf(s.features,e),a)break}return a}return r[e].enabled}function Tt(r,e){return r in e.readContract.functions}let Vn;(function(r){r[r.Direct=0]="Direct",r[r.Auction=1]="Auction"})(Vn||(Vn={}));let Od;(function(r){r[r.UNSET=0]="UNSET",r[r.Created=1]="Created",r[r.Completed=2]="Completed",r[r.Cancelled=3]="Cancelled",r[r.Active=4]="Active",r[r.Expired=5]="Expired"})(Od||(Od={}));let Ld;(function(r){r[r.Pending=0]="Pending",r[r.Active=1]="Active",r[r.Canceled=2]="Canceled",r[r.Defeated=3]="Defeated",r[r.Succeeded=4]="Succeeded",r[r.Queued=5]="Queued",r[r.Expired=6]="Expired",r[r.Executed=7]="Executed"})(Ld||(Ld={}));let Ud;(function(r){r[r.Against=0]="Against",r[r.For=1]="For",r[r.Abstain=2]="Abstain"})(Ud||(Ud={}));let Se;(function(r){r.NotEnoughSupply="There is not enough supply to claim.",r.AddressNotAllowed="This address is not on the allowlist.",r.WaitBeforeNextClaimTransaction="Not enough time since last claim transaction. Please wait.",r.AlreadyClaimed="You have already claimed the token.",r.NotEnoughTokens="There are not enough tokens in the wallet to pay for the claim.",r.NoActiveClaimPhase="There is no active claim phase at the moment. Please check back in later.",r.NoClaimConditionSet="There is no claim condition set.",r.NoWallet="No wallet connected.",r.Unknown="No claim conditions found."})(Se||(Se={}));class uf{constructor(e){S(this,"contractWrapper",void 0),this.contractWrapper=e}async gasCostOf(e,t){const n=await this.contractWrapper.getPreferredGasPrice(),a=await this.contractWrapper.estimateGas(e,t);return al(a.mul(n))}async gasLimitOf(e,t){return this.contractWrapper.estimateGas(e,t)}async currentGasPriceInGwei(){const e=await this.contractWrapper.getProvider().getGasPrice();return $n(e,"gwei")}}class Mn{static make(e){return new Mn(e)}constructor(e){S(this,"contractWrapper",void 0),S(this,"functionName",void 0),S(this,"args",void 0),S(this,"overrides",void 0),S(this,"encoder",void 0),S(this,"estimator",void 0),this.contractWrapper=e.contractWrapper,this.functionName=e.functionName,this.args=e.args||[],this.overrides=e.overrides,this.encoder=new yl(this.contractWrapper),this.estimator=new uf(this.contractWrapper)}overrideGasLimit(e){return this.overrides={...this.overrides,gasLimit:e},this}overrideGasPrice(e){return this.overrides={...this.overrides,gasPrice:e},this}overrideNonce(e){return this.overrides={...this.overrides,nonce:e},this}overrideValue(e){return this.overrides={...this.overrides,value:e},this}async estimateGasLimit(){return await this.estimator.gasLimitOf(this.functionName,[...this.args,this.overrides||{}])}async estimateGasCostInEther(){return await this.estimator.gasCostOf(this.functionName,[...this.args,this.overrides||{}])}async encodeFunctionData(){return this.encoder.encode(this.functionName,this.args)}async submit(){return await this.contractWrapper.sendTransactionByFunction(this.functionName,this.args,this.overrides||{})}async execute(){return{receipt:await this.contractWrapper.sendTransaction(this.functionName,this.args,this.overrides||{})}}}class df{constructor(e,t,n){S(this,"contractWrapper",void 0),S(this,"metadata",void 0),S(this,"storage",void 0),this.storage=n,this.contractWrapper=e,this.metadata=t}async getActive(e){const t=await this.get(),n=await this.metadata.get();return await qs(t,await this.getTokenDecimals(),this.contractWrapper.getProvider(),n.merkle||{},this.storage,(e==null?void 0:e.withAllowList)||!1)}async get(e){if(this.isLegacySinglePhaseDrop(this.contractWrapper)){const t=await this.contractWrapper.readContract.claimCondition();return zs(t)}else if(this.isLegacyMultiPhaseDrop(this.contractWrapper)){const t=e!==void 0?e:await this.contractWrapper.readContract.getActiveClaimConditionId(),n=await this.contractWrapper.readContract.getClaimConditionById(t);return zs(n)}else if(this.isNewSinglePhaseDrop(this.contractWrapper)){const t=await this.contractWrapper.readContract.claimCondition();return js(t)}else if(this.isNewMultiphaseDrop(this.contractWrapper)){const t=e!==void 0?e:await this.contractWrapper.readContract.getActiveClaimConditionId(),n=await this.contractWrapper.readContract.getClaimConditionById(t);return js(n)}else throw new Error("Contract does not support claim conditions")}async getAll(e){if(this.isLegacyMultiPhaseDrop(this.contractWrapper)||this.isNewMultiphaseDrop(this.contractWrapper)){const t=await this.contractWrapper.readContract.claimCondition(),n=t.currentStartId.toNumber(),a=t.count.toNumber(),i=[];for(let l=n;l<n+a;l++)i.push(await this.get(l));const s=await this.metadata.get(),o=await this.getTokenDecimals();return Promise.all(i.map(l=>qs(l,o,this.contractWrapper.getProvider(),s.merkle,this.storage,(e==null?void 0:e.withAllowList)||!1)))}else return[await this.getActive(e)]}async canClaim(e,t){return(await this.getClaimIneligibilityReasons(e,t)).length===0}async getClaimIneligibilityReasons(e,t){const n=[];let a,i;const s=await this.getTokenDecimals(),o=rt(Rn.parse(e),s);if(t===void 0)try{t=await this.contractWrapper.getSignerAddress()}catch(d){console.warn("failed to get signer address",d)}if(!t)return[Se.NoWallet];try{i=await this.getActive()}catch(d){return Os(d,"!CONDITION")||Os(d,"no active mint condition")?(n.push(Se.NoClaimConditionSet),n):(console.warn("failed to get active claim condition",d),n.push(Se.Unknown),n)}i.availableSupply!=="unlimited"&&rt(i.availableSupply,s).lt(o)&&n.push(Se.NotEnoughSupply);const c=Wi(i.merkleRootHash).length>0;let u=null;if(c){if(u=await this.getClaimerProofs(t),!u&&(this.isLegacySinglePhaseDrop(this.contractWrapper)||this.isLegacyMultiPhaseDrop(this.contractWrapper)))return n.push(Se.AddressNotAllowed),n;if(u)try{const d=await this.prepareClaim(e,!1,s,t);let h;if(this.isLegacyMultiPhaseDrop(this.contractWrapper)){if(a=await this.contractWrapper.readContract.getActiveClaimConditionId(),[h]=await this.contractWrapper.readContract.verifyClaimMerkleProof(a,t,e,d.proofs,d.maxClaimable),!h)return n.push(Se.AddressNotAllowed),n}else if(this.isLegacySinglePhaseDrop(this.contractWrapper)){if([h]=await this.contractWrapper.readContract.verifyClaimMerkleProof(t,e,{proof:d.proofs,maxQuantityInAllowlist:d.maxClaimable}),!h)return n.push(Se.AddressNotAllowed),n}else if(this.isNewSinglePhaseDrop(this.contractWrapper)){if(await this.contractWrapper.readContract.verifyClaim(t,e,d.currencyAddress,d.price,{proof:d.proofs,quantityLimitPerWallet:d.maxClaimable,currency:d.currencyAddressInProof,pricePerToken:d.priceInProof}),an(i.maxClaimablePerWallet,s).eq(0)&&d.maxClaimable===at||d.maxClaimable===O.from(0))return n.push(Se.AddressNotAllowed),n}else if(this.isNewMultiphaseDrop(this.contractWrapper)&&(a=await this.contractWrapper.readContract.getActiveClaimConditionId(),await this.contractWrapper.readContract.verifyClaim(a,t,e,d.currencyAddress,d.price,{proof:d.proofs,quantityLimitPerWallet:d.maxClaimable,currency:d.currencyAddressInProof,pricePerToken:d.priceInProof}),an(i.maxClaimablePerWallet,s).eq(0)&&d.maxClaimable===at||d.maxClaimable===O.from(0)))return n.push(Se.AddressNotAllowed),n}catch(d){return console.warn("Merkle proof verification failed:","reason"in d?d.reason:d),n.push(Se.AddressNotAllowed),n}}if(this.isNewSinglePhaseDrop(this.contractWrapper)||this.isNewMultiphaseDrop(this.contractWrapper)){const d=await this.getClaimerProofs(t);let h=O.from(0),m=an(i.maxClaimablePerWallet,s);if(this.isNewSinglePhaseDrop(this.contractWrapper)&&(h=await this.contractWrapper.readContract.getSupplyClaimedByWallet(t)),this.isNewMultiphaseDrop(this.contractWrapper)){const b=await this.contractWrapper.readContract.getActiveClaimConditionId();h=await this.contractWrapper.readContract.getSupplyClaimedByWallet(b,t)}if(d&&(m=an(d.maxClaimable,s)),(!c||c&&!u)&&(m.lte(h)||m.eq(0)))return n.push(Se.AddressNotAllowed),n}if(this.isLegacySinglePhaseDrop(this.contractWrapper)||this.isLegacyMultiPhaseDrop(this.contractWrapper)){let[d,h]=[O.from(0),O.from(0)];this.isLegacyMultiPhaseDrop(this.contractWrapper)?(a=await this.contractWrapper.readContract.getActiveClaimConditionId(),[d,h]=await this.contractWrapper.readContract.getClaimTimestamp(a,t)):this.isLegacySinglePhaseDrop(this.contractWrapper)&&([d,h]=await this.contractWrapper.readContract.getClaimTimestamp(t));const m=O.from(Date.now()).div(1e3);d.gt(0)&&m.lt(h)&&(h.eq(at)?n.push(Se.AlreadyClaimed):n.push(Se.WaitBeforeNextClaimTransaction))}if(i.price.gt(0)&&Lp()){const d=i.price.mul(O.from(e)),h=this.contractWrapper.getProvider();Pn(i.currencyAddress)?(await h.getBalance(t)).lt(d)&&n.push(Se.NotEnoughTokens):(await new pt(h,i.currencyAddress,It,{}).readContract.balanceOf(t)).lt(d)&&n.push(Se.NotEnoughTokens)}return n}async getClaimerProofs(e,t){const a=(await this.get(t)).merkleRoot;if(Wi(a).length>0){const s=await this.metadata.get();return await hl(e,a.toString(),s.merkle,this.contractWrapper.getProvider(),this.storage,this.getSnapshotFormatVersion())}else return null}async set(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=e;if(this.isLegacySinglePhaseDrop(this.contractWrapper)||this.isNewSinglePhaseDrop(this.contractWrapper)){if(t=!0,e.length===0)n=[{startTime:new Date(0),currencyAddress:se,price:0,maxClaimableSupply:0,maxClaimablePerWallet:0,waitInSeconds:0,merkleRootHash:ze([0],32),snapshot:[]}];else if(e.length>1)throw new Error("Single phase drop contract cannot have multiple claim conditions, only one is allowed")}(this.isNewSinglePhaseDrop(this.contractWrapper)||this.isNewMultiphaseDrop(this.contractWrapper))&&n.forEach(u=>{var d;if(u.snapshot&&u.snapshot.length>0&&(u.maxClaimablePerWallet===void 0||u.maxClaimablePerWallet==="unlimited"))throw new Error(`maxClaimablePerWallet must be set to a specific value when an allowlist is set.
Example: Set it to 0 to only allow addresses in the allowlist to claim the amount specified in the allowlist.
contract.claimConditions.set([{ snapshot: [{ address: '0x...', maxClaimable: 1 }], maxClaimablePerWallet: 0 }])`);if(u.snapshot&&u.snapshot.length>0&&((d=u.maxClaimablePerWallet)==null?void 0:d.toString())==="0"&&u.snapshot.map(h=>{var m;return typeof h=="string"?0:Number(((m=h.maxClaimable)==null?void 0:m.toString())||0)}).reduce((h,m)=>h+m,0)===0)throw new Error("maxClaimablePerWallet is set to 0, and all addresses in the allowlist have max claimable 0. This means that no one can claim.")});const{snapshotInfos:a,sortedConditions:i}=await qp(n,await this.getTokenDecimals(),this.contractWrapper.getProvider(),this.storage,this.getSnapshotFormatVersion()),s={};a.forEach(u=>{s[u.merkleRoot]=u.snapshotUri});const o=await this.metadata.get(),l=[];if(!up(o.merkle,s)){const u=this.metadata.parseInputMetadata({...o,merkle:s}),d=await this.metadata._parseAndUploadMetadata(u);if(Tt("setContractURI",this.contractWrapper))l.push(this.contractWrapper.readContract.interface.encodeFunctionData("setContractURI",[d]));else throw new Error("Setting a merkle root requires implementing ContractMetadata in your contract to support storing a merkle root.")}const c=this.contractWrapper;if(this.isLegacySinglePhaseDrop(c))l.push(c.readContract.interface.encodeFunctionData("setClaimConditions",[Us(i[0]),t]));else if(this.isLegacyMultiPhaseDrop(c))l.push(c.readContract.interface.encodeFunctionData("setClaimConditions",[i.map(Us),t]));else if(this.isNewSinglePhaseDrop(c))l.push(c.readContract.interface.encodeFunctionData("setClaimConditions",[Hs(i[0]),t]));else if(this.isNewMultiphaseDrop(c))l.push(c.readContract.interface.encodeFunctionData("setClaimConditions",[i.map(Hs),t]));else throw new Error("Contract does not support claim conditions");return{receipt:await this.contractWrapper.multiCall(l)}}async update(e,t){const n=await this.getAll(),a=await jp(e,t,n);return await this.set(a)}async getTokenDecimals(){return oe(this.contractWrapper,"ERC20")?this.contractWrapper.readContract.decimals():Promise.resolve(0)}async prepareClaim(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3?arguments[3]:void 0;const i=a||await this.contractWrapper.getSignerAddress();return zp(i,e,await this.getActive(),async()=>(await this.metadata.get()).merkle,n,this.contractWrapper,this.storage,t,this.getSnapshotFormatVersion())}async getClaimArguments(e,t,n){return this.isLegacyMultiPhaseDrop(this.contractWrapper)?[e,t,n.currencyAddress,n.price,n.proofs,n.maxClaimable]:this.isLegacySinglePhaseDrop(this.contractWrapper)?[e,t,n.currencyAddress,n.price,{proof:n.proofs,maxQuantityInAllowlist:n.maxClaimable},Me("")]:[e,t,n.currencyAddress,n.price,{proof:n.proofs,quantityLimitPerWallet:n.maxClaimable,pricePerToken:n.priceInProof,currency:n.currencyAddressInProof},Me("")]}async getClaimTransaction(e,t,n){if(n!=null&&n.pricePerToken)throw new Error("Price per token is be set via claim conditions by calling `contract.erc721.claimConditions.set()`");const a=await this.prepareClaim(t,(n==null?void 0:n.checkERC20Allowance)===void 0?!0:n.checkERC20Allowance,await this.getTokenDecimals());return Mn.make({contractWrapper:this.contractWrapper,functionName:"claim",args:await this.getClaimArguments(e,t,a),overrides:a.overrides})}isNewSinglePhaseDrop(e){return oe(e,"ERC721ClaimConditionsV2")||oe(e,"ERC20ClaimConditionsV2")}isNewMultiphaseDrop(e){return oe(e,"ERC721ClaimPhasesV2")||oe(e,"ERC20ClaimPhasesV2")}isLegacySinglePhaseDrop(e){return oe(e,"ERC721ClaimConditionsV1")||oe(e,"ERC20ClaimConditionsV1")}isLegacyMultiPhaseDrop(e){return oe(e,"ERC721ClaimPhasesV1")||oe(e,"ERC20ClaimPhasesV1")}getSnapshotFormatVersion(){return this.isLegacyMultiPhaseDrop(this.contractWrapper)||this.isLegacySinglePhaseDrop(this.contractWrapper)?Bn.V1:Bn.V2}}class Lw{constructor(e,t,n){S(this,"contractWrapper",void 0),S(this,"metadata",void 0),S(this,"storage",void 0),this.storage=n,this.contractWrapper=e,this.metadata=t}async getActive(e,t){const n=await this.get(e),a=await this.metadata.get();return await qs(n,0,this.contractWrapper.getProvider(),a.merkle,this.storage,(t==null?void 0:t.withAllowList)||!1)}async get(e,t){if(this.isLegacySinglePhaseDrop(this.contractWrapper)){const n=await this.contractWrapper.readContract.claimCondition(e);return zs(n)}else if(this.isLegacyMultiPhaseDrop(this.contractWrapper)){const n=t!==void 0?t:await this.contractWrapper.readContract.getActiveClaimConditionId(e),a=await this.contractWrapper.readContract.getClaimConditionById(e,n);return zs(a)}else if(this.isNewSinglePhaseDrop(this.contractWrapper)){const n=await this.contractWrapper.readContract.claimCondition(e);return js(n)}else if(this.isNewMultiphaseDrop(this.contractWrapper)){const n=t!==void 0?t:await this.contractWrapper.readContract.getActiveClaimConditionId(e),a=await this.contractWrapper.readContract.getClaimConditionById(e,n);return js(a)}else throw new Error("Contract does not support claim conditions")}async getAll(e,t){if(this.isLegacyMultiPhaseDrop(this.contractWrapper)||this.isNewMultiphaseDrop(this.contractWrapper)){const n=await this.contractWrapper.readContract.claimCondition(e),a=n.currentStartId.toNumber(),i=n.count.toNumber(),s=[];for(let l=a;l<a+i;l++)s.push(await this.get(e,l));const o=await this.metadata.get();return Promise.all(s.map(l=>qs(l,0,this.contractWrapper.getProvider(),o.merkle,this.storage,(t==null?void 0:t.withAllowList)||!1)))}else return[await this.getActive(e,t)]}async canClaim(e,t,n){return(await this.getClaimIneligibilityReasons(e,t,n)).length===0}async getClaimIneligibilityReasons(e,t,n){const a=[];let i,s;if(n===void 0)try{n=await this.contractWrapper.getSignerAddress()}catch(m){console.warn("failed to get signer address",m)}if(!n)return[Se.NoWallet];try{s=await this.getActive(e)}catch(m){return Os(m,"!CONDITION")||Os(m,"no active mint condition")?(a.push(Se.NoClaimConditionSet),a):(a.push(Se.Unknown),a)}s.availableSupply!=="unlimited"&&O.from(s.availableSupply).lt(t)&&a.push(Se.NotEnoughSupply);const l=Wi(s.merkleRootHash).length>0;let c=null;if(l){if(c=await this.getClaimerProofs(e,n),!c&&(this.isLegacySinglePhaseDrop(this.contractWrapper)||this.isLegacyMultiPhaseDrop(this.contractWrapper)))return a.push(Se.AddressNotAllowed),a;if(c)try{const m=await this.prepareClaim(e,t,!1,n);let b;if(this.isLegacyMultiPhaseDrop(this.contractWrapper)){if(i=await this.contractWrapper.readContract.getActiveClaimConditionId(e),[b]=await this.contractWrapper.readContract.verifyClaimMerkleProof(i,n,e,t,m.proofs,m.maxClaimable),!b)return a.push(Se.AddressNotAllowed),a}else if(this.isLegacySinglePhaseDrop(this.contractWrapper)){if([b]=await this.contractWrapper.readContract.verifyClaimMerkleProof(e,n,t,{proof:m.proofs,maxQuantityInAllowlist:m.maxClaimable}),!b)return a.push(Se.AddressNotAllowed),a}else if(this.isNewSinglePhaseDrop(this.contractWrapper)){if(await this.contractWrapper.readContract.verifyClaim(e,n,t,m.currencyAddress,m.price,{proof:m.proofs,quantityLimitPerWallet:m.maxClaimable,currency:m.currencyAddressInProof,pricePerToken:m.priceInProof}),s.maxClaimablePerWallet==="0"&&m.maxClaimable===at||m.maxClaimable===O.from(0))return a.push(Se.AddressNotAllowed),a}else if(this.isNewMultiphaseDrop(this.contractWrapper)&&(i=await this.contractWrapper.readContract.getActiveClaimConditionId(e),await this.contractWrapper.readContract.verifyClaim(i,n,e,t,m.currencyAddress,m.price,{proof:m.proofs,quantityLimitPerWallet:m.maxClaimable,currency:m.currencyAddressInProof,pricePerToken:m.priceInProof}),s.maxClaimablePerWallet==="0"&&m.maxClaimable===at||m.maxClaimable===O.from(0)))return a.push(Se.AddressNotAllowed),a}catch(m){return console.warn("Merkle proof verification failed:","reason"in m?m.reason:m),a.push(Se.AddressNotAllowed),a}}if((this.isNewSinglePhaseDrop(this.contractWrapper)||this.isNewMultiphaseDrop(this.contractWrapper))&&(!l||l&&!c)&&s.maxClaimablePerWallet==="0")return a.push(Se.AddressNotAllowed),a;let[u,d]=[O.from(0),O.from(0)];this.isLegacyMultiPhaseDrop(this.contractWrapper)?(i=await this.contractWrapper.readContract.getActiveClaimConditionId(e),[u,d]=await this.contractWrapper.readContract.getClaimTimestamp(e,i,n)):this.isLegacySinglePhaseDrop(this.contractWrapper)&&([u,d]=await this.contractWrapper.readContract.getClaimTimestamp(e,n));const h=O.from(Date.now()).div(1e3);if(u.gt(0)&&h.lt(d)&&(d.eq(at)?a.push(Se.AlreadyClaimed):a.push(Se.WaitBeforeNextClaimTransaction)),s.price.gt(0)&&Lp()){const m=s.price.mul(t),b=this.contractWrapper.getProvider();Pn(s.currencyAddress)?(await b.getBalance(n)).lt(m)&&a.push(Se.NotEnoughTokens):(await new pt(b,s.currencyAddress,It,{}).readContract.balanceOf(n)).lt(m)&&a.push(Se.NotEnoughTokens)}return a}async getClaimerProofs(e,t,n){const i=(await this.get(e,n)).merkleRoot;if(Wi(i).length>0){const o=await this.metadata.get();return await hl(t,i.toString(),o.merkle,this.contractWrapper.getProvider(),this.storage,this.getSnapshotFormatVersion())}else return null}async set(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return this.setBatch([{tokenId:e,claimConditions:t}],n)}async setBatch(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const n={},a=await Promise.all(e.map(async o=>{let{tokenId:l,claimConditions:c}=o,u=c;if(this.isLegacySinglePhaseDrop(this.contractWrapper)){if(t=!0,c.length===0)u=[{startTime:new Date(0),currencyAddress:se,price:0,maxClaimableSupply:0,maxClaimablePerWallet:0,waitInSeconds:0,merkleRootHash:ze([0],32),snapshot:[]}];else if(c.length>1)throw new Error("Single phase drop contract cannot have multiple claim conditions, only one is allowed")}(this.isNewSinglePhaseDrop(this.contractWrapper)||this.isNewMultiphaseDrop(this.contractWrapper))&&u.forEach(m=>{var b;if(m.snapshot&&m.snapshot.length>0&&(m.maxClaimablePerWallet===void 0||m.maxClaimablePerWallet==="unlimited"))throw new Error(`maxClaimablePerWallet must be set to a specific value when an allowlist is set.
Set it to 0 to only allow addresses in the allowlist to claim the amount specified in the allowlist.

ex:
contract.claimConditions.set(tokenId, [{ snapshot: [{ address: '0x...', maxClaimable: 1 }], maxClaimablePerWallet: 0 }])`);if(m.snapshot&&m.snapshot.length>0&&((b=m.maxClaimablePerWallet)==null?void 0:b.toString())==="0"&&m.snapshot.map(x=>{var f;return typeof x=="string"?0:Number(((f=x.maxClaimable)==null?void 0:f.toString())||0)}).reduce((x,f)=>x+f,0)===0)throw new Error("maxClaimablePerWallet is set to 0, and all addresses in the allowlist have max claimable 0. This means that no one can claim.")});const{snapshotInfos:d,sortedConditions:h}=await qp(u,0,this.contractWrapper.getProvider(),this.storage,this.getSnapshotFormatVersion());return d.forEach(m=>{n[m.merkleRoot]=m.snapshotUri}),{tokenId:l,sortedConditions:h}})),i=await this.metadata.get(),s=[];for(const o of Object.keys(i.merkle||{}))n[o]=i.merkle[o];if(!up(i.merkle,n)){const o=this.metadata.parseInputMetadata({...i,merkle:n}),l=await this.metadata._parseAndUploadMetadata(o);if(Tt("setContractURI",this.contractWrapper))s.push(this.contractWrapper.readContract.interface.encodeFunctionData("setContractURI",[l]));else throw new Error("Setting a merkle root requires implementing ContractMetadata in your contract to support storing a merkle root.")}return a.forEach(o=>{let{tokenId:l,sortedConditions:c}=o;if(this.isLegacySinglePhaseDrop(this.contractWrapper))s.push(this.contractWrapper.readContract.interface.encodeFunctionData("setClaimConditions",[l,Us(c[0]),t]));else if(this.isLegacyMultiPhaseDrop(this.contractWrapper))s.push(this.contractWrapper.readContract.interface.encodeFunctionData("setClaimConditions",[l,c.map(Us),t]));else if(this.isNewSinglePhaseDrop(this.contractWrapper))s.push(this.contractWrapper.readContract.interface.encodeFunctionData("setClaimConditions",[l,Hs(c[0]),t]));else if(this.isNewMultiphaseDrop(this.contractWrapper))s.push(this.contractWrapper.readContract.interface.encodeFunctionData("setClaimConditions",[l,c.map(Hs),t]));else throw new Error("Contract does not support claim conditions")}),{receipt:await this.contractWrapper.multiCall(s)}}async update(e,t,n){const a=await this.getAll(e),i=await jp(t,n,a);return await this.set(e,i)}async prepareClaim(e,t,n,a){const i=a||await this.contractWrapper.getSignerAddress();return zp(i,t,await this.getActive(e),async()=>(await this.metadata.get()).merkle,0,this.contractWrapper,this.storage,n,this.getSnapshotFormatVersion())}async getClaimArguments(e,t,n,a){return this.isLegacyMultiPhaseDrop(this.contractWrapper)?[t,e,n,a.currencyAddress,a.price,a.proofs,a.maxClaimable]:this.isLegacySinglePhaseDrop(this.contractWrapper)?[t,e,n,a.currencyAddress,a.price,{proof:a.proofs,maxQuantityInAllowlist:a.maxClaimable},Me("")]:[t,e,n,a.currencyAddress,a.price,{proof:a.proofs,quantityLimitPerWallet:a.maxClaimable,pricePerToken:a.priceInProof,currency:a.currencyAddressInProof},Me("")]}async getClaimTransaction(e,t,n,a){if(a!=null&&a.pricePerToken)throw new Error("Price per token should be set via claim conditions by calling `contract.erc1155.claimConditions.set()`");const i=await this.prepareClaim(t,n,(a==null?void 0:a.checkERC20Allowance)||!0);return Mn.make({contractWrapper:this.contractWrapper,functionName:"claim",args:await this.getClaimArguments(t,e,n,i),overrides:i.overrides})}isNewSinglePhaseDrop(e){return oe(e,"ERC1155ClaimConditionsV2")}isNewMultiphaseDrop(e){return oe(e,"ERC1155ClaimPhasesV2")}isLegacySinglePhaseDrop(e){return oe(e,"ERC1155ClaimConditionsV1")}isLegacyMultiPhaseDrop(e){return oe(e,"ERC1155ClaimPhasesV1")}getSnapshotFormatVersion(){return this.isLegacyMultiPhaseDrop(this.contractWrapper)||this.isLegacySinglePhaseDrop(this.contractWrapper)?Bn.V1:Bn.V2}}class v6{constructor(e){S(this,"events",void 0),this.events=e}async getAllClaimerAddresses(e){const t=(await this.events.getEvents("TokensClaimed")).filter(n=>n.data&&O.isBigNumber(n.data.tokenId)?n.data.tokenId.eq(e):!1);return Array.from(new Set(t.filter(n=>{var a;return typeof((a=n.data)==null?void 0:a.claimer)=="string"}).map(n=>n.data.claimer)))}}class Uw{constructor(e,t){S(this,"featureName",Ja.name),S(this,"erc20",void 0),S(this,"contractWrapper",void 0),this.erc20=e,this.contractWrapper=t}async tokens(e){return{receipt:await this.contractWrapper.sendTransaction("burn",[await this.erc20.normalizeAmount(e)])}}async from(e,t){return{receipt:await this.contractWrapper.sendTransaction("burnFrom",[e,await this.erc20.normalizeAmount(t)])}}}class Hw{constructor(e,t,n){S(this,"featureName",Ya.name),S(this,"conditions",void 0),S(this,"contractWrapper",void 0),S(this,"erc20",void 0),S(this,"storage",void 0),this.erc20=e,this.contractWrapper=t,this.storage=n;const a=new Za(this.contractWrapper,ii,this.storage);this.conditions=new df(this.contractWrapper,a,this.storage)}async to(e,t,n){const a=await this.erc20.normalizeAmount(t);return await(await this.conditions.getClaimTransaction(e,a,n)).execute()}}class zw{constructor(e,t,n){S(this,"claim",void 0),S(this,"contractWrapper",void 0),S(this,"erc20",void 0),S(this,"storage",void 0),this.erc20=e,this.contractWrapper=t,this.storage=n,this.claim=new Hw(this.erc20,this.contractWrapper,this.storage)}}class jw{constructor(e,t){S(this,"featureName",Qs.name),S(this,"contractWrapper",void 0),S(this,"erc20",void 0),this.erc20=e,this.contractWrapper=t}async to(e){const t=[];for(const n of e)t.push(this.contractWrapper.readContract.interface.encodeFunctionData("mintTo",[n.toAddress,await this.erc20.normalizeAmount(n.amount)]));return{receipt:await this.contractWrapper.multiCall(t)}}}class qw{constructor(e,t){S(this,"featureName",Qa.name),S(this,"contractWrapper",void 0),S(this,"erc20",void 0),S(this,"batch",void 0),this.erc20=e,this.contractWrapper=t,this.batch=this.detectErc20BatchMintable()}async to(e,t){return(await this.getMintTransaction(e,t)).execute()}async getMintTransaction(e,t){return Mn.make({contractWrapper:this.contractWrapper,functionName:"mintTo",args:[e,await this.erc20.normalizeAmount(t)]})}detectErc20BatchMintable(){if(oe(this.contractWrapper,"ERC20BatchMintable"))return new jw(this.erc20,this.contractWrapper)}}class Vw{constructor(e,t){S(this,"featureName",Js.name),S(this,"contractWrapper",void 0),S(this,"roles",void 0),this.contractWrapper=e,this.roles=t}async mint(e){const t=e.payload,n=e.signature,a=await this.mapPayloadToContractStruct(t),i=await this.contractWrapper.getCallOverrides();return await wr(this.contractWrapper,O.from(a.price),t.currencyAddress,i),{receipt:await this.contractWrapper.sendTransaction("mintWithSignature",[a,n],i)}}async mintBatch(e){const n=(await Promise.all(e.map(async a=>{const i=await this.mapPayloadToContractStruct(a.payload),s=a.signature,o=a.payload.price;if(O.from(o).gt(0))throw new Error("Can only batch free mints. For mints with a price, use regular mint()");return{message:i,signature:s}}))).map(a=>this.contractWrapper.readContract.interface.encodeFunctionData("mintWithSignature",[a.message,a.signature]));return{receipt:await this.contractWrapper.multiCall(n)}}async verify(e){const t=e.payload,n=e.signature,a=await this.mapPayloadToContractStruct(t);return(await this.contractWrapper.readContract.verify(a,n))[0]}async generate(e){return(await this.generateBatch([e]))[0]}async generateBatch(e){var s;await((s=this.roles)==null?void 0:s.verify(["minter"],await this.contractWrapper.getSignerAddress()));const t=e.map(o=>Tp.parse(o)),n=await this.contractWrapper.getChainID(),a=this.contractWrapper.getSigner();pe(a,"No signer available");const i=await this.contractWrapper.readContract.name();return await Promise.all(t.map(async o=>{const l=K2.parse(o),c=await this.contractWrapper.signTypedData(a,{name:i,version:"1",chainId:n,verifyingContract:this.contractWrapper.readContract.address},{MintRequest:X2},await this.mapPayloadToContractStruct(l));return{payload:l,signature:c.toString()}}))}async mapPayloadToContractStruct(e){const t=await At(this.contractWrapper.getProvider(),e.price,e.currencyAddress),n=rt(e.quantity,await this.contractWrapper.readContract.decimals());return{to:e.to,primarySaleRecipient:e.primarySaleRecipient,quantity:n,price:t,currency:e.currencyAddress,validityEndTimestamp:e.mintEndTime,validityStartTimestamp:e.mintStartTime,uid:e.uid}}}class pf{get chainId(){return this._chainId}constructor(e,t,n){S(this,"featureName",Xs.name),S(this,"mintable",void 0),S(this,"burnable",void 0),S(this,"droppable",void 0),S(this,"signatureMintable",void 0),S(this,"contractWrapper",void 0),S(this,"storage",void 0),S(this,"_chainId",void 0),this.contractWrapper=e,this.storage=t,this.mintable=this.detectErc20Mintable(),this.burnable=this.detectErc20Burnable(),this.droppable=this.detectErc20Droppable(),this.signatureMintable=this.detectErc20SignatureMintable(),this._chainId=n}onNetworkUpdated(e){this.contractWrapper.updateSignerOrProvider(e)}getAddress(){return this.contractWrapper.readContract.address}async get(){return await fi(this.contractWrapper.getProvider(),this.getAddress())}async balance(){return await this.balanceOf(await this.contractWrapper.getSignerAddress())}async balanceOf(e){return this.getValue(await this.contractWrapper.readContract.balanceOf(e))}async totalSupply(){return await this.getValue(await this.contractWrapper.readContract.totalSupply())}async allowance(e){return await this.allowanceOf(await this.contractWrapper.getSignerAddress(),e)}async allowanceOf(e,t){return await this.getValue(await this.contractWrapper.readContract.allowance(e,t))}async transfer(e,t){return{receipt:await this.contractWrapper.sendTransaction("transfer",[e,await this.normalizeAmount(t)])}}async transferFrom(e,t,n){return{receipt:await this.contractWrapper.sendTransaction("transferFrom",[e,t,await this.normalizeAmount(n)])}}async setAllowance(e,t){return{receipt:await this.contractWrapper.sendTransaction("approve",[e,await this.normalizeAmount(t)])}}async transferBatch(e){const t=await Promise.all(e.map(async n=>{const a=await this.normalizeAmount(n.amount);return this.contractWrapper.readContract.interface.encodeFunctionData("transfer",[n.toAddress,a])}));await this.contractWrapper.multiCall(t)}async mint(e){return this.mintTo(await this.contractWrapper.getSignerAddress(),e)}async mintTo(e,t){return he(this.mintable,Qa).to(e,t)}async getMintTransaction(e,t){return he(this.mintable,Qa).getMintTransaction(e,t)}async mintBatchTo(e){var t;return he((t=this.mintable)==null?void 0:t.batch,Qs).to(e)}async burn(e){return he(this.burnable,Ja).tokens(e)}async burnFrom(e,t){return he(this.burnable,Ja).from(e,t)}async claim(e,t){return this.claimTo(await this.contractWrapper.getSignerAddress(),e,t)}async claimTo(e,t,n){var a;return he((a=this.droppable)==null?void 0:a.claim,Ya).to(e,t,n)}get claimConditions(){var e;return he((e=this.droppable)==null?void 0:e.claim,Ya).conditions}get signature(){return he(this.signatureMintable,Js)}async normalizeAmount(e){const t=await this.contractWrapper.readContract.decimals();return rt(Rn.parse(e),t)}async getValue(e){return await ln(this.contractWrapper.getProvider(),this.getAddress(),O.from(e))}detectErc20Mintable(){if(oe(this.contractWrapper,"ERC20"))return new qw(this,this.contractWrapper)}detectErc20Burnable(){if(oe(this.contractWrapper,"ERC20Burnable"))return new Uw(this,this.contractWrapper)}detectErc20Droppable(){if(oe(this.contractWrapper,"ERC20ClaimConditionsV1")||oe(this.contractWrapper,"ERC20ClaimConditionsV2")||oe(this.contractWrapper,"ERC20ClaimPhasesV1")||oe(this.contractWrapper,"ERC20ClaimPhasesV2"))return new zw(this,this.contractWrapper,this.storage)}detectErc20SignatureMintable(){if(oe(this.contractWrapper,"ERC20SignatureMintable"))return new Vw(this.contractWrapper)}}class T6{constructor(e,t){S(this,"events",void 0),S(this,"contractWrapper",void 0),this.contractWrapper=e,this.events=t}async getAllHolderBalances(){const t=(await this.events.getEvents("Transfer")).map(a=>a.data),n={};return t.forEach(a=>{const i=a==null?void 0:a.from,s=a==null?void 0:a.to,o=a==null?void 0:a.value;i!==se&&(i in n||(n[i]=O.from(0)),n[i]=n[i].sub(o)),s!==se&&(s in n||(n[s]=O.from(0)),n[s]=n[s].add(o))}),Promise.all(Object.keys(n).map(async a=>({holder:a,balance:await ln(this.contractWrapper.getProvider(),this.contractWrapper.readContract.address,n[a])})))}}class A6{get chainId(){return this._chainId}constructor(e,t,n){S(this,"contractWrapper",void 0),S(this,"storage",void 0),S(this,"erc20",void 0),S(this,"_chainId",void 0),this.contractWrapper=e,this.storage=t,this.erc20=new pf(this.contractWrapper,this.storage,n),this._chainId=n}onNetworkUpdated(e){this.contractWrapper.updateSignerOrProvider(e)}getAddress(){return this.contractWrapper.readContract.address}async get(){return this.erc20.get()}async balance(){return await this.erc20.balance()}async balanceOf(e){return this.erc20.balanceOf(e)}async totalSupply(){return await this.erc20.totalSupply()}async allowance(e){return await this.erc20.allowance(e)}async allowanceOf(e,t){return await this.erc20.allowanceOf(e,t)}async transfer(e,t){return this.erc20.transfer(e,t)}async transferFrom(e,t,n){return this.erc20.transferFrom(e,t,n)}async setAllowance(e,t){return this.erc20.setAllowance(e,t)}async transferBatch(e){return this.erc20.transferBatch(e)}}class Gw{constructor(e){S(this,"featureName",eo.name),S(this,"contractWrapper",void 0),this.contractWrapper=e}async token(e){return{receipt:await this.contractWrapper.sendTransaction("burn",[e])}}}class Kw{constructor(e,t){S(this,"featureName",Xa.name),S(this,"erc721",void 0),S(this,"contractWrapper",void 0),this.erc721=e,this.contractWrapper=t}async getClaimTransaction(e,t,n){let a={};return n&&n.pricePerToken&&(a=await Vp(this.contractWrapper,n.pricePerToken,t,n.currencyAddress,n.checkERC20Allowance)),Mn.make({contractWrapper:this.contractWrapper,functionName:"claim",args:[e,t],overrides:a})}async to(e,t,n){const a=await this.getClaimTransaction(e,t,n),{receipt:i}=await a.execute(),o=this.contractWrapper.parseLogs("TokensClaimed",i==null?void 0:i.logs)[0].args.startTokenId,l=o.add(t),c=[];for(let u=o;u.lt(l);u=u.add(1))c.push({id:u,receipt:i,data:()=>this.erc721.get(u)});return c}}class $w{constructor(e,t,n){S(this,"featureName",ro.name),S(this,"conditions",void 0),S(this,"contractWrapper",void 0),S(this,"erc721",void 0),S(this,"storage",void 0),this.erc721=e,this.contractWrapper=t,this.storage=n;const a=new Za(this.contractWrapper,ii,this.storage);this.conditions=new df(this.contractWrapper,a,this.storage)}async to(e,t,n){const a=await this.conditions.getClaimTransaction(e,t,n),{receipt:i}=await a.execute(),o=this.contractWrapper.parseLogs("TokensClaimed",i==null?void 0:i.logs)[0].args.startTokenId,l=o.add(t),c=[];for(let u=o;u.lt(l);u=u.add(1))c.push({id:u,receipt:i,data:()=>this.erc721.get(u)});return c}}class Zw{constructor(e,t,n){S(this,"featureName",ao.name),S(this,"revealer",void 0),S(this,"claimWithConditions",void 0),S(this,"claim",void 0),S(this,"contractWrapper",void 0),S(this,"erc721",void 0),S(this,"storage",void 0),this.erc721=e,this.contractWrapper=t,this.storage=n,this.revealer=this.detectErc721Revealable(),this.claimWithConditions=this.detectErc721ClaimableWithConditions(),this.claim=this.detectErc721Claimable()}async lazyMint(e,t){const n=await this.erc721.nextTokenIdToMint(),a=await kr(e,this.storage,n.toNumber(),t),i=Gr(a),s=await this.contractWrapper.sendTransaction("lazyMint",[a.length,i.endsWith("/")?i:`${i}/`,Me("")]),o=this.contractWrapper.parseLogs("TokensLazyMinted",s==null?void 0:s.logs),l=o[0].args.startTokenId,c=o[0].args.endTokenId,u=[];for(let d=l;d.lte(c);d=d.add(1))u.push({id:d,receipt:s,data:()=>this.erc721.getTokenMetadata(d)});return u}detectErc721Revealable(){if(oe(this.contractWrapper,"ERC721Revealable"))return new Zp(this.contractWrapper,this.storage,to.name,()=>this.erc721.nextTokenIdToMint())}detectErc721ClaimableWithConditions(){if(oe(this.contractWrapper,"ERC721ClaimConditionsV1")||oe(this.contractWrapper,"ERC721ClaimConditionsV2")||oe(this.contractWrapper,"ERC721ClaimPhasesV1")||oe(this.contractWrapper,"ERC721ClaimPhasesV2"))return new $w(this.erc721,this.contractWrapper,this.storage)}detectErc721Claimable(){if(oe(this.contractWrapper,"ERC721ClaimCustom"))return new Kw(this.erc721,this.contractWrapper)}}class Yw{constructor(e,t,n){S(this,"featureName",io.name),S(this,"contractWrapper",void 0),S(this,"storage",void 0),S(this,"erc721",void 0),this.erc721=e,this.contractWrapper=t,this.storage=n}async to(e,t){const a=(await kr(t,this.storage)).map(o=>this.contractWrapper.readContract.interface.encodeFunctionData("mintTo",[e,o])),i=await this.contractWrapper.multiCall(a),s=this.contractWrapper.parseLogs("TokensMinted",i.logs);if(s.length===0||s.length<t.length)throw new Error("TokenMinted event not found, minting failed");return s.map(o=>{const l=o.args.tokenIdMinted;return{id:l,receipt:i,data:()=>this.erc721.get(l)}})}}class Jw{constructor(e,t,n){S(this,"featureName",ei.name),S(this,"contractWrapper",void 0),S(this,"storage",void 0),S(this,"erc721",void 0),S(this,"batch",void 0),this.erc721=e,this.contractWrapper=t,this.storage=n,this.batch=this.detectErc721BatchMintable()}async to(e,t){const n=await this.getMintTransaction(e,t),{receipt:a}=await n.execute(),i=this.contractWrapper.parseLogs("Transfer",a==null?void 0:a.logs);if(i.length===0)throw new Error("TransferEvent event not found");const s=i[0].args.tokenId;return{id:s,receipt:a,data:()=>this.erc721.get(s)}}async getMintTransaction(e,t){const n=await $p(t,this.storage);return Mn.make({contractWrapper:this.contractWrapper,functionName:"mintTo",args:[e,n]})}detectErc721BatchMintable(){if(oe(this.contractWrapper,"ERC721BatchMintable"))return new Yw(this.erc721,this.contractWrapper,this.storage)}}class Qw{constructor(e,t){S(this,"featureName",Nc.name),S(this,"contractWrapper",void 0),S(this,"erc721",void 0),this.erc721=e,this.contractWrapper=t}async all(e){const t=await this.tokenIds(e);return await Promise.all(t.map(n=>this.erc721.get(n.toString())))}async tokenIds(e){const t=e||await this.contractWrapper.getSignerAddress(),n=await this.contractWrapper.readContract.balanceOf(t),a=Array.from(Array(n.toNumber()).keys());return await Promise.all(a.map(i=>this.contractWrapper.readContract.tokenOfOwnerByIndex(t,i)))}}class Xw{constructor(e,t){S(this,"featureName",Kr.name),S(this,"contractWrapper",void 0),S(this,"erc721",void 0),S(this,"owned",void 0),this.erc721=e,this.contractWrapper=t,this.owned=this.detectErc721Owned()}async all(e){const t=O.from((e==null?void 0:e.start)||0).toNumber(),n=O.from((e==null?void 0:e.count)||hr).toNumber(),a=await this.erc721.nextTokenIdToMint(),i=Math.min(a.toNumber(),t+n);return await Promise.all([...Array(i-t).keys()].map(s=>this.erc721.get((t+s).toString())))}async allOwners(){return Promise.all([...new Array((await this.totalCount()).toNumber()).keys()].map(async e=>({tokenId:e,owner:await this.erc721.ownerOf(e).catch(()=>se)})))}async totalCount(){return await this.erc721.nextTokenIdToMint()}async totalCirculatingSupply(){return await this.contractWrapper.readContract.totalSupply()}detectErc721Owned(){if(oe(this.contractWrapper,"ERC721Enumerable"))return new Qw(this.erc721,this.contractWrapper)}}const e5=ul.extend({tierPriority:_.array(_.string()),royaltyRecipient:_.string().default(se),royaltyBps:sa.default(0),quantity:Ve.default(1)});class t5{constructor(e,t,n){S(this,"featureName",no.name),S(this,"contractWrapper",void 0),S(this,"erc721",void 0),S(this,"storage",void 0),this.erc721=e,this.contractWrapper=t,this.storage=n}async getMetadataInTier(e){const n=(await this.contractWrapper.readContract.getMetadataForAllTiers()).find(i=>i.tier===e);if(!n)throw new Error("Tier not found in contract.");return await Promise.all(n.ranges.map((i,s)=>{const o=[],l=n.baseURIs[s];for(let c=i.startIdInclusive.toNumber();c<i.endIdNonInclusive.toNumber();c++){const u=`${l}/${c}`,d=this.storage.downloadJSON(u);o.push(d)}return o}).flat())}async getTokensInTier(e){const t=await this.contractWrapper.readContract.getTokensInTierLen();if(t.eq(0))return[];const n=await this.contractWrapper.readContract.getTokensInTier(e,0,t);return await Promise.all(n.map(i=>{const s=[];for(let o=i.startIdInclusive.toNumber();o<i.endIdNonInclusive.toNumber();o++)s.push(this.erc721.get(o));return s}).flat())}async createBatchWithTier(e,t,n){const a=await this.erc721.nextTokenIdToMint(),i=await kr(e,this.storage,a.toNumber(),n),s=Gr(i),o=await this.contractWrapper.sendTransaction("lazyMint",[i.length,s.endsWith("/")?s:`${s}/`,t,Me("")]),l=this.contractWrapper.parseLogs("TokensLazyMinted",o==null?void 0:o.logs),c=l[0].args[1],u=l[0].args[2],d=[];for(let h=c;h.lte(u);h=h.add(1))d.push({id:h,receipt:o,data:()=>this.erc721.getTokenMetadata(h)});return d}async createDelayedRevealBatchWithTier(e,t,n,a,i){if(!n)throw new Error("Password is required");const s=await this.storage.uploadBatch([Sn.parse(e)],{rewriteFileNames:{fileStartNumber:0}}),o=Gr(s),l=await this.erc721.nextTokenIdToMint(),c=await this.storage.uploadBatch(t.map(D=>Sn.parse(D)),{onProgress:i==null?void 0:i.onProgress,rewriteFileNames:{fileStartNumber:l.toNumber()}}),u=Gr(c),d=await this.contractWrapper.readContract.getBaseURICount(),h=await this.contractWrapper.getChainID(),m=cn(["string","uint256","uint256","address"],[n,h,d,this.contractWrapper.readContract.address]),b=await this.contractWrapper.readContract.encryptDecrypt(Me(u),m);let x;const f=cn(["bytes","bytes","uint256"],[Me(u),m,h]);x=Ni.encode(["bytes","bytes32"],[b,f]);const w=await this.contractWrapper.sendTransaction("lazyMint",[c.length,o.endsWith("/")?o:`${o}/`,a,x]),A=this.contractWrapper.parseLogs("TokensLazyMinted",w==null?void 0:w.logs),T=A[0].args[1],E=A[0].args[2],I=[];for(let D=T;D.lte(E);D=D.add(1))I.push({id:D,receipt:w,data:()=>this.erc721.getTokenMetadata(D)});return I}async reveal(e,t){if(!t)throw new Error("Password is required");const n=await this.contractWrapper.getChainID(),a=cn(["string","uint256","uint256","address"],[t,n,e,this.contractWrapper.readContract.address]);try{const i=await this.contractWrapper.callStatic().reveal(e,a);if(!i.includes("://")||!i.endsWith("/"))throw new Error("invalid password")}catch{throw new Error("invalid password")}return{receipt:await this.contractWrapper.sendTransaction("reveal",[e,a])}}async generate(e){const[t]=await this.generateBatch([e]);return t}async generateBatch(e){const t=e.map(i=>e5.parse(i)),n=await this.contractWrapper.getChainID(),a=this.contractWrapper.getSigner();return pe(a,"No signer available"),await Promise.all(t.map(async i=>{const s=await this.contractWrapper.signTypedData(a,{name:"SignatureAction",version:"1",chainId:n,verifyingContract:this.contractWrapper.readContract.address},{GenericRequest:r1},await this.mapPayloadToContractStruct(i));return{payload:i,signature:s.toString()}}))}async verify(e){const t=await this.mapPayloadToContractStruct(e.payload);return(await this.contractWrapper.readContract.verify(t,e.signature))[0]}async claimWithSignature(e){const t=await this.mapPayloadToContractStruct(e.payload),n=await At(this.contractWrapper.getProvider(),e.payload.price,e.payload.currencyAddress),a=await this.contractWrapper.getCallOverrides();await wr(this.contractWrapper,n,e.payload.currencyAddress,a);const i=await this.contractWrapper.sendTransaction("claimWithSignature",[t,e.signature],a),s=this.contractWrapper.parseLogs("TokensClaimed",i==null?void 0:i.logs),o=s[0].args.startTokenId,l=o.add(s[0].args.quantityClaimed),c=[];for(let u=o;u.lt(l);u=u.add(1))c.push({id:u,receipt:i,data:()=>this.erc721.get(u)});return c}async mapPayloadToContractStruct(e){const t=await At(this.contractWrapper.getProvider(),e.price,e.currencyAddress),n=Ni.encode(["string[]","address","address","uint256","address","uint256","uint256","address"],[e.tierPriority,e.to,e.royaltyRecipient,e.royaltyBps,e.primarySaleRecipient,e.quantity,t,e.currencyAddress]);return{uid:e.uid,validityStartTimestamp:e.mintStartTime,validityEndTimestamp:e.mintEndTime,data:n}}}class n5{constructor(e,t){S(this,"featureName",so.name),S(this,"contractWrapper",void 0),S(this,"storage",void 0),this.contractWrapper=e,this.storage=t}async mint(e){const t=e.payload,n=e.signature,a=await this.isLegacyNFTContract();let i,s;a?(i=await this.mapLegacyPayloadToContractStruct(t),s=i.price):(i=await this.mapPayloadToContractStruct(t),s=i.pricePerToken.mul(i.quantity));const o=await this.contractWrapper.getCallOverrides();await wr(this.contractWrapper,s,t.currencyAddress,o);const l=await this.contractWrapper.sendTransaction("mintWithSignature",[i,n],o),c=this.contractWrapper.parseLogs("TokensMintedWithSignature",l.logs);if(c.length===0)throw new Error("No MintWithSignature event found");return{id:c[0].args.tokenIdMinted,receipt:l}}async mintBatch(e){const t=await this.isLegacyNFTContract(),a=(await Promise.all(e.map(async o=>{let l;t?l=await this.mapLegacyPayloadToContractStruct(o.payload):l=await this.mapPayloadToContractStruct(o.payload);const c=o.signature,u=o.payload.price;if(O.from(u).gt(0))throw new Error("Can only batch free mints. For mints with a price, use regular mint()");return{message:l,signature:c}}))).map(o=>t?this.contractWrapper.readContract.interface.encodeFunctionData("mintWithSignature",[o.message,o.signature]):this.contractWrapper.readContract.interface.encodeFunctionData("mintWithSignature",[o.message,o.signature])),i=await this.contractWrapper.multiCall(a),s=this.contractWrapper.parseLogs("TokensMintedWithSignature",i.logs);if(s.length===0)throw new Error("No MintWithSignature event found");return s.map(o=>({id:o.args.tokenIdMinted,receipt:i}))}async verify(e){const t=await this.isLegacyNFTContract(),n=e.payload,a=e.signature;let i,s;if(t){const o=this.contractWrapper.readContract;i=await this.mapLegacyPayloadToContractStruct(n),s=await o.verify(i,a)}else{const o=this.contractWrapper.readContract;i=await this.mapPayloadToContractStruct(n),s=await o.verify(i,a)}return s[0]}async generate(e){return(await this.generateBatch([e]))[0]}async generateBatch(e){const t=await this.isLegacyNFTContract(),n=e.map(l=>J2.parse(l)),a=n.map(l=>l.metadata),i=await kr(a,this.storage),s=await this.contractWrapper.getChainID(),o=this.contractWrapper.getSigner();return pe(o,"No signer available"),await Promise.all(n.map(async(l,c)=>{const u=i[c],d=Q2.parse({...l,uri:u});let h;return t?h=await this.contractWrapper.signTypedData(o,{name:"TokenERC721",version:"1",chainId:s,verifyingContract:this.contractWrapper.readContract.address},{MintRequest:e1},await this.mapLegacyPayloadToContractStruct(d)):h=await this.contractWrapper.signTypedData(o,{name:"SignatureMintERC721",version:"1",chainId:s,verifyingContract:await this.contractWrapper.readContract.address},{MintRequest:n1},await this.mapPayloadToContractStruct(d)),{payload:d,signature:h.toString()}}))}async mapPayloadToContractStruct(e){const t=await At(this.contractWrapper.getProvider(),e.price,e.currencyAddress);return{to:e.to,royaltyRecipient:e.royaltyRecipient,royaltyBps:e.royaltyBps,primarySaleRecipient:e.primarySaleRecipient,uri:e.uri,quantity:e.quantity,pricePerToken:t,currency:e.currencyAddress,validityStartTimestamp:e.mintStartTime,validityEndTimestamp:e.mintEndTime,uid:e.uid}}async mapLegacyPayloadToContractStruct(e){const t=await At(this.contractWrapper.getProvider(),e.price,e.currencyAddress);return{to:e.to,price:t,uri:e.uri,currency:e.currencyAddress,validityEndTimestamp:e.mintEndTime,validityStartTimestamp:e.mintStartTime,uid:e.uid,royaltyRecipient:e.royaltyRecipient,royaltyBps:e.royaltyBps,primarySaleRecipient:e.primarySaleRecipient}}async isLegacyNFTContract(){return oe(this.contractWrapper,"ERC721SignatureMintV1")}}class ff{get chainId(){return this._chainId}constructor(e,t,n){S(this,"featureName",oo.name),S(this,"query",void 0),S(this,"mintable",void 0),S(this,"burnable",void 0),S(this,"lazyMintable",void 0),S(this,"tieredDropable",void 0),S(this,"signatureMintable",void 0),S(this,"contractWrapper",void 0),S(this,"storage",void 0),S(this,"_chainId",void 0),this.contractWrapper=e,this.storage=t,this.query=this.detectErc721Enumerable(),this.mintable=this.detectErc721Mintable(),this.burnable=this.detectErc721Burnable(),this.lazyMintable=this.detectErc721LazyMintable(),this.tieredDropable=this.detectErc721TieredDrop(),this.signatureMintable=this.detectErc721SignatureMintable(),this._chainId=n}onNetworkUpdated(e){this.contractWrapper.updateSignerOrProvider(e)}getAddress(){return this.contractWrapper.readContract.address}async get(e){const[t,n]=await Promise.all([this.ownerOf(e).catch(()=>se),this.getTokenMetadata(e).catch(()=>({id:e.toString(),uri:"",...ml}))]);return{owner:t,metadata:n,type:"ERC721",supply:1}}async ownerOf(e){return await this.contractWrapper.readContract.ownerOf(e)}async balanceOf(e){return await this.contractWrapper.readContract.balanceOf(e)}async balance(){return await this.balanceOf(await this.contractWrapper.getSignerAddress())}async isApproved(e,t){return await this.contractWrapper.readContract.isApprovedForAll(e,t)}async transfer(e,t){const n=await this.contractWrapper.getSignerAddress();return{receipt:await this.contractWrapper.sendTransaction("safeTransferFrom(address,address,uint256)",[n,e,t])}}async setApprovalForAll(e,t){return{receipt:await this.contractWrapper.sendTransaction("setApprovalForAll",[e,t])}}async setApprovalForToken(e,t){return{receipt:await this.contractWrapper.sendTransaction("approve",[e,t])}}async getAll(e){return he(this.query,Kr).all(e)}async getAllOwners(){return he(this.query,Kr).allOwners()}async totalCount(){return this.nextTokenIdToMint()}async totalCirculatingSupply(){return he(this.query,Kr).totalCirculatingSupply()}async getOwned(e){var t;if((t=this.query)!=null&&t.owned)return this.query.owned.all(e);{const n=e||await this.contractWrapper.getSignerAddress(),a=await this.getAllOwners();return Promise.all((a||[]).filter(i=>{var s;return(n==null?void 0:n.toLowerCase())===((s=i.owner)==null?void 0:s.toLowerCase())}).map(async i=>await this.get(i.tokenId)))}}async getOwnedTokenIds(e){var t;if((t=this.query)!=null&&t.owned)return this.query.owned.tokenIds(e);{const n=e||await this.contractWrapper.getSignerAddress();return(await this.getAllOwners()||[]).filter(i=>{var s;return(n==null?void 0:n.toLowerCase())===((s=i.owner)==null?void 0:s.toLowerCase())}).map(i=>O.from(i.tokenId))}}async mint(e){return this.mintTo(await this.contractWrapper.getSignerAddress(),e)}async mintTo(e,t){return he(this.mintable,ei).to(e,t)}async getMintTransaction(e,t){return he(this.mintable,ei).getMintTransaction(e,t)}async mintBatch(e){return this.mintBatchTo(await this.contractWrapper.getSignerAddress(),e)}async mintBatchTo(e,t){var n;return he((n=this.mintable)==null?void 0:n.batch,io).to(e,t)}async burn(e){return he(this.burnable,eo).token(e)}async lazyMint(e,t){return he(this.lazyMintable,ao).lazyMint(e,t)}async claim(e,t){return this.claimTo(await this.contractWrapper.getSignerAddress(),e,t)}async claimTo(e,t,n){var s,o;const a=(s=this.lazyMintable)==null?void 0:s.claimWithConditions,i=(o=this.lazyMintable)==null?void 0:o.claim;if(a)return a.to(e,t,n);if(i)return i.to(e,t,n);throw new aa(Xa)}async getClaimTransaction(e,t,n){var s,o;const a=(s=this.lazyMintable)==null?void 0:s.claimWithConditions,i=(o=this.lazyMintable)==null?void 0:o.claim;if(a)return a.conditions.getClaimTransaction(e,t,n);if(i)return i.getClaimTransaction(e,t,n);throw new aa(Xa)}async totalClaimedSupply(){const e=this.contractWrapper;if(Tt("nextTokenIdToClaim",e))return e.readContract.nextTokenIdToClaim();if(Tt("totalMinted",e))return e.readContract.totalMinted();throw new Error("No function found on contract to get total claimed supply")}async totalUnclaimedSupply(){return(await this.nextTokenIdToMint()).sub(await this.totalClaimedSupply())}get claimConditions(){var e;return he((e=this.lazyMintable)==null?void 0:e.claimWithConditions,ro).conditions}get tieredDrop(){return he(this.tieredDropable,no)}get signature(){return he(this.signatureMintable,so)}get revealer(){var e;return he((e=this.lazyMintable)==null?void 0:e.revealer,to)}async getTokenMetadata(e){const t=await this.contractWrapper.readContract.tokenURI(e);if(!t)throw new fl;return xl(e,t,this.storage)}async nextTokenIdToMint(){if(Tt("nextTokenIdToMint",this.contractWrapper))return await this.contractWrapper.readContract.nextTokenIdToMint();if(Tt("totalSupply",this.contractWrapper))return await this.contractWrapper.readContract.totalSupply();throw new Error("Contract requires either `nextTokenIdToMint` or `totalSupply` function available to determine the next token ID to mint")}detectErc721Enumerable(){if(oe(this.contractWrapper,"ERC721Supply")||Tt("nextTokenIdToMint",this.contractWrapper))return new Xw(this,this.contractWrapper)}detectErc721Mintable(){if(oe(this.contractWrapper,"ERC721Mintable"))return new Jw(this,this.contractWrapper,this.storage)}detectErc721Burnable(){if(oe(this.contractWrapper,"ERC721Burnable"))return new Gw(this.contractWrapper)}detectErc721LazyMintable(){if(oe(this.contractWrapper,"ERC721LazyMintable"))return new Zw(this,this.contractWrapper,this.storage)}detectErc721TieredDrop(){if(oe(this.contractWrapper,"ERC721TieredDrop"))return new t5(this,this.contractWrapper,this.storage)}detectErc721SignatureMintable(){if(oe(this.contractWrapper,"ERC721SignatureMintV1")||oe(this.contractWrapper,"ERC721SignatureMintV2"))return new n5(this.contractWrapper,this.storage)}}class C6{get chainId(){return this._chainId}constructor(e,t,n){S(this,"contractWrapper",void 0),S(this,"storage",void 0),S(this,"erc721",void 0),S(this,"_chainId",void 0),this.contractWrapper=e,this.storage=t,this.erc721=new ff(this.contractWrapper,this.storage,n),this._chainId=n}onNetworkUpdated(e){this.contractWrapper.updateSignerOrProvider(e)}getAddress(){return this.contractWrapper.readContract.address}async getAll(e){return this.erc721.getAll(e)}async getOwned(e){return this.erc721.getOwned(e)}async getOwnedTokenIds(e){return this.erc721.getOwnedTokenIds(e)}async totalSupply(){return this.erc721.totalCirculatingSupply()}async get(e){return this.erc721.get(e)}async ownerOf(e){return this.erc721.ownerOf(e)}async balanceOf(e){return this.erc721.balanceOf(e)}async balance(){return this.erc721.balance()}async isApproved(e,t){return this.erc721.isApproved(e,t)}async transfer(e,t){return this.erc721.transfer(e,t)}async setApprovalForAll(e,t){return this.erc721.setApprovalForAll(e,t)}async setApprovalForToken(e,t){return{receipt:await this.contractWrapper.sendTransaction("approve",[e,t])}}}const Hd=_.object({address:kt,quantity:Rn.default(1)}),r5=_.union([_.array(_.string()).transform(r=>r.map(e=>Hd.parse({address:e}))),_.array(Hd)]);class a5{constructor(e){S(this,"featureName",or.name),S(this,"contractWrapper",void 0),this.contractWrapper=e}async tokens(e,t){const n=await this.contractWrapper.getSignerAddress();return this.from(n,e,t)}async from(e,t,n){return{receipt:await this.contractWrapper.sendTransaction("burn",[e,t,n])}}async batch(e,t){const n=await this.contractWrapper.getSignerAddress();return this.batchFrom(n,e,t)}async batchFrom(e,t,n){return{receipt:await this.contractWrapper.sendTransaction("burnBatch",[e,t,n])}}}class i5{constructor(e,t){S(this,"featureName",lr.name),S(this,"contractWrapper",void 0),S(this,"erc1155",void 0),this.erc1155=e,this.contractWrapper=t}async all(e){const t=O.from((e==null?void 0:e.start)||0).toNumber(),n=O.from((e==null?void 0:e.count)||hr).toNumber(),a=Math.min((await this.totalCount()).toNumber(),t+n);return await Promise.all([...Array(a-t).keys()].map(i=>this.erc1155.get((t+i).toString())))}async totalCount(){return await this.contractWrapper.readContract.nextTokenIdToMint()}async totalCirculatingSupply(e){return await this.contractWrapper.readContract.totalSupply(e)}async owned(e){const t=e||await this.contractWrapper.getSignerAddress(),n=await this.contractWrapper.readContract.nextTokenIdToMint(),i=(await this.contractWrapper.readContract.balanceOfBatch(Array(n.toNumber()).fill(t),Array.from(Array(n.toNumber()).keys()))).map((s,o)=>({tokenId:o,balance:s})).filter(s=>s.balance.gt(0));return await Promise.all(i.map(async s=>({...await this.erc1155.get(s.tokenId.toString()),owner:t,quantityOwned:s.balance.toNumber()})))}}async function wl(r,e){try{const t=new Ge(r,ip,e),[n,a]=await Promise.all([Jn(await t.contractType()).replace(/\x00/g,""),await t.contractVersion()]);return{type:n,version:a}}catch{return}}class s5{constructor(e){S(this,"featureName",ti.name),S(this,"contractWrapper",void 0),this.contractWrapper=e}async getClaimTransaction(e,t,n,a){let i={};return a&&a.pricePerToken&&(i=await Vp(this.contractWrapper,a.pricePerToken,n,a.currencyAddress,a.checkERC20Allowance)),Mn.make({contractWrapper:this.contractWrapper,functionName:"claim",args:[e,t,n],overrides:i})}async to(e,t,n,a){return await(await this.getClaimTransaction(e,t,n,a)).execute()}}class o5{constructor(e,t){S(this,"featureName",co.name),S(this,"conditions",void 0),S(this,"contractWrapper",void 0),S(this,"storage",void 0),this.contractWrapper=e,this.storage=t;const n=new Za(this.contractWrapper,ii,this.storage);this.conditions=new Lw(e,n,this.storage)}async to(e,t,n,a){return await(await this.conditions.getClaimTransaction(e,t,n,a)).execute()}}class c5{constructor(e,t,n){S(this,"featureName",lo.name),S(this,"revealer",void 0),S(this,"claimWithConditions",void 0),S(this,"claim",void 0),S(this,"contractWrapper",void 0),S(this,"erc1155",void 0),S(this,"storage",void 0),this.erc1155=e,this.contractWrapper=t,this.storage=n,this.claim=this.detectErc1155Claimable(),this.claimWithConditions=this.detectErc1155ClaimableWithConditions(),this.revealer=this.detectErc1155Revealable()}async lazyMint(e,t){const n=await this.erc1155.nextTokenIdToMint(),a=await kr(e,this.storage,n.toNumber(),t),i=a[0].substring(0,a[0].lastIndexOf("/"));for(let h=0;h<a.length;h++){const m=a[h].substring(0,a[h].lastIndexOf("/"));if(i!==m)throw new Error(`Can only create batches with the same base URI for every entry in the batch. Expected '${i}' but got '${m}'`)}const s=await this.isLegacyEditionDropContract();let o;s?o=await this.contractWrapper.sendTransaction("lazyMint",[a.length,`${i.endsWith("/")?i:`${i}/`}`]):o=await this.contractWrapper.sendTransaction("lazyMint",[a.length,`${i.endsWith("/")?i:`${i}/`}`,Me("")]);const l=this.contractWrapper.parseLogs("TokensLazyMinted",o==null?void 0:o.logs),c=l[0].args.startTokenId,u=l[0].args.endTokenId,d=[];for(let h=c;h.lte(u);h=h.add(1))d.push({id:h,receipt:o,data:()=>this.erc1155.getTokenMetadata(h)});return d}detectErc1155Claimable(){if(oe(this.contractWrapper,"ERC1155ClaimCustom"))return new s5(this.contractWrapper)}detectErc1155ClaimableWithConditions(){if(oe(this.contractWrapper,"ERC1155ClaimConditionsV1")||oe(this.contractWrapper,"ERC1155ClaimConditionsV2")||oe(this.contractWrapper,"ERC1155ClaimPhasesV1")||oe(this.contractWrapper,"ERC1155ClaimPhasesV2"))return new o5(this.contractWrapper,this.storage)}detectErc1155Revealable(){if(oe(this.contractWrapper,"ERC1155Revealable"))return new Zp(this.contractWrapper,this.storage,ia.name,()=>this.erc1155.nextTokenIdToMint())}async isLegacyEditionDropContract(){const e=await wl(this.contractWrapper.readContract.address,this.contractWrapper.getProvider());return e&&e.type==="DropERC1155"&&e.version<3}}class l5{constructor(e,t,n){S(this,"featureName",po.name),S(this,"contractWrapper",void 0),S(this,"erc1155",void 0),S(this,"storage",void 0),this.erc1155=e,this.contractWrapper=t,this.storage=n}async to(e,t){const n=t.map(c=>c.metadata),a=t.map(c=>c.supply),s=(await kr(n,this.storage)).map((c,u)=>this.contractWrapper.readContract.interface.encodeFunctionData("mintTo",[e,at,c,a[u]])),o=await this.contractWrapper.multiCall(s),l=this.contractWrapper.parseLogs("TokensMinted",o.logs);if(l.length===0||l.length<n.length)throw new Error("TokenMinted event not found, minting failed");return l.map(c=>{const u=c.args.tokenIdMinted;return{id:u,receipt:o,data:()=>this.erc1155.get(u)}})}}class u5{constructor(e,t,n){S(this,"featureName",cr.name),S(this,"contractWrapper",void 0),S(this,"erc1155",void 0),S(this,"storage",void 0),S(this,"batch",void 0),this.erc1155=e,this.contractWrapper=t,this.storage=n,this.batch=this.detectErc1155BatchMintable()}async to(e,t){const n=await this.getMintTransaction(e,t),{receipt:a}=await n.execute(),i=this.contractWrapper.parseLogs("TransferSingle",a==null?void 0:a.logs);if(i.length===0)throw new Error("TransferSingleEvent event not found");const s=i[0].args.id;return{id:s,receipt:a,data:()=>this.erc1155.get(s.toString())}}async getMintTransaction(e,t){const n=await $p(t.metadata,this.storage);return Mn.make({contractWrapper:this.contractWrapper,functionName:"mintTo",args:[e,at,n,t.supply]})}async additionalSupplyTo(e,t,n){const a=await this.erc1155.getTokenMetadata(t),i=await this.contractWrapper.sendTransaction("mintTo",[e,t,a.uri,n]);return{id:O.from(t),receipt:i,data:()=>this.erc1155.get(t)}}detectErc1155BatchMintable(){if(oe(this.contractWrapper,"ERC1155BatchMintable"))return new l5(this.erc1155,this.contractWrapper,this.storage)}}class d5{constructor(e,t,n){S(this,"featureName",uo.name),S(this,"contractWrapper",void 0),S(this,"storage",void 0),S(this,"roles",void 0),this.contractWrapper=e,this.storage=t,this.roles=n}async mint(e){const t=e.payload,n=e.signature,a=await this.mapPayloadToContractStruct(t),i=await this.contractWrapper.getCallOverrides();await wr(this.contractWrapper,a.pricePerToken.mul(a.quantity),t.currencyAddress,i);const s=await this.contractWrapper.sendTransaction("mintWithSignature",[a,n],i),o=this.contractWrapper.parseLogs("TokensMintedWithSignature",s.logs);if(o.length===0)throw new Error("No MintWithSignature event found");return{id:o[0].args.tokenIdMinted,receipt:s}}async mintBatch(e){const n=(await Promise.all(e.map(async s=>{const o=await this.mapPayloadToContractStruct(s.payload),l=s.signature,c=s.payload.price;if(O.from(c).gt(0))throw new Error("Can only batch free mints. For mints with a price, use regular mint()");return{message:o,signature:l}}))).map(s=>this.contractWrapper.readContract.interface.encodeFunctionData("mintWithSignature",[s.message,s.signature])),a=await this.contractWrapper.multiCall(n),i=this.contractWrapper.parseLogs("TokensMintedWithSignature",a.logs);if(i.length===0)throw new Error("No MintWithSignature event found");return i.map(s=>({id:s.args.tokenIdMinted,receipt:a}))}async verify(e){const t=e.payload,n=e.signature,a=await this.mapPayloadToContractStruct(t);return(await this.contractWrapper.readContract.verify(a,n))[0]}async generate(e){const t={...e,tokenId:at};return this.generateFromTokenId(t)}async generateFromTokenId(e){return(await this.generateBatchFromTokenIds([e]))[0]}async generateBatch(e){const t=e.map(n=>({...n,tokenId:at}));return this.generateBatchFromTokenIds(t)}async generateBatchFromTokenIds(e){var c;await((c=this.roles)==null?void 0:c.verify(["minter"],await this.contractWrapper.getSignerAddress()));const t=e.map(u=>Z2.parse(u)),n=t.map(u=>u.metadata),a=await kr(n,this.storage),i=await this.contractWrapper.getChainID(),s=this.contractWrapper.getSigner();pe(s,"No signer available");const o=await wl(this.contractWrapper.readContract.address,this.contractWrapper.getProvider()),l=(o==null?void 0:o.type)==="TokenERC1155";return await Promise.all(t.map(async(u,d)=>{const h=a[d],m=Y2.parse({...u,uri:h}),b=await this.contractWrapper.signTypedData(s,{name:l?"TokenERC1155":"SignatureMintERC1155",version:"1",chainId:i,verifyingContract:this.contractWrapper.readContract.address},{MintRequest:t1},await this.mapPayloadToContractStruct(m));return{payload:m,signature:b.toString()}}))}async mapPayloadToContractStruct(e){const t=await At(this.contractWrapper.getProvider(),e.price,e.currencyAddress);return{to:e.to,tokenId:e.tokenId,uri:e.uri,quantity:e.quantity,pricePerToken:t,currency:e.currencyAddress,validityStartTimestamp:e.mintStartTime,validityEndTimestamp:e.mintEndTime,uid:e.uid,royaltyRecipient:e.royaltyRecipient,royaltyBps:e.royaltyBps,primarySaleRecipient:e.primarySaleRecipient}}}class hf{get chainId(){return this._chainId}constructor(e,t,n){S(this,"featureName",fo.name),S(this,"query",void 0),S(this,"mintable",void 0),S(this,"burnable",void 0),S(this,"lazyMintable",void 0),S(this,"signatureMintable",void 0),S(this,"contractWrapper",void 0),S(this,"storage",void 0),S(this,"_chainId",void 0),this.contractWrapper=e,this.storage=t,this.query=this.detectErc1155Enumerable(),this.mintable=this.detectErc1155Mintable(),this.burnable=this.detectErc1155Burnable(),this.lazyMintable=this.detectErc1155LazyMintable(),this.signatureMintable=this.detectErc1155SignatureMintable(),this._chainId=n}onNetworkUpdated(e){this.contractWrapper.updateSignerOrProvider(e)}getAddress(){return this.contractWrapper.readContract.address}async get(e){const[t,n]=await Promise.all([this.contractWrapper.readContract.totalSupply(e).catch(()=>O.from(0)),this.getTokenMetadata(e).catch(()=>({id:e.toString(),uri:"",...ml}))]);return{owner:se,metadata:n,type:"ERC1155",supply:t.toNumber()}}async totalSupply(e){return await this.contractWrapper.readContract.totalSupply(e)}async balanceOf(e,t){return await this.contractWrapper.readContract.balanceOf(e,t)}async balance(e){return await this.balanceOf(await this.contractWrapper.getSignerAddress(),e)}async isApproved(e,t){return await this.contractWrapper.readContract.isApprovedForAll(e,t)}async transfer(e,t,n){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[0];const i=await this.contractWrapper.getSignerAddress();return{receipt:await this.contractWrapper.sendTransaction("safeTransferFrom",[i,e,t,n,a])}}async setApprovalForAll(e,t){return{receipt:await this.contractWrapper.sendTransaction("setApprovalForAll",[e,t])}}async airdrop(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[0];const a=await this.contractWrapper.getSignerAddress(),i=await this.balanceOf(a,e),s=r5.parse(t),o=s.reduce((c,u)=>c+Number((u==null?void 0:u.quantity)||1),0);if(i.toNumber()<o)throw new Error(`The caller owns ${i.toNumber()} NFTs, but wants to airdrop ${o} NFTs.`);const l=s.map(c=>{let{address:u,quantity:d}=c;return this.contractWrapper.readContract.interface.encodeFunctionData("safeTransferFrom",[a,u,e,d,n])});return{receipt:await this.contractWrapper.multiCall(l)}}async nextTokenIdToMint(){if(Tt("nextTokenIdToMint",this.contractWrapper))return await this.contractWrapper.readContract.nextTokenIdToMint();throw new Error("Contract requires the `nextTokenIdToMint` function available to determine the next token ID to mint")}async getAll(e){return he(this.query,lr).all(e)}async totalCount(){return he(this.query,lr).totalCount()}async totalCirculatingSupply(e){return he(this.query,lr).totalCirculatingSupply(e)}async getOwned(e){return he(this.query,lr).owned(e)}async mint(e){return this.mintTo(await this.contractWrapper.getSignerAddress(),e)}async mintTo(e,t){return he(this.mintable,cr).to(e,t)}async getMintTransaction(e,t){return he(this.mintable,cr).getMintTransaction(e,t)}async mintAdditionalSupply(e,t){return he(this.mintable,cr).additionalSupplyTo(await this.contractWrapper.getSignerAddress(),e,t)}async mintAdditionalSupplyTo(e,t,n){return he(this.mintable,cr).additionalSupplyTo(e,t,n)}async mintBatch(e){return this.mintBatchTo(await this.contractWrapper.getSignerAddress(),e)}async mintBatchTo(e,t){var n;return he((n=this.mintable)==null?void 0:n.batch,po).to(e,t)}async burn(e,t){return he(this.burnable,or).tokens(e,t)}async burnFrom(e,t,n){return he(this.burnable,or).from(e,t,n)}async burnBatch(e,t){return he(this.burnable,or).batch(e,t)}async burnBatchFrom(e,t,n){return he(this.burnable,or).batchFrom(e,t,n)}async lazyMint(e,t){return he(this.lazyMintable,lo).lazyMint(e,t)}async getClaimTransaction(e,t,n,a){var o,l;const i=(o=this.lazyMintable)==null?void 0:o.claimWithConditions,s=(l=this.lazyMintable)==null?void 0:l.claim;if(i)return i.conditions.getClaimTransaction(e,t,n,a);if(s)return s.getClaimTransaction(e,t,n,a);throw new aa(ti)}async claim(e,t,n){return this.claimTo(await this.contractWrapper.getSignerAddress(),e,t,n)}async claimTo(e,t,n,a){var o,l;const i=(o=this.lazyMintable)==null?void 0:o.claimWithConditions,s=(l=this.lazyMintable)==null?void 0:l.claim;if(i)return i.to(e,t,n,a);if(s)return s.to(e,t,n,a);throw new aa(ti)}get claimConditions(){var e;return he((e=this.lazyMintable)==null?void 0:e.claimWithConditions,co).conditions}get signature(){return he(this.signatureMintable,uo)}get revealer(){var e;return he((e=this.lazyMintable)==null?void 0:e.revealer,ia)}async getTokenMetadata(e){const t=await this.contractWrapper.readContract.uri(e);if(!t)throw new fl;return xl(e,t,this.storage)}detectErc1155Enumerable(){if(oe(this.contractWrapper,"ERC1155Enumerable"))return new i5(this,this.contractWrapper)}detectErc1155Mintable(){if(oe(this.contractWrapper,"ERC1155Mintable"))return new u5(this,this.contractWrapper,this.storage)}detectErc1155Burnable(){if(oe(this.contractWrapper,"ERC1155Burnable"))return new a5(this.contractWrapper)}detectErc1155LazyMintable(){if(oe(this.contractWrapper,"ERC1155LazyMintableV1")||oe(this.contractWrapper,"ERC1155LazyMintableV2"))return new c5(this,this.contractWrapper,this.storage)}detectErc1155SignatureMintable(){if(oe(this.contractWrapper,"ERC1155SignatureMintable"))return new d5(this.contractWrapper,this.storage)}}class E6{get chainId(){return this._chainId}constructor(e,t,n){S(this,"contractWrapper",void 0),S(this,"storage",void 0),S(this,"erc1155",void 0),S(this,"_chainId",void 0),this.contractWrapper=e,this.storage=t,this.erc1155=new hf(this.contractWrapper,this.storage,n),this._chainId=n}onNetworkUpdated(e){this.contractWrapper.updateSignerOrProvider(e)}getAddress(){return this.contractWrapper.readContract.address}async get(e){return this.erc1155.get(e)}async totalSupply(e){return this.erc1155.totalSupply(e)}async balanceOf(e,t){return this.erc1155.balanceOf(e,t)}async balance(e){return this.erc1155.balance(e)}async isApproved(e,t){return this.erc1155.isApproved(e,t)}async transfer(e,t,n){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[0];return this.erc1155.transfer(e,t,n,a)}async setApprovalForAll(e,t){return this.erc1155.setApprovalForAll(e,t)}async airdrop(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[0];return this.erc1155.airdrop(e,t,n)}}async function p5(r,e,t,n,a){try{const i=new Ge(t,Do,r),s=await i.supportsInterface(Lo),o=await i.supportsInterface(Uo);if(s){const l=new Ge(t,lt,r);return await l.isApprovedForAll(a,e)?!0:(await l.getApproved(n)).toLowerCase()===e.toLowerCase()}else return o?await new Ge(t,Et,r).isApprovedForAll(a,e):(console.error("Contract does not implement ERC 1155 or ERC 721."),!1)}catch(i){return console.error("Failed to check if token is approved",i),!1}}async function yf(r,e,t,n,a){const i=new pt(r.getSignerOrProvider(),t,Do,r.options),s=await i.readContract.supportsInterface(Lo),o=await i.readContract.supportsInterface(Uo);if(s){const l=new pt(r.getSignerOrProvider(),t,lt,r.options);await l.readContract.isApprovedForAll(a,e)||(await l.readContract.getApproved(n)).toLowerCase()===e.toLowerCase()||await l.sendTransaction("setApprovalForAll",[e,!0])}else if(o){const l=new pt(r.getSignerOrProvider(),t,Et,r.options);await l.readContract.isApprovedForAll(a,e)||await l.sendTransaction("setApprovalForAll",[e,!0])}else throw Error("Contract must implement ERC 1155 or ERC 721.")}function mf(r){switch(pe(r.assetContractAddress!==void 0&&r.assetContractAddress!==null,"Asset contract address is required"),pe(r.buyoutPricePerToken!==void 0&&r.buyoutPricePerToken!==null,"Buyout price is required"),pe(r.listingDurationInSeconds!==void 0&&r.listingDurationInSeconds!==null,"Listing duration is required"),pe(r.startTimestamp!==void 0&&r.startTimestamp!==null,"Start time is required"),pe(r.tokenId!==void 0&&r.tokenId!==null,"Token ID is required"),pe(r.quantity!==void 0&&r.quantity!==null,"Quantity is required"),r.type){case"NewAuctionListing":pe(r.reservePricePerToken!==void 0&&r.reservePricePerToken!==null,"Reserve price is required")}}async function xf(r,e,t){return{quantity:t.quantityDesired,pricePerToken:t.pricePerToken,currencyContractAddress:t.currency,buyerAddress:t.offeror,quantityDesired:t.quantityWanted,currencyValue:await ln(r,t.currency,t.quantityWanted.mul(t.pricePerToken)),listingId:e}}function f5(r,e,t){return t=O.from(t),r=O.from(r),e=O.from(e),r.eq(O.from(0))?!1:e.sub(r).mul(K0).div(r).gte(t)}async function _6(r,e,t){let n=[];for(;e-r>hr;)n.push(t(r,r+hr-1)),r+=hr;return n.push(t(r,e-1)),await Promise.all(n)}class k6{constructor(e,t){S(this,"contractWrapper",void 0),S(this,"storage",void 0),this.contractWrapper=e,this.storage=t}getAddress(){return this.contractWrapper.readContract.address}async getListing(e){const t=await this.contractWrapper.readContract.listings(e);if(t.assetContract===se)throw new Np(this.getAddress(),e.toString());if(t.listingType!==Vn.Direct)throw new Wp(this.getAddress(),e.toString(),"Auction","Direct");return await this.mapListing(t)}async getActiveOffer(e,t){await this.validateListing(O.from(e)),pe(wo(t),"Address must be a valid address");const n=await this.contractWrapper.readContract.offers(e,t);if(n.offeror!==se)return await xf(this.contractWrapper.getProvider(),O.from(e),n)}async createListing(e){mf(e),await yf(this.contractWrapper,this.getAddress(),e.assetContractAddress,e.tokenId,await this.contractWrapper.getSignerAddress());const t=await At(this.contractWrapper.getProvider(),e.buyoutPricePerToken,e.currencyContractAddress);let n=Math.floor(e.startTimestamp.getTime()/1e3);const i=(await this.contractWrapper.getProvider().getBlock("latest")).timestamp;n<i&&(n=i);const s=await this.contractWrapper.sendTransaction("createListing",[{assetContract:e.assetContractAddress,tokenId:e.tokenId,buyoutPricePerToken:t,currencyToAccept:Up(e.currencyContractAddress),listingType:Vn.Direct,quantityToList:e.quantity,reservePricePerToken:t,secondsUntilEndTime:e.listingDurationInSeconds,startTime:O.from(n)}],{gasLimit:5e5});return{id:this.contractWrapper.parseLogs("ListingAdded",s==null?void 0:s.logs)[0].args.listingId,receipt:s}}async makeOffer(e,t,n,a,i){if(Pn(n))throw new Error("You must use the wrapped native token address when making an offer with a native token");const s=await At(this.contractWrapper.getProvider(),a,n);try{await this.getListing(e)}catch(d){throw console.error("Failed to get listing, err =",d),new Error(`Error getting the listing with id ${e}`)}const o=O.from(t),l=O.from(s).mul(o),c=await this.contractWrapper.getCallOverrides()||{};await wr(this.contractWrapper,l,n,c);let u=at;return i&&(u=O.from(Math.floor(i.getTime()/1e3))),{receipt:await this.contractWrapper.sendTransaction("offer",[e,t,n,s,u],c)}}async acceptOffer(e,t){await this.validateListing(O.from(e));const n=await this.contractWrapper.readContract.offers(e,t);return{receipt:await this.contractWrapper.sendTransaction("acceptOffer",[e,t,n.currency,n.pricePerToken])}}async buyoutListing(e,t,n){const a=await this.validateListing(O.from(e)),{valid:i,error:s}=await this.isStillValidListing(a,t);if(!i)throw new Error(`Listing ${e} is no longer valid. ${s}`);const o=n||await this.contractWrapper.getSignerAddress(),l=O.from(t),c=O.from(a.buyoutPrice).mul(l),u=await this.contractWrapper.getCallOverrides()||{};return await wr(this.contractWrapper,c,a.currencyContractAddress,u),{receipt:await this.contractWrapper.sendTransaction("buy",[e,o,l,a.currencyContractAddress,c],u)}}async updateListing(e){return{receipt:await this.contractWrapper.sendTransaction("updateListing",[e.id,e.quantity,e.buyoutPrice,e.buyoutPrice,e.currencyContractAddress,e.startTimeInSeconds,e.secondsUntilEnd])}}async cancelListing(e){return{receipt:await this.contractWrapper.sendTransaction("cancelDirectListing",[e])}}async validateListing(e){try{return await this.getListing(e)}catch(t){throw console.error(`Error getting the listing with id ${e}`),t}}async mapListing(e){return{assetContractAddress:e.assetContract,buyoutPrice:O.from(e.buyoutPricePerToken),currencyContractAddress:e.currency,buyoutCurrencyValuePerToken:await ln(this.contractWrapper.getProvider(),e.currency,e.buyoutPricePerToken),id:e.listingId.toString(),tokenId:e.tokenId,quantity:e.quantity,startTimeInSeconds:e.startTime,asset:await bl(e.assetContract,this.contractWrapper.getProvider(),e.tokenId,this.storage),secondsUntilEnd:e.endTime,sellerAddress:e.tokenOwner,type:Vn.Direct}}async isStillValidListing(e,t){if(!await p5(this.contractWrapper.getProvider(),this.getAddress(),e.assetContractAddress,e.tokenId,e.sellerAddress))return{valid:!1,error:`Token '${e.tokenId}' from contract '${e.assetContractAddress}' is not approved for transfer`};const a=this.contractWrapper.getProvider(),i=new Ge(e.assetContractAddress,Do,a),s=await i.supportsInterface(Lo),o=await i.supportsInterface(Uo);if(s){const c=(await new Ge(e.assetContractAddress,lt,a).ownerOf(e.tokenId)).toLowerCase()===e.sellerAddress.toLowerCase();return{valid:c,error:c?void 0:`Seller is not the owner of Token '${e.tokenId}' from contract '${e.assetContractAddress} anymore'`}}else if(o){const u=(await new Ge(e.assetContractAddress,Et,a).balanceOf(e.sellerAddress,e.tokenId)).gte(t||e.quantity);return{valid:u,error:u?void 0:`Seller does not have enough balance of Token '${e.tokenId}' from contract '${e.assetContractAddress} to fulfill the listing`}}else return{valid:!1,error:"Contract does not implement ERC 1155 or ERC 721."}}}class I6{constructor(e,t){S(this,"contractWrapper",void 0),S(this,"storage",void 0),S(this,"encoder",void 0),this.contractWrapper=e,this.storage=t,this.encoder=new yl(e)}getAddress(){return this.contractWrapper.readContract.address}async getListing(e){const t=await this.contractWrapper.readContract.listings(e);if(t.listingId.toString()!==e.toString())throw new Np(this.getAddress(),e.toString());if(t.listingType!==Vn.Auction)throw new Wp(this.getAddress(),e.toString(),"Direct","Auction");return await this.mapListing(t)}async getWinningBid(e){await this.validateListing(O.from(e));const t=await this.contractWrapper.readContract.winningBid(e);if(t.offeror!==se)return await xf(this.contractWrapper.getProvider(),O.from(e),t)}async getWinner(e){const t=await this.validateListing(O.from(e)),n=await this.contractWrapper.readContract.winningBid(e),a=O.from(Math.floor(Date.now()/1e3)),i=O.from(t.endTimeInEpochSeconds);if(a.gt(i)&&n.offeror!==se)return n.offeror;const o=(await this.contractWrapper.readContract.queryFilter(this.contractWrapper.readContract.filters.AuctionClosed())).find(l=>l.args.listingId.eq(O.from(e)));if(!o)throw new Error(`Could not find auction with listingId ${e} in closed auctions`);return o.args.winningBidder}async createListing(e){mf(e),await yf(this.contractWrapper,this.getAddress(),e.assetContractAddress,e.tokenId,await this.contractWrapper.getSignerAddress());const t=await At(this.contractWrapper.getProvider(),e.buyoutPricePerToken,e.currencyContractAddress),n=await At(this.contractWrapper.getProvider(),e.reservePricePerToken,e.currencyContractAddress);let a=Math.floor(e.startTimestamp.getTime()/1e3);const s=(await this.contractWrapper.getProvider().getBlock("latest")).timestamp;a<s&&(a=s);const o=await this.contractWrapper.sendTransaction("createListing",[{assetContract:e.assetContractAddress,tokenId:e.tokenId,buyoutPricePerToken:t,currencyToAccept:Up(e.currencyContractAddress),listingType:Vn.Auction,quantityToList:e.quantity,reservePricePerToken:n,secondsUntilEndTime:e.listingDurationInSeconds,startTime:O.from(a)}],{gasLimit:5e5});return{id:this.contractWrapper.parseLogs("ListingAdded",o==null?void 0:o.logs)[0].args.listingId,receipt:o}}async buyoutListing(e){const t=await this.validateListing(O.from(e)),n=await fi(this.contractWrapper.getProvider(),t.currencyContractAddress);return this.makeBid(e,$n(t.buyoutPrice,n.decimals))}async makeBid(e,t){const n=await this.validateListing(O.from(e)),a=await At(this.contractWrapper.getProvider(),t,n.currencyContractAddress);if(a.eq(O.from(0)))throw new Error("Cannot make a bid with 0 value");const i=await this.contractWrapper.readContract.bidBufferBps(),s=await this.getWinningBid(e);if(s){const u=f5(s.pricePerToken,a,i);pe(u,"Bid price is too low based on the current winning bid and the bid buffer")}else{const u=a,d=O.from(n.reservePrice);pe(u.gte(d),"Bid price is too low based on reserve price")}const o=O.from(n.quantity),l=a.mul(o),c=await this.contractWrapper.getCallOverrides()||{};return await wr(this.contractWrapper,l,n.currencyContractAddress,c),{receipt:await this.contractWrapper.sendTransaction("offer",[e,n.quantity,n.currencyContractAddress,a,at],c)}}async cancelListing(e){const t=await this.validateListing(O.from(e)),n=O.from(Math.floor(Date.now()/1e3)),a=O.from(t.startTimeInEpochSeconds),i=await this.contractWrapper.readContract.winningBid(e);if(n.gt(a)&&i.offeror!==se)throw new N1(e.toString());return{receipt:await this.contractWrapper.sendTransaction("closeAuction",[O.from(e),await this.contractWrapper.getSignerAddress()])}}async closeListing(e,t){t||(t=await this.contractWrapper.getSignerAddress());const n=await this.validateListing(O.from(e));try{return{receipt:await this.contractWrapper.sendTransaction("closeAuction",[O.from(e),t])}}catch(a){throw a.message.includes("cannot close auction before it has ended")?new ud(e.toString(),n.endTimeInEpochSeconds.toString()):a}}async executeSale(e){const t=await this.validateListing(O.from(e));try{const n=await this.getWinningBid(e);pe(n,"No winning bid found");const a=this.encoder.encode("closeAuction",[e,t.sellerAddress]),i=this.encoder.encode("closeAuction",[e,n.buyerAddress]);return await this.contractWrapper.multiCall([a,i])}catch(n){throw n.message.includes("cannot close auction before it has ended")?new ud(e.toString(),t.endTimeInEpochSeconds.toString()):n}}async updateListing(e){return{receipt:await this.contractWrapper.sendTransaction("updateListing",[e.id,e.quantity,e.reservePrice,e.buyoutPrice,e.currencyContractAddress,e.startTimeInEpochSeconds,e.endTimeInEpochSeconds])}}async getBidBufferBps(){return this.contractWrapper.readContract.bidBufferBps()}async getMinimumNextBid(e){const[t,n,a]=await Promise.all([this.getBidBufferBps(),this.getWinningBid(e),await this.validateListing(O.from(e))]),i=n?n.currencyValue.value:a.reservePrice,s=i.add(i.mul(t).div(1e4));return ln(this.contractWrapper.getProvider(),a.currencyContractAddress,s)}async validateListing(e){try{return await this.getListing(e)}catch(t){throw console.error(`Error getting the listing with id ${e}`),t}}async mapListing(e){return{assetContractAddress:e.assetContract,buyoutPrice:O.from(e.buyoutPricePerToken),currencyContractAddress:e.currency,buyoutCurrencyValuePerToken:await ln(this.contractWrapper.getProvider(),e.currency,e.buyoutPricePerToken),id:e.listingId.toString(),tokenId:e.tokenId,quantity:e.quantity,startTimeInEpochSeconds:e.startTime,asset:await bl(e.assetContract,this.contractWrapper.getProvider(),e.tokenId,this.storage),reservePriceCurrencyValuePerToken:await ln(this.contractWrapper.getProvider(),e.currency,e.reservePricePerToken),reservePrice:O.from(e.reservePricePerToken),endTimeInEpochSeconds:e.endTime,sellerAddress:e.tokenOwner,type:Vn.Auction}}}async function qc(r,e,t,n,a){let i=[];try{if(cf(hn.parse(e),"PluginRouter")){const c=(await new pt(t,r,Kb,n).readContract.getAllPlugins()).map(d=>d.pluginAddress),u=Array.from(new Set(c));i=await h5(u,t,a)}}catch{}return i.length>0?y5([e,...i]):e}async function h5(r,e,t){return(await Promise.all(r.map(n=>ua(n,e,t).catch(a=>(console.error(`Failed to fetch plug-in for ${n}`,a),{abi:[]}))))).map(n=>n.abi)}function y5(r){const e=r.map(a=>hn.parse(a)).flat(),n=tw(e,(a,i)=>a.name===i.name&&a.type===i.type&&a.inputs.length===i.inputs.length).filter(a=>a.type!=="constructor");return hn.parse(n)}const bf=Ft.merge(Xn).merge(it),m5=jt.merge(Xn).merge(it),x5=bf.merge(en).merge(_r).merge(qt),b5={deploy:x5,output:m5,input:bf},gf=Ft.merge(ht).merge(it),g5=jt.merge(ht).merge(it),w5=gf.merge(qt),v5={deploy:w5,output:g5,input:gf},vn={name:"DropERC1155",contractType:"edition-drop",schema:c1,roles:["admin","minter","transfer"],initialize:async function(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];let[n,a,i,s]=e;const[,o]=yt(n,s),[l,c,u]=await Promise.all([await vn.getAbi(a,o,i),Be(()=>import("./edition-drop-279b311e.esm-3fbfa807.js"),["assets/edition-drop-279b311e.esm-3fbfa807.js","assets/ethers-d38fee93.js"]),o.getNetwork()]);return new c.EditionDrop(n,a,i,s,l,u.chainId)},getAbi:async(r,e,t)=>{const n=await Nt(r,e,t);if(n)return n;const a=await qo(r,e);return!a||a.version>2?(await Be(()=>import("./DropERC1155-96faea3f.js"),[])).default:(await Be(()=>import("./DropERC1155_V2-35cc7479.js"),[])).default}},vr={name:"TokenERC1155",contractType:"edition",schema:_1,roles:["admin","minter","transfer"],initialize:async function(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];let[n,a,i,s]=e;const[,o]=yt(n,s),[l,c,u]=await Promise.all([vr.getAbi(a,o,i),Be(()=>import("./edition-2913993b.esm-449a193a.js"),["assets/edition-2913993b.esm-449a193a.js","assets/ethers-d38fee93.js"]),o.getNetwork()]);return new c.Edition(n,a,i,s,l,u.chainId)},getAbi:async(r,e,t)=>{const n=await Nt(r,e,t);return n||(await Be(()=>import("./TokenERC1155-35b21c84.js"),[])).default}},un={name:"Marketplace",contractType:"marketplace",schema:Ip,roles:["admin","lister","asset"],initialize:async function(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];let[n,a,i,s]=e;const[,o]=yt(n,s),[l,c,u]=await Promise.all([un.getAbi(a,o,i),Be(()=>import("./marketplace-75fc5ece.esm-c6ab2c9f.js"),["assets/marketplace-75fc5ece.esm-c6ab2c9f.js","assets/ethers-d38fee93.js"]),o.getNetwork()]);return new c.Marketplace(n,a,i,s,l,u.chainId)},getAbi:async(r,e,t)=>{const n=await Nt(r,e,t);return n||(await Be(()=>import("./Marketplace-c2bff065.js"),[])).default}},Gn={name:"MarketplaceRouter",contractType:"marketplace-v3",schema:Ip,roles:["admin","lister","asset"],initialize:async function(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];let[n,a,i,s]=e;const[,o]=yt(n,s),[l,c,u]=await Promise.all([Gn.getAbi(a,o,i),Be(()=>import("./marketplacev3-7d2d5b47.esm-a86d33da.js"),["assets/marketplacev3-7d2d5b47.esm-a86d33da.js","assets/ethers-d38fee93.js"]),o.getNetwork()]);return new c.MarketplaceV3(n,a,i,s,l,u.chainId)},getAbi:async(r,e,t)=>{const n=await Nt(r,e,t);if(n)return await qc(r,n,e,{},t);const a=(await Be(()=>import("./MarketplaceV3-8433d5d0.js"),[])).default;return await qc(r,a,e,{},t)}},dn={name:"Multiwrap",contractType:"multiwrap",schema:v5,roles:["admin","transfer","minter","unwrap","asset"],initialize:async function(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];let[n,a,i,s]=e;const[,o]=yt(n,s),[l,c,u]=await Promise.all([dn.getAbi(a,o,i),Be(()=>import("./multiwrap-48e23977.esm-c2c7212c.js"),["assets/multiwrap-48e23977.esm-c2c7212c.js","assets/ethers-d38fee93.js"]),o.getNetwork()]);return new c.Multiwrap(n,a,i,s,l,u.chainId)},getAbi:async(r,e,t)=>{const n=await Nt(r,e,t);return n||(await Be(()=>import("./Multiwrap-d21a366b.js"),[])).default}},Tr={name:"TokenERC721",contractType:"nft-collection",schema:A1,roles:["admin","minter","transfer"],initialize:async function(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];let[n,a,i,s]=e;const[,o]=yt(n,s),[l,c,u]=await Promise.all([Tr.getAbi(a,o,i),Be(()=>import("./nft-collection-2c37ac10.esm-5daf1b01.js"),["assets/nft-collection-2c37ac10.esm-5daf1b01.js","assets/ethers-d38fee93.js"]),o.getNetwork()]);return new c.NFTCollection(n,a,i,s,l,u.chainId)},getAbi:async(r,e,t)=>{const n=await Nt(r,e,t);return n||(await Be(()=>import("./TokenERC721-680d0538.js"),[])).default}},Tn={name:"DropERC721",contractType:"nft-drop",schema:Ep,roles:["admin","minter","transfer"],initialize:async function(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];let[n,a,i,s]=e;const[,o]=yt(n,s),[l,c,u]=await Promise.all([Tn.getAbi(a,o,i),Be(()=>import("./nft-drop-b834db4a.esm-d9e634e2.js"),["assets/nft-drop-b834db4a.esm-d9e634e2.js","assets/ethers-d38fee93.js"]),o.getNetwork()]);return new c.NFTDrop(n,a,i,s,l,u.chainId)},getAbi:async(r,e,t)=>{const n=await Nt(r,e,t);if(n)return n;const a=await qo(r,e);return!a||a.version>3?(await Be(()=>import("./DropERC721-153aa64b.js"),[])).default:(await Be(()=>import("./DropERC721_V3-f9d09195.js"),[])).default}},Ht={name:"Pack",contractType:"pack",schema:f1,roles:["admin","minter","asset","transfer"],initialize:async function(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];let[n,a,i,s]=e;const[,o]=yt(n,s),[l,c,u]=await Promise.all([Ht.getAbi(a,o,i),Be(()=>import("./pack-26095b44.esm-43169009.js"),["assets/pack-26095b44.esm-43169009.js","assets/ethers-d38fee93.js"]),o.getNetwork()]);return new c.Pack(n,a,i,s,l,u.chainId)},getAbi:async(r,e,t)=>{const n=await Nt(r,e,t);return n||(await Be(()=>import("./Pack-b5661456.js"),[])).default}},An={name:"SignatureDrop",contractType:"signature-drop",schema:Ep,roles:["admin","minter","transfer"],initialize:async function(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];let[n,a,i,s]=e;const[,o]=yt(n,s),[l,c,u]=await Promise.all([An.getAbi(a,o,i),Be(()=>import("./signature-drop-2b7b28c3.esm-5875b7ee.js"),["assets/signature-drop-2b7b28c3.esm-5875b7ee.js","assets/ethers-d38fee93.js"]),o.getNetwork()]);return new c.SignatureDrop(n,a,i,s,l,u.chainId)},getAbi:async(r,e,t)=>{const n=await Nt(r,e,t);if(n)return n;const a=await qo(r,e);return!a||a.version>4?(await Be(()=>import("./SignatureDrop-b53b1c02.js"),[])).default:(await Be(()=>import("./SignatureDrop_V4-37128ef6.js"),[])).default}},Cn={name:"Split",contractType:"split",schema:x1,roles:["admin"],initialize:async function(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];let[n,a,i,s]=e;const[,o]=yt(n,s),[l,c,u]=await Promise.all([Cn.getAbi(a,o,i),Be(()=>import("./split-ed1e9c7e.esm-70029a5c.js"),["assets/split-ed1e9c7e.esm-70029a5c.js","assets/ethers-d38fee93.js"]),o.getNetwork()]);return new c.Split(n,a,i,s,l,u.chainId)},getAbi:async(r,e,t)=>{const n=await Nt(r,e,t);return n||(await Be(()=>import("./Split-691026f6.js"),[])).default}},Ar={name:"DropERC20",contractType:"token-drop",schema:b5,roles:["admin","transfer"],initialize:async function(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];let[n,a,i,s]=e;const[,o]=yt(n,s),[l,c,u]=await Promise.all([Ar.getAbi(a,o,i),Be(()=>import("./token-drop-dd991dc9.esm-e5421913.js"),["assets/token-drop-dd991dc9.esm-e5421913.js","assets/ethers-d38fee93.js"]),o.getNetwork()]);return new c.TokenDrop(n,a,i,s,l,u.chainId)},getAbi:async(r,e,t)=>{const n=await Nt(r,e,t);if(n)return n;const a=await qo(r,e);return!a||a.version>2?(await Be(()=>import("./DropERC20-ef4a8369.js"),[])).default:(await Be(()=>import("./DropERC20_V2-40dbda2a.js"),[])).default}},En={name:"TokenERC20",contractType:"token",schema:w1,roles:["admin","minter","transfer"],initialize:async function(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];let[n,a,i,s]=e;const[,o]=yt(n,s),[l,c,u]=await Promise.all([En.getAbi(a,o,i),Be(()=>import("./token-cf8bd636.esm-6991e40a.js"),["assets/token-cf8bd636.esm-6991e40a.js","assets/ethers-d38fee93.js"]),o.getNetwork()]);return new c.Token(n,a,i,s,l,u.chainId)},getAbi:async(r,e,t)=>{const n=await Nt(r,e,t);return n||(await Be(()=>import("./TokenERC20-fe27100e.js"),[])).default}},_n={name:"VoteERC20",contractType:"vote",schema:P1,roles:[],initialize:async function(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];let[n,a,i,s]=e;const[,o]=yt(n,s),[l,c,u]=await Promise.all([_n.getAbi(a,o,i),Be(()=>import("./vote-f543c525.esm-046b5d20.js"),["assets/vote-f543c525.esm-046b5d20.js","assets/ethers-d38fee93.js"]),o.getNetwork()]);return new c.Vote(n,a,i,s,l,u.chainId)},getAbi:async(r,e,t)=>{const n=await Nt(r,e,t);return n||(await Be(()=>import("./VoteERC20-a8a1e974.js"),[])).default}};async function qo(r,e){try{return await wl(r,e)}catch{return}}const $r={[vn.contractType]:vn,[vr.contractType]:vr,[un.contractType]:un,[Gn.contractType]:Gn,[dn.contractType]:dn,[Tr.contractType]:Tr,[Tn.contractType]:Tn,[Ht.contractType]:Ht,[An.contractType]:An,[Cn.contractType]:Cn,[Ar.contractType]:Ar,[En.contractType]:En,[_n.contractType]:_n},zd={name:"SmartContract",contractType:"custom",schema:{},roles:Kp},wf={...$r,[zd.contractType]:zd};function T5(r){var e;return((e=Object.values(wf).find(t=>t.name===r))==null?void 0:e.contractType)||"custom"}function vf(r){var e;return(e=Object.values(wf).find(t=>t.contractType===r))==null?void 0:e.name}async function Tf(r,e,t,n){const a=await n.getChainId(),i=await n.getAddress();let s=r===Ht.contractType?[]:pp(a);switch(e.trusted_forwarders&&e.trusted_forwarders.length>0&&(s=e.trusted_forwarders),r){case Tn.contractType:case Tr.contractType:const o=Tn.schema.deploy.parse(e);return[i,o.name,o.symbol,t,s,o.primary_sale_recipient,o.fee_recipient,o.seller_fee_basis_points,o.platform_fee_basis_points,o.platform_fee_recipient];case An.contractType:const l=An.schema.deploy.parse(e);return[i,l.name,l.symbol,t,s,l.primary_sale_recipient,l.fee_recipient,l.seller_fee_basis_points,l.platform_fee_basis_points,l.platform_fee_recipient];case dn.contractType:const c=dn.schema.deploy.parse(e);return[i,c.name,c.symbol,t,s,c.fee_recipient,c.seller_fee_basis_points];case vn.contractType:case vr.contractType:const u=vn.schema.deploy.parse(e);return[i,u.name,u.symbol,t,s,u.primary_sale_recipient,u.fee_recipient,u.seller_fee_basis_points,u.platform_fee_basis_points,u.platform_fee_recipient];case Ar.contractType:case En.contractType:const d=En.schema.deploy.parse(e);return[i,d.name,d.symbol,t,s,d.primary_sale_recipient,d.platform_fee_recipient,d.platform_fee_basis_points];case _n.contractType:const h=_n.schema.deploy.parse(e);return[h.name,t,s,h.voting_token_address,h.voting_delay_in_blocks,h.voting_period_in_blocks,O.from(h.proposal_token_threshold),h.voting_quorum_fraction];case Cn.contractType:const m=Cn.schema.deploy.parse(e);return[i,t,s,m.recipients.map(f=>f.address),m.recipients.map(f=>O.from(f.sharesBps))];case un.contractType:case Gn.contractType:const b=un.schema.deploy.parse(e);return[i,t,s,b.platform_fee_recipient,b.platform_fee_basis_points];case Ht.contractType:const x=Ht.schema.deploy.parse(e);return[i,x.name,x.symbol,t,s,x.fee_recipient,x.seller_fee_basis_points];default:return[]}}class A5{constructor(e,t){S(this,"featureName",Fc.name),S(this,"contractWrapper",void 0),S(this,"metadata",void 0),this.contractWrapper=e,this.metadata=t}async get(){return oe(this.contractWrapper,"AppURI")?await this.contractWrapper.readContract.appURI():(await this.metadata.get()).appURI||""}async set(e){return oe(this.contractWrapper,"AppURI")?{receipt:await this.contractWrapper.sendTransaction("setAppURI",[e])}:await this.metadata.update({appURI:e})}}class C5{constructor(e){S(this,"contractWrapper",void 0),this.contractWrapper=e}addTransactionListener(e){this.contractWrapper.addListener(wt.Transaction,e)}removeTransactionListener(e){this.contractWrapper.off(wt.Transaction,e)}addEventListener(e,t){const n=this.contractWrapper.readContract.interface.getEvent(e),i={address:this.contractWrapper.readContract.address,topics:[this.contractWrapper.readContract.interface.getEventTopic(n)]},s=o=>{const l=this.contractWrapper.readContract.interface.parseLog(o);t(this.toContractEvent(l.eventFragment,l.args,o))};return this.contractWrapper.getProvider().on(i,s),()=>{this.contractWrapper.getProvider().off(i,s)}}listenToAllEvents(e){const n={address:this.contractWrapper.readContract.address},a=i=>{try{const s=this.contractWrapper.readContract.interface.parseLog(i);e(this.toContractEvent(s.eventFragment,s.args,i))}catch(s){console.error("Could not parse event:",i,s)}};return this.contractWrapper.getProvider().on(n,a),()=>{this.contractWrapper.getProvider().off(n,a)}}removeEventListener(e,t){const n=this.contractWrapper.readContract.interface.getEvent(e);this.contractWrapper.readContract.off(n.name,t)}removeAllListeners(){this.contractWrapper.readContract.removeAllListeners();const t={address:this.contractWrapper.readContract.address};this.contractWrapper.getProvider().removeAllListeners(t)}async getAllEvents(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{fromBlock:0,toBlock:"latest",order:"desc"};const n=(await this.contractWrapper.readContract.queryFilter({},e.fromBlock,e.toBlock)).sort((a,i)=>e.order==="desc"?i.blockNumber-a.blockNumber:a.blockNumber-i.blockNumber);return this.parseEvents(n)}async getEvents(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{fromBlock:0,toBlock:"latest",order:"desc"};const n=this.contractWrapper.readContract.interface.getEvent(e),a=this.contractWrapper.readContract.interface.getEvent(e),i=t.filters?a.inputs.map(c=>t.filters[c.name]):[],s=this.contractWrapper.readContract.filters[n.name](...i),l=(await this.contractWrapper.readContract.queryFilter(s,t.fromBlock,t.toBlock)).sort((c,u)=>t.order==="desc"?u.blockNumber-c.blockNumber:c.blockNumber-u.blockNumber);return this.parseEvents(l)}parseEvents(e){return e.map(t=>{const n=Object.fromEntries(Object.entries(t).filter(a=>typeof a[1]!="function"&&a[0]!=="args"));if(t.args){const a=Object.entries(t.args),i=a.slice(a.length/2,a.length),s={};for(const[o,l]of i)s[o]=l;return{eventName:t.event||"",data:s,transaction:n}}return{eventName:t.event||"",data:{},transaction:n}})}toContractEvent(e,t,n){const a=Object.fromEntries(Object.entries(n).filter(s=>typeof s[1]!="function"&&s[0]!=="args")),i={};return e.inputs.forEach((s,o)=>{if(Array.isArray(t[o])){const l=s.components;if(l){const c=t[o];if(s.type==="tuple[]"){const u=[];for(let d=0;d<c.length;d++){const h=c[d],m={};for(let b=0;b<l.length;b++){const x=l[b].name;m[x]=h[b]}u.push(m)}i[s.name]=u}else{const u={};for(let d=0;d<l.length;d++){const h=l[d].name;u[h]=c[d]}i[s.name]=u}}}else i[s.name]=t[o]}),{eventName:e.name,data:i,transaction:a}}}class E5{constructor(e){S(this,"contractWrapper",void 0),this.contractWrapper=e}overrideNextTransaction(e){this.contractWrapper.withTransactionOverride(e)}}class _5{constructor(e){S(this,"featureName",Ks.name),S(this,"contractWrapper",void 0),this.contractWrapper=e}async get(){const[e,t]=await this.contractWrapper.readContract.getPlatformFeeInfo();return en.parse({platform_fee_recipient:e,platform_fee_basis_points:t})}async set(e){const t=en.parse(e);return{receipt:await this.contractWrapper.sendTransaction("setPlatformFeeInfo",[t.platform_fee_recipient,t.platform_fee_basis_points])}}}class k5{constructor(e,t){S(this,"contractWrapper",void 0),S(this,"storage",void 0),S(this,"_cachedMetadata",void 0),this.contractWrapper=e,this.storage=t}async get(){return this._cachedMetadata?this._cachedMetadata:(this._cachedMetadata=await ua(this.contractWrapper.readContract.address,this.contractWrapper.getProvider(),this.storage),this._cachedMetadata)}async extractFunctions(){let e;try{e=await this.get()}catch{}return ri(hn.parse(this.contractWrapper.abi),e==null?void 0:e.metadata)}async extractEvents(){let e;try{e=await this.get()}catch{}return Dw(hn.parse(this.contractWrapper.abi),e==null?void 0:e.metadata)}}class I5{get royalties(){return he(this.detectRoyalties(),Vs)}get roles(){return he(this.detectRoles(),$s)}get sales(){return he(this.detectPrimarySales(),Gs)}get platformFees(){return he(this.detectPlatformFees(),Ks)}get owner(){return he(this.detectOwnable(),Ys)}get erc20(){return he(this.detectErc20(),Xs)}get erc721(){return he(this.detectErc721(),oo)}get erc1155(){return he(this.detectErc1155(),fo)}get chainId(){return this._chainId}constructor(e,t,n,a){let i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{},s=arguments.length>5?arguments[5]:void 0,o=arguments.length>6&&arguments[6]!==void 0?arguments[6]:new pt(e,t,n,i);S(this,"contractWrapper",void 0),S(this,"storage",void 0),S(this,"events",void 0),S(this,"interceptor",void 0),S(this,"encoder",void 0),S(this,"estimator",void 0),S(this,"publishedMetadata",void 0),S(this,"abi",void 0),S(this,"metadata",void 0),S(this,"appURI",void 0),S(this,"_chainId",void 0),this._chainId=s,this.storage=a,this.contractWrapper=o,this.abi=n,this.events=new C5(this.contractWrapper),this.encoder=new yl(this.contractWrapper),this.interceptor=new E5(this.contractWrapper),this.estimator=new uf(this.contractWrapper),this.publishedMetadata=new k5(this.contractWrapper,this.storage),this.metadata=new Za(this.contractWrapper,ii,this.storage),this.appURI=new A5(this.contractWrapper,this.metadata)}onNetworkUpdated(e){this.contractWrapper.updateSignerOrProvider(e)}getAddress(){return this.contractWrapper.readContract.address}async call(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];return this.contractWrapper.call(e,...n)}detectRoyalties(){if(oe(this.contractWrapper,"Royalty")){const e=new Za(this.contractWrapper,ii,this.storage);return new lw(this.contractWrapper,e)}}detectRoles(){if(oe(this.contractWrapper,"Permissions"))return new cw(this.contractWrapper,Kp)}detectPrimarySales(){if(oe(this.contractWrapper,"PrimarySale"))return new uw(this.contractWrapper)}detectPlatformFees(){if(oe(this.contractWrapper,"PlatformFee"))return new _5(this.contractWrapper)}detectErc20(){if(oe(this.contractWrapper,"ERC20"))return new pf(this.contractWrapper,this.storage,this.chainId)}detectErc721(){if(oe(this.contractWrapper,"ERC721"))return new ff(this.contractWrapper,this.storage,this.chainId)}detectErc1155(){if(oe(this.contractWrapper,"ERC1155"))return new hf(this.contractWrapper,this.storage,this.chainId)}detectOwnable(){if(oe(this.contractWrapper,"Ownable"))return new D5(this.contractWrapper)}}class S5 extends pi{constructor(e,t,n){super(e,t),S(this,"storage",void 0),S(this,"publisher",void 0),this.storage=n,this.publisher=new pt(e,N2(),m2,t)}updateSignerOrProvider(e){super.updateSignerOrProvider(e),this.publisher.updateSignerOrProvider(e)}async extractConstructorParams(e){return Bw(e,this.storage)}async extractFunctions(e){return Rw(e,this.storage)}async fetchCompilerMetadataFromPredeployURI(e){return ai(e,this.storage)}async fetchPrePublishMetadata(e,t){const n=await ai(e,this.storage),a=t?await this.getLatest(t,n.name):void 0,i=a?await this.fetchPublishedContractInfo(a):void 0;return{preDeployMetadata:n,latestPublishedContractMetadata:i}}async fetchCompilerMetadataFromAddress(e){return ua(e,this.getProvider(),this.storage)}async fetchPublishedContractInfo(e){return{name:e.id,publishedTimestamp:e.timestamp,publishedMetadata:await this.fetchFullPublishMetadata(e.metadataUri)}}async fetchFullPublishMetadata(e){return sf(e,this.storage)}async resolvePublishMetadataFromCompilerMetadata(e){const t=await this.publisher.readContract.getPublishedUriFromCompilerUri(e);if(t.length===0)throw Error(`Could not resolve published metadata URI from ${e}`);return await Promise.all(t.filter(n=>n.length>0).map(n=>this.fetchFullPublishMetadata(n)))}async resolveContractUriFromAddress(e){const t=await xo(e,this.getProvider());return pe(t,"Could not resolve contract URI from address"),t}async fetchContractSourcesFromAddress(e){const t=await this.fetchCompilerMetadataFromAddress(e);return await Ef(t,this.storage)}async updatePublisherProfile(e){const t=this.getSigner();pe(t,"A signer is required");const n=await t.getAddress(),a=await this.storage.upload(e);return{receipt:await this.publisher.sendTransaction("setPublisherProfileUri",[n,a])}}async getPublisherProfile(e){const t=await this.publisher.readContract.getPublisherProfileUri(e);return!t||t.length===0?{}:Y5.parse(await this.storage.downloadJSON(t))}async getAll(e){const n=(await this.publisher.readContract.getAllPublishedContracts(e)).reduce((a,i)=>(a[i.contractId]=i,a),{});return Object.entries(n).map(a=>{let[,i]=a;return this.toPublishedContract(i)})}async getAllVersions(e,t){const n=await this.publisher.readContract.getPublishedContractVersions(e,t);if(n.length===0)throw Error("Not found");return n.map(a=>this.toPublishedContract(a))}async getVersion(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"latest";if(n==="latest")return this.getLatest(e,t);const a=await this.getAllVersions(e,t),s=(await Promise.all(a.map(o=>this.fetchPublishedContractInfo(o)))).find(o=>o.publishedMetadata.version===n);return pe(s,"Contract version not found"),a.find(o=>o.timestamp===s.publishedTimestamp)}async getLatest(e,t){const n=await this.publisher.readContract.getPublishedContract(e,t);if(n&&n.publishMetadataUri)return this.toPublishedContract(n)}async publish(e,t){const n=this.getSigner();pe(n,"A signer is required");const a=await n.getAddress(),i=await af(e,this.storage),s=await this.getLatest(a,i.name);if(s&&s.metadataUri){const w=(await this.fetchPublishedContractInfo(s)).publishedMetadata.version;if(!U5(w,t.version))throw Error(`Version ${t.version} is not greater than ${w}`)}const o=await(await this.storage.download(i.bytecodeUri)).text(),l=o.startsWith("0x")?o:`0x${o}`,c=cn(["bytes"],[l]),u=i.name,d=K5.parse({...t,metadataUri:i.metadataUri,bytecodeUri:i.bytecodeUri,name:i.name,analytics:i.analytics,publisher:a}),h=await this.storage.upload(d),m=await this.publisher.sendTransaction("publishContract",[a,u,h,i.metadataUri,c,se]),b=this.publisher.parseLogs("ContractPublished",m.logs);if(b.length<1)throw new Error("No ContractPublished event found");const x=b[0].args.publishedContract;return{receipt:m,data:async()=>this.toPublishedContract(x)}}async unpublish(e,t){return{receipt:await this.publisher.sendTransaction("unpublishContract",[e,t])}}toPublishedContract(e){return J5.parse({id:e.contractId,timestamp:e.publishTimestamp,metadataUri:e.publishMetadataUri})}}class P5{constructor(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};S(this,"registryLogic",void 0),S(this,"registryRouter",void 0),S(this,"storage",void 0),this.storage=t,this.registryLogic=new pt(e,od(),x2,n),this.registryRouter=new pt(e,od(),b2,n)}async updateSigner(e){this.registryLogic.updateSignerOrProvider(e),this.registryRouter.updateSignerOrProvider(e)}async getContractMetadataURI(e,t){return await this.registryLogic.readContract.getMetadataUri(e,t)}async getContractMetadata(e,t){const n=await this.getContractMetadataURI(e,t);if(!n)throw new Error(`No metadata URI found for contract ${t} on chain ${e}`);return await this.storage.downloadJSON(n)}async getContractAddresses(e){return(await this.registryLogic.readContract.getAll(e)).filter(t=>wo(t.deploymentAddress)&&t.deploymentAddress.toLowerCase()!==se).map(t=>({address:t.deploymentAddress,chainId:t.chainId.toNumber()}))}async addContract(e){return await this.addContracts([e])}async addContracts(e){const t=await this.registryRouter.getSignerAddress(),n=[];return e.forEach(a=>{n.push(this.registryLogic.readContract.interface.encodeFunctionData("add",[t,a.address,a.chainId,a.metadataURI||""]))}),{receipt:await this.registryRouter.multiCall(n)}}async removeContract(e){return await this.removeContracts([e])}async removeContracts(e){const t=await this.registryRouter.getSignerAddress(),n=[];return e.forEach(a=>{n.push(this.registryLogic.readContract.interface.encodeFunctionData("remove",[t,a.address,a.chainId]))}),{receipt:await this.registryRouter.multiCall(n)}}}class vl{constructor(e,t){S(this,"connection",void 0),S(this,"options",void 0),S(this,"events",new es),this.connection=new pi(e,t),this.options=t,this.events=new es}connect(e){this.connection.updateSignerOrProvider(e),this.events.emit("signerChanged",this.connection.getSigner())}async transfer(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Jt;const a=this.requireWallet(),i=await At(this.connection.getProvider(),t,n);if(Pn(n)){const s=await a.getAddress();return{receipt:await(await a.sendTransaction({from:s,to:e,value:i})).wait()}}else return{receipt:await this.createErc20(n).sendTransaction("transfer",[e,i])}}async balance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Jt;this.requireWallet();const t=this.connection.getProvider();let n;return Pn(e)?n=await t.getBalance(await this.getAddress()):n=await this.createErc20(e).readContract.balanceOf(await this.getAddress()),await ln(t,e,n)}async getAddress(){return await this.requireWallet().getAddress()}async getChainId(){return await this.requireWallet().getChainId()}isConnected(){try{return this.requireWallet(),!0}catch{return!1}}async sign(e){return await this.requireWallet().signMessage(e)}async signTypedData(e,t,n){return await Ls(this.requireWallet(),e,t,n)}recoverAddress(e,t){const n=Yc(e),a=ce(n);return Kc(a,t)}async sendRawTransaction(e){return{receipt:await(await this.requireWallet().sendTransaction(e)).wait()}}async requestFunds(e){const t=await this.getChainId();if(t===$.Localhost||t===$.Hardhat)return new vl(new bn(R2,pl(t,this.options)),this.options).transfer(await this.getAddress(),e);throw new Error(`Requesting funds is not supported on chain: '${t}'.`)}requireWallet(){const e=this.connection.getSigner();return pe(e,"This action requires a connected wallet. Please pass a valid signer to the SDK."),e}createErc20(e){return new pt(this.connection.getSignerOrProvider(),e,It,this.options)}}class ur extends pi{static async fromWallet(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:new Ta;const i=await e.getSigner();return ur.fromSigner(i,t,n,a)}static fromSigner(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:new Ta;const i=new ur(t||e,n,a);return i.updateSignerOrProvider(e),i}static fromPrivateKey(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:new Ta;const i=pl(t,n),s=new bn(e,i);return ur.fromSigner(s,t,n,a)}constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:new Ta;typeof e!="string"&&typeof e!="number"&&!Zr.isSigner(e)&&!si.isProvider(e)&&(t={...t,supportedChains:[e,...t.supportedChains||[]]},e=e.chainId),super(e,t),S(this,"contractCache",new Map),S(this,"_publisher",void 0),S(this,"storageHandler",void 0),S(this,"deployer",void 0),S(this,"multiChainRegistry",void 0),S(this,"wallet",void 0),S(this,"storage",void 0),P2(t==null?void 0:t.supportedChains),this.storageHandler=n,this.storage=n,this.wallet=new vl(e,t),this.deployer=new M5(e,t,n),this.multiChainRegistry=new P5(e,this.storageHandler,this.options),this._publisher=new S5(e,this.options,this.storageHandler)}get auth(){throw new Error(`The sdk.auth namespace has been moved to the @thirdweb-dev/auth package and is no longer available after @thirdweb-dev/sdk >= 3.7.0. 
      Please visit https://portal.thirdweb.com/auth for instructions on how to switch to using the new auth package (@thirdweb-dev/auth@3.0.0).
      
      If you still want to use the old @thirdweb-dev/auth@2.0.0 package, you can downgrade the SDK to version 3.6.0.`)}async getNFTDrop(e){return await this.getContract(e,"nft-drop")}async getSignatureDrop(e){return await this.getContract(e,"signature-drop")}async getNFTCollection(e){return await this.getContract(e,"nft-collection")}async getEditionDrop(e){return await this.getContract(e,"edition-drop")}async getEdition(e){return await this.getContract(e,"edition")}async getTokenDrop(e){return await this.getContract(e,"token-drop")}async getToken(e){return await this.getContract(e,"token")}async getVote(e){return await this.getContract(e,"vote")}async getSplit(e){return await this.getContract(e,"split")}async getMarketplace(e){return await this.getContract(e,"marketplace")}async getMarketplaceV3(e){return await this.getContract(e,"marketplace-v3")}async getPack(e){return await this.getContract(e,"pack")}async getMultiwrap(e){return await this.getContract(e,"multiwrap")}async getContract(e,t){if(this.contractCache.has(e))return this.contractCache.get(e);let n;if(!t||t==="custom"){const a=await this.resolveContractType(e);if(a==="custom")try{const i=await this.getPublisher().fetchCompilerMetadataFromAddress(e);n=await this.getContractFromAbi(e,i.abi)}catch{const s=(await this.getProvider().getNetwork()).chainId;throw new Error(`No ABI found for this contract. Try importing it by visiting: https://thirdweb.com/${s}/${e}`)}else{const i=await $r[a].getAbi(e,this.getProvider(),this.storage);n=await this.getContractFromAbi(e,i)}}else typeof t=="string"&&t in $r?n=await $r[t].initialize(this.getSignerOrProvider(),e,this.storage,this.options):n=await this.getContractFromAbi(e,t);return this.contractCache.set(e,n),n}async getBuiltInContract(e,t){return await this.getContract(e,t)}async resolveContractType(e){try{const t=new Ge(e,ip,this.getProvider()),n=Jn(await t.contractType()).replace(/\x00/g,"");return T5(n)}catch{return"custom"}}async getContractList(e){var a;const t=await((a=await this.deployer.getRegistry())==null?void 0:a.getContractAddresses(e))||[],n=(await this.getProvider().getNetwork()).chainId;return await Promise.all(t.map(async i=>({address:i,chainId:n,contractType:()=>this.resolveContractType(i),metadata:async()=>(await this.getContract(i)).metadata.get()})))}async getMultichainContractList(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:vo;const n=await this.multiChainRegistry.getContractAddresses(e),a=t.reduce((s,o)=>(s[o.chainId]=o,s),{}),i={};return n.map(s=>{let{address:o,chainId:l}=s;if(!a[l])return{address:o,chainId:l,contractType:async()=>"custom",metadata:async()=>({})};try{let c=i[l];return c||(c=new ur(l,{...this.options,readonlySettings:void 0,supportedChains:t}),i[l]=c),{address:o,chainId:l,contractType:()=>c.resolveContractType(o),metadata:async()=>(await c.getContract(o)).metadata.get()}}catch{return{address:o,chainId:l,contractType:async()=>"custom",metadata:async()=>({})}}})}updateSignerOrProvider(e){super.updateSignerOrProvider(e),this.updateContractSignerOrProvider()}updateContractSignerOrProvider(){this.wallet.connect(this.getSignerOrProvider()),this.deployer.updateSignerOrProvider(this.getSignerOrProvider()),this._publisher.updateSignerOrProvider(this.getSignerOrProvider()),this.multiChainRegistry.updateSigner(this.getSignerOrProvider());for(const[,e]of this.contractCache)e.onNetworkUpdated(this.getSignerOrProvider())}async getContractFromAbi(e,t){if(this.contractCache.has(e))return this.contractCache.get(e);const[,n]=yt(this.getSignerOrProvider(),this.options),a=typeof t=="string"?JSON.parse(t):t,i=new I5(this.getSignerOrProvider(),e,await qc(e,hn.parse(a),n,this.options,this.storage),this.storageHandler,this.options,(await n.getNetwork()).chainId);return this.contractCache.set(e,i),i}async getBalance(e){return ln(this.getProvider(),Jt,await this.getProvider().getBalance(e))}getPublisher(){return this._publisher}}class jd extends pt{constructor(e,t,n,a){super(t,e,g2,a),S(this,"storage",void 0),S(this,"DEFAULT_VERSION_MAP",{[Tn.contractType]:3,[Tr.contractType]:1,[An.contractType]:4,[dn.contractType]:1,[vn.contractType]:2,[vr.contractType]:1,[Ar.contractType]:2,[En.contractType]:1,[_n.contractType]:1,[Cn.contractType]:1,[un.contractType]:2,[Gn.contractType]:1,[Ht.contractType]:2}),this.storage=n}async deploy(e,t,n,a){const i=$r[e],s=i.schema.deploy.parse(t),o=await this.storage.upload(s),l=await this.getImplementation(i,a);if(!l||l===se)throw new Error(`No implementation found for ${e}`);const c=await i.getAbi(l,this.getProvider(),this.storage),u=this.getSigner();pe(u,"A signer is required to deploy contracts");const d=await Tf(e,s,o,u),h=Ge.getInterface(c).encodeFunctionData("initialize",d),m=await this.getProvider().getBlockNumber(),b=hi(m.toString()),x=await this.sendTransaction("deployProxyByImplementation",[l,h,b]),f=this.parseLogs("ProxyDeployed",x.logs);if(f.length<1)throw new Error("No ProxyDeployed event found");const w=f[0].args.proxy;return n.emit("contractDeployed",{status:"completed",contractAddress:w,transactionHash:x.transactionHash}),w}async deployProxyByImplementation(e,t,n,a,i){const s=Ge.getInterface(t).encodeFunctionData(n,a),o=await this.getProvider().getBlockNumber(),l=await this.sendTransaction("deployProxyByImplementation",[e,s,hi(o.toString())]),c=this.parseLogs("ProxyDeployed",l.logs);if(c.length<1)throw new Error("No ProxyDeployed event found");const u=c[0].args.proxy;return i.emit("contractDeployed",{status:"completed",contractAddress:u,transactionHash:l.transactionHash}),u}async getDeployArguments(e,t,n){let a=e===Ht.contractType?[]:await this.getDefaultTrustedForwarders();switch(t.trusted_forwarders&&t.trusted_forwarders.length>0&&(a=t.trusted_forwarders),e){case Tn.contractType:case Tr.contractType:const i=Tn.schema.deploy.parse(t);return[await this.getSignerAddress(),i.name,i.symbol,n,a,i.primary_sale_recipient,i.fee_recipient,i.seller_fee_basis_points,i.platform_fee_basis_points,i.platform_fee_recipient];case An.contractType:const s=An.schema.deploy.parse(t);return[await this.getSignerAddress(),s.name,s.symbol,n,a,s.primary_sale_recipient,s.fee_recipient,s.seller_fee_basis_points,s.platform_fee_basis_points,s.platform_fee_recipient];case dn.contractType:const o=dn.schema.deploy.parse(t);return[await this.getSignerAddress(),o.name,o.symbol,n,a,o.fee_recipient,o.seller_fee_basis_points];case vn.contractType:case vr.contractType:const l=vn.schema.deploy.parse(t);return[await this.getSignerAddress(),l.name,l.symbol,n,a,l.primary_sale_recipient,l.fee_recipient,l.seller_fee_basis_points,l.platform_fee_basis_points,l.platform_fee_recipient];case Ar.contractType:case En.contractType:const c=En.schema.deploy.parse(t);return[await this.getSignerAddress(),c.name,c.symbol,n,a,c.primary_sale_recipient,c.platform_fee_recipient,c.platform_fee_basis_points];case _n.contractType:const u=_n.schema.deploy.parse(t);return[u.name,n,a,u.voting_token_address,u.voting_delay_in_blocks,u.voting_period_in_blocks,O.from(u.proposal_token_threshold),u.voting_quorum_fraction];case Cn.contractType:const d=Cn.schema.deploy.parse(t);return[await this.getSignerAddress(),n,a,d.recipients.map(x=>x.address),d.recipients.map(x=>O.from(x.sharesBps))];case un.contractType:const h=un.schema.deploy.parse(t);return[await this.getSignerAddress(),n,a,h.platform_fee_recipient,h.platform_fee_basis_points];case Gn.contractType:const m=Gn.schema.deploy.parse(t);return[await this.getSignerAddress(),n,a,m.platform_fee_recipient,m.platform_fee_basis_points];case Ht.contractType:const b=Ht.schema.deploy.parse(t);return[await this.getSignerAddress(),b.name,b.symbol,n,a,b.fee_recipient,b.seller_fee_basis_points];default:return[]}}async getDefaultTrustedForwarders(){const e=await this.getChainID();return pp(e)}async getImplementation(e,t){const n=hi(e.name),a=await this.getChainID(),i=F2(a,e.contractType);return i&&i.length>0&&t===void 0?i:this.readContract.getImplementation(n,t!==void 0?t:this.DEFAULT_VERSION_MAP[e.contractType])}async getLatestVersion(e){const t=vf(e);if(!t)throw new Error(`Invalid contract type ${e}`);const n=hi(t);return this.readContract.currentVersion(n)}}class B5 extends pt{constructor(e,t,n){super(t,e,w2,n)}async getContractAddresses(e){return(await this.readContract.getAll(e)).filter(t=>wo(t)&&t.toLowerCase()!==se)}async addContract(e){return await this.addContracts([e])}async addContracts(e){const t=await this.getSignerAddress(),n=[];return e.forEach(a=>{n.push(this.readContract.interface.encodeFunctionData("add",[t,a]))}),{receipt:await this.multiCall(n)}}async removeContract(e){return await this.removeContracts([e])}async removeContracts(e){const t=await this.getSignerAddress(),n=[];return e.forEach(a=>{n.push(this.readContract.interface.encodeFunctionData("remove",[t,a]))}),{receipt:await this.multiCall(n)}}}const R5="0xdd99b75f095d0c4d5112aCe938e4e6ed962fb024";class M5 extends pi{constructor(e,t,n){super(e,t),S(this,"_factory",void 0),S(this,"_registry",void 0),S(this,"storage",void 0),S(this,"events",void 0),S(this,"deployMetadataCache",{}),S(this,"transactionListener",a=>{a.status==="submitted"&&this.events.emit("contractDeployed",{status:"submitted",transactionHash:a.transactionHash})}),this.storage=n,this.events=new es,this.getFactory(),this.getRegistry()}async deployNFTCollection(e){return await this.deployBuiltInContract(Tr.contractType,e)}async deployNFTDrop(e){return await this.deployBuiltInContract(Tn.contractType,e)}async deploySignatureDrop(e){return await this.deployBuiltInContract(An.contractType,e)}async deployMultiwrap(e){return await this.deployBuiltInContract(dn.contractType,e)}async deployEdition(e){return await this.deployBuiltInContract(vr.contractType,e)}async deployEditionDrop(e){return await this.deployBuiltInContract(vn.contractType,e)}async deployToken(e){return await this.deployBuiltInContract(En.contractType,e)}async deployTokenDrop(e){return await this.deployBuiltInContract(Ar.contractType,e)}async deployMarketplace(e){return await this.deployBuiltInContract(un.contractType,e)}async deployMarketplaceV3(e){return await this.deployBuiltInContract(Gn.contractType,e)}async deployPack(e){return await this.deployBuiltInContract(Ht.contractType,e)}async deploySplit(e){return await this.deployBuiltInContract(Cn.contractType,e)}async deployVote(e){return await this.deployBuiltInContract(_n.contractType,e)}async deployBuiltInContract(e,t){var m,b,x;let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"latest";const a=this.getSigner();pe(a,"A signer is required to deploy contracts");const i=$r[e].schema.deploy.parse(t);if(this.hasLocalFactory()){let f;try{f=parseInt(n),isNaN(f)&&(f=void 0)}catch{f=void 0}const w=await this.getFactory();if(!w)throw new Error("Factory not found");w.on(wt.Transaction,this.transactionListener);const A=await w.deploy(e,i,this.events,f);return w.off(wt.Transaction,this.transactionListener),A}const s=vf(e);pe(s,"Contract name not found");const o=await this.storage.upload(i),l=await Tf(e,i,o,a),c=(await this.getProvider().getNetwork()).chainId,u=await this.fetchPublishedContractFromPolygon(R5,s,n),d=await this.fetchAndCacheDeployMetadata(u.metadataUri);let h=(x=(b=(m=d.extendedMetadata)==null?void 0:m.factoryDeploymentData)==null?void 0:b.implementationAddresses)==null?void 0:x[c];return h?this.deployContractFromUri(u.metadataUri,l):(h=await this.deployContractFromUri(u.metadataUri,this.getConstructorParamsForImplementation(e,c),{forceDirectDeploy:!0}),this.deployProxy(h,d.compilerMetadata.abi,"initialize",l))}async getLatestBuiltInContractVersion(e){const t=await this.getFactory();if(!t)throw new Error("Factory not found");return await t.getLatestVersion(e)}async deployReleasedContract(e,t,n){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"latest",i=arguments.length>4?arguments[4]:void 0;const s=await this.fetchPublishedContractFromPolygon(e,t,a);return await this.deployContractFromUri(s.metadataUri,n,i)}async deployViaFactory(e,t,n,a,i){const s=this.getSigner();pe(s,"signer is required");const o=new jd(e,this.getSignerOrProvider(),this.storage,this.options);o.on(wt.Transaction,this.transactionListener);const l=await o.deployProxyByImplementation(t,n,a,i,this.events);return o.off(wt.Transaction,this.transactionListener),l}async deployProxy(e,t,n,a){const i=Ge.getInterface(t).encodeFunctionData(n,a),{TWProxy__factory:s}=await Be(()=>import("./thirdweb-dev-contracts-js-factories-TWProxy__factory.esm-1799369b.js"),["assets/thirdweb-dev-contracts-js-factories-TWProxy__factory.esm-1799369b.js","assets/ethers-d38fee93.js"]);return this.deployContractWithAbi(s.abi,s.bytecode,[e,i])}async getRegistry(){return this._registry?this._registry:this._registry=this.getProvider().getNetwork().then(async e=>{let{chainId:t}=e;const n=Sc(t,"twRegistry");if(n)return new B5(n,this.getSignerOrProvider(),this.options)})}async getFactory(){return this._factory?this._factory:this._factory=this.getProvider().getNetwork().then(async e=>{let{chainId:t}=e;const n=Sc(t,"twFactory");return n?new jd(n,this.getSignerOrProvider(),this.storage,this.options):void 0})}updateSignerOrProvider(e){super.updateSignerOrProvider(e),this.updateContractSignerOrProvider()}updateContractSignerOrProvider(){var e,t;(e=this._factory)==null||e.then(n=>{n==null||n.updateSignerOrProvider(this.getSignerOrProvider())}).catch(()=>{}),(t=this._registry)==null||t.then(n=>{n==null||n.updateSignerOrProvider(this.getSignerOrProvider())}).catch(()=>{})}async deployContractFromUri(e,t,n){const a=this.getSigner();pe(a,"A signer is required");const{compilerMetadata:i,extendedMetadata:s}=await this.fetchAndCacheDeployMetadata(e),o=(n==null?void 0:n.forceDirectDeploy)||!1;if(s&&s.factoryDeploymentData&&(s.isDeployableViaProxy||s.isDeployableViaFactory)&&!o){const d=(await this.getProvider().getNetwork()).chainId;pe(s.factoryDeploymentData.implementationAddresses,"implementationAddresses is required");const h=s.factoryDeploymentData.implementationAddresses[d];pe(h,`implementationAddress not found for chainId '${d}'`),pe(s.factoryDeploymentData.implementationInitializerFunction,"implementationInitializerFunction not set'");const m=Mw(i.abi,s.factoryDeploymentData.implementationInitializerFunction).map(x=>x.type),b=this.convertParamValues(m,t);if(s.isDeployableViaFactory){pe(s.factoryDeploymentData.factoryAddresses,"isDeployableViaFactory is true so factoryAddresses is required");const x=s.factoryDeploymentData.factoryAddresses[d];return pe(x,`isDeployableViaFactory is true and factoryAddress not found for chainId '${d}'`),await this.deployViaFactory(x,h,i.abi,s.factoryDeploymentData.implementationInitializerFunction,b)}else if(s.isDeployableViaProxy)return await this.deployProxy(h,i.abi,s.factoryDeploymentData.implementationInitializerFunction,b)}const l=i.bytecode.startsWith("0x")?i.bytecode:`0x${i.bytecode}`;if(!Le(l))throw new Error(`Contract bytecode is invalid.

${l}`);const c=rf(i.abi).map(d=>d.type),u=this.convertParamValues(c,t);return this.deployContractWithAbi(i.abi,l,u)}async deployContractWithAbi(e,t,n){const a=this.getSigner();pe(a,"Signer is required to deploy contracts");const i=await new Zf(e,t).connect(a).deploy(...n);this.events.emit("contractDeployed",{status:"submitted",transactionHash:i.deployTransaction.hash});const s=await i.deployed();return this.events.emit("contractDeployed",{status:"completed",contractAddress:s.address,transactionHash:s.deployTransaction.hash}),s.address}addDeployListener(e){this.events.on("contractDeployed",e)}removeDeployListener(e){this.events.off("contractDeployed",e)}removeAllDeployListeners(){this.events.removeAllListeners("contractDeployed")}async fetchAndCacheDeployMetadata(e){if(this.deployMetadataCache[e])return this.deployMetadataCache[e];const t=await ai(e,this.storage);let n;try{n=await sf(e,this.storage)}catch{}const a={compilerMetadata:t,extendedMetadata:n};return this.deployMetadataCache[e]=a,a}async fetchPublishedContractFromPolygon(e,t,n){const a=await new ur("polygon").getPublisher().getVersion(e,t,n);if(!a)throw new Error(`No published contract found for '${t}' at version '${n}' by '${e}'`);return a}getConstructorParamsForImplementation(e,t){switch(e){case un.contractType:case dn.contractType:return[Pc($.Hardhat).wrapped.address];case Ht.contractType:return[Pc(t).wrapped.address,se];default:return[]}}hasLocalFactory(){return{}.factoryAddress!==void 0}convertParamValues(e,t){if(e.length!==t.length)throw Error(`Passed the wrong number of constructor arguments: ${t.length}, expected ${e.length}`);return e.map((n,a)=>n==="tuple"||n.endsWith("[]")?typeof t[a]=="string"?JSON.parse(t[a]):t[a]:n==="bytes32"?(pe(Le(t[a]),`Could not parse bytes32 value. Expected valid hex string but got "${t[a]}".`),ze(t[a],32)):n.startsWith("bytes")?(pe(Le(t[a]),`Could not parse bytes value. Expected valid hex string but got "${t[a]}".`),t[a]):n.startsWith("uint")||n.startsWith("int")?O.from(t[a].toString()):t[a])}}class D5{constructor(e){S(this,"featureName",Ys.name),S(this,"contractWrapper",void 0),this.contractWrapper=e}async get(){return this.contractWrapper.readContract.owner()}async set(e){return{receipt:await this.contractWrapper.sendTransaction("setOwner",[e])}}}const Af={},F5=new ur("polygon");function Cf(r,e){return`${r}-${e}`}function N5(r,e,t){Af[Cf(r,e)]=t}function W5(r,e){return Af[Cf(r,e)]}async function ua(r,e,t){const n=(await e.getNetwork()).chainId,a=W5(r,n);if(a)return a;let i;try{const s=await xo(r,e);if(!s)throw new Error(`Could not resolve metadata for contract at ${r}`);i=await Vc(s,t)}catch{try{const o=await F5.multiChainRegistry.getContractMetadataURI(n,r);i=await Vc(o,t)}catch{throw new Error(`Could not resolve metadata for contract at ${r}`)}}if(!i)throw new Error(`Could not resolve metadata for contract at ${r}`);return N5(r,n,i),i}async function Nt(r,e,t){try{const n=await ua(r,e,t);if(n&&n.abi)return n.abi}catch{}}async function Vc(r,e){const t=await e.downloadJSON(r);if(!t||!t.output)throw new Error(`Could not resolve metadata for contract at ${r}`);const n=hn.parse(t.output.abi),a=t.settings.compilationTarget,i=Object.keys(a),s=a[i[0]],o=If.parse({title:t.output.devdoc.title,author:t.output.devdoc.author,details:t.output.devdoc.detail,notice:t.output.userdoc.notice}),l=[...new Set(Object.entries(t.sources).map(c=>{let[,u]=c;return u.license}))];return{name:s,abi:n,metadata:t,info:o,licenses:l}}async function Ef(r,e){return await Promise.all(Object.entries(r.metadata.sources).map(async t=>{let[n,a]=t;const i=a.urls,s=i?i.find(o=>o.includes("ipfs")):void 0;if(s){const o=s.split("ipfs/")[1],l=new Promise((u,d)=>setTimeout(()=>d("timeout"),3e3)),c=await Promise.race([(await e.download(`ipfs://${o}`)).text(),l]);return{filename:n,source:c}}else return{filename:n,source:a.content||"Could not find source for this contract"}}))}const qd=256,cc="0|[1-9]\\d*",O5=`(${cc})\\.(${cc})\\.(${cc})`,L5=new RegExp(O5);function Gc(r){if(r.length>qd)throw new Error(`version is longer than ${qd} characters`);const e=r.trim().match(L5);if(!e||(e==null?void 0:e.length)!==4)throw new Error(`${r} is not a valid semantic version. Should be in the format of major.minor.patch. Ex: 0.4.1`);const t=Number(e[1]),n=Number(e[2]),a=Number(e[3]),i=[t,n,a].join(".");return{major:t,minor:n,patch:a,versionString:i}}function U5(r,e){const t=Gc(r),n=Gc(e);if(n.major>t.major)return!0;const a=n.major===t.major;if(a&&n.minor>t.minor)return!0;const i=n.minor===t.minor;return a&&i&&n.patch>t.patch}const H5=Ft.catchall(_.union([mp,_.unknown()])),_f=H5.merge(ht.merge(Xn).merge(it).partial()),z5=jt.merge(ht.merge(Xn).merge(it).partial()),j5=_f.merge(en.merge(_r).merge(qt).partial()),ii={deploy:j5,output:z5,input:_f},Vd=_.object({type:_.string(),name:_.string()}).catchall(_.any()),Gd=Vd.extend({stateMutability:_.string().optional(),components:_.array(Vd).optional()}).catchall(_.any()),q5=_.object({type:_.string(),name:_.string().default(""),inputs:_.array(Gd).default([]),outputs:_.array(Gd).default([])}).catchall(_.any()),hn=_.array(q5),Vo=_.object({name:_.string(),metadataUri:_.string(),bytecodeUri:_.string(),analytics:_.any().optional()}).catchall(_.any()),Kd=_.record(_.string(),_.string()),V5=_.object({implementationAddresses:Kd,implementationInitializerFunction:_.string().default("initialize"),factoryAddresses:Kd.optional()}),kf=_.object({version:_.string().refine(r=>{try{return Gc(r),!0}catch{return!1}},r=>({message:`'${r}' is not a valid semantic version. Should be in the format of major.minor.patch. Ex: 0.4.1`})),displayName:_.string().optional(),description:_.string().optional(),readme:_.string().optional(),license:_.string().optional(),changelog:_.string().optional(),tags:_.array(_.string()).optional(),audit:fr.nullable().optional(),logo:fr.nullable().optional(),isDeployableViaFactory:_.boolean().optional(),isDeployableViaProxy:_.boolean().optional(),factoryDeploymentData:V5.optional(),constructorParams:_.record(_.string(),_.object({displayName:_.string().optional(),description:_.string().optional(),defaultValue:_.string().optional()}).catchall(_.any())).optional()}).catchall(_.any()),G5=kf.extend({audit:_.string().nullable().optional(),logo:_.string().nullable().optional()}),K5=Vo.merge(kf).extend({publisher:kt.optional()}),$5=Vo.merge(G5).extend({publisher:kt.optional()}),Z5=_.object({name:_.string().optional(),bio:_.string().optional(),avatar:fr.nullable().optional(),website:_.string().optional(),twitter:_.string().optional(),telegram:_.string().optional(),facebook:_.string().optional(),github:_.string().optional(),medium:_.string().optional(),linkedin:_.string().optional(),reddit:_.string().optional(),discord:_.string().optional()}),Y5=Z5.extend({avatar:_.string().nullable().optional()}),J5=_.object({id:_.string(),timestamp:Dt,metadataUri:_.string()}),If=_.object({title:_.string().optional(),author:_.string().optional(),details:_.string().optional(),notice:_.string().optional()}),Q5=_.object({name:_.string(),abi:hn,metadata:_.record(_.string(),_.any()),info:If,licenses:_.array(_.string().optional()).default([]).transform(r=>r.filter(e=>e!==void 0))}),X5=Vo.merge(Q5).extend({bytecode:_.string()}),e6="https://paper.xyz/api",t6="2022-08-12",Sf=`${e6}/${t6}/platform/thirdweb`,$d={[$.Mainnet]:"Ethereum",[$.Goerli]:"Goerli",[$.Polygon]:"Polygon",[$.Mumbai]:"Mumbai",[$.Avalanche]:"Avalanche"};function n6(r){return pe(r in $d,`chainId not supported by paper: ${r}`),$d[r]}async function r6(r,e){const t=n6(e),a=await(await fetch(`${Sf}/register-contract?contractAddress=${r}&chain=${t}`)).json();return pe(a.result.id,"Contract is not registered with paper"),a.result.id}const a6={expiresInMinutes:15,feeBearer:"BUYER",sendEmailOnSuccess:!0,redirectAfterPayment:!1};async function i6(r,e){const n=await(await fetch(`${Sf}/checkout-link-intent`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contractId:r,...a6,...e,metadata:{...e.metadata,via_platform:"thirdweb"},hideNativeMint:!0,hidePaperWallet:!!e.walletAddress,hideExternalWallet:!0,hidePayWithCrypto:!0,usePaperKey:!1})})).json();return pe(n.checkoutLinkIntentUrl,"Failed to create checkout link intent"),n.checkoutLinkIntentUrl}class S6{constructor(e){S(this,"contractWrapper",void 0),this.contractWrapper=e}async getCheckoutId(){return r6(this.contractWrapper.readContract.address,await this.contractWrapper.getChainID())}async isEnabled(){try{return!!await this.getCheckoutId()}catch{return!1}}async createLinkIntent(e){return await i6(await this.getCheckoutId(),e)}}export{uw as $,se as A,x6 as B,h6 as C,y6 as D,Hm as E,Ba as F,Fo as G,na as H,No as I,Qr as J,ol as K,$ as L,al as M,Ym as N,rt as O,E6 as P,pt as Q,S as R,Ma as S,tt as T,vl as U,Za as V,bn as W,c1 as X,cw as Y,lw as Z,Be as _,ry as a,f1 as a$,Lw as a0,C5 as a1,v6 as a2,yl as a3,uf as a4,_5 as a5,E5 as a6,hf as a7,S6 as a8,D5 as a9,Od as aA,ln as aB,bl as aC,p5 as aD,Do as aE,Lo as aF,Uo as aG,lt as aH,Et as aI,gd as aJ,fi as aK,$n as aL,ud as aM,wd as aN,It as aO,C6 as aP,v5 as aQ,$p as aR,w6 as aS,A1 as aT,ff as aU,n5 as aV,Ep as aW,df as aX,Zp as aY,to as aZ,Mo as a_,ba as aa,_1 as ab,d5 as ac,Ip as ad,k6 as ae,I6 as af,Np as ag,Vn as ah,xf as ai,Pn as aj,fp as ak,hr as al,kt as am,Dt as an,Jt as ao,Rn as ap,xp as aq,L2 as ar,he as as,oe as at,bd as au,_6 as av,yf as aw,At as ax,Up as ay,wr as az,c6 as b,Tb as b0,md as b1,g6 as b2,pf as b3,x1 as b4,A6 as b5,b5 as b6,w1 as b7,T6 as b8,Vw as b9,P1 as ba,Ud as bb,l6 as c,n0 as d,r0 as e,hi as f,Li as g,Yc as h,pe as i,d6 as j,ga as k,Iy as l,ay as m,Ii as n,_ as o,o6 as p,vo as q,yy as r,Kn as s,mh as t,ur as u,Ob as v,u6 as w,p6 as x,f6 as y,m6 as z};
